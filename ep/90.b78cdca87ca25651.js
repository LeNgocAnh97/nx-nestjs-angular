"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([[90],{7786:(C,f,o)=>{o.d(f,{E:()=>p});var u=o(248),h=o(5879);let p=(()=>{class t{constructor(l,a){this.el=l,this.permissionService=a}ngOnInit(){this.permissionService.getPermission(this.action)||this.el.nativeElement.style.setProperty("display","none","important")}static#t=this.\u0275fac=function(a){return new(a||t)(h.Y36(h.SBq),h.Y36(u.$))};static#e=this.\u0275dir=h.lG2({type:t,selectors:[["","icomLibsHasPermissionDirective",""]],inputs:{action:"action"},standalone:!0})}return t})()},9466:(C,f,o)=>{o.d(f,{G:()=>h});var u=o(5879);let h=(()=>{class p{constructor(s,l,a){this.componentFactoryResolver=s,this.appRef=l,this.injector=a}appendComponentToBody(s){const a=this.componentFactoryResolver.resolveComponentFactory(s).create(this.injector);return this.appRef.attachView(a.hostView),document.body.appendChild(a.hostView.rootNodes[0]),a}appendComponentToComponent(s,l){const a=this.componentFactoryResolver.resolveComponentFactory(l);return s.viewContainerRef.createComponent(a)}removeComponentFromBody(s){this.appRef.detachView(s.hostView),s.destroy()}removeComponentFromComponent(s,l){const a=s.viewContainerRef,g=a.indexOf(l.hostView);-1!==g&&a.detach(g),l.destroy()}static#t=this.\u0275fac=function(l){return new(l||p)(u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(u.zs3))};static#e=this.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},9090:(C,f,o)=>{o.r(f),o.d(f,{IcomLibsSectionListComponent:()=>G});var u=o(5861),h=o(3896),p=o(6236),t=o(5879),s=o(9663),l=o(6814),a=o(6223),g=o(19),z=o(5545),x=o(2840),L=o(551),v=o(7422),S=o(1221),A=o(9466),E=o(9717),w=o(2787),D=o(7398),I=o(2572),Z=o(708),_=o(6109),U=o(8216),P=o(7652),M=o(7786),F=o(855),H=o(1958),b=o(2987);function O(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"li",41),t.NdJ("click",function(n){t.CHM(e);const c=t.oxw().$implicit,r=t.oxw();return t.KtG(r.handlerEdit(n,c))}),t._uU(1," S\u1eeda "),t.qZA()}2&d&&t.Q6J("action","edit")}const N=function(d,y){return{"text-green-500":d,"text-red-500":y}},B=function(){return["FLASH_SALE","QUICK_BUTTONS","MYPOINT_HOT"]};function J(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td",30),t._UZ(2,"i",31),t.qZA(),t.TgZ(3,"td",32)(4,"div",33),t._uU(5),t.qZA()(),t.TgZ(6,"td",34),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",34),t._uU(13),t.ALo(14,"findValueById"),t.qZA(),t.TgZ(15,"td",34),t._uU(16),t.ALo(17,"findValueById"),t.qZA(),t.TgZ(18,"td",35),t._uU(19),t.ALo(20,"findValueById"),t.qZA(),t.TgZ(21,"td",34),t._uU(22),t.ALo(23,"date"),t.qZA(),t.TgZ(24,"td",34),t._uU(25),t.qZA(),t.TgZ(26,"td",34)(27,"div",36)(28,"button",37),t._uU(29," H\xe0nh \u0111\u1ed9ng "),t._UZ(30,"span",38),t.qZA(),t.TgZ(31,"nz-dropdown-menu",null,39)(33,"ul",40)(34,"li",41),t.NdJ("click",function(n){const r=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.handlerView(n,r))}),t._uU(35," Xem "),t.qZA(),t.YNc(36,O,2,1,"li",42),t.qZA()()()()()}if(2&d){const e=y.$implicit,i=t.MAs(32),n=t.oxw();t.xp6(4),t.Q6J("nzTooltipTitle",e.name),t.xp6(1),t.hij(" ",(null==e?null:e.name)||"-"," "),t.xp6(2),t.Oqu(t.xi3(8,16,null==e.display_conf?null:e.display_conf.start_time,"dd/MM/yyyy HH:mm")),t.xp6(3),t.Oqu(t.xi3(11,19,null==e.display_conf?null:e.display_conf.end_time,"dd/MM/yyyy HH:mm")),t.xp6(3),t.Oqu(t.xi3(14,22,e.type,n.listDataContributor)||"-"),t.xp6(3),t.Oqu(t.xi3(17,25,e.layout,n.listLayout)||"-"),t.xp6(2),t.Q6J("ngClass",t.WLB(34,N,"ACTIVE"===e.status,"INACTIVE"===e.status)),t.xp6(1),t.hij(" ",t.xi3(20,28,e.status,n.ListStatus)||"-"," "),t.xp6(3),t.Oqu(t.xi3(23,31,e.created_at,"dd/MM/yyyy HH:mm")),t.xp6(3),t.Oqu(e.created_by_name||"-"),t.xp6(3),t.Q6J("action","view")("nzType","primary")("nzShape","round")("nzDropdownMenu",i),t.xp6(6),t.Q6J("action","view"),t.xp6(2),t.Q6J("ngIf",!t.DdM(37,B).includes(e.type||""))}}function Q(d,y){if(1&d&&(t.TgZ(0,"div",43),t._uU(1),t.qZA()),2&d){const e=t.oxw();t.xp6(1),t.hij(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==e.pagination?null:e.pagination.total_rows)||0," ")}}const R=function(){return{x:"1500px",y:"calc(100vh - 375px)"}},V=function(){return[10,15,20,30,40,50]};let G=(()=>{class d{constructor(){this.listOfData=[],this.total=1,this.loading=!0,this.pageSize=5,this.pageIndex=1,this.form=new a.cw({}),this.model={},this.rows=[],this.options={},this.cdr=(0,t.f3M)(t.sBO),this.modalService=(0,t.f3M)(S.Sf),this.viewContainerRef=(0,t.f3M)(t.s_b),this.icomLibsDynamicComponentService=(0,t.f3M)(A.G),this.router=(0,t.f3M)(w.F0),this.iComLibsServicesProjectDynamicHomeService=(0,t.f3M)(h.K),this.IComMessageService=(0,t.f3M)(E.Q),this.listDataContributor=[],this.listLayout=[],this.listIgnore=["FLASH_SALE","QUICK_BUTTONS","MYPOINT_HOT"],this.fields=[{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"name",type:"search-input",props:{placeholder:"T\xecm ki\u1ebfm theo t\xean section",nzPrefixIcon:"search"}}]},{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"status",type:"select-custom",className:"basis-4/12",props:{placeholder:"Tr\u1ea1ng th\xe1i",valueProp:"id",labelProp:"value",label:"Tr\u1ea1ng th\xe1i",viewValue:"value",options:(0,P.EC)()}},{key:"valid",type:"select-custom",props:{placeholder:"Hi\u1ec7u l\u1ef1c",valueProp:"id",labelProp:"value",viewValue:"value",label:"Hi\u1ec7u l\u1ef1c",options:[{id:!0,value:"C\xf2n hi\u1ec7u l\u1ef1c"},{id:!1,value:"H\u1ebft hi\u1ec7u l\u1ef1c"}]}}]},{fieldGroupClassName:"flex flex-col ml-4",className:"basis-1/2",fieldGroup:[{key:"type",type:"select-custom",props:{placeholder:"\u0110\u1ed1i t\u01b0\u1ee3ng hi\u1ec3n th\u1ecb",valueProp:"id",labelProp:"value",viewValue:"value",label:"\u0110\u1ed1i t\u01b0\u1ee3ng hi\u1ec3n th\u1ecb",options:this.iComLibsServicesProjectDynamicHomeService.listContentType({}).pipe((0,D.U)(e=>e.data))}},{key:"layout",type:"select-custom",props:{placeholder:"D\u1ea1ng hi\u1ec3n th\u1ecb:",valueProp:"id",labelProp:"value",viewValue:"value",label:"D\u1ea1ng hi\u1ec3n th\u1ecb",options:this.iComLibsServicesProjectDynamicHomeService.listLayoutByContentType("").pipe((0,D.U)(e=>e.data))}}]}],this.ListStatus=(0,P.EC)()}ngOnInit(){(0,I.a)([this.iComLibsServicesProjectDynamicHomeService.listContentType({}),this.iComLibsServicesProjectDynamicHomeService.listLayoutByContentType("")]).subscribe(e=>{const[i,n]=e;this.listDataContributor=i?.data,this.listLayout=n?.data,this.cdr.detectChanges()}),this.loadPage()}drop(e){var i=this;return(0,u.Z)(function*(){const n=e.previousIndex+(i.pagination?.page-1)*i.pagination?.limit,c=e.currentIndex+(i.pagination?.page-1)*i.pagination?.limit,r=e?.container?.data[e.previousIndex]?.id,m=i.rows[e.currentIndex];if(n!==c){try{i.loading=!0,yield(0,Z.n)(i.iComLibsServicesProjectDynamicHomeService.sortField(r,m?.order)),(0,p.bA)(i.rows,e.previousIndex,e.currentIndex),i.cdr.detectChanges(),i.loadPage(i.pagination?.page,i.pagination?.limit),i.cdr.detectChanges(),i.IComMessageService.showAlertMessageDone("Thao t\xe1c th\xe0nh c\xf4ng")}catch(T){i.loading=!1,i.IComMessageService.showAlertMessageError(T?.error?.error_message||"Thao t\xe1c th\u1ea5t b\u1ea1i")}finally{i.cdr.detectChanges()}i.cdr.detectChanges()}})()}loadPage(e=1,i=10){var n=this;return(0,u.Z)(function*(){try{n.loading=!0;const r={...{...n.model},limit:i,page:e},m=yield(0,Z.n)(n.iComLibsServicesProjectDynamicHomeService.list({...r}));if(m&&m.data&&m.data.items)return n.rows=m.data.items||[],void(n.pagination=m.data.pagination);n.rows=[],n.pagination=m.data.pagination}catch(c){console.log(c)}finally{n.loading=!1,n.cdr.detectChanges()}})()}handlerSearch(e){e.stopPropagation(),e.preventDefault(),this.loadPage(1,this.pagination?.limit)}handlerReset(){this.form.reset(),this.loadPage(1,this.pagination?.limit)}onPageChange(e){this.loadPage(e,this.pagination.limit)}onPageSizeChange(e){this.loadPage(1,e)}handlerToggleCollapse(){this.options.formState.hidden=!this.options.formState.hidden}handlerView(e,i){e.stopPropagation(),e.preventDefault(),this.router.navigateByUrl(`section/list/detail?id=${i.id}&mode=view`)}handlerEdit(e,i){e.stopPropagation(),e.preventDefault(),this.router.navigateByUrl(`section/list/detail?id=${i.id}&mode=edit`)}handlerActivate(e){e.stopPropagation(),e.preventDefault()}showModal(e){e.stopPropagation(),e.preventDefault(),this.handlerOpenGroupSale(e)}handlerOpenGroupSale(e){e.stopPropagation(),e.preventDefault(),this.router.navigateByUrl("section/list/detail?mode=add")}static#t=this.\u0275fac=function(i){return new(i||d)};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["icom-libs-product-list"]],standalone:!0,features:[t.jDz],decls:45,vars:24,consts:[[1,"flex","w-full","h-full","flex-col"],["nz-form","",1,"!p-4","bg-white","border","rounded-md",3,"formGroup","keydown.enter"],[1,"w-full"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-col","",1,"search-area","flex","items-center"],["icomLibsHasPermissionDirective","","nz-button","",1,"!flex","!items-center",3,"action","nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],["icomLibsHasPermissionDirective","","nz-button","",1,"ml-4","!flex","!items-center",3,"action","click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],[1,"w-full","h-full","mt-4","overflow-hidden"],["nzShowSizeChanger","",1,"h-full",3,"nzScroll","nzData","nzLoading","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange"],["sectionTable",""],["nzWidth","60px"],["nzWidth","250px","nzSortKey","name"],["nzWidth","150px","nzSortKey","display_conf.start_time"],["nzWidth","150px","nzSortKey","display_conf.end_time"],["nzWidth","250px","nzSortKey","type"],["nzWidth","130px","nzSortKey","layout"],["nzWidth","150px","nzSortKey","status"],["nzWidth","150px","nzSortKey","created_at"],["nzWidth","150px","nzSortKey","created_by_name"],["nzWidth","150px"],["cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["footerTemplate",""],["cdkDrag",""],[1,"cursor-pointer","text-xs","!p-3"],["nz-icon","","nzType","menu","cdkDragHandle",""],[1,"pl-4","text-xs","!p-3","truncate-text"],["nz-tooltip","",1,"overflow-hidden","text-ellipsis","whitespace-nowrap",3,"nzTooltipTitle"],[1,"text-xs","!p-3"],[1,"text-xs","!p-3",3,"ngClass"],[1,"name-container"],["icomLibsHasPermissionDirective","","nz-button","","nz-button","","nz-dropdown","",3,"action","nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["icomLibsHasPermissionDirective","","nz-menu-item","",3,"action","click"],["icomLibsHasPermissionDirective","","nz-menu-item","",3,"action","click",4,"ngIf"],[1,"footer-content"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("keydown.enter",function(r){return n.handlerSearch(r)}),t.TgZ(2,"div",2),t._UZ(3,"formly-form",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"button",6),t.NdJ("click",function(r){return n.showModal(r)}),t._UZ(7,"span",7),t._uU(8," Th\xeam m\u1edbi "),t.qZA()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(r){return n.handlerSearch(r)}),t._UZ(11,"i",10),t._uU(12," L\u1ecdc "),t.qZA(),t.TgZ(13,"button",11),t.NdJ("click",function(){return n.handlerReset()}),t._UZ(14,"i",12),t._uU(15," L\xe0m m\u1edbi "),t.qZA()()()(),t.TgZ(16,"div",13)(17,"nz-table",14,15),t.NdJ("nzPageIndexChange",function(r){return n.onPageChange(r)})("nzPageSizeChange",function(r){return n.onPageSizeChange(r)}),t.TgZ(19,"thead")(20,"tr")(21,"th",16),t._uU(22,"STT"),t.qZA(),t.TgZ(23,"th",17),t._uU(24,"T\xean"),t.qZA(),t.TgZ(25,"th",18),t._uU(26,"T\u1eeb ng\xe0y"),t.qZA(),t.TgZ(27,"th",19),t._uU(28,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(29,"th",20),t._uU(30,"\u0110\u1ed1i t\u01b0\u1ee3ng hi\u1ec3n th\u1ecb"),t.qZA(),t.TgZ(31,"th",21),t._uU(32,"D\u1ea1ng hi\u1ec3n th\u1ecb"),t.qZA(),t.TgZ(33,"th",22),t._uU(34,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(35,"th",23),t._uU(36,"Th\u1eddi gian t\u1ea1o"),t.qZA(),t.TgZ(37,"th",24),t._uU(38,"Ng\u01b0\u1eddi t\u1ea1o"),t.qZA(),t.TgZ(39,"th",25),t._uU(40,"H\xe0nh \u0111\u1ed9ng"),t.qZA()()(),t.TgZ(41,"tbody",26),t.NdJ("cdkDropListDropped",function(r){return n.drop(r)}),t.YNc(42,J,37,38,"tr",27),t.qZA()()()(),t.YNc(43,Q,2,1,"ng-template",null,28,t.W1O)),2&i){const c=t.MAs(44);t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("model",n.model)("fields",n.fields)("options",n.options)("form",n.form),t.xp6(3),t.Q6J("action","add")("nzType","primary"),t.xp6(4),t.Q6J("action","view")("nzType","primary"),t.xp6(3),t.Q6J("action","view"),t.xp6(4),t.Q6J("nzScroll",t.DdM(22,R))("nzData",n.rows)("nzLoading",n.loading)("nzTotal",null==n.pagination?null:n.pagination.total_rows)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",null==n.pagination?null:n.pagination.page)("nzFrontPagination",!1)("nzPageSizeOptions",t.DdM(23,V))("nzFooter",c),t.xp6(24),t.Q6J("cdkDropListData",n.rows),t.xp6(1),t.Q6J("ngForOf",n.rows)}},dependencies:[p._t,p.Wj,p.Zt,p.Bh,s.HQ,s.N8,s.Uo,s._C,s.Om,s.p0,s.$Z,l.uU,l.ax,g.u,a.UX,a._Y,a.JL,a.sg,z.X0,z.T7,x.sL,x.ix,F.w,H.dQ,L.PV,L.Ls,v.b1,b.wO,b.u9,v.cm,v.RR,v.wA,S.Qp,_.cg,_.SY,U._,l.O5,l.mk,M.E],styles:[".cdk-drag-placeholder td{height:60px;opacity:0}  .cdk-drag-preview{display:table}.placeholder-td[_ngcontent-%COMP%]{height:100px;text-align:center;border:2px dashed gray;background-color:#eee}.truncate-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}"],changeDetection:0})}return d})()}}]);