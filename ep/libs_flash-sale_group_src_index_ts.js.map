{"version":3,"file":"libs_flash-sale_group_src_index_ts.js","mappings":"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","names":["i0","data_r5","_r9","$implicit","ctx_r8","showEditModal","ctx_r10","showDeleteConfirm","ctx_r2","pagination","page","i_r6","name","created_at","created_by_name","_r7","ctx_r4","total_rows","IcomLibsFlashSaleGroupComponent","constructor","this","listOfData","rows","form","FormGroup","model","options","total","loading","pageSize","pageIndex","fields","className","fieldGroupClassName","fieldGroup","key","type","props","placeholder","modalService","inject","NzModalService","viewContainerRef","ViewContainerRef","icomLibsDynamicComponentService","IcomLibsDynamicComponentService","iComLibsServicesProjectFlashSaleService","IComLibsServicesProjectFlashSaleService","cdr","ChangeDetectorRef","router","Router","iComMessageService","IComMessageService","ngOnInit","loadPage","limit","_this","_asyncToGenerator","dataBody","size","result","lastValueFrom","listGroup","data","items","err","console","log","detectChanges","handlerSearch","e","stopPropagation","preventDefault","handlerBackFlashSale","navigateByUrl","showAddModal","modalRef","create","nzTitle","nzContent","AddEditFlashSaleModalComponent","nzViewContainerRef","nzCancelText","nzOkText","nzOkType","nzOnOk","Promise","resolve","instance","getContentComponent","onSave","pipe","take","subscribe","success","code","showAlertMessageDone","showAlertMessageError","error","error_message","updateConfig","nzOkLoading","handlerSave","onPageChange","onPageSizeChange","nzData","title","_this2","modal","confirm","_ref","deleteGroup","_id","destroy","apply","arguments","static","t","core","Xpm","selectors","standalone","features","decls","vars","consts","template","rf","ctx","$event","IcomLibsFlashSaleGroupComponent_tr_33_Template","IcomLibsFlashSaleGroupComponent_ng_template_34_Template","_c0","_c1","_r3","DragDropModule","NzTableModule","i1","DatePipe","NgFor","FormlyNgZorroAntdModule","ReactiveFormsModule","i2","FormlyModule","i3","NzButtonModule","i4","i5","i6","NzIconModule","i7","NzDropDownModule","i8","i9","NzModalModule","NzInputModule","encapsulation","changeDetection"],"sourceRoot":"webpack:///","sources":["./libs/flash-sale/group/src/list.component.html","./libs/flash-sale/group/src/list.component.ts"],"sourcesContent":["\n<div class=\"flex w-full h-full flex-col\">\n  <a nz-button nzType=\"link\" routerLink=\"/your-path\" class=\"text-primary-500 hover:text-primary-600 !flex items-center\" (click)=\"handlerBackFlashSale($event)\">\n    <i nz-icon nzType=\"arrow-left\"></i>\n    Nhóm flash sale\n  </a>\n  <form\n  [formGroup]=\"form\"\n  nz-form\n  class=\"!p-4 bg-white border rounded-md\"\n  (keydown.enter)=\"$event.preventDefault()\"\n>\n  <div class=\"w-full\">\n    <formly-form\n      [model]=\"model\"\n      [fields]=\"fields\"\n      [options]=\"options\"\n      [form]=\"form\"\n    ></formly-form>\n  </div>\n\n  <div nz-row class=\"flex justify-between\">\n    <div class=\"\">\n      <button nz-button [nzType]=\"'primary'\" (click)=\"showAddModal($event)\">\n        <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\n        Thêm nhóm flash sale\n      </button>\n    </div>\n    <div nz-col class=\"search-area flex items-center\">\n      <button\n        class=\"!flex !items-center\"\n        nz-button\n        [nzType]=\"'primary'\"\n        (click)=\"handlerSearch($event)\"\n      >\n        <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\n         Lọc\n      </button>\n    </div>\n  </div>\n</form>\n  \n  <div class=\"w-full h-full mt-4 overflow-hidden\">\n    <nz-table\n    [nzScroll]=\"{ x: '1500px', y: 'calc(100vh - 380px)' }\"\n      #editableTable\n      [nzData]=\"rows\"\n      #sectionTable\n      [nzData]=\"rows\"\n      [nzLoading]=\"loading\"\n      [nzTotal]=\"pagination?.total_rows\"\n      [nzPageSize]=\"10\"\n      [nzNoResult]=\"'Không có dữ liệu.'\"\n      [nzPageIndex]=\"pagination?.page\"\n      (nzPageIndexChange)=\"onPageChange($event)\"\n      [nzFrontPagination]=\"false\"\n      (nzPageSizeChange)=\"onPageSizeChange($event)\"\n      nzShowSizeChanger\n      [nzPageSizeOptions]=\"[10, 15, 20, 30, 40, 50]\"\n      class=\"h-full\"\n      [nzFooter]=\"footerTemplate\"\n    >\n      <thead>\n        <tr>\n          <th class=\"text-xs font-semibold\" nzWidth=\"100px\">STT</th>\n          <th class=\"text-xs font-semibold\">Tên</th>\n          <th class=\"text-xs font-semibold\">Thời gian tạo</th>\n          <th class=\"text-xs font-semibold\">Người tạo</th>\n          <th class=\"text-xs font-semibold\">Hành động</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let data of rows; let i = index\">\n          <td class=\"text-xs !p-3\">          {{ (pagination?.page - 1) * 10 + i + 1 }}</td>\n          <td class=\"text-xs !p-3\">{{ data.name }}</td>\n          <td class=\"text-xs !p-3\">\n            {{ data.created_at | date : 'dd/MM/yyyy HH:mm' }}\n          </td>\n          <td class=\"text-xs !p-3\">{{ data.created_by_name }}</td>\n          <td class=\"text-xs !p-3\">\n            <div class=\"name-container\">\n              <button\n                nz-button\n                [nzType]=\"'primary'\"\n                [nzShape]=\"'round'\"\n                nz-button\n                nz-dropdown\n                [nzDropdownMenu]=\"menu4\"\n              >\n                Hành động\n                <span nz-icon nzType=\"down\"></span>\n              </button>\n              <nz-dropdown-menu #menu4=\"nzDropdownMenu\">\n                <ul nz-menu>\n                  <li nz-menu-item (click)=\"showEditModal(data)\">Sửa</li>\n                  <li nz-menu-item (click)=\"showDeleteConfirm(data)\">Xóa</li>\n                </ul> \n              </nz-dropdown-menu>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </nz-table>\n  </div>\n</div>\n\n\n<ng-template #footerTemplate>\n  <div class=\"footer-content\">\n    Tổng số bản ghi: {{ pagination?.total_rows || 0 }}\n  </div>\n</ng-template>","import { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { Component, ChangeDetectionStrategy, OnInit, inject, ViewContainerRef, ChangeDetectorRef } from '@angular/core';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { DatePipe, NgFor } from '@angular/common';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { FormlyFormOptions, FormlyFieldConfig, FormlyModule } from '@ngx-formly/core';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { IFlashSaleInformation } from '@icom/interfaces';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzModalModule, NzModalService } from 'ng-zorro-antd/modal';\nimport { IComMessageService, IcomLibsDynamicComponentService } from '@icom/services/common'\nimport { AddEditFlashSaleModalComponent } from './modal/modal.component';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { lastValueFrom, take } from 'rxjs';\nimport { IComLibsServicesProjectFlashSaleService } from '@icom/services/projects';\nimport { Router } from '@angular/router';\n@Component({\n  selector: 'icom-libs-product-group',\n  templateUrl: './list.component.html',\n  standalone: true,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [\n    DragDropModule,\n    NzTableModule,\n    DatePipe,\n    NgFor,\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NzIconModule,\n    NzDropDownModule,\n    NzModalModule,\n    NzInputModule\n  ],\n  styles: []\n})\nexport class IcomLibsFlashSaleGroupComponent implements OnInit {\n  listOfData: any[] = []; // Khởi tạo mảng dữ liệu của bạn\n  protected rows: any[] = [];\n  protected form = new FormGroup({});\n  protected model: any = {};\n  protected options: FormlyFormOptions = {};\n  protected pagination: any;\n  total = 1;\n  loading = true;\n  pageSize = 5;\n  pageIndex = 1;\n\n\n  protected fields: FormlyFieldConfig[] = [\n    {\n      className: 'flex flex-col',\n      fieldGroupClassName: 'flex w-full justify-center',\n      fieldGroup: [\n        {\n          key: 'name',\n          type: 'search-input',\n          className: 'mb-4 basis-6/12', // Chiếm toàn bộ rộng và có margin bottom\n          props: {\n            type: 'text',\n            placeholder: 'Tìm kiếm theo tên nhóm flash sale',\n          },\n        },\n      ]\n    },\n  ];\n\n  protected modalService = inject(NzModalService);\n  protected viewContainerRef = inject(ViewContainerRef);\n  protected icomLibsDynamicComponentService = inject(IcomLibsDynamicComponentService);\n  protected iComLibsServicesProjectFlashSaleService = inject(\n    IComLibsServicesProjectFlashSaleService\n  );\n  protected cdr = inject(ChangeDetectorRef);\n  protected router = inject(Router);\n  protected iComMessageService= inject(IComMessageService);\n  \n  ngOnInit() {\n    this.loadPage(1);\n  }\n\n  protected async loadPage(page: number = 1, limit: number = 10) {\n    try {\n      this.loading = true;\n      const model = { ...this.model };\n      const dataBody = {\n        ...model,\n        size: limit,\n        page: page,\n      };\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectFlashSaleService.listGroup({\n          ...dataBody,\n        })\n      );\n\n      if (result && result.data && result.data.items) {\n        const rows = result.data.items || [];\n        this.rows = rows;\n        this.pagination = result.data.pagination;\n        return;\n      }\n\n      this.rows = [];\n      this.pagination = result.data.pagination;\n    } catch (err) {\n      console.log(err);\n    } finally {\n      this.loading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n  protected handlerSearch(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.loadPage(1);\n  }\n\n  protected handlerBackFlashSale(e: Event): void {\n    e.stopPropagation();\n    e.preventDefault();\n    this.router.navigateByUrl(`flash-sale/list`);\n  }\n\n  showAddModal(e: Event): void {\n    e.stopPropagation();\n    e.preventDefault();\n  \n    const modalRef = this.modalService.create({\n      nzTitle: 'Thêm nhóm flash sale',\n      nzContent: AddEditFlashSaleModalComponent,\n      nzViewContainerRef: this.viewContainerRef,\n      nzCancelText: 'Hủy',\n      nzOkText: 'Lưu',\n      nzOkType: 'primary',\n      nzOnOk: () => new Promise((resolve) => {\n        const instance = modalRef.getContentComponent();\n        instance.onSave.pipe(take(1)).subscribe((success: any) => {\n          if (success.code === 200) {\n            this.iComMessageService.showAlertMessageDone('Tạo nhóm flash sale thành công.');\n            resolve(true);\n            this.loadPage(1);\n          } else {\n            this.iComMessageService.showAlertMessageError(success?.error?.error_message || 'Tạo nhóm flash sale thất bại.');\n            resolve(false);\n            modalRef.updateConfig({ nzOkLoading: false });\n          }\n        });\n        instance.handlerSave();\n      }),\n      nzOkLoading: false, // Cập nhật trạng thái loading dựa trên sự kiện onSave\n    });\n  }\n  \n\n  onPageChange(page: number): void {\n    this.loadPage(page, this.pagination.limit);\n  }\n\n  onPageSizeChange(page: number): void {\n    this.loadPage(1, page);\n  }\n\n\n  showEditModal(data: any): void {\n    const modalRef = this.modalService.create({\n      nzTitle: 'Sửa nhóm flash sale',\n      nzContent: AddEditFlashSaleModalComponent,\n      nzViewContainerRef: this.viewContainerRef,\n      nzCancelText: 'Hủy bỏ',\n      nzOkText: 'Đồng ý',\n      nzOkType: 'primary',\n      nzData: {\n        title: 'Sửa nhóm flash sale',\n        data: data\n      },\n      nzOnOk: () => new Promise((resolve) => {\n        const instance = modalRef.getContentComponent();\n        instance.onSave.subscribe(success => {\n          if (success.code === 200) {\n            this.iComMessageService.showAlertMessageDone('Sửa nhóm flash sale thành công.');\n            resolve(true);\n            this.loadPage(1);\n          } else {\n            this.iComMessageService.showAlertMessageError(success?.error?.error_message  || 'Sửa nhóm flash sale thất bại.');\n            resolve(false);\n            modalRef.updateConfig({ nzOkLoading: false });\n          }\n        });\n        instance.handlerSave();\n      }),\n      nzOkLoading: false\n    });\n  }\n\n  showDeleteConfirm(data: any): void {\n  const modal =  this.modalService.confirm({\n      nzTitle: 'Xóa nhóm flash sale',\n      nzContent: `Bạn có chắc chắn muốn xóa nhóm ${data.name}?`,\n      nzCancelText: 'Hủy bỏ',\n      nzOkText: 'Đồng ý',\n      nzOkLoading: false,\n      nzOkType: 'primary',\n      nzOnOk: async () => {\n        modal.updateConfig({ nzOkLoading: true });\n        try {\n          const result = await lastValueFrom(this.iComLibsServicesProjectFlashSaleService.deleteGroup({_id: data._id}));\n          this.loadPage(1);\n          this.iComMessageService.showAlertMessageDone('Xóa nhóm flash sale thành công.');\n        } catch (error: any) {\n          console.log(error);\n          this.iComMessageService.showAlertMessageError(error?.error?.error_message ||  'Xóa nhóm  flash sale thất bại.');\n        } finally {\n          modal.updateConfig({ nzOkLoading: false });\n          modal.destroy();\n        }\n      }\n    });\n  }\n}"],"x_google_ignoreList":[]}