{"version":3,"file":"libs_section_src_index_ts.js","mappings":"2JAOO,IAAMA,EAA8B,MAArC,MAAOA,EAGXC,YACUC,EACAC,GADAC,KAAAF,KACAE,KAAAD,mBACP,CAEHE,WACOD,KAAKD,kBAAkBG,cAAcF,KAAKG,SAC7CH,KAAKF,GAAGM,cAAcC,MAAMC,YAAY,UAAW,OAAQ,YAE/D,CAACC,SAAAP,KAAA,mBAAAQ,iBAZUZ,GAA8Ba,mBAAAC,KAAA,EAAAH,SAAAP,KAAA,UAAAW,EAAAC,IAAA,MAA9BhB,EAA8BiB,UAAA,2CAAAC,OAAA,CAAAX,OAAA,UAAAY,YAAA,WAA9BnB,CAA8B,sXC8HzBa,MAAA,WAKEA,MAAA,iBAAAO,GAAAP,MAAAQ,GAAA,MAAAC,EAAAT,QAAAU,UAAAC,EAAAX,QAAA,OAASA,MAAAW,EAAAC,YAAAL,EAAAE,GAAyB,GAElCT,MAAA,gBACFA,aALEA,MAAA,6LAjDZA,MAAA,UAAAA,CAAqD,WAEjDA,MAAA,UACFA,QACAA,MAAA,UAAAA,CAA6C,YAEzCA,MAAA,GACFA,UAEFA,MAAA,WAAyBA,MAAA,mBAAsEA,QAC/FA,MAAA,WAAyBA,MAAA,qBAAoEA,QAC7FA,MAAA,YAAyBA,MAAA,8BAA8DA,QACvFA,MAAA,YAAyBA,MAAA,8BAAuDA,QAChFA,MAAA,YAIEA,MAAA,8BACFA,QACAA,MAAA,YAAyBA,MAAA,qBAAwDA,QACjFA,MAAA,YAAyBA,MAAA,IAAiCA,QAC1DA,MAAA,WAAAA,CAAyB,YAAzBA,CAAyB,gBAYnBA,MAAA,+BACAA,MAAA,cACFA,QACAA,MAAA,8BAAAA,CAA0C,WAA1CA,CAA0C,YAMpCA,MAAA,iBAAAO,GAAA,MAAAE,EAAAT,MAAAa,GAAAH,UAAAI,EAAAd,QAAA,OAASA,MAAAc,EAAAC,YAAAR,EAAAE,GAAyB,GAElCT,MAAA,YACFA,QACAA,MAAA,GAAAgB,EAAA,aASFhB,kEAlDoEA,MAAA,GAAAA,MAAA,iBAAAS,EAAAQ,MACtEjB,MAAA,GAAAA,MAAA,WAAAS,EAAA,KAAAA,EAAAQ,OAAA,SAGqBjB,MAAA,GAAAA,YAAA,WAAAS,EAAAS,aAAA,KAAAT,EAAAS,aAAAC,WAAA,qBACAnB,MAAA,GAAAA,YAAA,YAAAS,EAAAS,aAAA,KAAAT,EAAAS,aAAAE,SAAA,qBACApB,MAAA,GAAAA,YAAA,MAAAS,EAAAY,KAAAC,EAAAC,sBAAA,KACAvB,MAAA,GAAAA,YAAA,MAAAS,EAAAe,OAAAF,EAAAG,aAAA,KACAzB,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAA0B,EAAA,WAAAjB,EAAAkB,OAAA,aAAAlB,EAAAkB,SAIvB3B,MAAA,GAAAA,MAAA,IAAAA,MAAA,MAAAS,EAAAkB,OAAAL,EAAAM,aAAA,SAEuB5B,MAAA,GAAAA,YAAA,MAAAS,EAAAoB,WAAA,qBACA7B,MAAA,GAAAA,MAAAS,EAAAqB,iBAAA,KAKnB9B,MAAA,GAAAA,MAAA,gBAAAA,CAAiB,mBAAjBA,CAAiB,kBAAjBA,CAAiB,iBAAA+B,GAeb/B,MAAA,GAAAA,MAAA,iBAOCA,MAAA,GAAAA,MAAA,QAAAA,MAAA,GAAAgC,GAAAC,SAAAxB,EAAAY,MAAA,+BAoBnBrB,MAAA,YACEA,MAAA,GACFA,8BADEA,MAAA,GAAAA,MAAA,2CAAAkC,EAAAC,WAAA,KAAAD,EAAAC,WAAAC,aAAA,+GChGG,IAAMC,EAA4B,MAAnC,MAAOA,EA1BbjD,cA2BEG,KAAA+C,WAAoB,GACpB/C,KAAAgD,MAAQ,EACRhD,KAAAiD,SAAU,EACVjD,KAAAkD,SAAW,EACXlD,KAAAmD,UAAY,EAEFnD,KAAAoD,KAAO,IAAIC,KAAU,IACrBrD,KAAAsD,MAAwB,GACxBtD,KAAAuD,KAAyB,GACzBvD,KAAAwD,QAA6B,GAG7BxD,KAAAyD,OAAMC,OAAOC,OACb3D,KAAA4D,gBAAeF,OAAOG,MACtB7D,KAAA8D,oBAAmBJ,OAAOK,OAC1B/D,KAAAgE,mCAAkCN,OAC1CO,KAEQjE,KAAAkE,UAASR,OAAOS,MAChBnE,KAAAoE,6CAA4CV,OACpDW,KAEQrE,KAAAsE,sBAAqBZ,OAAOY,KAG5BtE,KAAAgC,oBAA6B,GAC7BhC,KAAAkC,WAAoB,GACpBlC,KAAAuE,WAAoB,CAAC,aAAc,gBAAiB,eACpDvE,KAAAwE,OAA8B,CACtC,CACEC,oBAAqB,gBACrBC,UAAW,YACXC,WAAY,CACV,CACEC,IAAK,OACL9C,KAAM,eACN+C,MAAO,CACLC,YAAa,uCACbC,aAAc,aAKtB,CACEN,oBAAqB,gBACrBC,UAAW,YACXC,WAAY,CACV,CACEC,IAAK,SACL9C,KAAM,gBACN4C,UAAW,aACXG,MAAO,CACLC,YAAa,qBACbE,UAAW,KACXC,UAAW,QACXC,MAAO,qBACPC,UAAW,QACX3B,WAASnB,UAGb,CACEuC,IAAK,QACL9C,KAAM,gBACN+C,MAAO,CACLC,YAAa,qBACbE,UAAW,KACXC,UAAW,QACXE,UAAW,QACXD,MAAO,qBACP1B,QAAS,CACP,CAAE4B,IAAI,EAAMC,MAAO,6BACnB,CAAED,IAAI,EAAOC,MAAO,oCAM9B,CACEZ,oBAAqB,qBACrBC,UAAW,YACXC,WAAY,CACV,CACEC,IAAK,OACL9C,KAAM,gBACN+C,MAAO,CACLC,YAAa,mDACbE,UAAW,KACXC,UAAW,QACXE,UAAW,QACXD,MAAO,mDACP1B,QAASxD,KAAKoE,0CACXkB,gBAAgB,IAChBC,QACCC,KAAKC,GACIA,EAAOC,SAKxB,CACEd,IAAK,SACL9C,KAAM,gBACN+C,MAAO,CACLC,YAAa,gCACbE,UAAW,KACXC,UAAW,QACXE,UAAW,QACXD,MAAO,+BACP1B,QAASxD,KAAKoE,0CACXuB,wBAAwB,IACxBJ,QACCC,KAAKC,GACIA,EAAOC,YAQ9B1F,KAAAqC,cAAaA,QAEbpC,YACE2F,OAAc,CACZ5F,KAAKoE,0CAA0CkB,gBAAgB,IAC/DtF,KAAKoE,0CAA0CuB,wBAAwB,MAEvEE,UAAWC,IACX,MAAOC,EAAiBC,GAAcF,EACtC9F,KAAKgC,oBAAsB+D,GAAiBL,KAC5C1F,KAAKkC,WAAa8D,GAAYN,KAC9B1F,KAAKyD,IAAIwC,eAAa,GAExBjG,KAAKkG,UACP,CAEgBC,KAAKC,GAAyB,IAAAC,EAAArG,KAAA,SAAAsG,KAAA,YAC5C,MAAMC,EAAYH,EAAMI,eAAiBH,EAAKzD,YAAY6D,KAAO,GAAKJ,EAAKzD,YAAY8D,MACjFC,EAAWP,EAAMQ,cAAgBP,EAAKzD,YAAY6D,KAAO,GAAKJ,EAAKzD,YAAY8D,MAC/EtB,EAAKgB,GAAOS,WAAWnB,KAAKU,EAAMI,gBAAgBpB,GAClD0B,EAAkBT,EAAK9C,KAAK6C,EAAMQ,cACxC,GAAGL,IAAcI,EAGjB,KACEN,EAAKpD,SAAU,QACf,EAAM8D,KACJV,EAAKjC,0CAA0C4C,UAAU5B,EAAI0B,GAAiBG,SAAgB,EAEhGC,MAAgBb,EAAK9C,KAAM6C,EAAMI,cAAeJ,EAAMQ,cACtDP,EAAK5C,IAAIwC,gBACTI,EAAKH,SAASG,EAAKzD,YAAY6D,KAAOJ,EAAKzD,YAAY8D,OACvDL,EAAK5C,IAAIwC,gBACTI,EAAK/B,mBAAmB6C,qBAAqB,sCACtCC,GACPf,EAAKpD,SAAU,EACfoD,EAAK/B,mBAAmB+C,sBAAuBD,GAA2BE,OAAOC,eAAiB,0CAElGlB,EAAK5C,IAAIwC,gBAEXI,EAAK5C,IAAIwC,eAAa,CAAG,EAxBmB,EAyB9C,CAEgBC,SAASO,EAAe,EAAGC,EAAgB,IAAE,IAAAc,EAAAxH,KAAA,SAAAsG,KAAA,YAC3D,IACEkB,EAAKvE,SAAU,EAEf,MAAMwE,EAAW,IADH,IAAKD,EAAKlE,OAGtBoD,MAAOA,EACPD,KAAMA,GAEFhB,QAAM,EAASsB,KACnBS,EAAKpD,0CAA0CsD,KAAK,IAC/CD,KAIP,GAAIhC,GAAUA,EAAOC,MAAQD,EAAOC,KAAKiC,MAIvC,OAFAH,EAAKjE,KADQkC,EAAOC,KAAKiC,OAAS,QAElCH,EAAK5E,WAAa6C,EAAOC,KAAK9C,YAIhC4E,EAAKjE,KAAO,GACZiE,EAAK5E,WAAa6C,EAAOC,KAAK9C,iBACvBwE,GACPQ,QAAQC,IAAIT,WAEZI,EAAKvE,SAAU,EACfuE,EAAK/D,IAAIwC,gBACV,EA7B0D,EA8B7D,CAEU6B,cAAcC,GACtBA,EAAEC,kBACFD,EAAEE,iBACFjI,KAAKkG,SAAS,EAAGlG,KAAK4C,YAAY8D,MACpC,CAEUwB,eACRlI,KAAKoD,KAAK+E,QACVnI,KAAKkG,SAAS,EAAGlG,KAAK4C,YAAY8D,MACpC,CAEA0B,aAAa3B,GACXzG,KAAKkG,SAASO,EAAMzG,KAAK4C,WAAW8D,MACtC,CAEA2B,iBAAiB5B,GACfzG,KAAKkG,SAAS,EAAGO,EACnB,CAEU6B,wBACRtI,KAAKwD,QAAQ+E,UAAUC,QAAUxI,KAAKwD,QAAQ+E,UAAUC,MAC1D,CAEUhH,YAAYuG,EAAUrC,GAC9BqC,EAAEC,kBACFD,EAAEE,iBACFjI,KAAKkE,OAAOuE,cAAc,0BAA0B/C,EAAKN,eAC3D,CAEU/D,YAAY0G,EAAUrC,GAC9BqC,EAAEC,kBACFD,EAAEE,iBACFjI,KAAKkE,OAAOuE,cAAc,0BAA0B/C,EAAKN,eAC3D,CAEUsD,gBAAgBX,GACxBA,EAAEC,kBACFD,EAAEE,gBACJ,CAEUU,UAAUZ,GAClBA,EAAEC,kBACFD,EAAEE,iBACFjI,KAAK4I,qBAAqBb,EAC5B,CAEUa,qBAAqBb,GAC7BA,EAAEC,kBACFD,EAAEE,iBACFjI,KAAKkE,OAAOuE,cAAc,+BAC5B,CAAClI,SAAAP,KAAA,mBAAAQ,iBAtPUsC,EAA4B,EAAAvC,SAAAP,KAAA,UAAAW,EAAAkI,IAAA,MAA5B/F,EAA4BjC,UAAA,6BAAAE,YAAA,EAAA+H,SAAA,CAAArI,OAAAsI,MAAA,GAAAC,KAAA,GAAAC,OAAA,8rEAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,ID3DzC1I,MAAA,UAAAA,CAAyC,YAKrCA,MAAA,yBAAAO,GAAA,OAAiBoI,EAAAtB,cAAA9G,EAAqB,GAEtCP,MAAA,WACEA,MAAA,mBAMFA,QAEAA,MAAA,UAAAA,CAAyC,UAAzCA,CAAyC,cAOnCA,MAAA,iBAAAO,GAAA,OAASoI,EAAAT,UAAA3H,EAAiB,GAC1BP,MAAA,YACAA,MAAA,wBACFA,UAEFA,MAAA,UAAAA,CAAkD,eAO9CA,MAAA,iBAAAO,GAAA,OAASoI,EAAAtB,cAAA9G,EAAqB,GAE9BP,MAAA,WACCA,MAAA,iBACHA,QACAA,MAAA,gBAKEA,MAAA,0BAAS2I,EAAAlB,cAAc,GAEvBzH,MAAA,WACAA,MAAA,wBACFA,cAKNA,MAAA,YAAAA,CAAgD,qBAU5CA,MAAA,6BAAAO,GAAA,OAAqBoI,EAAAhB,aAAApH,EAAoB,EAAzCP,CAA0C,4BAAAO,GAAA,OAEtBoI,EAAAf,iBAAArH,EAAwB,GAM5CP,MAAA,WAAAA,CAAO,QAAPA,CAAO,YAEgBA,MAAA,UAAGA,QACtBA,MAAA,YAAqCA,MAAA,aAAGA,QACxCA,MAAA,YAAwDA,MAAA,sBAAOA,QAC/DA,MAAA,YAAsDA,MAAA,4BAAQA,QAC9DA,MAAA,YAAqCA,MAAA,uDAAkBA,QACvDA,MAAA,YAAuCA,MAAA,mCAAaA,QACpDA,MAAA,YAAuCA,MAAA,yBAAUA,QACjDA,MAAA,YAA2CA,MAAA,8BAAaA,QACxDA,MAAA,YAAgDA,MAAA,+BAASA,QACzDA,MAAA,YAAoBA,MAAA,6BAASA,YAGjCA,MAAA,eAA4CA,MAAA,8BAAAO,GAAA,OAAsBoI,EAAAjD,KAAAnF,EAAY,GAC5EP,MAAA,GAAA4I,EAAA,eA4DF5I,cAMNA,MAAA,GAAA6I,EAAA,0BAAA7I,+BAvJIA,MAAA,GAAAA,MAAA,YAAA2I,EAAAhG,MAOI3C,MAAA,GAAAA,MAAA,QAAA2I,EAAA9F,MAAA7C,CAAe,SAAA2I,EAAA5E,OAAf/D,CAAe,UAAA2I,EAAA5F,QAAf/C,CAAe,OAAA2I,EAAAhG,MAWb3C,MAAA,GAAAA,MAAA,eAAAA,CAAgB,oBAWhBA,MAAA,GAAAA,MAAA,gBAAAA,CAAiB,oBAWjBA,MAAA,GAAAA,MAAA,iBAcJA,MAAA,GAAAA,MAAA,WAAAA,MAAA,GAAA8I,GAAA9I,CAAsD,SAAA2I,EAAA7F,KAAtD9C,CAAsD,YAAA2I,EAAAnG,QAAtDxC,CAAsD,gBAAA2I,EAAAxG,WAAA,KAAAwG,EAAAxG,WAAAC,WAAtDpC,CAAsD,gBAAtDA,CAAsD,iDAAtDA,CAAsD,oBAAA2I,EAAAxG,WAAA,KAAAwG,EAAAxG,WAAA6D,KAAtDhG,CAAsD,uBAAtDA,CAAsD,oBAAAA,MAAA,GAAA+I,GAAtD/I,CAAsD,WAAAgJ,GA8BnChJ,MAAA,IAAAA,MAAA,kBAAA2I,EAAA7F,MACI9C,MAAA,GAAAA,MAAA,UAAA2I,EAAA7F,sBC/CzBmG,KAAchJ,eACdiJ,KAAaC,8BACbC,KACAC,KACAC,IACAC,KAAmBC,eACnBC,KAAYC,KACZC,KAAcC,KAAAC,IAAAC,KACdC,KAAYC,KACZC,KAAgBC,UAAAC,eAChBC,KACAC,KAAeC,KACfC,IACAC,KACAC,KAEAtL,KAA8BuL,OAAA,iTAAAC,gBAAA,WAGrBtI,CAA4B","names":["IcomLibsHasPermissionDirective","constructor","el","permissionService","this","ngOnInit","getPermission","action","nativeElement","style","setProperty","static","t","i0","i1","core","lG2","selectors","inputs","standalone","$event","_r10","data_r4","$implicit","ctx_r8","handlerEdit","_r12","ctx_r11","handlerView","IcomLibsSectionListComponent_tr_42_li_36_Template","name","display_conf","start_time","end_time","type","ctx_r1","listDataContributor","layout","listLayout","_c0","status","ListStatus","created_at","created_by_name","_r6","_c1","includes","ctx_r3","pagination","total_rows","IcomLibsSectionListComponent","listOfData","total","loading","pageSize","pageIndex","form","FormGroup","model","rows","options","cdr","inject","ChangeDetectorRef","modalService","NzModalService","viewContainerRef","ViewContainerRef","icomLibsDynamicComponentService","IcomLibsDynamicComponentService","router","Router","iComLibsServicesProjectDynamicHomeService","IComLibsServicesProjectDynamicHomeService","IComMessageService","listIgnore","fields","fieldGroupClassName","className","fieldGroup","key","props","placeholder","nzPrefixIcon","valueProp","labelProp","label","viewValue","id","value","listContentType","pipe","map","result","data","listLayoutByContentType","combineLatest","subscribe","results","dataContributor","dataLayout","detectChanges","loadPage","drop","event","_this","_asyncToGenerator","prevIndex","previousIndex","page","limit","newIndex","currentIndex","container","itemDroppedInto","lastValueFrom","sortField","order","moveItemInArray","showAlertMessageDone","err","showAlertMessageError","error","error_message","_this2","dataBody","list","items","console","log","handlerSearch","e","stopPropagation","preventDefault","handlerReset","reset","onPageChange","onPageSizeChange","handlerToggleCollapse","formState","hidden","navigateByUrl","handlerActivate","showModal","handlerOpenGroupSale","Xpm","features","decls","vars","consts","template","rf","ctx","IcomLibsSectionListComponent_tr_42_Template","IcomLibsSectionListComponent_ng_template_43_Template","_c2","_c3","_r2","DragDropModule","NzTableModule","i2","DatePipe","NgFor","FormlyNgZorroAntdModule","ReactiveFormsModule","i3","FormlyModule","i4","NzButtonModule","i5","i6","i7","NzIconModule","i8","NzDropDownModule","i9","i10","NzModalModule","NzToolTipModule","i11","FindValueByIdPipe","NgIf","NgClass","styles","changeDetection"],"sourceRoot":"webpack:///","sources":["./libs/core/directives/permission.directive.ts","./libs/section/src/list/list.component.html","./libs/section/src/list/list.component.ts"],"sourcesContent":["import { Directive, ElementRef, Input, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { PermissionService} from '../services/authenticate/permission.service';\n\n@Directive({\n  selector: '[icomLibsHasPermissionDirective]',\n  standalone: true\n})\nexport class IcomLibsHasPermissionDirective implements OnInit {\n  @Input() action!: string;\n\n  constructor(\n    private el: ElementRef, \n    private permissionService: PermissionService\n  ) {}\n\n  ngOnInit() {\n    if (!this.permissionService.getPermission(this.action)) {\n      this.el.nativeElement.style.setProperty('display', 'none', 'important');\n    }\n  }\n}\n\n","<div class=\"flex w-full h-full flex-col\">\n  <form\n    [formGroup]=\"form\"\n    nz-form\n    class=\"!p-4 bg-white border rounded-md\"\n    (keydown.enter)=\"handlerSearch($event)\"\n  >\n    <div class=\"w-full\">\n      <formly-form\n        [model]=\"model\"\n        [fields]=\"fields\"\n        [options]=\"options\"\n        [form]=\"form\"\n      ></formly-form>\n    </div>\n\n    <div nz-row class=\"flex justify-between\">\n      <div class=\"\">\n        <button\n          icomLibsHasPermissionDirective\n          [action]=\"'add'\"\n          nz-button \n          [nzType]=\"'primary'\" \n          (click)=\"showModal($event)\">\n          <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\n          Thêm mới\n        </button>\n      </div>\n      <div nz-col class=\"search-area flex items-center\">\n        <button\n          icomLibsHasPermissionDirective\n          [action]=\"'view'\"\n          class=\"!flex !items-center\"\n          nz-button\n          [nzType]=\"'primary'\"\n          (click)=\"handlerSearch($event)\"\n        >\n          <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\n           Lọc\n        </button>\n        <button\n          icomLibsHasPermissionDirective\n          [action]=\"'view'\"\n          class=\"ml-4 !flex !items-center\"\n          nz-button\n          (click)=\"handlerReset()\"\n        >\n          <i nz-icon nzTheme=\"outline\" nzType=\"close-circle\"></i>\n          Làm mới\n        </button>\n      </div>\n    </div>\n  </form>\n\n  <div class=\"w-full h-full mt-4 overflow-hidden\">\n    <nz-table\n      [nzScroll]=\"{ x: '1500px', y: 'calc(100vh - 375px)' }\"\n      #sectionTable\n      [nzData]=\"rows\"\n      [nzLoading]=\"loading\"\n      [nzTotal]=\"pagination?.total_rows\"\n      [nzPageSize]=\"10\"\n      [nzNoResult]=\"'Không có dữ liệu.'\"\n      [nzPageIndex]=\"pagination?.page\"\n      (nzPageIndexChange)=\"onPageChange($event)\"\n      [nzFrontPagination]=\"false\"\n      (nzPageSizeChange)=\"onPageSizeChange($event)\"\n      nzShowSizeChanger\n      [nzPageSizeOptions]=\"[10, 15, 20, 30, 40, 50]\"\n      class=\"h-full\"\n      [nzFooter]=\"footerTemplate\"\n    >\n      <thead>\n        <tr>\n          <th nzWidth=\"60px\">STT</th>\n          <th nzWidth=\"250px\" nzSortKey=\"name\">Tên</th>\n          <th nzWidth=\"150px\" nzSortKey=\"display_conf.start_time\">Từ ngày</th>\n          <th nzWidth=\"150px\" nzSortKey=\"display_conf.end_time\">Đến ngày</th>\n          <th nzWidth=\"250px\" nzSortKey=\"type\">Đối tượng hiển thị</th>\n          <th nzWidth=\"130px\" nzSortKey=\"layout\">Dạng hiển thị</th>\n          <th nzWidth=\"150px\" nzSortKey=\"status\">Trạng thái</th>\n          <th nzWidth=\"150px\" nzSortKey=\"created_at\">Thời gian tạo</th>\n          <th nzWidth=\"150px\" nzSortKey=\"created_by_name\">Người tạo</th>\n          <th nzWidth=\"150px\">Hành động</th>\n        </tr>\n      </thead>\n      <tbody cdkDropList [cdkDropListData]=\"rows\" (cdkDropListDropped)=\"drop($event)\">\n        <tr *ngFor=\"let data of rows; let i = index\" cdkDrag>\n          <td class=\"cursor-pointer text-xs !p-3\">\n            <i nz-icon nzType=\"menu\" cdkDragHandle></i>\n          </td>\n          <td class=\"pl-4 text-xs !p-3 truncate-text \">\n            <div class=\"overflow-hidden text-ellipsis whitespace-nowrap\" nz-tooltip [nzTooltipTitle]=\"data.name\">\n              {{ data?.name || '-' }}\n            </div>\n          </td>\n          <td class=\"text-xs !p-3\">{{ data.display_conf?.start_time | date : 'dd/MM/yyyy HH:mm' || '-' }}</td>\n          <td class=\"text-xs !p-3\">{{ data.display_conf?.end_time | date : 'dd/MM/yyyy HH:mm' || '-' }}</td>\n          <td class=\"text-xs !p-3\">{{ (data.type | findValueById : listDataContributor) || '-' }}</td>\n          <td class=\"text-xs !p-3\">{{ (data.layout | findValueById : listLayout) || '-' }}</td>\n          <td class=\"text-xs !p-3\" [ngClass]=\"{\n              'text-green-500': data.status === 'ACTIVE',\n              'text-red-500': data.status === 'INACTIVE'\n            }\">\n            {{ (data.status | findValueById : ListStatus) || '-' }}\n          </td>\n          <td class=\"text-xs !p-3\">{{ data.created_at | date : 'dd/MM/yyyy HH:mm' || '-' }}</td>\n          <td class=\"text-xs !p-3\">{{ data.created_by_name || '-' }}</td>\n          <td class=\"text-xs !p-3\">\n            <div class=\"name-container\">\n              <button \n                icomLibsHasPermissionDirective\n                [action]=\"'view'\"\n                nz-button \n                [nzType]=\"'primary'\" \n                [nzShape]=\"'round'\" \n                nz-button \n                nz-dropdown \n                [nzDropdownMenu]=\"menu4\"\n              >\n                Hành động\n                <span nz-icon nzType=\"down\"></span>\n              </button>\n              <nz-dropdown-menu #menu4=\"nzDropdownMenu\">\n                <ul nz-menu>\n                  <li \n                    icomLibsHasPermissionDirective\n                    [action]=\"'view'\"\n                    nz-menu-item \n                    (click)=\"handlerView($event, data)\"\n                  >\n                    Xem\n                  </li>\n                  <li \n                    *ngIf=\"!['FLASH_SALE', 'QUICK_BUTTONS', 'MYPOINT_HOT'].includes(data.type || '')\" \n                    icomLibsHasPermissionDirective\n                    [action]=\"'edit'\"\n                    nz-menu-item \n                    (click)=\"handlerEdit($event, data)\"\n                  >\n                    Sửa\n                  </li>\n                </ul>\n              </nz-dropdown-menu>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </nz-table>\n  </div>\n</div>\n\n\n<ng-template #footerTemplate>\n  <div class=\"footer-content\">\n    Tổng số bản ghi: {{ pagination?.total_rows || 0 }}\n  </div>\n</ng-template>","import { IComLibsServicesProjectDynamicHomeService } from './../../../core/services/projects/dynamic-home/dynamic-home.service';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  OnInit,\n  inject,\n  ViewContainerRef,\n  ChangeDetectorRef,\n} from '@angular/core';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { DatePipe, NgClass, NgFor, NgIf } from '@angular/common';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport {\n  FormlyFormOptions,\n  FormlyFieldConfig,\n  FormlyModule,\n} from '@ngx-formly/core';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { ISectionConfig } from '@icom/interfaces';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzModalModule, NzModalService } from 'ng-zorro-antd/modal';\nimport { IComMessageService, IcomLibsDynamicComponentService } from '@icom/services/common';\nimport { Router } from '@angular/router';\nimport { combineLatest, lastValueFrom, map } from 'rxjs';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\nimport { FindValueByIdPipe } from './pipe/ find-value-by-id.pipe';\nimport { ListStatus } from 'libs/section/detail/src/defines/code.define';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { IcomLibsHasPermissionDirective } from '@icom/directive';\n@Component({\n  selector: 'icom-libs-product-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.scss'],\n  standalone: true,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [\n    DragDropModule,\n    NzTableModule,\n    DatePipe,\n    NgFor,\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NzIconModule,\n    NzDropDownModule,\n    NzModalModule,\n    NzToolTipModule,\n    FindValueByIdPipe,\n    NgIf,\n    NgClass,\n    NzToolTipModule,\n    IcomLibsHasPermissionDirective\n  ],\n})\nexport class IcomLibsSectionListComponent implements OnInit {\n  listOfData: any[] = [];\n  total = 1;\n  loading = true;\n  pageSize = 5;\n  pageIndex = 1;\n\n  protected form = new FormGroup({});\n  protected model: ISectionConfig = {};\n  protected rows: ISectionConfig[] = [];\n  protected options: FormlyFormOptions = {};\n  protected pagination: any;\n\n  protected cdr = inject(ChangeDetectorRef);\n  protected modalService = inject(NzModalService);\n  protected viewContainerRef = inject(ViewContainerRef);\n  protected icomLibsDynamicComponentService = inject(\n    IcomLibsDynamicComponentService\n  );\n  protected router = inject(Router);\n  protected iComLibsServicesProjectDynamicHomeService = inject(\n    IComLibsServicesProjectDynamicHomeService\n  );\n  protected IComMessageService = inject(IComMessageService);\n\n\n  protected listDataContributor: any[] = [];\n  protected listLayout: any[] = [];\n  protected listIgnore: any[] = ['FLASH_SALE', 'QUICK_BUTTONS', 'MYPOINT_HOT'];;\n  protected fields: FormlyFieldConfig[] = [\n    {\n      fieldGroupClassName: 'flex flex-col',\n      className: 'basis-1/2',\n      fieldGroup: [\n        {\n          key: 'name',\n          type: 'search-input',\n          props: {\n            placeholder: 'Tìm kiếm theo tên section',\n            nzPrefixIcon: 'search',\n          },\n        }\n      ]\n    },\n    {\n      fieldGroupClassName: 'flex flex-col',\n      className: 'basis-1/2',\n      fieldGroup: [\n        {\n          key: 'status',\n          type: 'select-custom',\n          className: 'basis-4/12',\n          props: {\n            placeholder: 'Trạng thái',\n            valueProp: 'id',\n            labelProp: 'value',\n            label: 'Trạng thái',\n            viewValue: 'value',\n            options: ListStatus()\n          },\n        },\n        {\n          key: 'valid',\n          type: 'select-custom',\n          props: {\n            placeholder: 'Hiệu lực',\n            valueProp: 'id',\n            labelProp: 'value',\n            viewValue: 'value',\n            label: 'Hiệu lực',\n            options: [\n              { id: true, value: 'Còn hiệu lực' },\n              { id: false, value: 'Hết hiệu lực' },\n            ],\n          },\n        },\n      ],\n    },\n    {\n      fieldGroupClassName: 'flex flex-col ml-4',\n      className: 'basis-1/2',\n      fieldGroup: [\n        {\n          key: 'type',\n          type: 'select-custom',\n          props: {\n            placeholder: 'Đối tượng hiển thị',\n            valueProp: 'id',\n            labelProp: 'value',\n            viewValue: 'value',\n            label: 'Đối tượng hiển thị',\n            options: this.iComLibsServicesProjectDynamicHomeService\n              .listContentType({})\n              .pipe(\n                map((result) => {\n                  return result.data;\n                })\n              ),\n          },\n        },\n        {\n          key: 'layout',\n          type: 'select-custom',\n          props: {\n            placeholder: 'Dạng hiển thị:',\n            valueProp: 'id',\n            labelProp: 'value',\n            viewValue: 'value',\n            label: 'Dạng hiển thị',\n            options: this.iComLibsServicesProjectDynamicHomeService\n              .listLayoutByContentType('')\n              .pipe(\n                map((result) => {\n                  return result.data;\n                })\n              ),\n          },\n        },\n      ],\n    },\n  ];\n  ListStatus = ListStatus();\n\n  ngOnInit() {\n    combineLatest([\n      this.iComLibsServicesProjectDynamicHomeService.listContentType({}),\n      this.iComLibsServicesProjectDynamicHomeService.listLayoutByContentType('')\n    ]\n    ).subscribe((results: any) => {\n      const [dataContributor, dataLayout] = results;\n      this.listDataContributor = dataContributor?.data;\n      this.listLayout = dataLayout?.data;\n      this.cdr.detectChanges();\n    });\n    this.loadPage();\n  }\n\n  protected async drop(event: CdkDragDrop<any[]>) {\n    const prevIndex = event.previousIndex + (this.pagination?.page - 1) * this.pagination?.limit;\n    const newIndex = event.currentIndex + (this.pagination?.page - 1) * this.pagination?.limit;\n    const id = event?.container?.data[event.previousIndex]?.id;\n    const itemDroppedInto = this.rows[event.currentIndex];\n    if(prevIndex === newIndex) {\n      return;\n    }\n    try {\n      this.loading = true;\n      await lastValueFrom(\n        this.iComLibsServicesProjectDynamicHomeService.sortField(id, itemDroppedInto?.order as number)\n      );\n      moveItemInArray(this.rows, event.previousIndex, event.currentIndex);\n      this.cdr.detectChanges();\n      this.loadPage(this.pagination?.page,  this.pagination?.limit);\n      this.cdr.detectChanges();\n      this.IComMessageService.showAlertMessageDone('Thao tác thành công');\n    } catch (err) {\n      this.loading = false;\n      this.IComMessageService.showAlertMessageError((err as HttpErrorResponse)?.error?.error_message || 'Thao tác thất bại');\n    } finally {\n      this.cdr.detectChanges();\n    }\n    this.cdr.detectChanges();\n  }\n\n  protected async loadPage(page: number = 1, limit: number = 10) {\n    try {\n      this.loading = true;\n      const model = { ...this.model };\n      const dataBody = {\n        ...model,\n        limit: limit,\n        page: page,\n      };\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectDynamicHomeService.list({\n          ...dataBody,\n        })\n      );\n\n      if (result && result.data && result.data.items) {\n        const rows = result.data.items || [];\n        this.rows = rows;\n        this.pagination = result.data.pagination;\n        return;\n      }\n\n      this.rows = [];\n      this.pagination = result.data.pagination;\n    } catch (err) {\n      console.log(err);\n    } finally {\n      this.loading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n  protected handlerSearch(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.loadPage(1, this.pagination?.limit);\n  }\n\n  protected handlerReset() {\n    this.form.reset();\n    this.loadPage(1, this.pagination?.limit);\n  }\n\n  onPageChange(page: number): void {\n    this.loadPage(page, this.pagination.limit);\n  }\n\n  onPageSizeChange(page: number): void {\n    this.loadPage(1, page);\n  }\n\n  protected handlerToggleCollapse() {\n    this.options.formState.hidden = !this.options.formState.hidden;\n  }\n\n  protected handlerView(e: Event, data: ISectionConfig) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.router.navigateByUrl(`section/list/detail?id=${data.id}&mode=view`);\n  }\n\n  protected handlerEdit(e: Event, data: ISectionConfig) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.router.navigateByUrl(`section/list/detail?id=${data.id}&mode=edit`);\n  }\n\n  protected handlerActivate(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  protected showModal(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.handlerOpenGroupSale(e);\n  }\n\n  protected handlerOpenGroupSale(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.router.navigateByUrl(`section/list/detail?mode=add`);\n  }\n}\n"],"x_google_ignoreList":[]}