{"version":3,"file":"libs_flash-sale_detail_src_index_ts.js","mappings":"qKAOO,IAAMA,EAA8B,MAArC,MAAOA,EAGXC,YACUC,EACAC,GADAC,KAAAF,KACAE,KAAAD,mBACP,CAEHE,WACOD,KAAKD,kBAAkBG,cAAcF,KAAKG,SAC7CH,KAAKF,GAAGM,cAAcC,MAAMC,YAAY,UAAW,OAAQ,YAE/D,CAACC,SAAAP,KAAA,mBAAAQ,iBAZUZ,GAA8Ba,mBAAAC,KAAA,EAAAH,SAAAP,KAAA,UAAAW,EAAAC,IAAA,MAA9BhB,EAA8BiB,UAAA,2CAAAC,OAAA,CAAAX,OAAA,UAAAY,YAAA,WAA9BnB,CAA8B,4fCuBjCa,MAAA,eAIEA,MAAA,iBAAAO,GAAAP,MAAAQ,GAAA,MAAAC,EAAAT,MAAA,UAASA,MAAAS,EAAAC,cAAAH,GAAqB,GAE9BP,MAAA,UAAMA,MAAA,cAAGA,oDAKXA,MAAA,eAOEA,MAAA,iBAAAO,GAAAP,MAAAW,GAAA,MAAAC,EAAAZ,MAAA,UAASA,MAAAY,EAAAC,YAAAN,GAAmB,GAE5BP,MAAA,UAAMA,MAAA,cAAGA,mCAPTA,MAAA,gBAAAA,CAAiB,YAAAc,EAAAC,mCAfvBf,MAAA,cACEA,MAAA,GACEA,MAAA,EAAAgB,GAAA,iBAQFhB,QAEAA,MAAA,GACEA,MAAA,EAAAiB,GAAA,iBAWFjB,QACFA,kDApDJA,MAAA,sBAIEA,MAAA,oBAAAA,MAAAkB,GAAA,MAAAC,EAAAnB,MAAA,UAAUA,MAAAmB,EAAAT,gBAAe,GAEzBV,MAAA,0BAAsBA,MAAA,GAA6BA,QAEnDA,MAAA,6BAAAA,CAEC,WAFDA,CAEC,UAFDA,CAEC,WAIOA,MAAA,mBAOFA,cAKNA,MAAA,8BACEA,MAAA,EAAAoB,GAAA,kBA4BFpB,mCAjDsBA,MAAA,GAAAA,OAAA,MAAAqB,EAAAC,KAAA,KAAAD,EAAAC,KAAAC,OAAA,qBAKNvB,MAAA,GAAAA,MAAA,YAAAqB,EAAAG,MAINxB,MAAA,GAAAA,MAAA,QAAAqB,EAAAI,MAAAzB,CAAe,SAAAqB,EAAAK,OAAf1B,CAAe,OAAAqB,EAAAG,KAAfxB,CAAe,UAAAqB,EAAAM,SAYZ3B,MAAA,GAAAA,MAAA,gBAAAqB,EAAAO,iCA5BjB5B,MAAA,GACEA,MAAA,EAAA6B,GAAA,yBAyDF7B,8BAxDKA,MAAA,GAAAA,MAAA,OAAA8B,EAAAR,gDA2ECtB,MAAA,eAMEA,MAAA,iBAAAO,GAAAP,MAAA+B,GAAA,MAAAC,EAAAhC,MAAA,UAASA,MAAAgC,EAAAC,gBAAA1B,GAAuB,GAEhCP,MAAA,UAAMA,MAAA,uBAASA,eANfA,MAAA,wCAHJA,MAAA,GACEA,MAAA,EAAAkC,GAAA,iBAUFlC,kDAIEA,MAAA,eAMEA,MAAA,iBAAAO,GAAAP,MAAAmC,GAAA,MAAAC,EAAApC,MAAA,UAASA,MAAAoC,EAAAC,kBAAA9B,GAAyB,GAElCP,MAAA,UAAMA,MAAA,kCAAeA,eANrBA,MAAA,wCAHJA,MAAA,GACEA,MAAA,EAAAsC,GAAA,iBAUFtC,kDAGEA,MAAA,eAMEA,MAAA,iBAAAO,GAAAP,MAAAuC,GAAA,MAAAC,EAAAxC,MAAA,UAASA,MAAAwC,EAAAC,YAAAlC,GAAmB,GAE5BP,MAAA,UAAMA,MAAA,cAAGA,eANTA,MAAA,wCAHJA,MAAA,GACEA,MAAA,EAAA0C,GAAA,iBAUF1C,kDAGEA,MAAA,eAQEA,MAAA,iBAAAO,GAAAP,MAAA2C,GAAA,MAAAC,EAAA5C,MAAA,UAASA,MAAA4C,EAAAC,cAAAtC,GAAqB,GAE9BP,MAAA,UAAMA,MAAA,YAAGA,mCARTA,MAAA,kBAAAA,CAAmB,YAAA8C,EAAA/B,UAAnBf,CAAmB,0CA5CzBA,MAAA,iBACEA,MAAA,EAAA+C,GAAA,sBAcA/C,MAAA,EAAAgD,GAAA,sBAaAhD,MAAA,EAAAiD,GAAA,sBAaAjD,MAAA,GACEA,MAAA,EAAAkD,GAAA,iBAYFlD,QACFA,+BAtDiBA,MAAA,GAAAA,MAAA,yBAAAmD,EAAA1B,MAAA,KAAA0B,EAAA1B,MAAA2B,SAcApD,MAAA,GAAAA,MAAA,yBAAAmD,EAAA1B,MAAA,KAAA0B,EAAA1B,MAAA2B,SAaApD,MAAA,GAAAA,MAAA,eAAAmD,EAAA1B,OAAA0B,EAAA1B,MAAA4B,mDA1CnBrD,MAAA,WAAAA,CAA0G,YAA1GA,CAA0G,UAA1GA,CAA0G,WAIlGA,MAAA,mBAOFA,YAGJA,MAAA,EAAAsD,GAAA,mBAyDFtD,8BAtEqDA,MAAA,GAAAA,MAAA,YAAAuD,EAAA/B,KAAAxB,CAAkB,uBAI7DA,MAAA,GAAAA,MAAA,QAAAuD,EAAA9B,MAAAzB,CAAe,SAAAuD,EAAA7B,OAAf1B,CAAe,OAAAuD,EAAA/B,KAAfxB,CAAe,UAAAuD,EAAA5B,SASZ3B,MAAA,GAAAA,MAAA,OAAAuD,EAAA3B,MAAA,SAAA2B,EAAA3B,6BA4Db5B,MAAA,qBAIEA,MAAA,kBCzBK,IAAMwD,GAAiC,MAAxC,MAAOA,EAyCXpE,cAAA,IAAAqE,EAAAlE,KAxCAA,KAAAiC,KAAO,IAAIkC,KAAU,IACrBnE,KAAAoC,QAA6B,CAC3BgC,UAAW,CACTC,UAAU,IAIJrE,KAAAsE,6CAA4CC,OACpDC,MAEQxE,KAAAyE,2CAA0CF,OAClDG,MAEQ1E,KAAA2E,mBAAkBJ,OAAOK,MACzB5E,KAAA6E,kBAAiBN,OAAOO,KACxB9E,KAAA+E,kBAA4B,EAE9B/E,KAAAgF,UAAmB,GAK3BhF,KAAAmC,OAA8B,GAEtBnC,KAAAiF,uBAAyB,IAAIC,IAAuB,IAElDlF,KAAAmF,cAAuB,GAEvBnF,KAAAoF,SAAQb,OAAOc,MACfrF,KAAAsF,OAAMf,OAAOgB,OACbvF,KAAAwF,gBAAejB,OAAOkB,MACtBzF,KAAA0F,UAASnB,OAAOoB,MAChB3F,KAAA4F,oBAAmBrB,OAAOsB,OAC1B7F,KAAA8F,sBAAqBvB,OAAOuB,KAC5B9F,KAAA+F,mCAAkCxB,OAAOyB,KACzChG,KAAAiG,cAAa1B,OAAO2B,OACpBlG,KAAAmG,oCAAmC5B,OAAO6B,MAE1CpG,KAAAqG,oBAAyC,IAAIC,MAGrDtG,KAAKqC,KAAO,OAEZrC,KAAKoF,MAAMmB,YACRC,QAAKC,MAAmBzG,KAAKiG,aAC7BS,UAAS,eAAAC,KAAAC,KAAC,UAAOC,GAChB,IACE,GAAIA,EAAQ,CACV,MAAMC,QAAM,EAASC,KACnB7C,EAAKO,wCAAwCuC,UAAU,CACrDC,KAAM,EACNC,KAAM,SAIV,GADAhD,EAAKc,UAAY8B,GAAQ/E,MAAMoF,OAAS,IACnCN,EAAOO,GA0FV,OAzFAlD,EAAK7B,KAAO,MACZ6B,EAAKnC,KAAO,CACVsF,cAAe,WACfC,gBAAiB,WACjBC,cAAe,YACfC,eAAgB,CACdC,OAAQ,CACN,CACEC,SAAU,KACVC,KAAM,WACNC,MAAO,GACPC,UAAW,QACXC,MAAO,OACPV,GAAI,SAEN,CACEM,SAAU,KACVC,KAAM,WACNC,MAAO,GACPC,UAAW,MACXC,MAAO,OACPV,GAAI,SAEN,CACEM,SAAU,KACVC,KAAM,WACNC,MAAO,GACPC,UAAW,cACXC,MAAO,OACPV,GAAI,SAEN,CACEM,SAAU,KACVC,KAAM,WACNC,MAAO,GACPC,UAAW,OACXC,MAAO,OACPV,GAAI,SAEN,CACEM,SAAU,KACVC,KAAM,mBACNC,MAAO,GACPC,UAAW,mBACXC,MAAO,WACPV,GAAI,SAEN,CACEM,SAAU,KACVC,KAAM,mBACNC,MAAO,GACPC,UAAW,eACXC,MAAO,WACPV,GAAI,UAGRW,aACE,uDAEJC,kBAAmB,CACjBC,SAAU,GACVC,aAAc,GACdC,OAAQ,CACNnG,KAAM,MACNoG,aAAc,IACdT,KAAM,MACNR,MAAO,CACL,CACEQ,KAAM,gBACNC,MAAO,UAMjB1D,EAAKhC,SAAQmG,aAAUnE,EAAKnC,MAE5BmC,EAAKoE,YACLpE,EAAKqE,uBACLrE,EAAKsE,4BACLtE,EAAK9B,QAAU,CACbgC,UAAW,CACTC,UAAU,EACVoE,UAAU,EACVC,UAAWxE,EAAKhC,QAGpBgC,EAAKa,kBAAmB,OACxBb,EAAKoB,KAAKqD,gBAGZ,IACE,MAAMvB,EAAMP,GAAgBO,IAAM,GAC5BN,QAAM,EAASC,KACnB7C,EAAKO,wCAAwCmE,QAAQxB,IAEvDlD,EAAKnC,KAAO+E,GAAQ/E,MAAQ,GAC5BmC,EAAKmC,oBAAoBwC,KAAK3E,EAAKnC,MACnC,MAAM+G,QAA4B5E,EAAK6E,yBACnCD,IACF5E,EAAKnC,KAAKiG,kBAAkBC,SAAWa,GAEzC5E,EAAKhC,SAAQmG,aAAUnE,EAAKnC,MAC5BmC,EAAKoE,YACLpE,EAAKsE,4BACLtE,EAAKqE,uBACLrE,EAAK9B,QAAU,CACbgC,UAAW,CACTC,UAAU,EACVoE,UAAU,EACVC,UAAWxE,EAAKhC,cAGb8G,GACPC,QAAQC,IAAIF,WAEZ9E,EAAKa,kBAAmB,EACxBb,EAAKoB,KAAKqD,wBAIdzE,EAAKa,kBAAmB,EACxBb,EAAKoB,IAAIqD,gBAEb,GAAC,gBAAAQ,GAAA,OAAAxC,EAAAyC,MAAApJ,KAAAqJ,UAAA,EAvIS,GAwId,CAEAd,uBACE,MAAMe,EAAmBtJ,KAAKkC,OAAOqH,OACrC,IAAKD,IAAqBA,EAAiBE,OACzC,OAEF,MAAMC,EAA4BH,GAAkBI,IAAKC,GAErD3J,KAAKgF,UAAU4E,KAAM9B,GAAUA,EAAM+B,MAAQF,IAAY,CACvDvC,GAAIuC,EACJ3H,KAAM,mCAIZhC,KAAKiF,uBAAuB6E,KAAKL,EACnC,CAEUnB,YAAS,IAAAyB,EAAA/J,KAEjBA,KAAKmC,OAAS,CACZ,CACE6H,oBAAqB,gBACrBC,UAAW,YACXC,IAAK,GACLC,SAAU,CAAC,SACXC,MAAO,CACLC,MAAO,sBAETC,YAAa,CACX,iBAAkB,sBAEpBC,WAAY,CACV,CACEL,IAAK,OACLD,UAAW,aACXtC,KAAM,eACNyC,MAAO,CACLC,MAAO,QACPG,UAAW,EACXC,YAAa,kBACbC,UAAU,GAEZC,WAAY,CACV,CAAE3I,KAAM,eAAgBI,QAAS,CAAEwI,UAAW,YAGlD,CACEV,IAAK,OACLD,UAAW,aACXtC,KAAM,eACNyC,MAAO,CACLC,MAAO,SACP5B,UAAU,EACV+B,UAAW,GACXC,YAAa,mBACbC,UAAU,GAEZG,WAAY,CACVF,WAAY,CACV,CAAE3I,KAAM,eAAgBI,QAAS,CAAEwI,UAAW,aAIpD,CACEV,IAAK,SACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,qBACPU,UAAU,EACVC,UAAW,OACXC,oBAAqB,GACrBP,UAAU,EACVQ,UAAW,OACXC,UAAW,MACX/I,QAASpC,KAAKyE,wCACXuC,UAAU,CAAEC,KAAM,EAAGC,KAAM,QAC3BV,QACCkD,KAAK5C,GAEDA,GAAQ/E,MAAMoF,OAAOuC,IAAI,CAAC0B,EAAWC,SAE9BD,MAED,KAIdE,eAAgBA,CACdC,EACAC,KAEA,MAAMC,EAAWzL,KAAKwF,aAAakG,OAAO,CACxCC,QAAS,6BACTC,UAAWC,KACXC,mBAAoB9L,KAAK4F,iBACzBmG,aAAc,WACdC,SAAU,WACVC,SAAU,UACVC,OAAQA,IACN,IAAIC,QAASC,IACX,MAAMC,EAAWZ,EAASa,sBAC1BD,EAASE,OACN/F,QAAKgG,KAAK,IACV9F,UAAS,eAAA+F,KAAA7F,KAAC,UAAO8F,GAChB,GAAIA,EAAS,CACX3C,EAAKjE,mBAAmB6G,qBACtB,iDAEFP,GAAQ,GACR,MAAMQ,EAASrB,EAAMsB,YAAYC,cACjCvB,EAAMsB,YAAYE,SAAS,IACtBH,EACHF,GAAS3K,MAAM8H,MAEjB,MAAM/C,QAAM,EAASC,KACnBgD,EAAKtF,wCAAwCuC,UAC3C,CAAEC,KAAM,EAAGC,KAAM,SAGrB6C,EAAK/E,UAAY8B,GAAQ/E,MAAMoF,OAAS,GAExC,MAAM6F,IADiBzB,GAAOsB,aAAajF,OACI8B,IAC5CtC,IAEQ,CAAEA,GAAIA,EAAIpF,KADC+H,EAAKkD,cAAc7F,GACJpF,QAGrC+H,EAAK9E,uBAAuB6E,KAC1BkD,IAEFxB,GAAYA,IACZC,EAASyB,aAAa,CAAEC,aAAa,IAEzC,GAAC,gBAAAC,GAAA,OAAAX,EAAArD,MAAApJ,KAAAqJ,UAAA,EA9BS,IA+BZgD,EAAS/K,aAAW,GAExB6L,aAAa,GACd,EAEH1C,YAAa,+BACb4C,OAAS9B,IAEP,MAAMyB,GADiBzB,GAAOsB,aAAajF,OACI8B,IAC5CtC,IAEQ,CAAEA,GAAIA,EAAIpF,KADChC,KAAKiN,cAAc7F,GACJpF,QAGrChC,KAAKiF,uBAAuB6E,KAAKkD,EAAuB,IAI9D,CACE9C,IAAK,aACLvC,KAAM,OACNyC,MAAO,CACLC,MAAO,UACPiD,UAAU,EACV7E,UAAU,EACV8E,kBAAmB,CACjBC,SAAU,oBAEZ9C,UAAU,EACV+C,eAAe,EACfC,OAAQ,mBACRjD,YAAa,mBACb4C,OAAQA,CAAC9B,EAAYoC,KACApC,GAAOqC,QAAQrD,YAAYX,KAC3CiE,GAAqB,aAAVA,EAAE3D,MAGElK,KAAKiC,KAAK6L,IAAI,aACrBC,wBAAsB,GAIrClD,WAAY,CACVF,WAAY,CAAC3K,KAAKgO,sBAGtB,CACE9D,IAAK,WACLvC,KAAM,OACNyC,MAAO,CACLC,MAAO,gBACP5B,UAAU,EACV6E,UAAU,EACVI,OAAQ,mBACRjD,YAAa,mBACb8C,kBAAmB,CACjBC,SAAU,oBAEZ9C,UAAU,EACV+C,eAAe,EACfJ,OAAQA,CAAC9B,EAAYoC,KACApC,GAAOqC,QAAQrD,YAAYX,KAC3CiE,GAAqB,eAAVA,EAAE3D,MAGElK,KAAKiC,KAAK6L,IAAI,eACrBC,wBAAsB,GAIrClD,WAAY,CACVF,WAAY,CAAC3K,KAAKgO,sBAGtB,CACE9D,IAAK,iCACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,gBACPU,UAAU,EACVC,UAAW,QACXN,UAAU,EACVQ,UAAW,QACXC,UAAW,KACX/I,WAAS6L,QACTxD,YAAa,uBAGjB,CACEP,IAAK,iCACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,eACPU,UAAU,EACVC,UAAW,QACXN,UAAU,EACVQ,UAAW,QACXC,UAAW,KACX/I,WAAS8L,QACTzD,YAAa,sBAGjB,CACEP,IAAK,iCACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,gBACPU,UAAU,EACVL,UAAU,EACVM,UAAW,QACXE,UAAW,QACXC,UAAW,KACX/I,WAAS+L,QACT1D,YAAa,uBAGjB,CACEP,IAAK,iCACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,gBACPU,UAAU,EACVL,UAAU,EACVM,UAAW,QACXE,UAAW,QACXC,UAAW,KACX/I,WAASgM,QACT3D,YAAa,yBAKrB,CACET,oBAAqB,qBACrBC,UAAW,sBACXC,IAAK,GACLC,SAAU,CAAC,SACXG,YAAa,CACX,iBAAkB,sBAEpBC,WAAY,CACV,CACEL,IAAK,iCACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,6BACPW,UAAW,QACXE,UAAW,QACXR,UAAU,EACVS,UAAW,KACXJ,UAAU,EACV3I,QAASpC,KAAKsE,0CACX+J,kBACA7H,QACCkD,KAAK5C,GACIA,GAAQ/E,SAKzB,CACEmI,IAAK,iCACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,+BACPW,UAAW,QACXE,UAAW,QACXC,UAAW,KACXJ,UAAU,EACVL,UAAU,EACVtI,QAASpC,KAAKsE,0CACXgK,WACA9H,QACCkD,KAAK5C,GACIA,GAAQ/E,SAKzB,CACEmI,IAAK,SACLvC,KAAM,eACNmD,aAAc,SACdV,MAAO,CACLC,MAAO,qBACPK,UAAU,EACVM,UAAW,OACXE,UAAW,OACXC,UAAW,KACX/I,QAAS,CACP,CAAEJ,KAAM,oBAAaoF,GAAI,UACzB,CAAEpF,KAAM,+BAAmBoF,GAAI,eAIrC,CACE8C,IAAK,2BACLD,UAAW,aACXtC,KAAM,kBACNmD,aAAc,EACdV,MAAO,CACLC,MAAO,4CACP5B,UAAU,EACV8F,IAAK,WACLC,IAAK,EACL9D,UAAU,EACV/C,KAAM,UAERkD,WAAY,CACVF,WAAY,CACV,CAAE3I,KAAM,eAAgBI,QAAS,CAAEwI,UAAW,aAIpD,CACEV,IAAK,2BACLvC,KAAM,SACNsC,UAAW,cACXG,MAAO,CACLC,MAAO,kBACPnD,KAAM,QACN+C,UAAW,aACXS,UAAU,EACVrG,UAAU,EACVoK,UAAW,QACXC,MAAO,IACPC,OAAQ,KAEVrE,YAAa,CACX,iBAAkB,uBAGtB,CACEJ,IAAK,OACLvC,KAAM,kBACNyC,MAAO,CACLC,MAAO,aACPuE,KAAM,EACNlE,UAAU,EACVF,UAAW,MAGf,CACEN,IAAK,yBACLvC,KAAM,eACNyC,MAAO,CACLC,MAAO,2BACPK,UAAU,EACVrG,UAAU,GAEZiG,YAAa,CACX,iBAAkB,sBAEpBuE,eAAgBA,CAAC3M,EAAYkC,EAAgBmH,IACtB,SAAdvL,KAAKqC,MAGhB,CACE6H,IAAK,aACLvC,KAAM,OACNyC,MAAO,CACLC,MAAO,0BACPiD,UAAU,EACV7E,UAAU,EACV8E,kBAAmB,CACjBC,SAAU,oBAEZ9C,UAAU,EACVgD,OAAQ,mBACRjD,YAAa,oBAEfoE,eAAgBA,CAAC3M,EAAYkC,EAAgBmH,IACtB,SAAdvL,KAAKqC,MAGhB,CACE6H,IAAK,yBACLvC,KAAM,eACNyC,MAAO,CACLC,MAAO,2BACPK,UAAU,EACVrG,UAAU,GAEZiG,YAAa,CACX,iBAAkB,sBAEpBuE,eAAgBA,CAAC3M,EAAYkC,EAAgBmH,IACtB,SAAdvL,KAAKqC,MAGhB,CACE6H,IAAK,aACLvC,KAAM,OACNyC,MAAO,CACLC,MAAO,0BACPiD,UAAU,EACV7E,UAAU,EACV8E,kBAAmB,CACjBC,SAAU,oBAEZ9C,UAAU,EACVgD,OAAQ,mBACRjD,YAAa,oBAEfoE,eAAgBA,CAAC3M,EAAYkC,EAAgBmH,IACtB,SAAdvL,KAAKqC,QAKpB,CACE2H,oBAAqB,qBACrBC,UAAW,wBACXC,IAAK,oBACLC,SAAU,CAAC,SACXC,MAAO,CACLC,MAAO,GACPK,UAAU,EACVrG,UAAU,GAEZiG,YAAa,CACX,iBAAkB,sBAEpBC,WAAY,CACV,CACEL,IAAK,GACLC,SAAU,CAAC,YACXC,MAAO,CACLM,UAAU,EACVrG,UAAU,EACVgG,MAAO,oDACPyE,cAAeA,CAAClH,EAAgB2D,KACVA,EAAMhB,WAAWX,KAClCwB,GAA2B,qBAAbA,EAAKlB,KAEVhI,MAAMiG,OAAO4G,UAAYnH,GAEvCoH,WAAazD,GACSA,GAAOhB,YAAYX,KACpCwB,GAA2B,qBAAbA,EAAKlB,MAEFhI,MAAMiG,QAAQ4G,WAGtC/E,oBAAqB,gBACrBO,WAAY,CACV,CACEL,IAAK,wBACLvC,KAAM,kBACNyC,MAAO,CACLC,MAAO,oEACP4E,UAAW,0CACXtH,KAAM,SACNuH,gBAAgB,EAChBzE,YAAa,oBACb+D,IAAK,EACLD,IAAK,WACL7D,UAAU,EACVrG,UAAU,EACVoE,UAAU,GAEZ6B,YAAa,CACX,iBAAkB,qBAClB,iBAAkB,6BAGtB,CACEJ,IAAK,mBACLY,cAAc,EACdnD,KAAM,WACNsC,UAAW,UAEb,CACEC,IAAK,8CACLvC,KAAM,iBACNmD,cAAc,EACdV,MAAO,CACL+E,UAAyB,SAAdnP,KAAKqC,KAChB+M,OAAQpP,KAAKkC,OAAO8F,mBAAmBG,QAAQkH,qCAC/CjN,QAAS,CACP,CAAEiI,MAAO,oHAAiEzC,MAAO,sHAEnFyF,OAAQA,CAAC9B,EAAY+D,KACnBC,WAAW,KACNvP,KAAKkC,OAAO8F,mBAAmBG,QAAQkH,uCACxCrP,KAAKkC,MAAM8F,kBAAkBG,OAAOkH,qCAAuCC,IAAW,IAG1F,IAAG,GAGPhF,YAAa,CACX,iBAAkB,6BAGtB,CACEJ,IAAK,UACLE,MAAO,CACLM,UAAU,EACVrG,UAAU,EACVgG,MAAO,yBACPmF,QAAS,iCACT/G,UAAU,GAEZ6B,YAAa,CACX,iBAAkB,qBAClB,iBAAkBmF,IACTzP,KAAKkC,OAAO8F,mBAAmBG,QAAQ4G,WAGlDpH,KAAM,QACN+H,WAAY,CACVvF,SAAU,CAAC,SACXH,oBAAqB,wBACrBO,WAAY,CACV,CACEL,IAAK,KACLvC,KAAM,gBACNsC,UAAW,aACXG,MAAO,CACLC,MAAO,yBACPI,YAAa,mCACbO,UAAW,QACXE,UAAW,QACXC,UAAW,KACXT,UAAU,EACVjC,UAAU,EACVrG,QAASpC,KAAK2E,gBAAgBgL,iBAAiBnJ,QAC7CkD,KAAK5C,GACIA,EAAO/E,QAIpBuI,YAAa,CACX,iBAAkB,qBAClB,iBAAkBmF,IACTzP,KAAKkC,OAAO8F,mBAAmBG,QAClC4G,YAIV,CACE7E,IAAK,QACLvC,KAAM,kBACNsC,UAAW,kBACXG,MAAO,CACLK,YAAa,4CACbJ,MAAO,kCACP1C,KAAM,SACN+C,UAAU,EACVrG,UAAU,EACVmK,IAAK,EACL/F,UAAU,EACV8F,IAAK,KAEPjE,YAAa,CACX,iBAAkB,qBAClB,iBAAkBmF,IACTzP,KAAKkC,OAAO8F,mBAAmBG,QAClC4G,YAIV,CACE7E,IAAK,UACLvC,KAAM,kBACNsC,UAAW,uBACXG,MAAO,CACLC,MAAO,mCACPhG,UAAU,EACVoE,UAAU,EACViC,UAAU,EACVkF,cAAc,GAEhBtF,YAAa,CACX,iBAAkB,qBAClB,iBAAkBmF,IACTzP,KAAKkC,OAAO8F,mBAAmBG,QAClC4G,WAGRc,MAAO,CACLC,OAASvE,KACMA,GAAOsB,aAAae,QACLE,IAAI,OAElBiC,aAAarJ,UACxBsJ,IAKC,MAAM5N,EAHJmJ,GAAOqC,QAAQrD,YAAYX,KACxBiE,GAAqB,OAAVA,EAAE3D,MAEYE,OAAOhI,QAErC,IAAI6N,EACA7N,aAAmB8N,IACrB9N,EAAQsE,UAAW3E,IACjBkO,EAAiBlO,EAAK6H,KACnBuG,GACCA,EAAO/I,KAAO4I,GAElBzE,GAAOsB,aAAaE,SAClBkD,GAAgBG,SAAW,EAAC,GAGvBC,MAAMC,QAAQlO,KACvB6N,EAAiB7N,EAAQwH,KACtBuG,GACCA,EAAOvI,QAAUoI,GAErBzE,GAAOsB,aAAaE,SAClBkD,GAAgBG,SAAW,GAAC,EAGjC,OAQf,CACElG,IAAK,OACLvC,KAAM,gBACNyC,MAAO,CACLC,MAAO,uDACP1C,KAAM,OACN8C,YAAa,oBACbC,UAAU,EACVM,UAAW,QACXE,UAAW,QACXC,UAAW,KACX1C,UAAU,EACVrG,QAASpC,KAAK2E,gBAAgB4L,UAAU/J,QACtCkD,KAAK5C,GACIA,EAAO/E,QAIpBuI,YAAa,CACX,iBAAkB,qBAClB,iBAAkB,6BAGtB,CACEJ,IAAK,WACLvC,KAAM,gBACNyC,MAAO,CACLC,MAAO,uDACP1C,KAAM,OACN8C,YAAa,oBACbO,UAAW,QACXE,UAAW,QACXR,UAAU,EACVS,UAAW,KACX1C,UAAU,EACVrG,QAAS,IAEXkI,YAAa,CACX,iBAAkB,qBAClB,iBAAkB,4BAEpBuF,MAAO,CACLC,OAASvE,IACP,MAAMiF,EACJjF,GAAOqC,QAAQrD,aAAa,GAAGsC,YAC5B2D,GAGLjF,EAAMnB,QACHmB,EAAMnB,MAAMhI,QAAUoO,EAAYT,aAAavJ,QAC9CiK,KAAUD,EAAY5I,QAAK,EAC3B8I,QAAoB,EACpBC,KAAWC,GACLA,EACK5Q,KAAK2E,gBACTkM,WAAW,CAAEC,QAASF,IACtBpK,QACCkD,KAAK5C,IAEAA,GAAQ/E,MAAM6H,KACZuG,GACC5E,GAAOrJ,OAAO6O,WAAaZ,EAAO/I,KAGtCmE,EAAMsB,aAAaE,SAAS,MAEvBjG,EAAO/E,QAIb,MAGV2E,WAAS,QAQ5B,CACEsD,oBAAqB,qBACrBC,UAAW,8BACXC,IAAK,oBACLC,SAAU,CAAC,SACXC,MAAO,CACLC,MAAO,GACPK,UAAU,EACVrG,UAAU,GAEZiG,YAAa,CACX,iBAAkB,sBAEpBC,WAAY,CACV,CACEL,IAAK,gBACLC,SAAU,CAAC,YACXC,MAAO,CACLC,MACE,oHACFyE,cAAeA,CAAClH,EAAgB2D,KACVA,EAAMhB,WAAWX,KAClCwB,GAA2B,cAAbA,EAAKlB,KAEVhI,MAAM6M,UAAYnH,GAEhCoH,WAAazD,GACSA,GAAOhB,YAAYX,KACpCwB,GAA2B,cAAbA,EAAKlB,MAEFhI,OAAO6M,WAG/B/E,oBAAqB,gBACrBO,WAAY,CACV,CACEL,IAAK,YACLY,cAAc,EACdnD,KAAM,WACNsC,UAAW,UAEb,CACEC,IAAK,QACLvC,KAAM,eACNyC,MAAO,CACLC,MAAO,6CACP1C,KAAM,SACN8C,YAAa,oBACbC,UAAU,EACVrG,UAAU,EACVoE,UAAU,EACV8F,IAAK,YAEPjE,YAAa,CACX,iBAAkB,qBAClB,iBAAkB,yBAO9B,CACEJ,IAAK,oBACLF,oBAAqB,gBACrBC,UAAW,oBACX4E,eAAgBA,IAAoB,SAAd7O,KAAKqC,KAC3B8H,SAAU,CAAC,SACXI,WAAY,CACV,CACEL,IAAK,eACLvC,KAAM,gBACNmD,aAAc,GACdV,MAAO,CACLC,MAAO,yBACP5B,UAAU,EACViC,UAAU,EACVM,UAAW,OACXE,UAAW,OACXC,UAAW,KACX6F,SAAUA,CAAC7J,EAAYoE,KACrBvL,KAAKmF,cAAgBgC,EACPnH,KAAKmF,eAAe8L,KAC/Bd,GACCA,EAAO/I,KAAOpH,KAAKkC,OAAO8F,mBAAmBE,eAG/CqD,EAAMsB,aAAaE,SAASxB,EAAMT,aAAY,EAGlD1I,QAAS,GACTqI,YAAa,oCAEfoF,MAAO,CACLC,OAASvE,IAEW,QAAdvL,KAAKqC,MAAgC,SAAdrC,KAAKqC,KAC9BkJ,EAAMnB,QACHmB,EAAMnB,MAAMhI,QAAUpC,KAAKmG,iCACzB+K,uBAAuB,CAAEjK,KAAM,EAAGkK,MAAO,SACzC3K,QACCkD,KAAK5C,GAEDA,GAAQ/E,MAAMoF,OAAOiK,OAClBhG,GACe,6BAAdA,EAAKzD,OACJ,MAIQ,SAAd3H,KAAKqC,MACdkJ,EAAMnB,QACHmB,EAAMnB,MAAMhI,QAAUpC,KAAKmG,iCACzBhB,cAAc,CAAE8B,KAAM,EAAGkK,MAAO,SAChC3K,QACCkD,KAAK5C,GAEDA,GAAQ/E,MAAMoF,OAAOiK,OAClBhG,GACe,6BAAdA,EAAKzD,OACJ,KAEP,IAMhB,CACEuC,IAAK,WACLvC,KAAM,iBACNsC,UAAW,SACX4E,eAAgBA,IAAoB,SAAd7O,KAAKqC,KAC3B8H,SAAU,CAAC,SACX0F,MAAO,CACLC,OAASvE,IACP,MAAM8F,EAAmBrR,KAAKiC,KAAK6L,IACjC,kCAEEuD,GACFA,EAAiBtB,aACdvJ,QACCiK,KAAUY,EAAiBzJ,QAAK,EAChC8I,QAEDhK,UAAW4K,IACV,MAAMC,EAAW,CACfC,WAAYxR,KAAKkC,OAAOsP,WACxBC,SAAUzR,KAAKkC,OAAOuP,UAExBlG,EAAMnB,QACHmB,EAAMnB,MAAMsH,aAAe,CAC1BtK,GAAIpH,KAAK+B,KAAK8H,KAAO,GACrB3B,aACElI,KAAKkC,OAAO8F,mBAAmBE,gBAC9BqJ,EACHhI,OAAQvJ,KAAKkC,OAAOqH,QAAU,KAEhCgC,EAAMnB,QACLmB,EAAMnB,MAAMuH,mBAAqB,CAChC1K,EACAmK,KAEA,MAAMQ,EAAgB,IAAKL,KAAaH,GACxC,OAAOpR,KAAKmG,iCACT0L,mCACCP,EACA,CAAErK,KAAMA,GAAQ,EAAGkK,MAAO,MAAOS,IAElCpL,QACCkD,KAAK5C,GACIA,GAAQ/E,MACf,GAGVwJ,EAAQ,IAAKA,EAAK,EACnB,GAITnB,MAAO,CACLC,MAAO,qBACPyH,QAAQ,EACRC,iBAAkB,GAClBC,cAAc,EACd5K,GAAIpH,KAAK+B,KAAK8H,KAAO,GACrB6H,aAAc,CACZtK,GAAIpH,KAAK+B,KAAK8H,KAAO,GACrB3B,aAAclI,KAAKkC,OAAO8F,mBAAmBE,aAC7CsJ,WAAYxR,KAAKkC,OAAOsP,WACxBC,SAAUzR,KAAKkC,OAAOuP,SACtBlI,OAAQvJ,KAAKkC,OAAOqH,QAAU,IAEhCkB,YACE,oFACFC,UAAU,EACVuH,YAAa,eACbN,mBAAoB,KACpBO,gBAAgB,EAChBC,aAAeC,IACbpS,KAAKqS,iBAAmBD,GAE1BE,YAAc3E,IACZ3N,KAAKkC,MAAM8F,kBAAkBC,SAAW0F,GAAS,IAEnD4E,QAAS,CACP,CACEvQ,KAAM,MACN0M,MAAO,OACPnD,MAAO,QACP5D,KAAM,SAER,CACE3F,KAAM,gBACN0M,MAAO,MACPnD,MAAO,aACPiH,mBAAmB,EACnB7K,KAAM,QAER,CACE3F,KAAM,iBACN0M,MAAO,MACPnD,MAAO,OACP5D,KAAM,QAER,CACE3F,KAAM,qBACN0M,MAAO,MACPnD,MAAO,SACP5D,KAAM,eACNc,UAAU,EACVrG,QAASpC,KAAKiF,wBAAwBwN,eAAejM,QACnDkD,KAAKgJ,GACIA,EAAehJ,IAAK5B,KACzB9F,KAAM8F,EAAM9F,KACZoF,GAAIU,EAAM+B,KAAO/B,EAAMV,SAK/B,CACEpF,KAAM,aACN0M,MAAO,MACPnD,MAAO,aACP5D,KAAM,QAER,CACE3F,KAAM,oBACN0M,MAAO,MACPjG,UAAU,EACV8C,MAAO,QACPgD,IAAK,UACLC,IAAK,EACLmE,UAAW,SACXhL,KAAM,SAER,CACE3F,KAAM,0BACN0M,MAAO,MACPnD,MAAO,WACP9C,UAAU,EACV8F,IAAK,UACLC,IAAK,EACLmE,UAAW,SACXhL,KAAM,SAER,CACE3F,KAAM,4BACN0M,MAAO,MACPjG,UAAU,EACV8C,MAAO,YACPgD,IAAK,UACLC,IAAK,EACLmE,UAAW,SACXhL,KAAM,SAER,CACE3F,KAAM,yBACN0M,MAAO,IACPnD,MAAO,UACP5D,KAAM,eAQtB,CAEAqG,mBAAmB4E,GACjB,MAAMC,EAAYD,EAAQhF,QAAQhG,OAAO4J,WACnCsB,EAAUF,EAAQhF,QAAQhG,OAAO6J,SAEvC,OACEoB,GACAC,GACAC,EAAMD,GAASE,SAASD,EAAMF,GAAWI,IAAI,EAAG,YAEzC,CAAEC,0BAA0B,GAE9B,IACT,CAEAjT,WACEkT,YAAY,KACVlK,QAAQC,IAAIlJ,KAAKkC,MAAK,EACrB,IACL,CAEUf,cAAciS,GACtBA,GAAGC,kBACHD,GAAGE,iBACe,SAAdtT,KAAKqC,KAITrC,KAAKwF,aAAa+N,QAChB,CACE5H,QAAU3L,KAAKkC,OAAOkF,GAElB,gDADA,0EAEJ4E,SAAU,sBACVC,SAAU,UACVuH,gBAAgB,EAChBC,YAAY,EACZvH,OAAQA,IAAMlM,KAAK0F,OAAOgO,cAAc,mBACxC3H,aAAc,gBAEhB,QAfA/L,KAAK0F,OAAOgO,cAAc,kBAiB9B,CAEQlL,4BACN,IAAImL,GAAa,GACC,SAAd3T,KAAKqC,MAAiC,QAAdrC,KAAKqC,QAC/BsR,GAAa,GAEf3T,KAAKoC,QAAQgC,UAAUC,SAAWsP,EAClC3T,KAAKmC,OAAOyR,QAASrI,IACnBvL,KAAK6T,oBAAoBtI,EAAOoI,EAAU,EAE9C,CAEQE,oBAAoBtI,EAA0Bb,GAChDa,GAAOhB,YAAYf,QACrB+B,GAAOhB,YAAYqJ,QAASE,GAC1B9T,KAAK6T,oBAAoBC,EAAUpJ,IAGlCa,EAAMmE,YAAoBnF,YAAYf,QAAU+B,EAAMnB,QACxDmB,EAAMnB,MAAMwF,eAAiBrE,EAAMnB,MAAMM,SAAWA,IACpDa,EAAMnB,MAAMwF,eAAiBrE,EAAMnB,MAAM/F,SAAWqG,GACpDa,EAAMmE,YAAoBnF,YAAYqJ,QAASE,GAC9C9T,KAAK6T,oBAAoBC,EAAUpJ,KAGjCa,EAAMnB,SACPmB,EAAMnB,MAAMwF,eAAiBrE,EAAMnB,MAAMM,SAAWA,IACpDa,EAAMnB,MAAMwF,eAAiBrE,EAAMnB,MAAM/F,SAAWqG,GAG3D,CAEQqJ,WACN,QACE/T,KAAKkC,OAAO8R,eAAeC,WAC3BjU,KAAKkC,OAAO8F,mBAAmBC,UAAUuB,SAEzCxJ,KAAK8F,mBAAmBoO,sBACtB,+JAEK,GAIX,CAEgB5S,YAAY8R,GAAQ,IAAAe,EAAAnU,KAAA,SAAA4G,KAAA,YAClCwM,EAAEC,kBACFD,EAAEE,iBAEF,IAAIc,GAAQ,EAIZ,GAFAA,EAAQD,EAAK9B,iBAAiB/Q,cAE1B6S,EAAKlS,KAAKoS,QAEZ,YADAC,QAAqBH,EAAKlS,MAI5B,IAAKkS,EAAKJ,aAAeK,EACvB,OAGF,MAAMG,EAAeJ,EAAKjS,MAAM8F,kBAAkBG,QAAQhB,MACtDoN,GAAgBA,EAAa/K,OAAS,GACxC+K,EAAaX,QAASY,IACM,KAAtBA,EAAY5M,QACd4M,EAAY5M,MAAQ,QAK1B,IACEuM,EAAK3S,WAAY,EACjB,MAAMiT,EAAmBN,EAAKO,yBACxBC,EAAc,IACfR,EAAKjS,MACR8F,kBAAmB,IACdmM,EAAKjS,MAAM8F,kBACdC,SAAUwM,IAGVN,EAAKpS,MAAM8H,UACb,EAAM9C,KACJoN,EAAK1P,wCAAwCmQ,KAAKD,UAGpD,EAAM5N,KACJoN,EAAK1P,wCAAwCiH,OAAOiJ,IAGxDR,EAAKrO,mBAAmB6G,qBACtBwH,EAAKpS,MAAM8H,IACP,wCACA,kDAENsK,EAAKzO,OAAOgO,cAAc,yBACnB1K,GAEP,MAAM6L,EADQ7L,GACc8L,OAAOC,cAEnC,GAAIF,GAAgBA,EAAaG,SAAS,oBAAqB,CAE7D,MAAMC,EAAcd,EAAKlS,MAAM6L,IAC7B,mCACClG,OAASuM,EAAKpS,MAAMiG,mBAAmBE,aACpCgN,EAAgBf,EAAKgB,sBAAsBF,GAG3CG,EAAuBP,EAAaQ,QACxC,mBACAH,GAEFf,EAAKrO,mBAAmBoO,sBAAsBkB,QAE9CjB,EAAKrO,mBAAmBoO,sBACtBW,IACCV,EAAKpS,MAAM8H,IACR,0CACA,6DAIRsK,EAAK3S,WAAY,EACjB2S,EAAK7O,IAAIqD,gBACV,EA/EiC,EAgFpC,CAEgBI,yBAAsB,IAAAuM,EAAAtV,KAAA,SAAA4G,KAAA,YACpC,IAAK0O,EAAKvT,MAAMiG,mBAAmBC,UAAUuB,OAC3C,OAAO2C,QAAQC,aAAQmJ,GAEzB,IACE,MAAMzO,QAAM,EAASC,KACnBuO,EAAK7Q,wCAAwC+Q,YAAY,CACvD3L,IAAKyL,EAAKvT,MAAM8H,IAChB5C,KAAM,EACNC,KAAM,UAGV,OAAOiF,QAAQC,QACbtF,GAAQ/E,MAAMoF,MAAMuC,IAAK0B,QAElBA,KACAA,EAAKqK,yBAKd,OAAOtJ,QAAQC,QAAQ,IACxB,EAtBmC,EAuBtC,CAEAsJ,wBAAwB9C,GACtB,OAAKvC,MAAMC,QAAQsC,EAAQhL,QAAmC,IAAzBgL,EAAQhL,MAAM4B,OAG5C,KAFE,CAAEf,UAAU,EAGvB,CAEUvF,YAAYkQ,GACpBA,EAAEC,kBACFD,EAAEE,iBACFtT,KAAKqC,KAAO,OACZrC,KAAKsI,YACLtI,KAAKuI,uBACLvI,KAAKwI,4BACLxI,KAAKoC,QAAU,CACbgC,UAAW,CACTC,UAAU,EACVoE,UAAU,EACVC,UAAW1I,KAAKkC,OAGtB,CAEUoB,cAAc8P,GACtBA,EAAEC,kBACCrT,MAAMkC,OAAO4B,sBACd9D,KAAK8F,mBAAmBoO,sBACtB,wHAIJlU,KAAKwF,aAAa+N,QAChB,CACE5H,QAAS,uDAA6B3L,KAAK+B,MAAMC,SACjDgK,SAAU,sBACVC,SAAU,UACV0J,YAAY,EACZnC,gBAAgB,EAChBC,YAAY,EACZvH,OAAQlM,KAAK4V,qBAAqBC,KAAK7V,KAAMA,KAAK+B,MAClDgK,aAAc,oBAEhB,QAEJ,CAEQ6J,qBAAqBE,GAC3B,SAAO/O,KACL/G,KAAKyE,wCAAwCsR,OAAOD,GAAKjM,KAAO,KAE/DmM,KAAK,KACJhW,KAAK8F,mBAAmB6G,qBAAqB,iCAC7C3M,KAAK0F,OAAOgO,cAAc,kBAAiB,GAE5CuC,MAAOjN,IACNhJ,KAAK8F,mBAAmBoO,sBACrBlL,GAA2B8L,OAAOC,eACnC,iCAAmB,EAG3B,CAEArS,gBAAgB0Q,GACdA,EAAEC,kBACFrT,KAAKwF,aAAa+N,QAChB,CACE5H,QAAS,kEAAmC3L,KAAK+B,MAAMC,SACvDgK,SAAU,sBACVC,SAAU,UACVuH,gBAAgB,EAChBC,YAAY,EACZvH,OAAQlM,KAAKkW,oBAAoBL,KAAK7V,KAAMA,KAAK+B,MACjDgK,aAAc,oBAEhB,OAEJ,CAEMmK,oBAAoBJ,GAAoB,IAAAK,EAAAnW,KAAA,SAAA4G,KAAA,YAC5C,UACc,EAASG,KACnBoP,EAAK1R,wCAAwC2R,mBAAmB,CAAEvM,IAAKiM,GAAKjM,KAAO,MAErFsM,EAAKrQ,mBAAmB6G,qBAAqB,iCAC7CwJ,EAAKzQ,OAAOgO,cAAc,yBAGrB1K,GACLmN,EAAKrQ,mBAAmBoO,sBACrBlL,GAA2B8L,OAAOC,eACnC,kCAEF,EAd0C,EAe9C,CAEMsB,kBAAkBP,GAAoB,IAAAQ,EAAAtW,KAAA,SAAA4G,KAAA,YAC1C,UACc,EAASG,KACnBuP,EAAK7R,wCAAwC8R,qBAAqB,CAAE1M,IAAKiM,GAAKjM,KAAO,MAEvFyM,EAAKxQ,mBAAmB6G,qBAAqB,iCAC7C2J,EAAK5Q,OAAOgO,cAAc,yBAGrB1K,GACLsN,EAAKxQ,mBAAmBoO,sBACrBlL,GAA2B8L,OAAOC,eACnC,kCAEF,EAdwC,EAe5C,CAEAjS,kBAAkBsQ,GAChBA,EAAEC,kBACFrT,KAAKwF,aAAa+N,QAChB,CACE5H,QAAS,6EAAyC3L,KAAK+B,MAAMC,SAC7DgK,SAAU,sBACVC,SAAU,UACVuH,gBAAgB,EAChBC,YAAY,EACZvH,OAAQlM,KAAKqW,kBAAkBR,KAAK7V,KAAMA,KAAK+B,MAC/CgK,aAAc,oBAEhB,OAEJ,CAEAkB,cAAc7F,GACZ,OAAOpH,KAAKgF,UAAU4E,KAAM9B,GAAUA,EAAM+B,MAAQzC,EACtD,CAEQsN,yBAGN,OAFiB1U,KAAKkC,OAAO8F,mBAAmBC,UAEhCyB,IAAI8M,IAClB,MAAMC,EAAuB,CAC3BC,WAAYF,EAAQE,YAAcF,EAAQpP,GAC1CuP,MAAOH,EAAQG,MACfC,SAAUJ,EAAQI,SAClBC,UAAWL,EAAQK,UACnBtN,OAAQiN,EAAQjN,QAElBuN,cAAOC,KAAKP,GAAS5C,QAAQ1J,IACvBA,EAAI8M,WAAW,kBACjBP,EAAgBvM,GAAOsM,EAAQtM,GAAG,GAG/BuM,GAEX,CAGQtB,sBAAsBF,GAC5B,MAAMgC,EAAkBjX,KAAKmF,eAAeyE,KACzCuG,GAAgBA,EAAO/I,KAAO6N,GAEjC,OAAOgC,EAAkBA,EAAgBjV,KAAO,gCAClD,CAEAkV,cACElX,KAAKiF,uBAAuBkS,UAC9B,CAAC5W,SAAAP,KAAA,mBAAAQ,iBAtiDUyD,EAAiC,EAAA1D,SAAAP,KAAA,UAAAW,EAAAyW,IAAA,MAAjCnT,EAAiCpD,UAAA,0CAAAC,OAAA,CAAAiB,KAAA,OAAAM,KAAA,QAAAgV,QAAA,CAAAhR,oBAAA,uBAAAtF,YAAA,EAAAuW,SAAA,CAAA7W,OAAA8W,MAAA,EAAAC,KAAA,EAAAC,OAAA,gvDAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDlH9ClX,MAAA,EAAAoX,GAAA,sBA6DApX,MAAA,EAAAqX,GAAA,aA0EArX,MAAA,EAAAsX,GAAA,wBAvIetX,MAAA,gBAAAmX,EAAAvV,MAAA,SAAAuV,EAAAvV,QAAAuV,EAAA7S,kBA6DTtE,MAAA,GAAAA,MAAA,gBAAAmX,EAAAvV,OAAAuV,EAAA7S,kBA2EHtE,MAAA,GAAAA,MAAA,OAAAmX,EAAA7S,kCCrDCiT,KAAYtX,KACZuX,KAAmBC,eACnBC,KAAYC,KACZC,KACAC,KAAkBC,mBAClBC,KAAaC,UACbC,KACAC,KACAC,KAEAC,MACAC,KAAYC,KACZC,KAAcC,KAAAC,IAAAC,KACdC,MAGAC,IAAYC,IACZ1Z,MAA8B2Z,OAAA,wOAAAC,gBAAA,WAcrBvV,CAAiC,sEChH1CxD,MAAA,eAIEA,MAAA,mBAAAA,MAAAgZ,GAAA,MAAAC,EAAAjZ,QAAA,OAASA,MAAAiZ,EAAAC,qBAAoB,GAE7BlZ,MAAA,aACAA,MAAA,sBACFA,aALEA,MAAA,8CAmDMA,MAAA,UACEA,MAAA,GACFA,2CADEA,MAAA,GAAAA,MAAA,UAAAmZ,EAAA,KAAAA,EAAA5X,KAAA,GAAA6X,EAAA,wCAXNpZ,MAAA,OAAAA,CAA0C,WAGtCA,MAAA,GACFA,QACAA,MAAA,WAAyBA,MAAA,GAAqCA,QAC9DA,MAAA,WACEA,MAAA,GACFA,QACAA,MAAA,WACEA,MAAA,EAAAqZ,GAAA,eAGFrZ,QACAA,MAAA,WAAyBA,MAAA,IAAsCA,QAC/DA,MAAA,YAAyBA,MAAA,uBAAyBA,QAClDA,MAAA,YAAyBA,MAAA,uBAA4BA,QACrDA,MAAA,YAAyBA,MAAA,uBAA8BA,QACvDA,MAAA,YAAyBA,MAAA,uBAA6BA,wDAfpDA,MAAA,GAAAA,MAAA,KAAAsZ,EAAAC,WAAA/S,KAAA,IAAA8S,EAAAC,WAAA7I,OAAA,IAAA8I,EAAA,OAEuBxZ,MAAA,GAAAA,MAAA,MAAAyZ,EAAAzE,eAAA,KAAAyE,EAAAzE,eAAAiB,YAEvBjW,MAAA,GAAAA,MAAA,UAAAyZ,GAAA,MAAAA,EAAAzE,eAAA,KAAAyE,EAAAzE,eAAAzT,KAAA,KAG0BvB,MAAA,GAAAA,MAAA,UAAAyZ,EAAAC,eAIH1Z,MAAA,GAAAA,MAAA,MAAAyZ,GAAA,MAAAA,EAAAzE,eAAA,KAAAyE,EAAAzE,eAAA2E,YACA3Z,MAAA,GAAAA,YAAA,KAAAyZ,EAAAvD,QACAlW,MAAA,GAAAA,YAAA,MAAAyZ,EAAAtD,WACAnW,MAAA,GAAAA,YAAA,YAAAyZ,EAAA,KAAAA,EAAAG,YACA5Z,MAAA,GAAAA,YAAA,MAAAyZ,EAAArD,uCAO/BpW,MAAA,YACEA,MAAA,GACFA,8BADEA,MAAA,GAAAA,MAAA,2CAAA6Z,EAAAN,WAAA,KAAAM,EAAAN,WAAAO,aAAA,8GCjCC,IAAMC,GAAqB,MAA5B,MAAOA,EAfb3a,cAgBEG,KAAAya,YAAqB,GACrBza,KAAAga,WAAyB,CACvB/S,KAAM,EACNkK,MAAO,GACPuJ,YAAa,EACbH,WAAY,GACZI,KAAM,OAER3a,KAAA4a,SAAU,EACV5a,KAAAgF,UAAmB,GACThF,KAAA4O,KAAc,GAKd5O,KAAA8F,sBAAqBvB,OAAOuB,KAC9B9F,KAAAsF,OAAMf,OAAOgB,OACXvF,KAAAyE,2CAA0CF,OAAOG,MACjD1E,KAAAmG,oCAAmC5B,OAAO6B,MAE7CnG,WAAQ,IAAAiE,EAAAlE,KAAA,SAAA4G,KAAA,YACb,MAAME,QAAM,EAASC,KAAc7C,EAAKO,wCAAwCuC,UAAU,CAAEC,KAAM,EAAGkK,MAAO,SAC5GjN,EAAKc,UAAa8B,GAAQ/E,MAAMoF,OAAS,GAEzCjD,EAAKiC,iCACchB,cAAc,CAAE8B,KAAM,EAAGkK,MAAO,SAChC3K,QACCkD,KAAK5C,IAED,MAAMsE,EAAOtE,GAAQ/E,MAAMoF,OAAOyC,KAC/BwB,GACCA,EAAKhE,KAAOlD,EAAKnC,MAAMiG,mBAAmBE,eACzC,GACFkD,GAAMpJ,OACPkC,EAAK2W,cAAgBzP,GAAMpJ,SAGjC0E,YACpBxC,EAAK4W,SAAS,EAAG,EAlBJ,EAmBf,CAEgBA,SAAS7T,EAAe,EAAGkK,EAAgB,IAAE,IAAApH,EAAA/J,KAAA,SAAA4G,KAAA,YAC3D,IACEmD,EAAK6Q,SAAU,EACf,MAAMG,EAAW,CACflR,IAAKE,EAAKhI,KAAK8H,IACf3C,KAAMiK,EACNlK,KAAMA,GAEFH,QAAM,EAASC,KACnBgD,EAAKtF,wCAAwC+Q,YAAYuF,IAG3D,GAAIjU,GAAUA,EAAO/E,MAAQ+E,EAAO/E,KAAKoF,MAIvC,OAFA4C,EAAK6E,KADQ9H,EAAO/E,KAAKoF,OAAS,QAElC4C,EAAKiQ,WAAalT,EAAO/E,KAAKiY,YAIhCjQ,EAAK6E,KAAO,GACZ7E,EAAKiQ,WAAalT,EAAO/E,KAAKiY,iBACvBhR,GACPC,QAAQC,IAAIF,WAEZe,EAAK6Q,SAAU,EACf7Q,EAAKzE,IAAIqD,gBACV,EA1B0D,EA2B7D,CAEDqS,aAAa/T,GACVjH,KAAK8a,SAAS7T,EAAMjH,KAAKga,WAAW7I,MACtC,CAEA8J,iBAAiBhU,GACfjH,KAAK8a,SAAS,EAAG7T,EACnB,CAEA0S,sBACEuB,QAAW,GAAGC,IAAYC,gBAAgBD,IAAYE,4CAA6C,kBAAmBrb,KAAK8F,mBAAoB,CAAC+D,IAAK7J,KAAK+B,KAAK8H,KACjK,CAACtJ,SAAAP,KAAA,mBAAAQ,iBAjFUga,EAAqB,EAAAja,SAAAP,KAAA,UAAAW,EAAAyW,IAAA,MAArBoD,EAAqB3Z,UAAA,wBAAAC,OAAA,CAAAiB,KAAA,QAAAhB,YAAA,EAAAuW,SAAA,CAAA7W,OAAA8W,MAAA,GAAAC,KAAA,GAAAC,OAAA,qxBAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,IDvClClX,MAAA,UAAAA,CAAyC,WAErCA,MAAA,EAAA6a,GAAA,gBASF7a,QACAA,MAAA,UAAAA,CAAoB,YACUA,MAAA,6BAAaA,QAAQA,MAAA,GACnDA,QACAA,MAAA,UAAAA,CAAuD,kBAQnDA,MAAA,6BAAAO,GAAA,OAAqB4W,EAAAoD,aAAAha,EAAoB,EAAzCP,CAA0C,4BAAAO,GAAA,OAEtB4W,EAAAqD,iBAAAja,EAAwB,GAO5CP,MAAA,WAAAA,CAAO,QAAPA,CAAO,WAE8BA,MAAA,UAAGA,QACpCA,MAAA,WAAkCA,MAAA,oBAAUA,QAC5CA,MAAA,YAAkCA,MAAA,qBAAWA,QAC7CA,MAAA,YAAkCA,MAAA,yBAAeA,QACjDA,MAAA,YAAkCA,MAAA,iBAAOA,QACzCA,MAAA,YAAkCA,MAAA,wBAAcA,QAChDA,MAAA,YAAkCA,MAAA,8BAAQA,QAC1CA,MAAA,YAAoCA,MAAA,kCAAWA,QAC/CA,MAAA,YAAoCA,MAAA,gCAASA,YAGjDA,MAAA,YACEA,MAAA,GAAA8a,GAAA,eAoBF9a,YAIJA,MAAA,GAAA+a,GAAA,0BAAA/a,OAMFA,gCAzEOA,MAAA,GAAAA,MAAA,aAAAmX,EAAAhJ,KAAA,KAAAgJ,EAAAhJ,KAAApF,QAU8C/I,MAAA,GAAAA,MAAA,IAAAmX,EAAAiD,cAAA,KAK/Cpa,MAAA,GAAAA,MAAA,WAAAA,MAAA,GAAAgb,IAAAhb,CAAsD,iBAAAmX,EAAAoC,WAAA,KAAApC,EAAAoC,WAAAO,aAAA,EAAtD9Z,CAAsD,gBAAtDA,CAAsD,iDAAtDA,CAAsD,qBAAAmX,EAAAoC,WAAA,KAAApC,EAAAoC,WAAA/S,OAAA,EAAtDxG,CAAsD,uBAAtDA,CAAsD,oBAAAA,MAAA,GAAAib,IAAtDjb,CAAsD,WAAAkb,EAAtDlb,CAAsD,SAAAmX,EAAAhJ,MA4B/BnO,MAAA,IAAAA,MAAA,UAAAmX,EAAAhJ,sBCjBzBgN,KAAalb,8BACbmb,KACAC,KACAC,KACAC,KACAhD,KAAcd,KAAAE,IAAAG,MAAA0D,cAAA,EAAAzC,gBAAA,WAKLgB,CAAqB,8CCrC9B/Z,MAAA,eAIEA,MAAA,mBAAAA,MAAAgZ,GAAA,MAAAC,EAAAjZ,QAAA,OAASA,MAAAiZ,EAAAC,qBAAoB,GAE7BlZ,MAAA,aACAA,MAAA,sBACFA,aALEA,MAAA,8CAgDEA,MAAA,OAAAA,CAA6C,WAEzCA,MAAA,GACFA,QACAA,MAAA,WAAyBA,MAAA,GAAaA,QACtCA,MAAA,WACEA,MAAA,mBACFA,QACAA,MAAA,WAAyBA,MAAA,GAAsBA,QAC/CA,MAAA,YAAyBA,MAAA,IAAqBA,QAC9CA,MAAA,YAAyBA,MAAA,IAAuBA,QAChDA,MAAA,YAAyBA,MAAA,uBAA4BA,QACrDA,MAAA,YAAyBA,MAAA,uBAA8BA,QACvDA,MAAA,YAAyBA,MAAA,uBAAyBA,QAClDA,MAAA,YAAyBA,MAAA,IAAmCA,QAE5DA,MAAA,YAAyBA,MAAA,uBAAsCA,QAE/DA,MAAA,YAAyBA,MAAA,uBAA6BA,QAEtDA,MAAA,YAAyBA,MAAA,uBAA4BA,QAErDA,MAAA,YAAyBA,MAAA,IAAoBA,QAC7CA,MAAA,YAAyBA,MAAA,IAAuBA,wDArB9CA,MAAA,GAAAA,MAAA,KAAAsZ,EAAAC,WAAA/S,KAAA,GAAA8S,EAAAC,WAAA7I,MAAA8I,EAAA,OAEuBxZ,MAAA,GAAAA,MAAAyZ,EAAA9S,IAEvB3G,MAAA,GAAAA,MAAA,IAAAA,MAAA,KAAAyZ,EAAAgC,iBAAA,yBAEuBzb,MAAA,GAAAA,MAAA,MAAAyZ,EAAA,KAAAA,EAAAxD,YACAjW,MAAA,GAAAA,MAAAyZ,EAAAE,YACA3Z,MAAA,GAAAA,MAAAyZ,EAAAiC,cACA1b,MAAA,GAAAA,YAAA,MAAAyZ,EAAAtD,WACAnW,MAAA,GAAAA,YAAA,MAAAyZ,EAAAkC,aACA3b,MAAA,GAAAA,YAAA,MAAAyZ,EAAAmC,QACA5b,MAAA,GAAAA,MAAAyZ,EAAAoC,qBAAA,GAEA7b,MAAA,GAAAA,YAAA,YAAAyZ,EAAA,KAAAA,EAAAqC,oBAEA9b,MAAA,GAAAA,YAAA,MAAAyZ,EAAAsC,YAEA/b,MAAA,GAAAA,YAAA,MAAAyZ,EAAAuC,WAEAhc,MAAA,GAAAA,MAAAyZ,EAAAwC,WACAjc,MAAA,GAAAA,MAAAyZ,EAAAyC,yCAO/Blc,MAAA,YACEA,MAAA,GACFA,8BADEA,MAAA,GAAAA,MAAA,2CAAA6Z,EAAAN,WAAA,KAAAM,EAAAN,WAAAO,aAAA,8GCpDC,IAAMqC,GAAqB,MAA5B,MAAOA,EAPb/c,cAQEG,KAAAwB,WAAY,EACZxB,KAAAga,WAAkB,CAChB/S,KAAM,EACNkK,MAAO,GACPuJ,YAAa,EACbH,WAAY,GACZI,KAAM,OAER3a,KAAA4a,SAAU,EACA5a,KAAA4O,KAAc,GAGhB5O,KAAAsF,OAAMf,OAAOgB,OACXvF,KAAAyE,2CAA0CF,OAAOG,MACjD1E,KAAA8F,sBAAqBvB,OAAOuB,KAEtC7F,WACED,KAAK8a,SAAS,EAChB,CAEAnB,sBACEuB,QAAW,GAAGC,IAAYC,gBAAgBD,IAAYE,wDAAyD,iBAAkBrb,KAAK8F,mBAAoB,CAAC+D,IAAK7J,KAAK+B,KAAK8H,KAC5K,CAEgBiR,SAAS7T,EAAe,EAAGkK,EAAgB,IAAE,IAAAjN,EAAAlE,KAAA,SAAA4G,KAAA,YAC3D,IACE1C,EAAK0W,SAAU,EACf,MAAMG,EAAW,CACflR,IAAK3F,EAAKnC,KAAK8H,IACf3C,KAAMiK,EACNlK,KAAMA,GAEFH,QAAM,EAASC,KACnB7C,EAAKO,wCAAwCoY,gBAAgB9B,IAG/D,GAAIjU,GAAUA,EAAO/E,MAAQ+E,EAAO/E,KAAKoF,MAIvC,OAFAjD,EAAK0K,KADQ9H,EAAO/E,KAAKoF,OAAS,QAElCjD,EAAK8V,WAAalT,EAAO/E,KAAKiY,YAIhC9V,EAAK0K,KAAO,GACZ1K,EAAK8V,WAAalT,EAAO/E,KAAKiY,iBACvBhR,GACPC,QAAQC,IAAIF,WAEZ9E,EAAK0W,SAAU,EACf1W,EAAKoB,IAAIqD,gBACV,EA1B0D,EA2B7D,CAGDqS,aAAa/T,GACVjH,KAAK8a,SAAS7T,EAAMjH,KAAKga,WAAW7I,MACtC,CAEA8J,iBAAiBhU,GACfjH,KAAK8a,SAAS,EAAG7T,EACnB,CAAC1G,SAAAP,KAAA,mBAAAQ,iBA7DUoc,EAAqB,EAAArc,SAAAP,KAAA,UAAAW,EAAAyW,IAAA,MAArBwF,EAAqB/b,UAAA,kBAAAC,OAAA,CAAAiB,KAAA,QAAAhB,YAAA,EAAAuW,SAAA,CAAA7W,OAAA8W,MAAA,GAAAC,KAAA,GAAAC,OAAA,osBAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,IDhClClX,MAAA,UAAAA,CAAyC,WAErCA,MAAA,EAAAqc,GAAA,gBASFrc,QACAA,MAAA,UAAAA,CAAuD,kBAUnDA,MAAA,6BAAAO,GAAA,OAAqB4W,EAAAoD,aAAAha,EAAoB,EAAzCP,CAA0C,4BAAAO,GAAA,OAEtB4W,EAAAqD,iBAAAja,EAAwB,GAO5CP,MAAA,UAAAA,CAAO,OAAPA,CAAO,UAEiCA,MAAA,SAAGA,QACvCA,MAAA,WAAoCA,MAAA,2BAAYA,QAChDA,MAAA,WACEA,MAAA,uDACFA,QACAA,MAAA,WAAoCA,MAAA,+CAAwBA,QAC5DA,MAAA,WAAoCA,MAAA,iBAAOA,QAC3CA,MAAA,WAAoCA,MAAA,qBAAWA,QAC/CA,MAAA,WAAoCA,MAAA,8BAAQA,QAC5CA,MAAA,WAAoCA,MAAA,oBAAOA,QAC3CA,MAAA,WAAoCA,MAAA,0BAASA,QAC7CA,MAAA,WAAoCA,MAAA,yCAAgBA,QACpDA,MAAA,WAAoCA,MAAA,iDAAwBA,QAC5DA,MAAA,WAAoCA,MAAA,2EAA6BA,QACjEA,MAAA,WAAoCA,MAAA,sEAA6BA,QACjEA,MAAA,WAAoCA,MAAA,0BAASA,QAC7CA,MAAA,WAAoCA,MAAA,eAAGA,YAG3CA,MAAA,YACEA,MAAA,GAAAsc,GAAA,eAyBFtc,YAIJA,MAAA,GAAAuc,GAAA,0BAAAvc,OAKFA,gCApFOA,MAAA,GAAAA,MAAA,aAAAmX,EAAAhJ,KAAA,KAAAgJ,EAAAhJ,KAAApF,QAYD/I,MAAA,GAAAA,MAAA,WAAAA,MAAA,GAAAgb,IAAAhb,CAAsD,SAAAmX,EAAAhJ,KAAtDnO,CAAsD,iBAAAmX,EAAAoC,WAAA,KAAApC,EAAAoC,WAAAO,aAAA,EAAtD9Z,CAAsD,gBAAtDA,CAAsD,YAAAmX,EAAApW,UAAtDf,CAAsD,iDAAtDA,CAAsD,qBAAAmX,EAAAoC,WAAA,KAAApC,EAAAoC,WAAA/S,OAAA,EAAtDxG,CAAsD,uBAAtDA,CAAsD,oBAAAA,MAAA,GAAAib,IAAtDjb,CAAsD,WAAAkb,EAAtDlb,CAAsD,SAAAmX,EAAAhJ,MAsC/BnO,MAAA,IAAAA,MAAA,UAAAmX,EAAAhJ,sBCvBjBgN,KAAalb,8BAAEmb,KAAoBC,KAAamB,KAASlB,KAAOC,KAAMhD,KAAcd,KAAAE,IAAAG,MAAA0D,cAAA,EAAAzC,gBAAA,WAEnFoD,CAAqB,8CCzBtBnc,MAAA,2CAAyEA,MAAA,+BAAAO,GAAAP,MAAAyc,GAAA,MAAApb,EAAArB,QAAA,OAAuBA,MAAAqB,EAAAqb,uBAAAnc,GAA8B,GAAEP,gCAA3FA,MAAA,OAAA8B,EAAAF,gCAKrC5B,MAAA,+CAAmBA,MAAA,OAAAiZ,EAAA0D,mCAFvB3c,MAAA,cACEA,MAAA,EAAA4c,GAAA,qBAGF5c,kCAIIA,MAAA,yCAAcA,MAAA,OAAAc,EAAA6b,mCAFlB3c,MAAA,eACEA,MAAA,EAAA6c,GAAA,qBAGF7c,SCuBD,IAAM8c,GAAgC,MAAvC,MAAOA,EAeZ1d,cAdWG,KAAAwd,WAAiB,GAGjBxd,KAAAyd,KAAO,CACf,CAAEC,MAAO,qBAAmBC,QAAS,wBAAyBnc,WAAW,GACzE,CAAEkc,MAAO,qCAAsBC,QAAS,wBAAyBnc,WAAW,GAC5E,CAAEkc,MAAO,mCAAqBC,QAAS,wBAAyBnc,WAAW,IAKnExB,KAAAsF,OAAMf,OAAOgB,OACbvF,KAAAoF,SAAQb,OAAOc,KAI1B,CAEApF,WAAQ,IAAAiE,EAAAlE,KACLA,KAAKoF,MAAMmB,YACVC,OACAE,UAAS,eAAAC,KAAAC,KAAC,UAAOC,GACZA,IACF3C,EAAK7B,KAAOwE,EAAOxE,KACnB6B,EAAK+Q,YAAcpO,EAAOxE,KAC1B6B,EAAKoB,IAAIqD,gBAEb,GAAC,gBAAAQ,GAAA,OAAAxC,EAAAyC,MAAApJ,KAAAqJ,UAAA,EANS,GAOb,CAEW8T,uBAAuBxP,GAC/B3N,KAAKod,UAAYzP,EACjB3N,KAAKsF,IAAIqD,eACX,CAACpI,SAAAP,KAAA,mBAAAQ,iBAlCU+c,EAAgC,EAAAhd,SAAAP,KAAA,UAAAW,EAAAyW,IAAA,MAAhCmG,EAAgC1c,UAAA,kCAAAE,YAAA,EAAAuW,SAAA,CAAA7W,OAAA8W,MAAA,GAAAC,KAAA,EAAAC,OAAA,8dAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ID3C7ClX,MAAA,qBAAAA,CAAqF,0BAC7DA,MAAA,GAAkCA,QACxDA,MAAA,6BAAAA,CAAyE,UAAzEA,CAAyE,cAAzEA,CAAyE,cAIjEA,MAAA,EAAAmd,GAAA,qBAGFnd,QACAA,MAAA,EAAAod,GAAA,gBAMApd,MAAA,EAAAqd,GAAA,gBAKFrd,qBApBkBA,MAAA,GAAAA,OAAA,MAAAmX,EAAAwF,UAAA,KAAAxF,EAAAwF,UAAApb,OAAA,qBASPvB,MAAA,GAAAA,MAAA,gBAAAmX,EAAAvV,MAMA5B,MAAA,GAAAA,MAAA,gBAAAmX,EAAAvV,sBCGbgW,KACAC,KAAkB5X,eAClB8X,KACAE,KAAYR,eACZS,KACAqD,KACAJ,KACAvC,IACApV,GACAuW,GAEAoC,IAAqBrD,OAAA,mJAAAC,gBAAA,WAaZ+D,CAAgC","names":["IcomLibsHasPermissionDirective","constructor","el","permissionService","this","ngOnInit","getPermission","action","nativeElement","style","setProperty","static","t","i0","i1","core","lG2","selectors","inputs","standalone","$event","_r8","ctx_r7","handlerCancel","_r10","ctx_r9","handlerSave","ctx_r6","isLoading","IComLibsFlashSaleGeneralComponent_ng_container_0_nz_page_header_1_nz_space_9_button_2_Template","IComLibsFlashSaleGeneralComponent_ng_container_0_nz_page_header_1_nz_space_9_button_4_Template","_r12","ctx_r11","IComLibsFlashSaleGeneralComponent_ng_container_0_nz_page_header_1_nz_space_9_Template","ctx_r3","data","name","form","model","fields","options","mode","IComLibsFlashSaleGeneralComponent_ng_container_0_nz_page_header_1_Template","ctx_r0","_r20","ctx_r19","handlerActivate","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_ng_container_1_button_1_Template","_r23","ctx_r22","handlerDeactivate","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_ng_container_2_button_1_Template","_r26","ctx_r25","handlerEdit","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_ng_container_3_button_1_Template","_r28","ctx_r27","handlerRemove","ctx_r17","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_ng_container_1_Template","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_ng_container_2_Template","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_ng_container_3_Template","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_button_5_Template","ctx_r13","status","is_transaction_exists","IComLibsFlashSaleGeneralComponent_div_1_nz_space_5_Template","ctx_r1","IComLibsFlashSaleGeneralComponent","_this","FormGroup","formState","disabled","iComLibsServicesProjectDynamicHomeService","inject","IComLibsServicesProjectDynamicHomeService","iComLibsServicesProjectFlashSaleService","IComLibsServicesProjectFlashSaleService","campaignService","IComLibsServicesProjectCampaignV3Service","productService","IComLibsServicesProductService","isLoadingDetails","allGroups","groupsSelectionChanged","BehaviorSubject","listInventory","route","ActivatedRoute","cdr","ChangeDetectorRef","modalService","NzModalService","router","Router","viewContainerRef","ViewContainerRef","IComMessageService","icomLibsDynamicComponentService","IcomLibsDynamicComponentService","destroyRef","DestroyRef","iComLibsServicesInventoryService","IComLibsServicesInventoryService","icomDetailFlashSale","EventEmitter","queryParams","pipe","takeUntilDestroyed","subscribe","_ref","_asyncToGenerator","params","result","lastValueFrom","listGroup","page","size","items","id","type_end_time","type_start_time","campaign_type","customer_group","config","operator","type","value","attribute","group","relationship","flash_sale_config","products","inventory_id","reward","reward_level","cloneDeep","setFields","updateSelectedGroups","updateFieldReadonlyStatus","required","mainModel","detectChanges","detail","emit","dataVoucherSelected","getListVoucherSelected","err","console","log","_x","apply","arguments","selectedGroupIds","groups","length","selectedGroupsWithDetails","map","groupId","find","_id","next","_this2","fieldGroupClassName","className","key","wrappers","props","label","expressions","fieldGroup","maxLength","placeholder","readonly","validation","errorPath","validators","defaultValue","multiple","viewValue","maxMultiSelectItems","labelProp","valueProp","item","index","functionAddNew","field","callback","modalRef","create","nzTitle","nzContent","AddEditFlashSaleModalComponent","nzViewContainerRef","nzCancelText","nzOkText","nzOkType","nzOnOk","Promise","resolve","instance","getContentComponent","onSave","take","_ref2","success","showAlertMessageDone","values","formControl","getRawValue","setValue","selectedGroupsWithNames","findGroupById","updateConfig","nzOkLoading","_x2","change","ShowTime","datepickerOptions","nzFormat","emitTimeLocal","format","event","parent","f","get","updateValueAndValidity","startTimeValidator","listMonth","ListDay","ListWeekly","ListHours","listMembersShip","listCity","max","min","labelType","width","height","rows","hideExpression","changeChecked","is_active","setChecked","addonText","outputNullable","disabled2","value2","is_accept_add_point_payment_by_point","checked","setTimeout","addText","props.required","fieldArray","getContributor","ignoreChange","hooks","onInit","valueChanges","selectedOptionValue","selectedOption","Observable","option","balance","Array","isArray","getPool","poolControl","startWith","distinctUntilChanged","switchMap","poolId","getSubPool","pool_id","sub_pool","emitList","some","listInventoryFlashSale","limit","filter","inventoryControl","source_inventory_idValue","dataTime","start_time","end_time","objectUpload","listOptionDropdown","filterRequest","getListProductFlashSaleOfInventory","import","nzOptionHeightPx","customOption","keyGetValue","nzServerSearch","callBackThis","thisComp","DropDownTableRef","changeItems","columns","ignoreParseNumber","asObservable","selectedGroups","inputType","control","startTime","endTime","dayjs","isBefore","add","startTimeInvalid5Minutes","setInterval","e","stopPropagation","preventDefault","confirm","nzMaskClosable","nzClosable","navigateByUrl","isReadonly","forEach","setReadonlyForField","subField","validate","config_layout","no_product","showAlertMessageError","_this3","valid","invalid","markFormGroupTouched","taiTroFields","taiTroField","filteredProducts","getFilteredProductData","requestData","edit","errorMessage","error","error_message","includes","inventoryId","inventoryName","findInventoryNameById","modifiedErrorMessage","replace","_this4","undefined","voucherList","product_detail","customDropdownValidator","nzOkDanger","processDeleteSection","bind","row","delete","then","catch","processChangeStatus","_this5","changeStatusActive","processDeactivate","_this6","changeStatusInactive","product","filteredProduct","product_id","price","quantity","sold_fake","Object","keys","startsWith","inventoryOption","ngOnDestroy","complete","Xpm","outputs","features","decls","vars","consts","template","rf","ctx","IComLibsFlashSaleGeneralComponent_ng_container_0_Template","IComLibsFlashSaleGeneralComponent_div_1_Template","IComLibsFlashSaleGeneralComponent_nz_spin_2_Template","FormlyModule","ReactiveFormsModule","i2","CommonModule","i3","NzTypographyModule","NzPageHeaderModule","i4","NzSpaceModule","i5","NzTabsModule","NzIconModule","NzCardModule","NzStepsModule","NzFormModule","i6","NzButtonModule","i7","i8","i9","NzDescriptionsModule","NzSpinModule","i10","styles","changeDetection","_r6","ctx_r5","downloadSampleFile","groupId_r10","isLast_r11","ProductTableComponent_tr_31_span_8_Template","ctx_r2","pagination","i_r8","data_r7","groups_detail","brand_name","sold_real","ctx_r4","total_rows","ProductTableComponent","displayData","total_pages","sort","loading","nameInventory","loadPage","dataBody","onPageChange","onPageSizeChange","uploadFile","environment","apiGatewayUrl","suffixCampaignV3","ProductTableComponent_button_2_Template","ProductTableComponent_tr_31_Template","ProductTableComponent_ng_template_32_Template","_c0","_c1","_r3","NzTableModule","NzPaginationModule","DecimalPipe","NgFor","NgIf","encapsulation","transaction_time","product_name","sale_price","total","discount_flash_sale","total_need_to_pay","pay_point","pay_cash","full_name","phone_number","HistoryTableComponent","transactionList","HistoryTableComponent_button_2_Template","HistoryTableComponent_tr_39_Template","HistoryTableComponent_ng_template_40_Template","DatePipe","_r4","handlerDetailFlashSale","inventory","IcomLibsFlashSaleDetailComponent_nz_tab_8_ng_template_1_Template","IcomLibsFlashSaleDetailComponent_nz_tab_9_ng_template_1_Template","IcomLibsFlashSaleDetailComponent","listOfData","tabs","title","content","IcomLibsFlashSaleDetailComponent_ng_template_7_Template","IcomLibsFlashSaleDetailComponent_nz_tab_8_Template","IcomLibsFlashSaleDetailComponent_nz_tab_9_Template"],"sourceRoot":"webpack:///","sources":["./libs/core/directives/permission.directive.ts","./libs/flash-sale/detail/src/general/general.component.html","./libs/flash-sale/detail/src/general/general.component.ts","./libs/flash-sale/detail/src/products/products.component.html","./libs/flash-sale/detail/src/products/products.component.ts","./libs/flash-sale/detail/src/history/history.component.html","./libs/flash-sale/detail/src/history/history.component.ts","./libs/flash-sale/detail/src/detail.component.html","./libs/flash-sale/detail/src/detail.component.ts"],"sourcesContent":["import { Directive, ElementRef, Input, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { PermissionService} from '../services/authenticate/permission.service';\n\n@Directive({\n  selector: '[icomLibsHasPermissionDirective]',\n  standalone: true\n})\nexport class IcomLibsHasPermissionDirective implements OnInit {\n  @Input() action!: string;\n\n  constructor(\n    private el: ElementRef, \n    private permissionService: PermissionService\n  ) {}\n\n  ngOnInit() {\n    if (!this.permissionService.getPermission(this.action)) {\n      this.el.nativeElement.style.setProperty('display', 'none', 'important');\n    }\n  }\n}\n\n","<ng-container *ngIf=\"(mode === 'add' || mode === 'edit') && !isLoadingDetails\">\n  <nz-page-header\n    *ngIf=\"data\"\n    class=\"h-full w-full flex flex-col !absolute top-0 left-0 !pb-4 !pt-0 !pl-4 !pr-0 !bg-[#f0f2f5]\"\n    nzBackIcon\n    (nzBack)=\"handlerCancel()\"\n  >\n    <nz-page-header-title>{{ data?.name || 'Tạo mới' }}</nz-page-header-title>\n\n    <nz-page-header-content\n      class=\"w-full h-full flex overflow-auto !py-0 !pl-0 !pr-4 flex-col\"\n    >\n      <form nz-form [formGroup]=\"form\">\n        <div class=\"flex flex-col\">\n          <div class=\"w-full items-center test\">\n            <formly-form\n              [model]=\"model\"\n              [fields]=\"fields\"\n              [form]=\"form\"\n              [options]=\"options\"\n            >\n            </formly-form>\n          </div>\n        </div>\n      </form>\n    </nz-page-header-content>\n\n    <nz-page-header-footer class=\"flex justify-end\">\n      <nz-space *ngIf=\"mode !== 'view'\">\n        <ng-container>\n          <button\n            *nzSpaceItem\n            nz-button\n            nzType=\"default\"\n            (click)=\"handlerCancel($event)\"\n          >\n            <span>Hủy</span>\n          </button>\n        </ng-container>\n\n        <ng-container>\n          <button\n            icomLibsHasPermissionDirective\n            [action]=\"'edit'\"\n            *nzSpaceItem\n            nz-button\n            [nzLoading]=\"isLoading\"\n            nzType=\"primary\"\n            (click)=\"handlerSave($event)\"\n          >\n            <span>Lưu</span>\n          </button>\n        </ng-container>\n      </nz-space>\n\n    \n    </nz-page-header-footer>\n  </nz-page-header>\n</ng-container>\n\n\n<div *ngIf=\"mode === 'view' && !isLoadingDetails\" class=\"flex flex-col w-full h-full bg-white !pl-0 pr-0\">\n  <form class=\"h-full overflow-hidden !pl-2\" nz-form [formGroup]=\"form\" [nzLayout]=\"'vertical'\">\n    <div class=\"w-full h-full flex overflow-auto !py-0 !pl-0 !pr-4 flex-col\">\n      <div class=\"w-full items-center test\">\n        <formly-form\n          [model]=\"model\"\n          [fields]=\"fields\"\n          [form]=\"form\"\n          [options]=\"options\"\n        >\n        </formly-form>\n      </div>\n    </div>\n  </form>\n  <nz-space *ngIf=\"mode && mode === 'view'\" class=\"flex justify-end  p-3 border\">\n    <ng-container *ngIf=\"model?.status !== 'ACTIVE'\">\n      <button\n        icomLibsHasPermissionDirective\n        [action]=\"'edit'\"\n        *nzSpaceItem\n        nz-button\n        nzType=\"default\"\n        (click)=\"handlerActivate($event)\"\n      >\n        <span>Kích hoạt</span>\n      </button>\n    </ng-container>\n  \n    <!-- Button Ngừng Kích hoạt - Hiển thị nếu status là 'active' -->\n    <ng-container *ngIf=\"model?.status === 'ACTIVE'\">\n      <button\n        icomLibsHasPermissionDirective\n        [action]=\"'edit'\"\n        *nzSpaceItem\n        nz-button\n        nzType=\"default\"\n        (click)=\"handlerDeactivate($event)\"\n      >\n        <span>Ngừng Kích hoạt</span>\n      </button>\n    </ng-container>\n\n    <ng-container *ngIf=\"!model?.is_transaction_exists\">\n      <button\n        icomLibsHasPermissionDirective\n        [action]=\"'edit'\"\n        *nzSpaceItem\n        nz-button\n        nzType=\"default\"\n        (click)=\"handlerEdit($event)\"\n      >\n        <span>Sửa</span>\n      </button>\n    </ng-container>\n  \n    <ng-container>\n      <button\n        icomLibsHasPermissionDirective\n        [action]=\"'delete'\"\n        *nzSpaceItem\n        nz-button\n        [nzLoading]=\"isLoading\"\n        [nzDanger]=\"true\"\n        nzType=\"primary\"\n        (click)=\"handlerRemove($event)\"\n      >\n        <span>Xóa</span>\n      </button>\n    </ng-container>\n  </nz-space>\n  \n</div>\n\n\n<nz-spin\n  *ngIf=\"isLoadingDetails\"\n  class=\"w-full h-full flex justify-center items-center\"\n  nzSimple\n  [nzSize]=\"'large'\"\n  ></nz-spin>","import { NzSpinModule } from 'ng-zorro-antd/spin';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  DestroyRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewContainerRef,\n  inject,\n} from '@angular/core';\nimport {\n  ReactiveFormsModule,\n  FormGroup,\n\n  ValidationErrors,\n  FormControl,\n} from '@angular/forms';\nimport {\n  FormlyModule,\n  FormlyFormOptions,\n  FormlyFieldConfig,\n  FieldTypeConfig,\n} from '@ngx-formly/core';\nimport * as dayjs from 'dayjs';\nimport {\n  listMonth,\n  ListDay,\n  ListWeekly,\n  ListHours,\n} from '../defines/code.define';\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { cloneDeep, set } from 'lodash';\nimport {\n  BehaviorSubject,\n  Observable,\n  distinctUntilChanged,\n  lastValueFrom,\n  map,\n  startWith,\n  switchMap,\n  take,\n} from 'rxjs';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  IComMessageService,\n  IcomLibsDynamicComponentService,\n} from '@icom/services/common';\nimport {\n  IComLibsServicesProjectDynamicHomeService,\n  IComLibsServicesProductService,\n  IComLibsServicesProjectCampaignV3Service,\n  IComLibsServicesProjectFlashSaleService,\n  IComLibsServicesInventoryService,\n} from '@icom/services/projects';\nimport { NzModalService } from 'ng-zorro-antd/modal';\nimport { CommonModule, NgIf, AsyncPipe } from '@angular/common';\nimport { IcomLibSetValueInListPipe } from 'libs/section/detail/src/pipes/get-value-in-list.pipe';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzCardModule } from 'ng-zorro-antd/card';\nimport { NzDescriptionsModule } from 'ng-zorro-antd/descriptions';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzTypographyModule } from 'ng-zorro-antd/typography';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { markFormGroupTouched } from '@icom/defines';\nimport { DropdownTableTypeComponent } from '@icom/components/formly';\nimport { AddEditFlashSaleModalComponent } from 'libs/flash-sale/group/src/modal/modal.component';\nimport { IcomLibsHasPermissionDirective } from '@icom/directive';\n\n@Component({\n  selector: 'icom-libs-flash_sale-detail-general',\n  templateUrl: './general.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    FormlyModule,\n    ReactiveFormsModule,\n    CommonModule,\n    NzTypographyModule,\n    NzPageHeaderModule,\n    NzSpaceModule,\n    NzTabsModule,\n    NzIconModule,\n    NzCardModule,\n    NgIf,\n    NzStepsModule,\n    NzFormModule,\n    NzButtonModule,\n    NzDescriptionsModule,\n    IcomLibSetValueInListPipe,\n    AsyncPipe,\n    NzSpinModule,\n    IcomLibsHasPermissionDirective\n  ],\n  styles: [\n    `\n      .test ::ng-deep formly-group {\n        display: flex;\n        flex-wrap: wrap;\n      }\n      .test ::ng-deep formly-group .test2 nz-form-label {\n        width: auto !important;\n      }\n    `,\n  ],\n})\nexport class IComLibsFlashSaleGeneralComponent implements OnInit, OnDestroy {\n  form = new FormGroup({});\n  options: FormlyFormOptions = {\n    formState: {\n      disabled: false,\n    },\n  };\n  protected isLoading!: boolean;\n  protected iComLibsServicesProjectDynamicHomeService = inject(\n    IComLibsServicesProjectDynamicHomeService\n  );\n  protected iComLibsServicesProjectFlashSaleService = inject(\n    IComLibsServicesProjectFlashSaleService\n  );\n  protected campaignService = inject(IComLibsServicesProjectCampaignV3Service);\n  protected productService = inject(IComLibsServicesProductService);\n  protected isLoadingDetails: boolean = true;\n\n  private allGroups: any[] = [];\n\n  @Input() data: any | undefined;\n  @Input() mode: any;\n\n  fields: FormlyFieldConfig[] = [];\n  protected model: any | undefined;\n  private groupsSelectionChanged = new BehaviorSubject<any[]>([]);\n  protected DropDownTableRef!: DropdownTableTypeComponent;\n  protected listInventory: any[] = [];\n\n  protected route = inject(ActivatedRoute);\n  protected cdr = inject(ChangeDetectorRef);\n  protected modalService = inject(NzModalService);\n  protected router = inject(Router);\n  protected viewContainerRef = inject(ViewContainerRef);\n  protected IComMessageService = inject(IComMessageService);\n  protected icomLibsDynamicComponentService = inject(IcomLibsDynamicComponentService);\n  protected destroyRef = inject(DestroyRef);\n  protected iComLibsServicesInventoryService = inject(IComLibsServicesInventoryService);\n\n  @Output() icomDetailFlashSale: EventEmitter<any> = new EventEmitter();\n\n  constructor() {\n    this.mode = 'view';\n\n    this.route.queryParams\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe(async (params) => {\n        try {\n          if (params) {\n            const result = await lastValueFrom(\n              this.iComLibsServicesProjectFlashSaleService.listGroup({\n                page: 1,\n                size: 99999,\n              })\n            );\n            this.allGroups = result?.data?.items || [];\n            if (!params.id) {\n              this.mode = 'add';\n              this.data = {\n                type_end_time: 'SPECTIME',\n                type_start_time: 'SPECTIME',\n                campaign_type: 'FLASHSALE',\n                customer_group: {\n                  config: [\n                    {\n                      operator: 'in',\n                      type: 'time_now',\n                      value: [],\n                      attribute: 'month',\n                      group: 'time',\n                      id: 'uuid1',\n                    },\n                    {\n                      operator: 'in',\n                      type: 'time_now',\n                      value: [],\n                      attribute: 'day',\n                      group: 'time',\n                      id: 'uuid2',\n                    },\n                    {\n                      operator: 'in',\n                      type: 'time_now',\n                      value: [],\n                      attribute: 'day_of_week',\n                      group: 'time',\n                      id: 'uuid3',\n                    },\n                    {\n                      operator: 'in',\n                      type: 'time_now',\n                      value: [],\n                      attribute: 'hour',\n                      group: 'time',\n                      id: 'uuid4',\n                    },\n                    {\n                      operator: 'in',\n                      type: 'customer_profile',\n                      value: [],\n                      attribute: 'membership_level',\n                      group: 'customer',\n                      id: 'uuid5',\n                    },\n                    {\n                      operator: 'in',\n                      type: 'customer_profile',\n                      value: [],\n                      attribute: 'address_city',\n                      group: 'customer',\n                      id: 'uuid6',\n                    },\n                  ],\n                  relationship:\n                    'uuid1 && uuid2  && uuid3 && uuid4 && uuid5 && uuid6',\n                },\n                flash_sale_config: {\n                  products: [],\n                  inventory_id: '',\n                  reward: {\n                    name: '+10',\n                    reward_level: '1',\n                    type: 'all',\n                    items: [\n                      {\n                        type: 'point_percent',\n                        value: null,\n                      },\n                    ],\n                  },\n                },\n              };\n              this.model = cloneDeep(this.data);\n\n              this.setFields();\n              this.updateSelectedGroups();\n              this.updateFieldReadonlyStatus();\n              this.options = {\n                formState: {\n                  disabled: false,\n                  required: false,\n                  mainModel: this.model,\n                },\n              };\n              this.isLoadingDetails = false;\n              this.cdr?.detectChanges();\n              return;\n            }\n            try {\n              const id = (params as any)?.id || '';\n              const result = await lastValueFrom(\n                this.iComLibsServicesProjectFlashSaleService.detail(+id)\n              );\n              this.data = result?.data || {};\n              this.icomDetailFlashSale.emit(this.data);\n              const dataVoucherSelected = await this.getListVoucherSelected();\n              if (dataVoucherSelected) {\n                this.data.flash_sale_config.products = dataVoucherSelected;\n              }\n              this.model = cloneDeep(this.data);\n              this.setFields();\n              this.updateFieldReadonlyStatus();\n              this.updateSelectedGroups();\n              this.options = {\n                formState: {\n                  disabled: false,\n                  required: false,\n                  mainModel: this.model,\n                },\n              };\n            } catch (err) {\n              console.log(err);\n            } finally {\n              this.isLoadingDetails = false;\n              this.cdr?.detectChanges();\n            }\n          }\n        } catch (err) {\n          this.isLoadingDetails = false;\n          this.cdr.detectChanges();\n        }\n      });\n  }\n\n  updateSelectedGroups() {\n    const selectedGroupIds = this.model?.groups as any[];\n    if (!selectedGroupIds || !selectedGroupIds.length) {\n      return;\n    }\n    const selectedGroupsWithDetails = selectedGroupIds?.map((groupId: any) => {\n      return (\n        this.allGroups.find((group) => group._id === groupId) || {\n          id: groupId,\n          name: 'Không xác định',\n        }\n      );\n    });\n    this.groupsSelectionChanged.next(selectedGroupsWithDetails);\n  }\n\n  protected setFields() {\n    const rewardIsActive = this.model?.reward?.is_active || false;\n    this.fields = [\n      {\n        fieldGroupClassName: 'flex flex-col',\n        className: 'basis-1/2',\n        key: '',\n        wrappers: ['group'],\n        props: {\n          label: 'Thông tin chung',\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n        fieldGroup: [\n          {\n            key: 'code',\n            className: 'basis-4/12',\n            type: 'input-custom',\n            props: {\n              label: 'Mã',\n              maxLength: 8,\n              placeholder: 'Nhập mã',\n              readonly: true,\n            },\n            validation: [\n              { name: 'noWhitespace', options: { errorPath: 'value' } },\n            ],\n          },\n          {\n            key: 'name',\n            className: 'basis-4/12',\n            type: 'input-custom',\n            props: {\n              label: 'Tên',\n              required: true,\n              maxLength: 50,\n              placeholder: 'Nhập tên',\n              readonly: true,\n            },\n            validators: {\n              validation: [\n                { name: 'noWhitespace', options: { errorPath: 'value' } },\n              ],\n            },\n          },\n          {\n            key: 'groups',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Nhóm Flash Sale',\n              multiple: true,\n              viewValue: 'name',\n              maxMultiSelectItems: 12,\n              readonly: true,\n              labelProp: 'name',\n              valueProp: '_id',\n              options: this.iComLibsServicesProjectFlashSaleService\n                .listGroup({ page: 1, size: 99999 })\n                .pipe(\n                  map((result) => {\n                    return (\n                      result?.data?.items?.map((item: any, index: number) => {\n                        return {\n                          ...item,\n                        };\n                      }) || []\n                    );\n                  })\n                ),\n              functionAddNew: (\n                field: FieldTypeConfig,\n                callback: () => void\n              ) => {\n                const modalRef = this.modalService.create({\n                  nzTitle: 'Thêm nhóm flash sale',\n                  nzContent: AddEditFlashSaleModalComponent,\n                  nzViewContainerRef: this.viewContainerRef,\n                  nzCancelText: 'Hủy',\n                  nzOkText: 'Lưu',\n                  nzOkType: 'primary',\n                  nzOnOk: () =>\n                    new Promise((resolve) => {\n                      const instance = modalRef.getContentComponent();\n                      instance.onSave\n                        .pipe(take(1))\n                        .subscribe(async (success: any) => {\n                          if (success) {\n                            this.IComMessageService.showAlertMessageDone(\n                              'Tạo nhóm flash sale thành công.'\n                            );\n                            resolve(true);\n                            const values = field.formControl.getRawValue();\n                            field.formControl.setValue([\n                              ...values,\n                              success?.data?._id,\n                            ]);\n                            const result = await lastValueFrom(\n                              this.iComLibsServicesProjectFlashSaleService.listGroup(\n                                { page: 1, size: 99999 }\n                              )\n                            );\n                            this.allGroups = result?.data?.items || [];\n                            const selectedValues = field?.formControl?.value;\n                            const selectedGroupsWithNames = selectedValues.map(\n                              (id: any) => {\n                                const groupInfo = this.findGroupById(id);\n                                return { id: id, name: groupInfo.name };\n                              }\n                            );\n                            this.groupsSelectionChanged.next(\n                              selectedGroupsWithNames\n                            );\n                            callback && callback();\n                            modalRef.updateConfig({ nzOkLoading: false });\n                          }\n                        });\n                      instance.handlerSave();\n                    }),\n                  nzOkLoading: false, // Cập nhật trạng thái loading dựa trên sự kiện onSave\n                });\n              },\n              placeholder: 'Chọn nhóm Flash Sale',\n              change: (field) => {\n                const selectedValues = field?.formControl?.value;\n                const selectedGroupsWithNames = selectedValues.map(\n                  (id: any) => {\n                    const groupInfo = this.findGroupById(id);\n                    return { id: id, name: groupInfo.name };\n                  }\n                );\n                this.groupsSelectionChanged.next(selectedGroupsWithNames);\n              },\n            },\n          },\n          {\n            key: 'start_time',\n            type: 'date',\n            props: {\n              label: 'Từ',\n              ShowTime: true,\n              required: true,\n              datepickerOptions: {\n                nzFormat: 'dd/MM/yyyy HH:mm',\n              },\n              readonly: true,\n              emitTimeLocal: true,\n              format: 'dd-MM-yyyy HH:mm',\n              placeholder: 'DD-MM-YYYY hh:mm',\n              change: (field: any, event: any) => {\n                const startField = field?.parent?.fieldGroup?.find(\n                  (f: any) => f.key === 'end_time'\n                );\n                if (startField) {\n                  const control = this.form.get('end_time');\n                  control?.updateValueAndValidity();\n                }\n              },\n            },\n            validators: {\n              validation: [this.startTimeValidator],\n            },\n          },\n          {\n            key: 'end_time',\n            type: 'date',\n            props: {\n              label: 'Đến',\n              required: true,\n              ShowTime: true,\n              format: 'dd-MM-yyyy HH:mm',\n              placeholder: 'DD-MM-YYYY hh:mm',\n              datepickerOptions: {\n                nzFormat: 'dd/MM/yyyy HH:mm',\n              },\n              readonly: true,\n              emitTimeLocal: true,\n              change: (field: any, event: any) => {\n                const startField = field?.parent?.fieldGroup?.find(\n                  (f: any) => f.key === 'start_time'\n                );\n                if (startField) {\n                  const control = this.form.get('start_time');\n                  control?.updateValueAndValidity();\n                }\n              },\n            },\n            validators: {\n              validation: [this.startTimeValidator],\n            },\n          },\n          {\n            key: 'customer_group.config[0].value',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Theo tháng',\n              multiple: true,\n              viewValue: 'value',\n              readonly: true,\n              labelProp: 'value',\n              valueProp: 'id',\n              options: listMonth(),\n              placeholder: 'Chọn tháng',\n            },\n          },\n          {\n            key: 'customer_group.config[1].value',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Theo ngày',\n              multiple: true,\n              viewValue: 'value',\n              readonly: true,\n              labelProp: 'value',\n              valueProp: 'id',\n              options: ListDay(),\n              placeholder: 'Chọn ngày',\n            },\n          },\n          {\n            key: 'customer_group.config[2].value',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Theo thứ',\n              multiple: true,\n              readonly: true,\n              viewValue: 'value',\n              labelProp: 'value',\n              valueProp: 'id',\n              options: ListWeekly(),\n              placeholder: 'Chọn thứ',\n            },\n          },\n          {\n            key: 'customer_group.config[3].value',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Theo giờ',\n              multiple: true,\n              readonly: true,\n              viewValue: 'value',\n              labelProp: 'value',\n              valueProp: 'id',\n              options: ListHours(),\n              placeholder: 'Chọn giờ',\n            },\n          },\n        ],\n      },\n      {\n        fieldGroupClassName: 'flex flex-col mt-2',\n        className: 'basis-1/2 pl-4 mt-2',\n        key: '',\n        wrappers: ['group'],\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n        fieldGroup: [\n          {\n            key: 'customer_group.config[4].value',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Hạng hội viên',\n              viewValue: 'value',\n              labelProp: 'value',\n              readonly: true,\n              valueProp: 'id',\n              multiple: true,\n              options: this.iComLibsServicesProjectDynamicHomeService\n                .listMembersShip()\n                .pipe(\n                  map((result) => {\n                    return result?.data;\n                  })\n                ),\n            },\n          },\n          {\n            key: 'customer_group.config[5].value',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Tỉnh/ thành phố',\n              viewValue: 'value',\n              labelProp: 'value',\n              valueProp: 'id',\n              multiple: true,\n              readonly: true,\n              options: this.iComLibsServicesProjectDynamicHomeService\n                .listCity()\n                .pipe(\n                  map((result) => {\n                    return result?.data;\n                  })\n                ),\n            },\n          },\n          {\n            key: 'status',\n            type: 'radio-custom',\n            defaultValue: 'ACTIVE',\n            props: {\n              label: 'Trạng thái',\n              readonly: true,\n              viewValue: 'name',\n              labelProp: 'name',\n              valueProp: 'id',\n              options: [\n                { name: 'Kích hoạt', id: 'ACTIVE' },\n                { name: 'Ngừng kích hoạt', id: 'INACTIVE' },\n              ],\n            },\n          },\n          {\n            key: 'config_layout.no_product',\n            className: 'basis-4/12',\n            type: 'nz-input-number',\n            defaultValue: 5,\n            props: {\n              label: 'Hiển thị trên trang chủ',\n              required: true,\n              max: 9999999999,\n              min: 3,\n              readonly: true,\n              type: 'number',\n            },\n            validators: {\n              validation: [\n                { name: 'noWhitespace', options: { errorPath: 'value' } },\n              ],\n            },\n          },\n          {\n            key: 'config_layout.header_img',\n            type: 'upload',\n            className: 'basis-6/12 ',\n            props: {\n              label: 'Ảnh banner',\n              size: 1024 * 1024,\n              className: 'w-[150px] ',\n              readonly: true,\n              disabled: true,\n              labelType: 'Image',\n              width: 375,\n              height: 100,\n            },\n            expressions: {\n              'props.disabled': 'formState.disabled',\n            },\n          },\n          {\n            key: 'note',\n            type: 'textarea-custom',\n            props: {\n              label: 'Ghi chú',\n              rows: 5,\n              readonly: true,\n              maxLength: 500,\n            },\n          },\n          {\n            key: 'creator_info.full_name',\n            type: 'input-custom',\n            props: {\n              label: 'Người tạo',\n              readonly: true,\n              disabled: true\n            },\n            expressions: {\n              'props.disabled': 'formState.disabled',\n            },\n            hideExpression: (model: any, formState: any, field: any) => {\n              return this.mode !== 'view';\n            },\n          },\n          {\n            key: 'created_at',\n            type: 'date',\n            props: {\n              label: 'Thời gian tạo',\n              ShowTime: true,\n              required: false,\n              datepickerOptions: {\n                nzFormat: 'dd/MM/yyyy HH:mm',\n              },\n              readonly: true,\n              format: 'dd-MM-yyyy HH:mm',\n              placeholder: 'DD-MM-YYYY hh:mm',\n            },\n            hideExpression: (model: any, formState: any, field: any) => {\n              return this.mode !== 'view';\n            },\n          },\n          {\n            key: 'updater_info.full_name',\n            type: 'input-custom',\n            props: {\n              label: 'Người sửa',\n              readonly: true,\n              disabled: true\n            },\n            expressions: {\n              'props.disabled': 'formState.disabled',\n            },\n            hideExpression: (model: any, formState: any, field: any) => {\n              return this.mode !== 'view';\n            },\n          },\n          {\n            key: 'updated_at',\n            type: 'date',\n            props: {\n              label: 'Thời gian sửa',\n              ShowTime: true,\n              required: false,\n              datepickerOptions: {\n                nzFormat: 'dd/MM/yyyy HH:mm',\n              },\n              readonly: true,\n              format: 'dd-MM-yyyy HH:mm',\n              placeholder: 'DD-MM-YYYY hh:mm',\n            },\n            hideExpression: (model: any, formState: any, field: any) => {\n              return this.mode !== 'view';\n            },\n          },\n        ],\n      },\n      {\n        fieldGroupClassName: 'flex flex-col mt-4',\n        className: 'basis-4/6  mt-4 test2',\n        key: 'flash_sale_config',\n        wrappers: ['group'],\n        props: {\n          label: '',\n          readonly: true,\n          disabled: true,\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n        fieldGroup: [\n          {\n            key: '',\n            wrappers: ['collapse'],\n            props: {\n              readonly: true,\n              disabled: true,\n              label: 'Tích điểm khi mua sản phẩm',\n              changeChecked: (value: boolean, field: any) => {\n                const fieldActive = field.fieldGroup.find(\n                  (item: any) => item.key === 'reward.is_active'\n                );\n                fieldActive.model.reward.is_active = value;\n              },\n              setChecked: (field: any) => {\n                const fieldActive = field?.fieldGroup?.find(\n                  (item: any) => item.key === 'reward.is_active'\n                );\n                return fieldActive?.model.reward?.is_active;\n              },\n            },\n            fieldGroupClassName: 'flex flex-col',\n            fieldGroup: [\n              {\n                key: 'reward.items[0].value',\n                type: 'nz-input-number',\n                props: {\n                  label: 'Tỷ lệ quy đổi điểm thưởng',\n                  addonText: 'VND = 1 điểm thưởng',\n                  type: 'number',\n                  outputNullable: true,\n                  placeholder: 'Nhập số',\n                  min: 1,\n                  max: 9999999999,\n                  readonly: true,\n                  disabled: true,\n                  required: true,\n                },\n                expressions: {\n                  'props.disabled': 'formState.disabled',\n                  'props.required': 'model?.reward?.is_active',\n                },\n              },\n              {\n                key: 'reward.is_active',\n                defaultValue: false,\n                type: 'checkbox',\n                className: 'hidden'\n              },\n              {\n                key: 'reward.is_accept_add_point_payment_by_point',\n                type: 'multi-checkbox',\n                defaultValue: false,\n                props: {\n                  disabled2: this.mode === 'view',\n                  value2: this.model?.flash_sale_config?.reward?.is_accept_add_point_payment_by_point,\n                  options: [\n                    { label: 'Không tích điểm cho các giao dịch thanh toán bằng điểm thưởng', value: 'Không tích điểm cho các giao dịch thanh toán bằng điểm thưởng' },\n                  ],\n                  change: (field: any, checked: any) => {\n                    setTimeout(() => {\n                      if(this.model?.flash_sale_config?.reward?.is_accept_add_point_payment_by_point) {\n                        this.model.flash_sale_config.reward.is_accept_add_point_payment_by_point = checked || false;\n                      }\n                    },\n                    200)\n                  }\n                },\n                expressions: {\n                  'props.required': 'model?.reward?.is_active',\n                },\n              },\n              {\n                key: 'sponsor',\n                props: {\n                  readonly: true,\n                  disabled: true,\n                  label: 'Nhà tài trợ',\n                  addText: 'Thêm nhà tài trợ',\n                  required: false,\n                },\n                expressions: {\n                  'props.disabled': 'formState.disabled',\n                  'props.required': () => {\n                    return this.model?.flash_sale_config?.reward?.is_active;\n                  },\n                },\n                type: 'array',\n                fieldArray: {\n                  wrappers: ['group'],\n                  fieldGroupClassName: 'flex row items-center',\n                  fieldGroup: [\n                    {\n                      key: 'id',\n                      type: 'select-custom',\n                      className: 'basis-6/12',\n                      props: {\n                        label: 'Nhà tài trợ',\n                        placeholder: 'Chọn nhà tài trợ',\n                        viewValue: 'title',\n                        labelProp: 'title',\n                        valueProp: 'id',\n                        readonly: true,\n                        required: true,\n                        options: this.campaignService.getContributor().pipe(\n                          map((result) => {\n                            return result.data;\n                          })\n                        ),\n                      },\n                      expressions: {\n                        'props.disabled': 'formState.disabled',\n                        'props.required': () => {\n                          return this.model?.flash_sale_config?.reward\n                            ?.is_active;\n                        },\n                      },\n                    },\n                    {\n                      key: 'value',\n                      type: 'nz-input-number',\n                      className: 'basis-6/12 pl-2',\n                      props: {\n                        placeholder: 'Nhập tỷ lệ tài trợ',\n                        label: 'Tỷ lệ tài trợ',\n                        type: 'number',\n                        readonly: true,\n                        disabled: true,\n                        min: 0,\n                        required: true,\n                        max: 100,\n                      },\n                      expressions: {\n                        'props.disabled': 'formState.disabled',\n                        'props.required': () => {\n                          return this.model?.flash_sale_config?.reward\n                            ?.is_active;\n                        },\n                      },\n                    },\n                    {\n                      key: 'balance',\n                      type: 'nz-input-number',\n                      className: 'basis-3/12 flex-none',\n                      props: {\n                        label: 'Tài khoản ký quỹ',\n                        disabled: true,\n                        required: true,\n                        readonly: true,\n                        ignoreChange: true,\n                      },\n                      expressions: {\n                        'props.disabled': 'formState.disabled',\n                        'props.required': () => {\n                          return this.model?.flash_sale_config?.reward\n                            ?.is_active;\n                        },\n                      },\n                      hooks: {\n                        onInit: (field: any) => {\n                          const form = field?.formControl?.parent;\n                          const fieldBControl = form?.get('id') as FormControl;\n\n                          fieldBControl.valueChanges.subscribe(\n                            (selectedOptionValue) => {\n                              const fieldBConfig =\n                                field?.parent?.fieldGroup?.find(\n                                  (f: any) => f.key === 'id'\n                                );\n                              const options = fieldBConfig?.props?.options;\n\n                              let selectedOption = undefined;\n                              if (options instanceof Observable) {\n                                options.subscribe((data) => {\n                                  selectedOption = data.find(\n                                    (option: any) =>\n                                      option.id === selectedOptionValue\n                                  );\n                                  field?.formControl?.setValue(\n                                    selectedOption?.balance || 0\n                                  );\n                                });\n                              } else if (Array.isArray(options)) {\n                                selectedOption = options.find(\n                                  (option) =>\n                                    option.value === selectedOptionValue\n                                );\n                                field?.formControl?.setValue(\n                                  selectedOption?.balance || 0\n                                );\n                              }\n                            }\n                          );\n                        },\n                      },\n                    },\n                  ],\n                },\n              },\n              {\n                key: 'pool',\n                type: 'select-custom',\n                props: {\n                  label: 'Loại điểm thưởng Cấp 1',\n                  type: 'text',\n                  placeholder: 'Cấp 1 (Pool)',\n                  readonly: true,\n                  viewValue: 'title',\n                  labelProp: 'title',\n                  valueProp: 'id',\n                  required: true,\n                  options: this.campaignService.getPool().pipe(\n                    map((result) => {\n                      return result.data;\n                    })\n                  ),\n                },\n                expressions: {\n                  'props.disabled': 'formState.disabled',\n                  'props.required': 'model?.reward?.is_active',\n                },\n              },\n              {\n                key: 'sub_pool',\n                type: 'select-custom',\n                props: {\n                  label: 'Loại điểm thưởng Cấp 2',\n                  type: 'text',\n                  placeholder: 'Cấp 2 (Pool)',\n                  viewValue: 'title',\n                  labelProp: 'title',\n                  readonly: true,\n                  valueProp: 'id',\n                  required: true,\n                  options: [],\n                },\n                expressions: {\n                  'props.disabled': 'formState.disabled',\n                  'props.required': 'model?.reward?.is_active',\n                },\n                hooks: {\n                  onInit: (field: FormlyFieldConfig) => {\n                    const poolControl =\n                      field?.parent?.fieldGroup?.[4].formControl;\n                    if (!poolControl) {\n                      return;\n                    }\n                    field.props &&\n                      (field.props.options = poolControl.valueChanges.pipe(\n                        startWith(poolControl.value),\n                        distinctUntilChanged(),\n                        switchMap((poolId) => {\n                          if (poolId) {\n                            return this.campaignService\n                              .getSubPool({ pool_id: poolId })\n                              .pipe(\n                                map((result) => {\n                                  if (\n                                    !result?.data?.find(\n                                      (option: any) =>\n                                        field?.model?.sub_pool === option.id\n                                    )\n                                  ) {\n                                    field.formControl?.setValue(null);\n                                  }\n                                  return result.data;\n                                })\n                              );\n                          } else {\n                            return [];\n                          }\n                        })\n                      )).subscribe();\n                  },\n                },\n              },\n            ],\n          },\n        ],\n      },\n      {\n        fieldGroupClassName: 'flex flex-col mt-4',\n        className: 'basis-2/6 pl-4  mt-4  test2',\n        key: 'flash_sale_config',\n        wrappers: ['group'],\n        props: {\n          label: '',\n          readonly: true,\n          disabled: true,\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n        fieldGroup: [\n          {\n            key: 'limit_product',\n            wrappers: ['collapse'],\n            props: {\n              label:\n                'Giới hạn số lượng mua của một khách hàng cho mỗi sản phẩm',\n              changeChecked: (value: boolean, field: any) => {\n                const fieldActive = field.fieldGroup.find(\n                  (item: any) => item.key === 'is_active'\n                );\n                fieldActive.model.is_active = value;\n              },\n              setChecked: (field: any) => {\n                const fieldActive = field?.fieldGroup?.find(\n                  (item: any) => item.key === 'is_active'\n                );\n                return fieldActive?.model?.is_active;\n              },\n            },\n            fieldGroupClassName: 'flex flex-col',\n            fieldGroup: [\n              {\n                key: 'is_active',\n                defaultValue: false,\n                type: 'checkbox',\n                className: 'hidden',\n              },\n              {\n                key: 'value',\n                type: 'input-custom',\n                props: {\n                  label: 'Số lượng giới hạn',\n                  type: 'number',\n                  placeholder: 'Nhập số',\n                  readonly: true,\n                  disabled: true,\n                  required: true,\n                  max: 9999999999,\n                },\n                expressions: {\n                  'props.disabled': 'formState.disabled',\n                  'props.required': 'model?.is_active',\n                },\n              },\n            ],\n          },\n        ],\n      },\n      {\n        key: 'flash_sale_config',\n        fieldGroupClassName: 'flex flex-col',\n        className: 'w-full mt-4 test2',\n        hideExpression: () => this.mode === 'view',\n        wrappers: ['group'],\n        fieldGroup: [\n          {\n            key: 'inventory_id',\n            type: 'select-custom',\n            defaultValue: [],\n            props: {\n              label: 'Kho sản phẩm',\n              required: true,\n              readonly: true,\n              viewValue: 'name',\n              labelProp: 'name',\n              valueProp: 'id',\n              emitList: (items: any, field: FormlyFieldConfig) => {\n                this.listInventory = items;\n                const found = this.listInventory?.some(\n                  (option) =>\n                    option.id === this.model?.flash_sale_config?.inventory_id\n                );\n                if (!found) {\n                  field.formControl?.setValue(field.defaultValue);\n                }\n              },\n              options: [],\n              placeholder: 'Chọn kho sản phẩm',\n            },\n            hooks: {\n              onInit: (field: FormlyFieldConfig) => {\n                // Check the mode and set the options accordingly\n                if (this.mode === 'add' || this.mode === 'edit') {\n                  field.props &&\n                    (field.props.options = this.iComLibsServicesInventoryService\n                      .listInventoryFlashSale({ page: 1, limit: 999999 })\n                      .pipe(\n                        map((result) => {\n                          return (\n                            result?.data?.items?.filter(\n                              (item: any) =>\n                                item.type === 'INVENTORY_TYPE_FLASHSALE'\n                            ) || []\n                          );\n                        })\n                      ));\n                } else if (this.mode === 'view') {\n                  field.props &&\n                    (field.props.options = this.iComLibsServicesInventoryService\n                      .listInventory({ page: 1, limit: 999999 })\n                      .pipe(\n                        map((result) => {\n                          return (\n                            result?.data?.items?.filter(\n                              (item: any) =>\n                                item.type === 'INVENTORY_TYPE_FLASHSALE'\n                            ) || []\n                          );\n                        })\n                      ));\n                }\n              },\n            },\n          },\n          {\n            key: 'products',\n            type: 'dropdown-table',\n            className: 'w-full',\n            hideExpression: () => this.mode === 'view',\n            wrappers: ['group'],\n            hooks: {\n              onInit: (field: FormlyFieldConfig) => {\n                const inventoryControl = this.form.get(\n                  'flash_sale_config.inventory_id'\n                );\n                if (inventoryControl) {\n                  inventoryControl.valueChanges\n                    .pipe(\n                      startWith(inventoryControl.value),\n                      distinctUntilChanged()\n                    )\n                    .subscribe((source_inventory_idValue: any) => {\n                      const dataTime = {\n                        start_time: this.model?.start_time,\n                        end_time: this.model?.end_time,\n                      };\n                      field.props &&\n                        (field.props.objectUpload = {\n                          id: this.data._id || '',\n                          inventory_id:\n                            this.model?.flash_sale_config?.inventory_id,\n                          ...dataTime,\n                          groups: this.model?.groups || [],\n                        }),\n                        field.props &&\n                        (field.props.listOptionDropdown = (\n                          page: number,\n                          filter?: any\n                        ): Observable<any> => {\n                          const filterRequest = { ...dataTime, ...filter };\n                          return this.iComLibsServicesInventoryService\n                            .getListProductFlashSaleOfInventory(\n                              source_inventory_idValue,\n                              { page: page || 1, limit: 15, ...filterRequest }\n                            )\n                            .pipe(\n                              map((result) => {\n                                return result?.data;\n                              })\n                            );\n                        });\n                      field = { ...field };\n                    });\n                }\n              },\n            },\n            props: {\n              label: 'Sản phẩm',\n              import: true,\n              nzOptionHeightPx: 72,\n              customOption: true,\n              id: this.data._id || '',\n              objectUpload: {\n                id: this.data._id || '',\n                inventory_id: this.model?.flash_sale_config?.inventory_id,\n                start_time: this.model?.start_time,\n                end_time: this.model?.end_time,\n                groups: this.model?.groups || [],\n              },\n              placeholder:\n                'Thêm voucher theo mã, tên voucher, mã sản phẩm của NCC',\n              readonly: true,\n              keyGetValue: 'inventory_id',\n              listOptionDropdown: null,\n              nzServerSearch: true,\n              callBackThis: (thisComp: any) => {\n                this.DropDownTableRef = thisComp;\n              },\n              changeItems: (event: any[]) => {\n                this.model.flash_sale_config.products = event || [];\n              },\n              columns: [\n                {\n                  name: 'STT',\n                  width: '60px',\n                  field: 'index',\n                  type: 'index',\n                },\n                {\n                  name: 'Mã MyPoint',\n                  width: '10%',\n                  field: 'product_id',\n                  ignoreParseNumber: true,\n                  type: 'text', // Loại hiển thị là text\n                },\n                {\n                  name: 'Tên voucher',\n                  width: '20%',\n                  field: 'name',\n                  type: 'text', // Loại hiển thị là text\n                },\n                {\n                  name: 'Nhóm Flash Sale',\n                  width: '20%',\n                  field: 'groups',\n                  type: 'multi-select',\n                  required: true,\n                  options: this.groupsSelectionChanged?.asObservable().pipe(\n                    map((selectedGroups) => {\n                      return selectedGroups.map((group) => ({\n                        name: group.name,\n                        id: group._id || group.id,\n                      }));\n                    })\n                  ),\n                },\n                {\n                  name: 'Tên NCC',\n                  width: '10%',\n                  field: 'brand_name',\n                  type: 'text',\n                },\n                {\n                  name: 'Giá flash sale',\n                  width: '10%',\n                  required: true,\n                  field: 'price',\n                  max: 999999999,\n                  min: 1,\n                  inputType: 'number',\n                  type: 'input', // Loại hiển thị là text\n                },\n                {\n                  name: 'Số lượng',\n                  width: '10%',\n                  field: 'quantity',\n                  required: true,\n                  max: 999999999,\n                  min: 1,\n                  inputType: 'number',\n                  type: 'input', // Loại hiển thị là text\n                },\n                {\n                  name: 'Đã bán ảo',\n                  width: '10%',\n                  required: true,\n                  field: 'sold_fake',\n                  max: 999999999,\n                  min: 1,\n                  inputType: 'number',\n                  type: 'input', // Loại hiển thị là text\n                },\n                {\n                  name: 'Hành động',\n                  width: '%',\n                  field: 'actions',\n                  type: 'action', // Loại hiển thị là text\n                },\n              ],\n            },\n          },\n        ],\n      },\n    ];\n  }\n\n  startTimeValidator(control: FormGroup): ValidationErrors | null {\n    const startTime = control.parent?.value?.start_time;\n    const endTime = control.parent?.value?.end_time;\n\n    if (\n      startTime &&\n      endTime &&\n      dayjs(endTime).isBefore(dayjs(startTime).add(5, 'minutes'))\n    ) {\n      return { startTimeInvalid5Minutes: true };\n    }\n    return null;\n  }\n\n  ngOnInit() {\n    setInterval(() => {\n      console.log(this.model);\n    }, 5000);\n  }\n\n  protected handlerCancel(e?: Event) {\n    e?.stopPropagation();\n    e?.preventDefault();\n    if (this.mode === 'view') {\n      this.router.navigateByUrl(`flash-sale/list`);\n      return;\n    }\n    this.modalService.confirm(\n      {\n        nzTitle: !this.model?.id\n          ? 'Bạn có muốn hủy thêm mới flash sale không?'\n          : 'Bạn có hủy bỏ thao tác ?',\n        nzOkText: 'Đồng ý',\n        nzOkType: 'primary',\n        nzMaskClosable: false,\n        nzClosable: true,\n        nzOnOk: () => this.router.navigateByUrl(`flash-sale/list`),\n        nzCancelText: 'Đóng',\n      },\n      'info'\n    );\n  }\n\n  private updateFieldReadonlyStatus() {\n    let isReadonly = true;\n    if (this.mode === 'edit' || this.mode === 'add') {\n      isReadonly = false;\n    }\n    this.options.formState.disabled = isReadonly;\n    this.fields.forEach((field) => {\n      this.setReadonlyForField(field, isReadonly);\n    });\n  }\n\n  private setReadonlyForField(field: FormlyFieldConfig, readonly: boolean) {\n    if (field?.fieldGroup?.length) {\n      field?.fieldGroup?.forEach((subField) =>\n        this.setReadonlyForField(subField, readonly)\n      );\n    }\n    if ((field.fieldArray as any)?.fieldGroup?.length && field.props) {\n      !field.props.ignoreChange && (field.props.readonly = readonly);\n      !field.props.ignoreChange && (field.props.disabled = readonly);\n      (field.fieldArray as any)?.fieldGroup?.forEach((subField: any) =>\n        this.setReadonlyForField(subField, readonly)\n      );\n    } else {\n      if (field.props) {\n        !field.props.ignoreChange && (field.props.readonly = readonly);\n        !field.props.ignoreChange && (field.props.disabled = readonly);\n      }\n    }\n  }\n\n  private validate(): boolean {\n    if (\n      this.model?.config_layout?.no_product >\n      this.model?.flash_sale_config?.products?.length\n    ) {\n      this.IComMessageService.showAlertMessageError(\n        'Số sản phẩm trong bảng cần lớn hơn hoặc bằng Số lượng hiển thị trên Trang chủ'\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  protected async handlerSave(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    let valid = true;\n\n    valid = this.DropDownTableRef.handlerSave();\n\n    if (this.form.invalid) {\n      markFormGroupTouched(this.form);\n      return;\n    }\n\n    if (!this.validate() || !valid) {\n      return;\n    }\n\n    const taiTroFields = this.model.flash_sale_config.reward?.items;\n    if (taiTroFields && taiTroFields.length > 0) {\n      taiTroFields.forEach((taiTroField: any) => {\n        if (taiTroField.value === '') {\n          taiTroField.value = null;\n        }\n      });\n    }\n\n    try {\n      this.isLoading = true;\n      const filteredProducts = this.getFilteredProductData();\n      const requestData = {\n        ...this.model,\n        flash_sale_config: {\n          ...this.model.flash_sale_config,\n          products: filteredProducts,\n        },\n      };\n      if (this.data?._id) {\n        await lastValueFrom(\n          this.iComLibsServicesProjectFlashSaleService.edit(requestData)\n        );\n      } else {\n        await lastValueFrom(\n          this.iComLibsServicesProjectFlashSaleService.create(requestData)\n        );\n      }\n      this.IComMessageService.showAlertMessageDone(\n        this.data?._id\n          ? 'Sửa flash sale thành công.'\n          : 'Tạo mới flash sale thành công.'\n      );\n      this.router.navigateByUrl(`flash-sale/list`);\n    } catch (err) {\n      const error = err as HttpErrorResponse;\n      const errorMessage = error?.error?.error_message;\n\n      if (errorMessage && errorMessage.includes('{inventory_name}')) {\n        // Lấy tên kho từ trường 'inventory_id'\n        const inventoryId = this.form?.get(\n          'flash_sale_config.inventory_id'\n        )?.value || this.data?.flash_sale_config?.inventory_id;\n        const inventoryName = this.findInventoryNameById(inventoryId);\n\n        // Thay thế {inventory_name} bằng tên kho\n        const modifiedErrorMessage = errorMessage.replace(\n          '{inventory_name}',\n          inventoryName\n        );\n        this.IComMessageService.showAlertMessageError(modifiedErrorMessage);\n      } else {\n        this.IComMessageService.showAlertMessageError(\n          errorMessage ||\n          (this.data?._id\n            ? 'Sửa flash sale thất bại.'\n            : 'Tạo mới flash sale thất bại.')\n        );\n      }\n    } finally {\n      this.isLoading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n  protected async getListVoucherSelected() {\n    if (!this.data?.flash_sale_config?.products?.length) {\n      return Promise.resolve(undefined);\n    }\n    try {\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectFlashSaleService.voucherList({\n          _id: this.data?._id,\n          page: 1,\n          size: 999999\n        })\n      );\n      return Promise.resolve(\n        result?.data?.items.map((item: any) => {\n          return {\n            ...item,\n            ...item.product_detail\n          };\n        })\n      );\n    } catch (err) {\n      return Promise.resolve([]);\n    }\n  }\n\n  customDropdownValidator(control: FormControl): any {\n    if (!Array.isArray(control.value) || control.value.length === 0) {\n      return { required: true };\n    }\n    return null;\n  }\n\n  protected handlerEdit(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.mode = 'edit';\n    this.setFields();\n    this.updateSelectedGroups();\n    this.updateFieldReadonlyStatus();\n    this.options = {\n      formState: {\n        disabled: false,\n        required: false,\n        mainModel: this.model,\n      },\n    };\n  }\n\n  protected handlerRemove(e: Event) {\n    e.stopPropagation();\n    if(this?.model?.is_transaction_exists) {\n      this.IComMessageService.showAlertMessageError(\n        'Flash sale đã có giao dịch thành công. Bạn không được phép sửa.'\n      );\n      return;\n    }\n    this.modalService.confirm(\n      {\n        nzTitle: `Bạn có chắc chắn muốn xóa ${this.data?.name} ?`,\n        nzOkText: 'Đồng ý',\n        nzOkType: 'primary',\n        nzOkDanger: true,\n        nzMaskClosable: false,\n        nzClosable: false,\n        nzOnOk: this.processDeleteSection.bind(this, this.data),\n        nzCancelText: 'Hủy bỏ',\n      },\n      'error'\n    );\n  }\n\n  private processDeleteSection(row: any | undefined) {\n    return lastValueFrom(\n      this.iComLibsServicesProjectFlashSaleService.delete(row?._id || '')\n    )\n      .then(() => {\n        this.IComMessageService.showAlertMessageDone('Thao tác thành công.');\n        this.router.navigateByUrl(`flash-sale/list`);\n      })\n      .catch((err) => {\n        this.IComMessageService.showAlertMessageError(\n          (err as HttpErrorResponse)?.error?.error_message ||\n          'Thao tác thất bại'\n        );\n      });\n  }\n\n  handlerActivate(e: Event): void {\n    e.stopPropagation();\n    this.modalService.confirm(\n      {\n        nzTitle: `Bạn có chắc chắn muốn kích hoạt ${this.data?.name} ?`,\n        nzOkText: 'Đồng ý',\n        nzOkType: 'primary',\n        nzMaskClosable: false,\n        nzClosable: false,\n        nzOnOk: this.processChangeStatus.bind(this, this.data),\n        nzCancelText: 'Hủy bỏ',\n      },\n      'info'\n    );\n  }\n\n  async processChangeStatus(row: any | undefined) {\n    try {\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectFlashSaleService.changeStatusActive({ _id: row?._id || '' }));\n\n      this.IComMessageService.showAlertMessageDone('Thao tác thành công.');\n      this.router.navigateByUrl(`flash-sale/list`);\n    }\n\n    catch (err) {\n      this.IComMessageService.showAlertMessageError(\n        (err as HttpErrorResponse)?.error?.error_message ||\n        'Thao tác thất bại'\n      );\n    };\n  }\n\n  async processDeactivate(row: any | undefined) {\n    try {\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectFlashSaleService.changeStatusInactive({ _id: row?._id || '' }));\n\n      this.IComMessageService.showAlertMessageDone('Thao tác thành công.');\n      this.router.navigateByUrl(`flash-sale/list`);\n    }\n\n    catch (err) {\n      this.IComMessageService.showAlertMessageError(\n        (err as HttpErrorResponse)?.error?.error_message ||\n        'Thao tác thất bại'\n      );\n    };\n  }\n\n  handlerDeactivate(e: Event): void {\n    e.stopPropagation();\n    this.modalService.confirm(\n      {\n        nzTitle: `Bạn có chắc chắn muốn ngừng kích hoạt ${this.data?.name} ?`,\n        nzOkText: 'Đồng ý',\n        nzOkType: 'primary',\n        nzMaskClosable: false,\n        nzClosable: false,\n        nzOnOk: this.processDeactivate.bind(this, this.data),\n        nzCancelText: 'Hủy bỏ',\n      },\n      'info'\n    );\n  }\n\n  findGroupById(id: string) {\n    return this.allGroups.find((group) => group._id === id);\n  }\n\n  private getFilteredProductData() {\n    const products = this.model?.flash_sale_config?.products as any[];\n\n    return products.map(product => {\n      const filteredProduct: any = {\n        product_id: product.product_id || product.id,\n        price: product.price,\n        quantity: product.quantity,\n        sold_fake: product.sold_fake,\n        groups: product.groups\n      };\n      Object.keys(product).forEach(key => {\n        if (key.startsWith('field_system')) {\n          filteredProduct[key] = product[key];\n        }\n      });\n      return filteredProduct;\n    });\n  }\n\n\n  private findInventoryNameById(inventoryId: string | undefined): string {\n    const inventoryOption = this.listInventory?.find(\n      (option: any) => option.id === inventoryId\n    );\n    return inventoryOption ? inventoryOption.name : 'Không xác định';\n  }\n\n  ngOnDestroy() {\n    this.groupsSelectionChanged.complete();\n  }\n}\n","<div class=\"w-full h-full flex flex-col\">\n  <div class=\"w-full justify-end flex my-2\">\n    <button\n      *ngIf=\"rows?.length\"\n      nz-button\n      [nzType]=\"'primary'\"\n      (click)=\"downloadSampleFile()\"\n    >\n      <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\n      Xuất file\n    </button>\n  </div>\n  <div class=\"w-full\">\n    <span class=\"font-semibold\">Kho sản phẩm:</span> {{ nameInventory }}\n  </div>\n  <div class=\"w-full h-full d-flex mt-4 overflow-hidden\">\n    <nz-table\n      #table\n      [nzScroll]=\"{ x: '1500px', y: 'calc(100vh - 380px)' }\"\n      [nzTotal]=\"pagination?.total_rows || 1\"\n      [nzPageSize]=\"10\"\n      [nzNoResult]=\"'Không có dữ liệu.'\"\n      [nzPageIndex]=\"pagination?.page || 1\"\n      (nzPageIndexChange)=\"onPageChange($event)\"\n      [nzFrontPagination]=\"false\"\n      (nzPageSizeChange)=\"onPageSizeChange($event)\"\n      nzShowSizeChanger\n      [nzPageSizeOptions]=\"[10, 20, 30, 40, 50]\"\n      class=\"h-full\"\n      [nzFooter]=\"footerTemplate\"\n      [nzData]=\"rows\"\n    >\n      <thead>\n        <tr>\n          <th nzWidth=\"5%\" class=\"text-xs\">STT</th>\n          <th nzWidth=\"15%\" class=\"text-xs\">Mã MyPoint</th>\n          <th nzWidth=\"20%\" class=\"text-xs\">Tên voucher</th>\n          <th nzWidth=\"10%\" class=\"text-xs\">Nhóm flash sale</th>\n          <th nzWidth=\"10%\" class=\"text-xs\">Tên NCC</th>\n          <th nzWidth=\"10%\" class=\"text-xs\">Giá flash sale</th>\n          <th nzWidth=\"10%\" class=\"text-xs\">Số lượng</th>\n          <th class=\"text-xs\" nzWidth=\"100px\">Đã bán thật</th>\n          <th class=\"text-xs\" nzWidth=\"100px\">Đã bán ảo</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let data of rows; index as i\">\n          <td class=\"text-xs !p-3\">\n            <!-- {{ (pagination.page - 1) * pagination.total_rows + i + 1 }} -->\n            {{ (pagination.page - 1) * (pagination.limit || 10) + i + 1 }}\n          </td>\n          <td class=\"text-xs !p-3\">{{ data.product_detail?.product_id }}</td>\n          <td class=\"text-xs !p-3 text-truncate\">\n            {{ data?.product_detail?.name }}\n          </td>\n          <td class=\"text-xs !p-3\">\n            <span *ngFor=\"let groupId of data.groups_detail; let isLast = last\">\n              {{ groupId?.name }}{{ isLast ? '' : ', ' }}\n            </span>\n          </td>\n          <td class=\"text-xs !p-3\">{{ data?.product_detail?.brand_name }}</td>\n          <td class=\"text-xs !p-3\">{{ data.price | number }}</td>\n          <td class=\"text-xs !p-3\">{{ data.quantity | number }}</td>\n          <td class=\"text-xs !p-3\">{{ data?.sold_real | number }}</td>\n          <td class=\"text-xs !p-3\">{{ data.sold_fake | number }}</td>\n        </tr>\n      </tbody>\n    </nz-table>\n  </div>\n  \n  <ng-template #footerTemplate>\n    <div class=\"footer-content\">\n      Tổng số bản ghi: {{ pagination?.total_rows || 0 }}\n    </div>\n  </ng-template>\n  \n</div>\n\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit, inject } from '@angular/core';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { NzPaginationModule } from 'ng-zorro-antd/pagination';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\nimport { DecimalPipe, NgFor, NgIf } from '@angular/common';\nimport { IComLibsServicesInventoryService, IComLibsServicesProjectFlashSaleService } from '@icom/services/projects';\nimport { lastValueFrom, map } from 'rxjs';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { uploadFile } from '@icom/defines';\nimport { environment } from 'libs/core/environments/environment';\nimport { IComMessageService } from '@icom/services/common';\nimport { FindValueByIdPipe } from '../pipes/ find-value-by-id.pipe';\n\ninterface ProductItem {\n}\n\ninterface Pagination {\n  page: number;\n  limit: number;\n  total_pages: number;\n  total_rows: number;\n  sort: string;\n}\n\n@Component({\n  selector: 'app-product-table',\n  templateUrl: './products.component.html',\n  standalone: true,\n  imports: [\n    NzTableModule, \n    NzPaginationModule, \n    DecimalPipe,\n    NgFor, \n    NgIf, \n    NzButtonModule,\n    FindValueByIdPipe\n  ], \n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ProductTableComponent implements OnInit {\n  displayData: any[] = [];\n  pagination: Pagination = {\n    page: 1,\n    limit: 10,\n    total_pages: 1,\n    total_rows: 10, // Giả sử tổng cộng có 20 sản phẩm\n    sort: 'asc'\n  };\n  loading = true;\n  allGroups: any[] = [];\n  protected rows: any[] = [];\n  protected nameInventory! : string;\n\n  @Input() data: any | undefined;\n  \n  protected IComMessageService = inject(IComMessageService);\n  private cdr = inject(ChangeDetectorRef);\n  protected iComLibsServicesProjectFlashSaleService = inject(IComLibsServicesProjectFlashSaleService);\n  protected iComLibsServicesInventoryService = inject(IComLibsServicesInventoryService);\n\n  async  ngOnInit() {\n    const result = await lastValueFrom(this.iComLibsServicesProjectFlashSaleService.listGroup({ page: 1, limit: 99999 }));\n    this.allGroups =  result?.data?.items || [];\n\n    this.iComLibsServicesInventoryService\n                      .listInventory({ page: 1, limit: 999999 })\n                      .pipe(\n                        map((result) => {\n                          \n                            const item = result?.data?.items?.find(\n                              (item: any) =>\n                                item.id === this.data?.flash_sale_config?.inventory_id\n                            ) || []\n                            if(item?.name) {\n                              this.nameInventory = item?.name;\n                            }\n                        })\n                      ).subscribe();\n    this.loadPage(1);\n  }\n\n  protected async loadPage(page: number = 1, limit: number = 10) {\n    try {\n      this.loading = true;\n      const dataBody = {\n        _id: this.data._id,\n        size: limit,\n        page: page,\n      };\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectFlashSaleService.voucherList(dataBody)\n      );\n\n      if (result && result.data && result.data.items) {\n        const rows = result.data.items || [];\n        this.rows = rows;\n        this.pagination = result.data.pagination;\n        return;\n      }\n\n      this.rows = [];\n      this.pagination = result.data.pagination;\n    } catch (err) {\n      console.log(err);\n    } finally {\n      this.loading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n onPageChange(page: number): void {\n    this.loadPage(page, this.pagination.limit);\n  }\n\n  onPageSizeChange(page: number): void {\n    this.loadPage(1, page);\n  }\n  \n  downloadSampleFile() {\n    uploadFile(`${environment.apiGatewayUrl}${environment.suffixCampaignV3}/flashsale/voucher/export`, 'DanhSachSanPham', this.IComMessageService, {_id: this.data._id});\n  }\n\n}\n","<div class=\"w-full h-full flex flex-col\">\n  <div class=\"w-full justify-end flex my-2\">\n    <button\n      *ngIf=\"rows?.length\"\n      nz-button\n      [nzType]=\"'primary'\"\n      (click)=\"downloadSampleFile()\"\n    >\n      <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\n      Xuất file\n    </button>\n  </div>\n  <div class=\"w-full h-full d-flex mt-4 overflow-hidden\">\n    <nz-table\n      #table\n      [nzScroll]=\"{ x: '1500px', y: 'calc(100vh - 350px)' }\"\n      [nzData]=\"rows\"\n      [nzTotal]=\"pagination?.total_rows || 1\"\n      [nzPageSize]=\"10\"\n      [nzLoading]=\"isLoading\"\n      [nzNoResult]=\"'Không có dữ liệu.'\"\n      [nzPageIndex]=\"pagination?.page || 1\"\n      (nzPageIndexChange)=\"onPageChange($event)\"\n      [nzFrontPagination]=\"false\"\n      (nzPageSizeChange)=\"onPageSizeChange($event)\"\n      nzShowSizeChanger\n      [nzPageSizeOptions]=\"[10, 20, 30, 40, 50]\"\n      class=\"h-full\"\n      [nzFooter]=\"footerTemplate\"\n      [nzData]=\"rows\"\n    >\n      <thead>\n        <tr>\n          <th class=\"text-xs\" nzWidth=\"100px\">STT</th>\n          <th class=\"text-xs\" nzWidth=\"300px\">Mã giao dịch</th>\n          <th class=\"text-xs\" nzWidth=\"150px\">\n            Thời gian giao dịch thành công\n          </th>\n          <th class=\"text-xs\" nzWidth=\"150px\">Mã sản phẩm trên MyPoint</th>\n          <th class=\"text-xs\" nzWidth=\"200px\">Tên NCC</th>\n          <th class=\"text-xs\" nzWidth=\"200px\">Tên voucher</th>\n          <th class=\"text-xs\" nzWidth=\"100px\">Số lượng</th>\n          <th class=\"text-xs\" nzWidth=\"100px\">Giá bán</th>\n          <th class=\"text-xs\" nzWidth=\"100px\">Tổng tiền</th>\n          <th class=\"text-xs\" nzWidth=\"200px\">Số tiền giảm giá</th>\n          <th class=\"text-xs\" nzWidth=\"150px\">Tổng tiền cần thanh toán</th>\n          <th class=\"text-xs\" nzWidth=\"150px\">Số điểm đã dùng để thanh toán</th>\n          <th class=\"text-xs\" nzWidth=\"150px\">Số tiền đã dùng để thanh toán</th>\n          <th class=\"text-xs\" nzWidth=\"150px\">Người mua</th>\n          <th class=\"text-xs\" nzWidth=\"150px\">SĐT</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let data of rows; let i = index\">\n          <td class=\"text-xs !p-3\">\n            {{ (pagination.page - 1) * pagination.limit + i + 1 }}\n          </td>\n          <td class=\"text-xs !p-3\">{{ data.id }}</td>\n          <td class=\"text-xs !p-3\">\n            {{ data.transaction_time | date : 'dd/MM/yyyy HH:mm' }}\n          </td>\n          <td class=\"text-xs !p-3\">{{ data?.product_id }}</td>\n          <td class=\"text-xs !p-3\">{{ data.brand_name }}</td>\n          <td class=\"text-xs !p-3\">{{ data.product_name }}</td>\n          <td class=\"text-xs !p-3\">{{ data.quantity | number }}</td>\n          <td class=\"text-xs !p-3\">{{ data.sale_price | number }}</td>\n          <td class=\"text-xs !p-3\">{{ data.total | number }}</td>\n          <td class=\"text-xs !p-3\">{{ data.discount_flash_sale || 0 }}</td>\n          <!-- Giả định discount là giảm giá -->\n          <td class=\"text-xs !p-3\">{{ data?.total_need_to_pay | number }}</td>\n          <!-- Giả định totalPayable là tổng tiền cần thanh toán -->\n          <td class=\"text-xs !p-3\">{{ data.pay_point | number }}</td>\n          <!-- Giả định payPoint là điểm đã dùng -->\n          <td class=\"text-xs !p-3\">{{ data.pay_cash | number }}</td>\n          <!-- Giả định payCash là tiền đã dùng -->\n          <td class=\"text-xs !p-3\">{{ data.full_name }}</td>\n          <td class=\"text-xs !p-3\">{{ data.phone_number }}</td>\n        </tr>\n      </tbody>\n    </nz-table>\n  </div>\n\n  <ng-template #footerTemplate>\n    <div class=\"footer-content\">\n      Tổng số bản ghi: {{ pagination?.total_rows || 0 }}\n    </div>\n  </ng-template>\n</div>\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit, inject } from '@angular/core';\nimport { DatePipe, DecimalPipe, NgFor, NgIf } from '@angular/common';\nimport { NzPaginationModule } from 'ng-zorro-antd/pagination';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { lastValueFrom } from 'rxjs';\nimport { IComLibsServicesProjectFlashSaleService } from '@icom/services/projects';\nimport { uploadFile } from '@icom/defines';\nimport { environment } from 'libs/core/environments/environment';\nimport { IComMessageService } from '@icom/services/common';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\n\ninterface Product {\n  id: number;\n  code: string;\n  time: string;\n  supplierCode: string;\n  voucherName: string;\n  supplierName: string;\n  price: number;\n  quantity: number;\n  soldFake: number;\n  soldReal: number;\n  total: number;\n}\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.component.html',\n  standalone: true,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [NzTableModule, NzPaginationModule, DecimalPipe, DatePipe,NgFor, NgIf, NzButtonModule], \n})\nexport class HistoryTableComponent implements OnInit {\n  isLoading = false;\n  pagination: any = {\n    page: 1,\n    limit: 10,\n    total_pages: 1,\n    total_rows: 10, // Giả sử tổng cộng có 20 sản phẩm\n    sort: 'asc'\n  };\n  loading = true;\n  protected rows: any[] = [];\n  @Input() data: any | undefined;\n  \n  private cdr = inject(ChangeDetectorRef);\n  protected iComLibsServicesProjectFlashSaleService = inject(IComLibsServicesProjectFlashSaleService);\n  protected IComMessageService = inject(IComMessageService);\n  \n  ngOnInit() {\n    this.loadPage(1);\n  }\n\n  downloadSampleFile() {\n    uploadFile(`${environment.apiGatewayUrl}${environment.suffixCampaignV3}/flashsale/voucher/transaction/export`, 'LichSuGiaoDich', this.IComMessageService, {_id: this.data._id});\n  }\n\n  protected async loadPage(page: number = 1, limit: number = 10) {\n    try {\n      this.loading = true;\n      const dataBody = {\n        _id: this.data._id,\n        size: limit,\n        page: page,\n      };\n      const result = await lastValueFrom(\n        this.iComLibsServicesProjectFlashSaleService.transactionList(dataBody)\n      );\n\n      if (result && result.data && result.data.items) {\n        const rows = result.data.items || [];\n        this.rows = rows;\n        this.pagination = result.data.pagination;\n        return;\n      }\n\n      this.rows = [];\n      this.pagination = result.data.pagination;\n    } catch (err) {\n      console.log(err);\n    } finally {\n      this.loading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n\n onPageChange(page: number): void {\n    this.loadPage(page, this.pagination.limit);\n  }\n\n  onPageSizeChange(page: number): void {\n    this.loadPage(1, page);\n  }\n\n}\n","<nz-page-header class=\"site-page-header h-full w-full flex flex-col !p-0\" nzBackIcon>\n  <nz-page-header-title>{{ inventory?.name || 'Tạo mới' }}</nz-page-header-title>\n  <nz-page-header-content class=\"w-full h-full !pt-0 flex overflow-hidden\">\n    <div class=\"h-full w-full\">\n      <nz-tabset>\n        <nz-tab nzTitle=\"Thông tin chung\">\n          <ng-template nz-tab>\n            <icom-libs-flash_sale-detail-general [mode]=\"mode\" class=\"h-full w-full\" (icomDetailFlashSale)=\"handlerDetailFlashSale($event)\"></icom-libs-flash_sale-detail-general>\n          </ng-template>\n        </nz-tab>\n        <nz-tab *ngIf=\"mode === 'view'\" nzTitle=\"Danh sách sản phẩm \">\n          <ng-template nz-tab>\n            <app-product-table [data]=\"inventory\"></app-product-table>\n          </ng-template>\n        </nz-tab>\n\n        <nz-tab *ngIf=\"mode === 'view'\" nzTitle=\"Lịch sử giao dịch\">\n          <ng-template nz-tab>\n            <app-history  [data]=\"inventory\"></app-history>\n          </ng-template>\n        </nz-tab>\n      </nz-tabset>\n    </div>\n  </nz-page-header-content>\n</nz-page-header>\n","import { NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, inject } from '@angular/core';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzTypographyModule } from 'ng-zorro-antd/typography';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { IComLibsFlashSaleGeneralComponent } from './general/general.component';\nimport { ProductTableComponent } from './products/products.component';\nimport { HistoryTableComponent } from './history/history.component';\nimport { ActivatedRoute, Route, Routes } from '@angular/router';\n\n@Component({\n  selector: 'icom-libs-flash-sale-detail',\n  templateUrl: './detail.component.html',\n  standalone: true,\n  imports: [\n    NzTypographyModule,\n    NzPageHeaderModule,\n    NzSpaceModule,\n    NzTabsModule,\n    NzIconModule,\n    NgIf,\n    NzTableModule,\n    NzSpinModule,\n    IComLibsFlashSaleGeneralComponent,\n    ProductTableComponent,\n    NzTabsModule,\n    HistoryTableComponent\n  ],\n  styles: [\n    `\n      .test ::ng-deep formly-group {\n        display: flex;\n        flex-wrap: wrap;\n      }\n    `,\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\n\nexport class IcomLibsFlashSaleDetailComponent {\n  protected listOfData: [] = [];\n  protected inventoryId: any;\n  protected inventory : any;\n  protected tabs = [\n    { title: 'Thông tin chung', content: 'Content of Tab Pane 1', isLoading: false },\n    { title: 'Danh sách đơn hàng', content: 'Content of Tab Pane 2', isLoading: false },\n    { title: 'Lịch sử giao dịch', content: 'Content of Tab Pane 3', isLoading: false }\n  ];\n\n  protected mode: 'view' | 'edit'  | 'add' | undefined;\n  \n  protected cdr = inject(ChangeDetectorRef);\n  protected route = inject(ActivatedRoute);\n\n\tconstructor() {\n    \n\t}\n\n\tngOnInit(): void {\n    this.route.queryParams\n    .pipe()\n    .subscribe(async (params) => {\n      if (params) {\n        this.mode = params['mode'];\n        this.inventoryId = params['mode'];\n        this.cdr.detectChanges();\n      }\n    });\n\t}\n\n  protected handlerDetailFlashSale(event: any) {\n    this.inventory = event;\n    this.cdr.detectChanges();\n  }\n}\n"],"x_google_ignoreList":[]}