"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([[516],{5516:(dt,M,r)=>{r.r(M),r.d(M,{IComLibsCampaignStatisticModule:()=>mt});var F=r(3651),m=r(6814),E=r(2787),S=r(5024),_=r(5861),t=r(5879),h=r(6223),x=r(2840),p=r(2682),I=r(551),z=r(6987),y=r(9691),d=r(3304),D=r(4729),R=r(9717),j=r(8111),A=r(855),N=r(1958);const U=function(){return["dd/mm/yyyy","dd/mm/yyyy"]};function P(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.handlerClick(a))}),t._UZ(2,"span",6)(3,"span",7),t.qZA(),t._UZ(4,"nz-range-picker",8),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("nzSize","default"),t.xp6(3),t.Q6J("nzPlaceHolder",t.DdM(4,U))("formControl",e.filter.get("date_range"))("nzRanges",e.ranges)}}let b=(()=>{class i{constructor(){this.ranges={"\u0110\u1ea7u tu\u1ea7n n\xe0y":[this.getStartOfWeek(),new Date],"\u0110\u1ea7u th\xe1ng n\xe0y":[this.getStartOfCurrentMonth(),new Date],"\u0110\u1ea7u th\xe1ng tr\u01b0\u1edbc":[this.getStartOfLastMonth(),new Date]},this.filter=new h.cw({date_range:new h.NI([this.getStartOfCurrentMonth(),new Date])}),this.icomFilter=new t.vpe,this.IComMessageService=(0,t.f3M)(R.Q),this.campaignService=(0,t.f3M)(D.ce)}ngOnInit(){const[e,n]=this.filter?.get("date_range")?.value;this.icomFilter.emit({start_time:d(e).utc().format(),end_time:d(n).endOf("day").utc().format()}),this.filter.valueChanges.pipe().subscribe(a=>{if(!a.date_range||!a.date_range?.length)return void this.icomFilter.emit({start_time:"",end_time:""});const[s,o]=a.date_range;console.log(o),this.icomFilter.emit({start_time:d(s).utc().format(),end_time:d(o).endOf("day").utc().format()})})}getStartOfWeek(){const e=new Date,n=e.getDay()||7;return 1!==n&&e.setHours(-24*(n-1)),e}getStartOfCurrentMonth(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}getStartOfLastMonth(){const e=new Date;return new Date(e.getFullYear(),e.getMonth()-1,1)}getEndOfLastMonth(){const e=this.getStartOfCurrentMonth();return new Date(e.getTime()-864e5)}handlerClick(e){var n=this;return(0,_.Z)(function*(){e.stopPropagation(),e.preventDefault();const a=new XMLHttpRequest;a.open("POST",n.campaignService.downloadFileTransactionDetail(),!0),a.responseType="blob";let s=localStorage?.getItem("token");for(;s?.includes('"');)s=s?.replace('"',"");a.setRequestHeader("Authorization",`Bearer ${s}`),a.onload=()=>{if(200===a.status){const o=new Blob([a.response],{type:"application/octet-stream"}),l=URL.createObjectURL(o),g=document.createElement("a"),L=a.getResponseHeader("Content-Disposition");console.log(L);let k="detail_transaction.xlsx";if(L){const T=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(L);null!=T&&T[1]&&(k=T[1].replace(/['"]/g,""))}g.href=l,g.download=k,document.body.appendChild(g),g.click(),URL.revokeObjectURL(l),document.body.removeChild(g),n.IComMessageService.showAlertMessageDone("T\u1ea3i file th\xe0nh c\xf4ng.")}else n.IComMessageService.showAlertMessageDone("T\u1ea3i file th\u1ea5t b\u1ea1i.")},a.onerror=function(){console.error("Request error")},a.setRequestHeader("Content-Type","application/json"),(0,j.xh)(n.filter.value),a.send(JSON.stringify(n.filter.value))})()}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["icom-libs-campaign-statistic-nav"]],inputs:{label:"label",ignoreFilter:"ignoreFilter"},outputs:{icomFilter:"icomFilter"},standalone:!0,features:[t.jDz],decls:5,vars:2,consts:[[1,"flex","w-full","h-full","justify-between"],[1,"flex","flex-col"],[1,"text-base"],["class","flex",4,"ngIf"],[1,"flex"],["nz-button","","nzShape","round",1,"mr-2",3,"nzSize","click"],["nz-icon","","nzType","file-excel","nzTheme","outline"],["nz-icon","","nzType","download","nzTheme","outline"],[3,"nzPlaceHolder","formControl","nzRanges"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA()(),t.YNc(4,P,5,5,"div",3),t.qZA()),2&n&&(t.xp6(3),t.Oqu(a.label),t.xp6(1),t.Q6J("ngIf",!a.ignoreFilter))},dependencies:[h.u5,h.JJ,h.UX,h.oH,p.Hb,p.uw,p.wS,m.O5,x.sL,x.ix,A.w,N.dQ,I.PV,I.Ls,z.S,y.LV],encapsulation:2})}return i})();var v=r(708),Z=r(1221);let w=(()=>{class i{constructor(){this.modalService=(0,t.f3M)(Z.Sf),this.viewContainerRef=(0,t.f3M)(t.s_b),this.campaignService=(0,t.f3M)(D.ce)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275dir=t.lG2({type:i,inputs:{filter:"filter",chart:"chart",annotations:"annotations",colors:"colors",dataLabels:"dataLabels",series:"series",stroke:"stroke",labels:"labels",legend:"legend",fill:"fill",tooltip:"tooltip",plotOptions:"plotOptions",responsive:"responsive",xaxis:"xaxis",yaxis:"yaxis",grid:"grid",states:"states",title:"title",subtitle:"subtitle",theme:"theme"}})}return i})(),B=(()=>{class i extends w{constructor(){super(),this.changeDetectorRef=(0,t.f3M)(t.sBO)}ngOnInit(){this.getDataChart()}getDataChart(){var e=this;return(0,_.Z)(function*(){try{const n=yield(0,v.n)(e.fetchDataByType(e.type||""));e.count=n?.data||0,e.changeDetectorRef?.detectChanges()}catch(n){console.log(n)}})()}fetchDataByType(e){let n;switch(e){case"total_campaign_active":n="/count-active";break;case"total_point_30_day":n="/total-rewardpoint";break;case"total_customer_join_30_day":n="/count-user";break;default:throw new Error("Invalid type for API call")}return this.campaignService.getListApiStatisticByPathCampaign(n)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["icom-libs-campaign-statistic-total"]],inputs:{ignoreFilter:"ignoreFilter",type:"type"},standalone:!0,features:[t.qOj,t.jDz],decls:7,vars:5,consts:[[1,"flex","flex-col","w-full","h-full","p-4",2,"background-color","#875fc0","background-image","linear-gradient(315deg, #875fc0 0%, #5346ba 74%)"],[1,"flex","text-white",3,"ignoreFilter","label"],[1,"flex","flex-col","h-full","w-full","items-center","justify-center"],[1,"mt-4"],[1,"text-white","text-xl"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"icom-libs-campaign-statistic-nav",1),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5),t.ALo(6,"number"),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("ignoreFilter",a.ignoreFilter)("label",a.title||""),t.xp6(4),t.hij(" ",t.lcZ(6,3,a.count||0)," "))},dependencies:[b,m.JJ],encapsulation:2,changeDetection:0})}return i})();var u=r(6903),Y=r(7398),f=r(2572),H=r(944),C=r(2669);function X(i,c){if(1&i&&(t.ynx(0),t._UZ(1,"nz-option",8),t.BQk()),2&i){const e=c.$implicit;t.xp6(1),t.Q6J("nzValue",null==e?null:e.code)("nzLabel",null==e?null:e.name)}}const V=function(){return["dd/mm/yyyy","dd/mm/yyyy"]};function W(i,c){if(1&i&&(t.TgZ(0,"div",9),t._UZ(1,"nz-range-picker",10),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("nzPlaceHolder",t.DdM(3,V))("formControl",e.dateRange)("nzPlacement","topRight")}}function $(i,c){1&i&&t._UZ(0,"nz-spin",11),2&i&&t.Q6J("nzSize","large")}function q(i,c){if(1&i&&(t.TgZ(0,"div",13),t._UZ(1,"nz-divider",14),t.TgZ(2,"span",15),t._uU(3),t.qZA(),t._UZ(4,"apx-chart",16),t.qZA()),2&i){const e=c.$implicit;t.xp6(3),t.Oqu(e.label),t.xp6(1),t.Q6J("series",e.series)("chart",e.chart)("xaxis",e.xaxis)("labels",e.labels)("stroke",e.stroke)("title",e.title)("dataLabels",e.dataLabels)("yaxis",e.yaxis)}}function G(i,c){if(1&i&&(t.ynx(0),t.YNc(1,q,5,9,"div",12),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chartConfigs)}}d.extend(H);let J=(()=>{class i{constructor(){this.nzModalData=(0,t.f3M)(Z.uB),this.chartConfigs=[],this.missions=[],this.dateRange=new h.NI([this.getStartOfCurrentMonth(),new Date]),this.cdr=(0,t.f3M)(t.sBO),this.campaignService=(0,t.f3M)(D.ce)}ngOnInit(){var e=this;return(0,_.Z)(function*(){const n=e.nzModalData.id||"";try{const a=yield(0,v.n)(e.campaignService.getListMissionByByCampaign({campaign_id:n}));e.missions=a?.data}catch{e.missions=[]}e.dateRange.valueChanges.pipe().subscribe(a=>{if(!a||!a?.length)return e.filter={start_time:"",end_time:""},void e.handlerMissionChange();const[s,o]=a;e.filter={start_time:d(s).utc().format(),end_time:d(o).endOf("day").utc().format()},e.handlerMissionChange()})})()}handlerMissionChange(){const e=this.missions.find(s=>s.code===this.selectedMission);this.chartConfigs=[];const a=this.splitStringByComma(e.path).map(s=>this.campaignService.getListApiStatisticByPathCampaign(`/mission-list/${s}`,{campaign_id:this.nzModalData.id,...this.filter}).pipe((0,Y.U)(o=>o.data)));switch(this.selectedMission){case"moi_ban_be":this.isLoading=!0,(0,f.a)(a).subscribe(s=>{const[o]=s;this.chartConfigs.push(this.configureBarChart(o,"S\u1ed1 kh\xe1ch tham gia, S\u1ed1 ng\u01b0\u1eddi \u0111\u01b0\u1ee3c m\u1eddi")),this.isLoading=!1,this.cdr.detectChanges()},s=>{this.isLoading=!1,this.cdr.detectChanges()});break;case"khao_sat":case"doi_uu_dai":case"xem_uu_dai":this.isLoading=!0,(0,f.a)(a).subscribe(s=>{const[o,l]=s;this.chartConfigs.push(this.configureBarChart(o,"S\u1ed1 kh\xe1ch tham gia")),this.chartConfigs.push(this.configureBarChart(l,"S\u1ed1 \u0111i\u1ec3m ghi nh\u1eadn")),this.isLoading=!1,this.cdr.detectChanges()},s=>{this.isLoading=!1,this.cdr.detectChanges()});break;case"mua_sam":this.isLoading=!0,(0,f.a)(a).subscribe(s=>{const[o,l]=s;this.chartConfigs.push(this.configureBarChart(o,"S\u1ed1 kh\xe1ch tham gia, S\u1ed1 l\u01b0\u1ee3t order")),this.chartConfigs.push(this.configureBarChart(l,"T\u1ed5ng doanh s\u1ed1 , Doanh s\u1ed1 trung b\xecnh theo kh\xe1ch tham gia")),this.isLoading=!1,this.cdr.detectChanges()},s=>{this.isLoading=!1,this.cdr.detectChanges()});break;case"nap_the":this.isLoading=!0,(0,f.a)(a).subscribe(s=>{const[o,l]=s;this.chartConfigs.push(this.configureBarChart(o,"S\u1ed1 l\u01b0\u1ee3t n\u1ea1p th\u1ebb, S\u1ed1 kh\xe1ch n\u1ea1p th\u1ebb")),this.chartConfigs.push(this.configureBarChart(l,"Doanh thu n\u1ea1p th\u1ebb")),this.isLoading=!1,this.cdr.detectChanges()},s=>{this.isLoading=!1,this.cdr.detectChanges()});break;case"check_in":this.isLoading=!0,(0,f.a)(a).subscribe(s=>{const[o,l]=s;this.chartConfigs.push(this.configureBarChart(o,"S\u1ed1 kh\xe1ch tham gia")),this.chartConfigs.push(this.configureBarChart(l,"S\u1ed1 voucher \u0111\xe3 th\u01b0\u1edfng")),this.isLoading=!1,this.cdr.detectChanges()},s=>{this.isLoading=!1,this.cdr.detectChanges()});break;case"mo_hop_qua":this.isLoading=!0,(0,f.a)(a).subscribe(s=>{const[o]=s;this.chartConfigs.push(this.configureBarChart(o,"M\u1edf h\u1ed9p qu\xe0")),this.isLoading=!1,this.cdr.detectChanges()},s=>{this.isLoading=!1,this.cdr.detectChanges()});break;default:console.log(`Chi\u1ebfn d\u1ecbch ${this.selectedMission} kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 ho\u1eb7c kh\xf4ng x\xe1c \u0111\u1ecbnh.`)}}configureBarChart(e=[],n){const a=e;return{series:this.configureSeries(a,"column"),chart:{height:350,type:"bar",stacked:this.determineChartType(a),toolbar:{show:!1}},xaxis:{categories:a.map(s=>s.date)},label:n,dataLabels:{enabled:!1},tooltip:{x:{format:"dd MMM yyyy"}}}}configureLineChart(e=[],n){const a=e;return{series:this.configureSeries(a,"line"),chart:{height:350,type:"line",stacked:this.determineChartType(a)},title:{text:n},xaxis:{categories:a.map(s=>s.date)},dataLabels:{enabled:!1},tooltip:{x:{format:"dd MMM yyyy"}}}}splitStringByComma(e){return e.split(",").map(n=>n.trim())}determineChartType(e){const[n,...a]=e;return!(!n||n?.items?.[0]?.type!==n?.items?.[1]?.type)}configureSeries(e,n){const a={};return e.forEach(o=>{o.items.forEach(l=>{a[l.name]||(a[l.name]=[])})}),e.forEach(o=>{const l=o.date;o.items.forEach(g=>{a[g.name].push({x:l,y:g?.value||g?.count})})}),Object.keys(a).map(o=>({data:a[o],type:n,name:o}))}getStartOfCurrentMonth(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-missions"]],standalone:!0,features:[t.jDz],decls:8,vars:5,consts:[[1,"flex","flex-col","w-full","h-full"],["nzPlaceHolder","Ch\u1ecdn nhi\u1ec7m v\u1ee5",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"flex","mt-4","w-full","h-full","justify-between"],[1,"flex","flex-col"],["class","flex",4,"ngIf"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],[4,"ngIf"],[3,"nzValue","nzLabel"],[1,"flex"],[3,"nzPlaceHolder","formControl","nzPlacement"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"],["class","w-full h-full mt-4",4,"ngFor","ngForOf"],[1,"w-full","h-full","mt-4"],[1,"my-2"],[1,"text-xs","font-semibold"],[1,"w-full","h-60",3,"series","chart","xaxis","labels","stroke","title","dataLabels","yaxis"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"nz-select",1),t.NdJ("ngModelChange",function(o){return a.selectedMission=o})("ngModelChange",function(){return a.handlerMissionChange()}),t.YNc(2,X,2,2,"ng-container",2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"div",4),t.YNc(5,W,2,4,"div",5),t.qZA(),t.YNc(6,$,1,1,"nz-spin",6),t.YNc(7,G,2,1,"ng-container",7),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngModel",a.selectedMission),t.xp6(1),t.Q6J("ngForOf",a.missions),t.xp6(3),t.Q6J("ngIf",a.chartConfigs&&(null==a.chartConfigs?null:a.chartConfigs.length)),t.xp6(1),t.Q6J("ngIf",a.isLoading),t.xp6(1),t.Q6J("ngIf",!a.isLoading))},dependencies:[y.LV,y.Ip,y.Vq,h.u5,h.JJ,h.On,u.X,u.x,m.O5,p.Hb,p.uw,p.wS,h.UX,h.oH,x.sL,z.S,z.g,m.ax,C.j,C.W],encapsulation:2,changeDetection:0})}return i})();function K(i,c){1&i&&t._UZ(0,"nz-spin",4),2&i&&t.Q6J("nzSize","large")}function tt(i,c){if(1&i&&t._UZ(0,"apx-chart",5),2&i){const e=t.oxw();t.Q6J("series",e.config.series)("chart",e.config.chart)("labels",e.config.labels)("responsive",e.config.responsive)("title",e.config.title)}}let O=(()=>{class i extends w{constructor(e){super(),this.ngZone=e,this.changeDetectorRef=(0,t.f3M)(t.sBO)}processBuildChart(e){const n=e.map(o=>o.total_reward_point)||[],a=e.map(o=>o.campaign_name)||[],s=e.map(o=>o.campaign_id)||[];this.config={series:n,chart:{type:"pie",width:"100%",height:"100%",events:{dataPointSelection:(o,l,g)=>{o.stopPropagation(),o.preventDefault(),this.handlerDataPointClick(s[g.dataPointIndex])}}},labels:a},this.changeDetectorRef.detectChanges()}getDataChart(){var e=this;return(0,_.Z)(function*(){try{e.isLoading=!0;const n=yield(0,v.n)(e.campaignService.getTotalRewardPointGroup(e.filter));e.processBuildChart(n?.data),e.changeDetectorRef.detectChanges()}catch(n){console.log(n)}finally{e.isLoading=!1,e.changeDetectorRef.detectChanges()}})()}handlerFilter(e){this.filter=e,this.getDataChart()}handlerDataPointClick(e){console.log(this.viewContainerRef);const n=this.modalService.create({nzTitle:"Chi ti\u1ebft b\xe1o c\xe1o chi\u1ebfn d\u1ecbch",nzContent:J,nzMaskClosable:!0,nzClosable:!0,nzWidth:968,nzZIndex:999,nzData:{id:e},nzOnCancel:()=>this.ngZone.run(()=>{n.destroy(),this.changeDetectorRef.detectChanges()}),nzFooter:[{label:"\u0110\xf3ng",onClick:()=>this.ngZone.run(()=>{n.destroy(),this.changeDetectorRef.detectChanges()})}]});setTimeout(()=>{this.changeDetectorRef.detectChanges(),n.containerInstance.cdr.detectChanges()},250)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.R0b))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["icom-libs-campaign-statistic-point-by-campaign"]],standalone:!0,features:[t.qOj,t.jDz],decls:4,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","p-4"],[1,"text-xs","font-semibold",3,"label","icomFilter"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],["class","flex flex-col w-full h-full overflow-hidden",3,"series","chart","labels","responsive","title",4,"ngIf"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"],[1,"flex","flex-col","w-full","h-full","overflow-hidden",3,"series","chart","labels","responsive","title"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"icom-libs-campaign-statistic-nav",1),t.NdJ("icomFilter",function(o){return a.handlerFilter(o)}),t.qZA(),t.YNc(2,K,1,1,"nz-spin",2),t.YNc(3,tt,1,5,"apx-chart",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("label","T\u1ed5ng s\u1ed1 \u0111i\u1ec3m th\u01b0\u1edfng theo chi\u1ebfn d\u1ecbch"),t.xp6(1),t.Q6J("ngIf",a.isLoading),t.xp6(1),t.Q6J("ngIf",!a.isLoading&&a.config))},dependencies:[C.j,C.W,m.O5,b,u.X,u.x],encapsulation:2,changeDetection:0})}return i})();function et(i,c){1&i&&t._UZ(0,"nz-spin",4),2&i&&t.Q6J("nzSize","large")}function nt(i,c){if(1&i&&t._UZ(0,"apx-chart",5),2&i){const e=t.oxw();t.Q6J("series",e.config.series)("chart",e.config.chart)("xaxis",e.config.xaxis)("title",e.config.title)}}let Q=(()=>{class i extends w{constructor(e){super(),this.ngZone=e,this.changeDetectorRef=(0,t.f3M)(t.sBO)}processBuildChart(e){this.config={series:[{name:"Ng\u01b0\u1eddi tham gia",data:e.map(n=>n.count_user),campaign_id:e.map(n=>n.campaign_id)},{name:"Ng\u01b0\u1eddi \u0111\u01b0\u1ee3c th\u01b0\u1edfng",data:e.map(n=>n.count_user_reward),campaign_id:e.map(n=>n.campaign_id)}],chart:{type:"bar",height:"100%",toolbar:{show:!1},fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",events:{dataPointSelection:(n,a,s)=>{n.stopPropagation(),n.preventDefault(),this.handlerDataPointClick(s.w.config.xaxis.id[s.dataPointIndex])}}},xaxis:{categories:e.map(n=>n.campaign_name),id:e.map(n=>n.campaign_id)},yaxis:{title:{text:"S\u1ed1 l\u01b0\u1ee3ng ng\u01b0\u1eddi d\xf9ng"}},dataLabels:{enabled:!1}}}getDataChart(){var e=this;return(0,_.Z)(function*(){try{e.isLoading=!0;const n=yield(0,v.n)(e.campaignService.getCountCustomerByCampaign(e.filter));e.processBuildChart(n?.data),e.changeDetectorRef.detectChanges()}catch(n){console.log(n)}finally{e.isLoading=!1,e.changeDetectorRef.detectChanges()}})()}handlerFilter(e){this.filter=e,this.getDataChart()}handlerDataPointClick(e){console.log(this.viewContainerRef);const n=this.modalService.create({nzTitle:"Chi ti\u1ebft b\xe1o c\xe1o chi\u1ebfn d\u1ecbch",nzContent:J,nzMaskClosable:!0,nzClosable:!0,nzWidth:968,nzZIndex:999,nzData:{id:e},nzOnCancel:()=>this.ngZone.run(()=>{n.destroy(),this.changeDetectorRef.detectChanges()}),nzFooter:[{label:"\u0110\xf3ng",onClick:()=>this.ngZone.run(()=>{n.destroy(),this.changeDetectorRef.detectChanges()})}]});this.changeDetectorRef.detectChanges(),n.containerInstance.cdr.detectChanges()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.R0b))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["icom-libs-campaign-statistic-success_campaign"]],standalone:!0,features:[t.qOj,t.jDz],decls:4,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","p-4"],[1,"text-xs","font-semibold",3,"label","icomFilter"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],["class","flex flex-col w-full h-full",3,"series","chart","xaxis","title",4,"ngIf"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"],[1,"flex","flex-col","w-full","h-full",3,"series","chart","xaxis","title"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"icom-libs-campaign-statistic-nav",1),t.NdJ("icomFilter",function(o){return a.handlerFilter(o)}),t.qZA(),t.YNc(2,et,1,1,"nz-spin",2),t.YNc(3,nt,1,4,"apx-chart",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("label","Th\u1ed1ng k\xea kh\xe1ch h\xe0ng theo chi\u1ebfn d\u1ecbch"),t.xp6(1),t.Q6J("ngIf",a.isLoading),t.xp6(1),t.Q6J("ngIf",!a.isLoading&&a.config))},dependencies:[C.j,C.W,m.O5,b,u.X,u.x],encapsulation:2,changeDetection:0})}return i})();function it(i,c){1&i&&(t.ynx(0),t._UZ(1,"icom-libs-campaign-statistic-total",7),t.BQk()),2&i&&(t.xp6(1),t.Q6J("type","total_campaign_active")("title","T\u1ed5ng s\u1ed1 chi\u1ebfn d\u1ecbch ho\u1ea1t \u0111\u1ed9ng")("ignoreFilter",!0))}function at(i,c){1&i&&(t.ynx(0),t._UZ(1,"icom-libs-campaign-statistic-total",7),t.BQk()),2&i&&(t.xp6(1),t.Q6J("type","total_point_30_day")("title","T\u1ed5ng s\u1ed1 \u0111i\u1ec3m th\u01b0\u1edfng 30 ng\xe0y qua")("ignoreFilter",!0))}function st(i,c){1&i&&(t.ynx(0),t._UZ(1,"icom-libs-campaign-statistic-total",7),t.BQk()),2&i&&(t.xp6(1),t.Q6J("type","total_customer_join_30_day")("title","T\u1ed5ng s\u1ed1 kh\xe1ch tham gia trong 30 ng\xe0y qua")("ignoreFilter",!0))}function ot(i,c){1&i&&(t.ynx(0),t._UZ(1,"icom-libs-campaign-statistic-point-by-campaign",8),t.BQk())}function rt(i,c){1&i&&(t.ynx(0),t._UZ(1,"icom-libs-campaign-statistic-success_campaign",8),t.BQk())}function ct(i,c){if(1&i&&(t.TgZ(0,"gridster-item",3)(1,"div",4),t.NdJ("mousedown",function(n){return n.stopPropagation()})("touchstart",function(n){return n.stopPropagation()}),t.qZA(),t.ynx(2,5),t.YNc(3,it,2,3,"ng-container",6),t.YNc(4,at,2,3,"ng-container",6),t.YNc(5,st,2,3,"ng-container",6),t.YNc(6,ot,2,0,"ng-container",6),t.YNc(7,rt,2,0,"ng-container",6),t.BQk(),t.qZA()),2&i){const e=c.$implicit;t.Q6J("item",e),t.xp6(2),t.Q6J("ngSwitch",e.component),t.xp6(1),t.Q6J("ngSwitchCase","total_campaign_active"),t.xp6(1),t.Q6J("ngSwitchCase","total_point_30_day"),t.xp6(1),t.Q6J("ngSwitchCase","total_customer_join_30_day"),t.xp6(1),t.Q6J("ngSwitchCase","point_by_campaign"),t.xp6(1),t.Q6J("ngSwitchCase","customer_by_campaign")}}let lt=(()=>{class i{constructor(){this.dashboard=[],this.options={gridType:"scrollVertical"}}ngOnInit(){this.dashboard=[{cols:4,rows:1,y:0,x:0,component:"total_campaign_active"},{cols:4,rows:1,y:0,x:4,component:"total_point_30_day"},{cols:4,rows:1,y:0,x:8,component:"total_customer_join_30_day"},{cols:12,rows:3,y:1,x:0,component:"customer_by_campaign"},{cols:6,rows:3,y:2,x:0,component:"point_by_campaign"}]}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["icom-libs-campaign-statistic"]],inputs:{label:"label"},decls:3,vars:2,consts:[[1,"flex","flex-col","h-full","w-full"],[3,"options"],[3,"item",4,"ngFor","ngForOf"],[3,"item"],[3,"mousedown","touchstart"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"h-full","w-full",3,"type","title","ignoreFilter"],[1,"h-full","w-full"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"gridster",1),t.YNc(2,ct,8,7,"gridster-item",2),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("options",a.options),t.xp6(1),t.Q6J("ngForOf",a.dashboard))},dependencies:[m.sg,m.RF,m.n9,S.sm,S.IM,B,O,Q],styles:["gridster{background-color:#f4f5f7!important}  gridster .gridster-column{border-left:1px solid #e6e8ed!important;border-right:1px solid #e6e8ed!important}  gridster .gridster-row{border-top:1px solid #e6e8ed!important;border-bottom:1px solid #e6e8ed!important}"],changeDetection:0})}return i})();var ht=r(5545);const gt=[{path:"",component:lt,data:{title:"catalog",breadcrumb:{label:"List Campaign Statistic",link:"product-management"}}}];let mt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({providers:[{provide:F.Xj,useClass:F.YJ}],imports:[m.ez,E.Bz.forChild(gt),ht.X0,S.IX,B,O,b,Q,x.sL]})}return i})()}}]);