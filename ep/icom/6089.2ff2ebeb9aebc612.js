(self.webpackChunkicom=self.webpackChunkicom||[]).push([[6089],{56089:(ne,H,s)=>{s.r(H),s.d(H,{IcomLibsProductCardDetailComponent:()=>at});var _=s(49671),e=s(36151),u=s(93484),b=s(13391),I=s(62059),S=s(21786),y=s(16283),v=s(15311),w=s(14817),B=s(47332),A=s(63801),P=s(38831),E=s(59600),C=s(87757),z=s(44729),j=s(60202),G=s(58658),N=s(91872);let Q=(()=>{class i{constructor(){this.icomSave=new e.EventEmitter,this.productService=(0,e.inject)(z.k)}ngOnInit(){this.product&&(this.product.date_range=[N(this.product.start_time).toDate(),N(this.product.end_time).toDate()])}handlerSave(t){this.icomSave.emit(t)}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-general"]],inputs:{product:"product"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:2,consts:[[1,"flex","w-full","h-full","justify-between"],[1,"w-full","mr-4",3,"model","isAdd","icomSave"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"icom-libs-product-add_edit",1),e.\u0275\u0275listener("icomSave",function(a){return n.handlerSave(a)}),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("model",n.product)("isAdd",!1))},dependencies:[G.B],encapsulation:2})}return i})();var L=s(53750),F=s(18019),d=s(33635),h=s(926),D=s(67786),l=s(47809),p=s(54829);function c(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"button",9),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.handlerSave(n))}),e.\u0275\u0275text(2," L\u01b0u "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",10),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.handlerCancel(n))}),e.\u0275\u0275text(4," \u0110\xf3ng "),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("action","edit")("nzLoading",t.isLoading)("nzType","primary"),e.\u0275\u0275advance(2),e.\u0275\u0275property("action","edit")}}function g(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(n.toggleDisabled())}),e.\u0275\u0275text(2," S\u1eeda "),e.\u0275\u0275elementEnd()()}2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("action","edit")("nzType","primary"))}function x(i,m){if(1&i&&(e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"form",4),e.\u0275\u0275element(3,"formly-form",5),e.\u0275\u0275elementStart(4,"div",6),e.\u0275\u0275template(5,c,5,4,"div",7),e.\u0275\u0275template(6,g,3,2,"div",7),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",t.model)("fields",t.fields)("options",t.options)("form",t.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=t.options&&null!=t.options.formState&&t.options.formState.disabled)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.options||null==t.options.formState?null:t.options.formState.disabled)}}function M(i,m){1&i&&e.\u0275\u0275element(0,"nz-spin",12),2&i&&e.\u0275\u0275property("nzSize","large")}let U=(()=>{class i{constructor(){this.form=new u.FormGroup({}),this.options={formState:{disabled:!0}},this.fields=[],this.productService=(0,e.inject)(z.k),this.IComMessageService=(0,e.inject)(L.Qi),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.model={subpool_id:0,pool_id:8},this.fields=[{key:"payment_method",type:"select-custom",props:{label:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n",classInclude:"w-[300px]",placeholder:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n",viewValue:"name",labelProp:"name",valueProp:"code",required:!0,options:this.productService.getOptionType("PAYMENT_METHOD?lang=vi").pipe((0,d.map)(t=>t?.data))},expressions:{"props.disabled":"formState.disabled"}},{key:"sale_price",type:"input",className:"",props:{label:"Gi\xe1 b\xe1n",required:!0,type:"number"},validators:["iniMin0"],expressions:{"props.disabled":"formState.disabled"}},{key:"purchase_cost",type:"input",className:"basis-6/12 ml-4",props:{label:"Chi ph\xed nh\u1eadp",required:!0,type:"number"},validators:["iniMin0"],expressions:{"props.disabled":"formState.disabled"}},{key:"pool_id",className:"basis-4/12",type:"select-custom",props:{placeholder:"Select Pool",label:"Pool",viewValue:"name",labelProp:"name",valueProp:"id",classInclude:"w-[300px]",required:!0,options:[{id:8,name:"[MPS] MyPoint Standard Point Pool"}]},expressions:{"props.disabled":"formState.disabled"}},{key:"subpool_id",type:"select-custom",className:"basis-4/12 ml-4",props:{label:"Sub Pool",placeholder:"Select Sub Pool",viewValue:"name",required:!0,classInclude:"w-[300px]",labelProp:"name",valueProp:"id",options:[{id:0,name:"[MPS] MyPoint Standard Point Pool [Not Expiry Date]"}]},expressions:{"props.disabled":"formState.disabled"}}]}ngOnInit(){var t=this;return(0,_.Z)(function*(){try{t.loadingIndicator=!0,t.model=yield(0,d.lastValueFrom)(t.productService.getProductPrice(t.product?.id)),t.modelOrigin=(0,F.cloneDeep)(t.model)}catch(o){t.IComMessageService.showAlertMessageError(o?.error?.error_message)}finally{t.loadingIndicator=!1,t.cdr.detectChanges()}})()}handlerSave(t){var o=this;return(0,_.Z)(function*(){t.stopPropagation(),t.preventDefault();try{if(!o.form.valid)return void Object.keys(o.form.controls).forEach(r=>{o.form.controls[r].touched=!0});o.isLoading=!0,o.cdr.detectChanges(),o.form.markAsTouched(),o.form.submitted=!0;const n={...o.model};if(n.id)return yield(0,d.lastValueFrom)(o.productService.updateProductPrice(n)),o.IComMessageService.showAlertMessageDone("S\u1eeda gi\xe1 s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng"),o.modelOrigin=(0,F.cloneDeep)(o.model),void o.toggleDisabled();yield(0,d.lastValueFrom)(o.productService.createProductPrice(n)),o.modelOrigin=(0,F.cloneDeep)(o.model),o.IComMessageService.showAlertMessageError("S\u1eeda gi\xe1 s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng")}catch(n){o.IComMessageService.showAlertMessageError(n?.error?.error_message)}finally{o.isLoading=!1,o.cdr.detectChanges()}})()}handlerCancel(t){t.stopPropagation(),t.preventDefault(),this.toggleDisabled(),this.form.reset(this.modelOrigin)}toggleDisabled(){this.options.formState.disabled=!this.options.formState.disabled}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-price"]],inputs:{product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:2,consts:[["class","w-full h-full flex",4,"ngIf"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],[1,"w-full","h-full","flex"],[1,"flex","w-full","h-full","flex-col","pt-4","bg-white","border","rounded-md"],["nz-form","",3,"formGroup"],[3,"model","fields","options","form"],["nz-row","",1,"p-4","border"],["nz-col","","class","search-area flex",4,"ngIf"],["nz-col","",1,"search-area","flex"],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzLoading","nzType","click"],["icomLibsHasPermissionDirective","","nz-button","",1,"ml-4",3,"action","click"],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzType","click"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"]],template:function(o,n){1&o&&(e.\u0275\u0275template(0,x,7,7,"div",0),e.\u0275\u0275template(1,M,1,1,"nz-spin",1)),2&o&&(e.\u0275\u0275property("ngIf",!n.loadingIndicator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loadingIndicator))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,u.\u0275NgNoValidate,u.NgControlStatusGroup,u.FormGroupDirective,b.FormlyModule,b.FormlyForm,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,w.NgIf,h.NzSpinModule,h.NzSpinComponent,D.E],encapsulation:2})}return i})();const ie=(i,m)=>[{prop:"",cellTemplate:i,sortable:!1,width:40},{prop:"",cellTemplate:m,sortable:!1,width:40},{prop:"language",width:200,sortable:!1,name:"Ng\xf4n ng\u1eef hi\u1ec3n th\u1ecb",pipe:re()},{prop:"name",width:300,sortable:!1,name:"T\xean hi\u1ec3n th\u1ecb"},{prop:"description",width:300,sortable:!1,name:"M\xf4 t\u1ea3"}],re=()=>({transform:i=>[{code:"vi",name:"Ti\u1ebfng vi\u1ec7t"},{code:"en",name:"English"}].find(m=>m.code===i)?.name||""});var R=s(37586),O=s(99595),Y=s(71684);const ae=["customFooter"];function le(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nz-space")(1,"button",5),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.handlerSave())}),e.\u0275\u0275text(2," L\u01b0u "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.handlerCancel())}),e.\u0275\u0275element(4,"i",7),e.\u0275\u0275text(5," H\u1ee7y b\u1ecf "),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("nzLoading",t.isLoading)("nzType","primary")("action","edit"),e.\u0275\u0275advance(2),e.\u0275\u0275property("action","edit")}}let K=(()=>{class i{constructor(t){this.msg=t,this.form=new u.FormGroup({}),this.options={},this.fileList=[],this.nzModalData=(0,e.inject)(R.NZ_MODAL_DATA),this.productService=(0,e.inject)(z.k),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.IComMessageService=(0,e.inject)(L.Qi),this.icomSave=new e.EventEmitter}ngOnInit(){this.fields=[{key:"name",type:"input",props:{label:"T\xean hi\u1ec3n th\u1ecb",placeholder:"T\xean hi\u1ec3n th\u1ecb",type:"string",required:!0}},{key:"description",type:"input",props:{label:"M\xf4 t\u1ea3",placeholder:"M\xf4 t\u1ea3",type:"string",required:!0}},{key:"language",type:"select-custom",templateOptions:{label:"Ng\xf4n ng\u1eef hi\u1ec3n th\u1ecb",placeholder:"Ng\xf4n ng\u1eef hi\u1ec3n th\u1ecb",viewValue:"name",labelProp:"name",required:!0,valueProp:"code",options:[{code:"vi",name:"Ti\u1ebfng Vi\u1ec7t"},{code:"en",name:"English"}]}},{key:"detail",type:"quill-editor",props:{label:"Th\xf4ng tin chi ti\u1ebft",placeholder:"Th\xf4ng tin chi ti\u1ebft",type:"string",required:!0}},{key:"term_and_condition",type:"quill-editor",props:{label:"\u0110i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng",placeholder:"\u0110i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng",type:"string",required:!0}}],this.fileList=this.nzModalData.fileList||[],this.modelForm=this.nzModalData.modelForm,this.rows=this.nzModalData.rows||[],this.product=this.nzModalData.product}ngAfterViewInit(){const t=this.modal;t.updateConfig({nzFooter:this.templateFooter}),t.containerInstance.cdr.detectChanges(),this.cdr.detectChanges()}handlerSave(){var t=this;return(0,_.Z)(function*(){t.form.valid?(t.form.markAsTouched(),t.form.submitted=!0,t.icomSave.emit({})):Object.keys(t.form.controls).forEach(o=>{t.form.controls[o].touched=!0})})()}handlerCancel(){this.icomSave.emit()}static#e=this.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(Y.NzMessageService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-language-modal"]],viewQuery:function(o,n){if(1&o&&e.\u0275\u0275viewQuery(ae,5),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.templateFooter=r.first)}},inputs:{modal:"modal"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:6,vars:4,consts:[[1,"flex","w-full","h-full","flex-col"],[1,""],[1,"mt-4",3,"formGroup"],[3,"model","fields","form"],["customFooter",""],["nz-button","","icomLibsHasPermissionDirective","",1,"!flex","!items-center",3,"nzLoading","nzType","action","click"],["nz-button","","icomLibsHasPermissionDirective","",1,"ml-4","!flex","!items-center",3,"action","click"],["nz-icon","","nzTheme","outline","nzType","close-circle"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"form",2),e.\u0275\u0275element(3,"formly-form",3),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(4,le,6,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",n.modelForm)("fields",n.fields)("form",n.form))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,u.\u0275NgNoValidate,u.NgControlStatusGroup,u.FormGroupDirective,b.FormlyModule,b.FormlyForm,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,S.NgxDatatableModule,C.NzIconModule,C.NzIconDirective,O.NzUploadModule,h.NzSpinModule,D.E,P.NzSpaceModule,P.NzSpaceComponent],encapsulation:2,changeDetection:0})}return i})();const se=["statusRef"],ce=["removeRef"],de=function(){return[]};function me(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.handlerAdd(n))}),e.\u0275\u0275text(4," Th\xeam m\u1edbi "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",8),e.\u0275\u0275element(6,"ngx-datatable",9),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary")("action","edit"),e.\u0275\u0275advance(3),e.\u0275\u0275property("rows",t.rows)("columns",t.configTable.columns||e.\u0275\u0275pureFunction0(9,de))("headerHeight",t.configTable.headerHeight||50)("columnMode","standard")("rowHeight",t.configTable.rowHeight||50)("scrollbarH",!0)("loadingIndicator",t.loadingIndicator)}}function pe(i,m){1&i&&e.\u0275\u0275element(0,"nz-spin",10),2&i&&e.\u0275\u0275property("nzSize","large")}function ue(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275listener("click",function(n){const a=e.\u0275\u0275restoreView(t).row,f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.handlerEdit(n,a))}),e.\u0275\u0275element(1,"i",12),e.\u0275\u0275elementEnd()}2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("action","edit"))}function he(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275listener("click",function(n){const a=e.\u0275\u0275restoreView(t).row,f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.handlerRemove(n,a))}),e.\u0275\u0275element(1,"span",14),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("action","edit")}let fe=(()=>{class i{constructor(t){this.router=t,this.form=new u.FormGroup({}),this.options={},this.fields=[],this.productService=(0,e.inject)(z.k),this.modalService=(0,e.inject)(R.NzModalService),this.IComMessageService=(0,e.inject)(L.Qi),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.modelForm={}}ngOnInit(){this.fields=[{key:"name",type:"input",props:{label:"T\xean hi\u1ec3n th\u1ecb",placeholder:"T\xean hi\u1ec3n th\u1ecb",type:"string",required:!0}},{key:"description",type:"input",props:{label:"M\xf4 t\u1ea3",placeholder:"M\xf4 t\u1ea3",type:"string",required:!0}},{key:"language",type:"select-custom",templateOptions:{label:"Ng\xf4n ng\u1eef hi\u1ec3n th\u1ecb",placeholder:"Ng\xf4n ng\u1eef hi\u1ec3n th\u1ecb",viewValue:"name",labelProp:"name",required:!0,valueProp:"code",options:[{code:"vi",name:"Ti\u1ebfng Vi\u1ec7t"},{code:"en",name:"English"}]}},{key:"detail",type:"quill-editor",props:{label:"Th\xf4ng tin chi ti\u1ebft",placeholder:"Th\xf4ng tin chi ti\u1ebft",type:"string",required:!0}},{key:"term_and_condition",type:"quill-editor",props:{label:"\u0110i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng",placeholder:"\u0110i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng",type:"string",required:!0}}],this.configTable={loadingIndicator:!0,columns:ie(this.statusRef,this.removeRef),headerHeight:50,rowHeight:"auto",pageLimit:10},this.loadPage()}loadPage(){var t=this;return(0,_.Z)(function*(){try{t.loadingIndicator=!0;const o=yield(0,d.lastValueFrom)(t.productService.getProductLanguage(t.product?.id||""));if(o&&o.data&&o.data){const n=[...o.data.items||[]];t.rows=n}}catch(o){console.log(o)}finally{t.loadingIndicator=!1,t.cdr.detectChanges()}})()}handlerAdd(t){t.stopPropagation(),t.preventDefault(),this.modelForm={};const o=this.modalService.create({nzTitle:"Th\xeam m\u1edbi",nzContent:K,nzMaskClosable:!1,nzKeyboard:!1,nzClosable:!0,nzViewContainerRef:this.viewContainerRef,nzData:{form:this.form,modelForm:this.modelForm,rows:this.rows,product:this.product},nzWidth:968,nzFooter:[]}),n=o.getContentComponent();n.icomSave.subscribe(r=>{if(r)return this.handlerSave(),void o.close();o.close(),this.loadPage(),this.cdr.detectChanges()}),n.modal=o,this.cdr.detectChanges()}handlerCancel(){this.isAddNew=!1,this.modelForm={}}handlerSave(t){var o=this;return(0,_.Z)(function*(){t?.stopPropagation(),t?.preventDefault();try{const n={product_id:o.product?.id,...o.modelForm};if(o.isLoading=!0,o.cdr.detectChanges(),!n.id)return delete n.id,o.rows?.some(a=>a.language==n.language)?void o.IComMessageService.showAlertMessageError("B\u1ea3n ghi n\xe0y \u0111\xe3 t\u1ed3n t\u1ea1i"):void o.productService.addLanguageProduct(n).subscribe(()=>{o.IComMessageService.showAlertMessageDone("Th\xeam ng\xf4n ng\u1eef th\xe0nh c\xf4ng"),o.handlerCancel(),o.loadPage()});yield(0,d.lastValueFrom)(o.productService.updateLanguageProduct(o.modelForm)),o.IComMessageService.showAlertMessageDone("S\u1eeda ng\xf4n ng\u1eef th\xe0nh c\xf4ng"),o.handlerCancel(),o.loadPage()}catch(n){o.IComMessageService.showAlertMessageError(n?.error?.error_message)}finally{o.isLoading=!1,o.cdr.detectChanges()}})()}handlerEdit(t,o){t.stopPropagation(),this.modelForm=o;const n=this.modalService.create({nzTitle:"S\u1eeda ng\xf4n ng\u1eef",nzContent:K,nzMaskClosable:!1,nzKeyboard:!1,nzClosable:!0,nzViewContainerRef:this.viewContainerRef,nzData:{form:this.form,modelForm:this.modelForm,rows:this.rows},nzWidth:968,nzFooter:[]}),r=n.getContentComponent();r.icomSave.subscribe(a=>{if(a)return this.handlerSave(),void n.close();n.close(),this.loadPage(),this.cdr.detectChanges()}),r.modal=n,this.cdr.detectChanges()}handlerRemove(t,o){t.stopPropagation(),this.modalService.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ng\xf4n ng\u1eef n\xe0y kh\xf4ng?",nzContent:`<b style="color: red;">${o.name}</b>`,nzOkText:"X\xf3a",nzOkType:"primary",nzOkDanger:!0,nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDelete.bind(this,o),nzCancelText:"H\u1ee7y"},"error")}processDelete(t){return(0,d.lastValueFrom)(this.productService.deleteProductLanguage(t.id||"")).then(()=>{this.IComMessageService.showAlertMessageDone("X\xf3a ng\xf4n ng\u1eef th\xe0nh c\xf4ng"),this.loadPage()}).catch(o=>{this.IComMessageService.showAlertMessageError(o?.error?.error_message)})}static#e=this.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(j.Router))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-language"]],viewQuery:function(o,n){if(1&o&&(e.\u0275\u0275viewQuery(se,7),e.\u0275\u0275viewQuery(ce,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.statusRef=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.removeRef=r.first)}},inputs:{fields:"fields",rows:"rows",product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:6,vars:2,consts:[["class","w-full h-full flex",4,"ngIf"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],["statusRef",""],["removeRef",""],[1,"w-full","h-full","flex"],[1,"mb-4","w-full","h-full","flex","flex-col","bg-white","border","rounded-md"],[1,"flex","justify-end","p-4"],["nz-button","","icomLibsHasPermissionDirective","",1,"flex","items-center",3,"nzType","action","click"],[1,"w-full","h-full"],[1,"material","expandable","striped","w-full","h-full",3,"rows","columns","headerHeight","columnMode","rowHeight","scrollbarH","loadingIndicator"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"],[1,"name-container","cursor-pointer",3,"click"],["nz-icon","","nzType","edit","nzTheme","twotone","icomLibsHasPermissionDirective","",1,"cursor-pointer",3,"action"],["icomLibsHasPermissionDirective","",1,"name-container","cursor-pointer",3,"action","click"],["nz-icon","","nzType","delete","nzTheme","twotone"]],template:function(o,n){1&o&&(e.\u0275\u0275template(0,me,7,10,"div",0),e.\u0275\u0275template(1,pe,1,1,"nz-spin",1),e.\u0275\u0275template(2,ue,2,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,he,2,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275property("ngIf",!n.loadingIndicator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loadingIndicator))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,b.FormlyModule,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,S.NgxDatatableModule,S.DatatableComponent,w.NgIf,C.NzIconModule,C.NzIconDirective,h.NzSpinModule,h.NzSpinComponent,D.E],encapsulation:2})}return i})();const ge=(i,m,t)=>[{prop:"",cellTemplate:i,sortable:!1,width:40},{prop:"",cellTemplate:m,sortable:!1,width:40},{prop:"banner",sortable:!1,cellTemplate:t,width:200,name:"File upload"},{prop:"name",sortable:!1,width:300,name:"T\xean h\xecnh \u1ea3nh"},{prop:"type",sortable:!1,width:300,name:"Lo\u1ea1i h\xecnh \u1ea3nh"}],X=i=>[{key:"name",type:"input",props:{label:"T\xean h\xecnh \u1ea3nh",placeholder:"T\xean h\xecnh \u1ea3nh",type:"string",required:!0}},{key:"type",type:"select-custom",templateOptions:{label:"Lo\u1ea1i h\xecnh \u1ea3nh",placeholder:"Lo\u1ea1i h\xecnh \u1ea3nh",viewValue:"name",labelProp:"name",required:!0,valueProp:"code",classInclude:"w-[300px]",options:i.getOptionType("MEDIA_TYPE").pipe((0,d.map)(m=>m?.data))}}],ve=["customFooter"];function _e(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nz-upload",6),e.\u0275\u0275listener("nzFileListChange",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileList=n)}),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275elementStart(2,"p",7),e.\u0275\u0275element(3,"span",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p",9),e.\u0275\u0275text(5,"Upload \u1ea3nh"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"p",10),e.\u0275\u0275text(7,"Lo\u1ea1i file h\u1ed7 tr\u1ee3: PNG, JPG"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p",10),e.\u0275\u0275text(9," K\xedch th\u01b0\u1edbc t\u1ed1i \u0111a: 2 Mb"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("nzMultiple",!1)("nzFileList",t.fileList)("nzBeforeUpload",t.beforeUpload)}}function ye(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nz-space")(1,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.handlerSave())}),e.\u0275\u0275text(2," L\u01b0u "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.handlerCancel())}),e.\u0275\u0275element(4,"i",13),e.\u0275\u0275text(5," H\u1ee7y b\u1ecf "),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("nzLoading",t.isLoading)("nzType","primary")("action","edit"),e.\u0275\u0275advance(2),e.\u0275\u0275property("action","edit")}}let J=(()=>{class i{constructor(t){this.msg=t,this.form=new u.FormGroup({}),this.options={},this.fileList=[],this.nzModalData=(0,e.inject)(R.NZ_MODAL_DATA),this.productService=(0,e.inject)(z.k),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.IComMessageService=(0,e.inject)(L.Qi),this.icomSave=new e.EventEmitter,this.beforeUpload=o=>new d.Observable(n=>{const r="image/jpeg"===o.type||"image/png"===o.type;if(!r)return this.msg.error("You can only upload JPG file!"),void n.complete();const a=(o?.size||1)/1024/1024<2;return a?this.fileList&&this.fileList.length?(this.msg.error("Only Post One File"),void n.complete()):(n.next(r&&a),void n.complete()):(this.msg.error("Image must smaller than 2MB!"),void n.complete())})}ngOnInit(){this.fields=X(this.productService),this.fileList=this.nzModalData.fileList,this.modelForm=this.nzModalData.modelForm,this.product=this.nzModalData.product}ngAfterViewInit(){const t=this.modal;t.updateConfig({nzFooter:this.templateFooter}),t.containerInstance.cdr.detectChanges(),this.cdr.detectChanges()}handlerSave(){var t=this;return(0,_.Z)(function*(){try{if(!t.form.valid)return void Object.keys(t.form.controls).forEach(o=>{t.form.controls[o].touched=!0});t.form.markAsTouched(),t.form.submitted=!0,t.processUpload()}catch(o){t.IComMessageService.showAlertMessageError(o?.error?.error_message||"Upload Media Failed")}finally{t.isLoading=!1,t.cdr.detectChanges()}})()}processUpload(){var t=this;return(0,_.Z)(function*(){t.icomSave.emit(t.fileList)})()}handlerCancel(){this.icomSave.emit()}static#e=this.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(Y.NzMessageService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-media-modal"]],viewQuery:function(o,n){if(1&o&&e.\u0275\u0275viewQuery(ve,5),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.templateFooter=r.first)}},inputs:{modal:"modal"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:7,vars:5,consts:[[1,"flex","w-full","h-full","flex-col"],[1,""],[1,"mt-4",3,"formGroup"],[3,"model","fields","form"],["class","ml-4 h-full basis-1/2 upload-list-inline flex flex-col","nzType","drag","nzListType","picture",3,"nzMultiple","nzFileList","nzBeforeUpload","nzFileListChange",4,"ngIf"],["customFooter",""],["nzType","drag","nzListType","picture",1,"ml-4","h-full","basis-1/2","upload-list-inline","flex","flex-col",3,"nzMultiple","nzFileList","nzBeforeUpload","nzFileListChange"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"],["nz-button","","icomLibsHasPermissionDirective","",1,"!flex","!items-center",3,"nzLoading","nzType","action","click"],["nz-button","","icomLibsHasPermissionDirective","",1,"ml-4","!flex","!items-center",3,"action","click"],["nz-icon","","nzTheme","outline","nzType","close-circle"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"form",2),e.\u0275\u0275element(3,"formly-form",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,_e,10,3,"nz-upload",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,ye,6,4,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",n.modelForm)("fields",n.fields)("form",n.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.fields))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,u.\u0275NgNoValidate,u.NgControlStatusGroup,u.FormGroupDirective,b.FormlyModule,b.FormlyForm,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,S.NgxDatatableModule,w.NgIf,C.NzIconModule,C.NzIconDirective,O.NzUploadModule,O.NzUploadComponent,h.NzSpinModule,D.E,P.NzSpaceModule,P.NzSpaceComponent],encapsulation:2,changeDetection:0})}return i})();const be=["statusRef"],Ce=["removeRef"],ze=["avatarRef"];function Se(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"button",10),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.handlerAdd(n))}),e.\u0275\u0275text(2,"Th\xeam m\u1edbi "),e.\u0275\u0275elementEnd()()}2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("action","edit")("nzType","primary"))}const xe=function(){return[]};function Ie(i,m){if(1&i&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275element(1,"ngx-datatable",12),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",t.rows)("columns",t.configTable.columns||e.\u0275\u0275pureFunction0(7,xe))("headerHeight",t.configTable.headerHeight||50)("columnMode","standard")("rowHeight","auto")("scrollbarH",!0)("loadingIndicator",t.loadingIndicator)}}function we(i,m){if(1&i&&(e.\u0275\u0275elementStart(0,"div",5)(1,"div",6),e.\u0275\u0275template(2,Se,3,2,"div",7),e.\u0275\u0275template(3,Ie,2,8,"div",8),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isAddNew),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isAddNew)}}function De(i,m){1&i&&e.\u0275\u0275element(0,"nz-spin",13),2&i&&e.\u0275\u0275property("nzSize","large")}function Te(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275listener("click",function(n){const a=e.\u0275\u0275restoreView(t).row,f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.handlerEdit(n,a))}),e.\u0275\u0275element(1,"i",15),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("action","edit")}function Pe(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275listener("click",function(n){const a=e.\u0275\u0275restoreView(t).row,f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.handlerRemove(n,a))}),e.\u0275\u0275element(1,"span",16),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("action","edit")}function Me(i,m){if(1&i&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275element(1,"img",18),e.\u0275\u0275elementEnd()),2&i){const t=m.row;e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.url,e.\u0275\u0275sanitizeUrl)}}let Le=(()=>{class i{constructor(){this.fileList=[],this.fields=[],this.productService=(0,e.inject)(z.k),this.modalService=(0,e.inject)(R.NzModalService),this.IComMessageService=(0,e.inject)(L.Qi),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.modelForm={},this.form={}}ngOnInit(){this.fields=X(this.productService),this.configTable={loadingIndicator:!0,columns:ge(this.statusRef,this.removeRef,this.avatarRef),headerHeight:50,rowHeight:"auto",pageLimit:10},this.loadPage()}loadPage(){var t=this;return(0,_.Z)(function*(){try{t.loadingIndicator=!0;const o=yield(0,d.lastValueFrom)(t.productService.getProductMedia(t.product?.id||""));if(o&&o.data&&o.data){const n=[...o.data.items||[]];t.rows=n;let r=t.rows?.find(a=>"MEDIA_TYPE_BANNER_16_9"===a.type);if(r||(r=t.rows?.find(a=>"MEDIA_TYPE_BANNER_1_1"===a.type)),!r||!t.product)return;t.product.medias=[r]}}catch(o){console.log(o)}finally{t.loadingIndicator=!1,t.cdr.detectChanges()}})()}handlerAdd(t){t.stopPropagation(),t.preventDefault(),this.modelForm={},this.fileList=[];const o=this.modalService.create({nzTitle:"Th\xeam h\xecnh \u1ea3nh",nzContent:J,nzMaskClosable:!1,nzKeyboard:!1,nzClosable:!0,nzViewContainerRef:this.viewContainerRef,nzData:{form:{},modelForm:this.modelForm,product:this.product,fileList:this.fileList},nzWidth:968,nzFooter:[]}),n=o.getContentComponent();n.icomSave.subscribe(r=>{if(r)return this.handlerSave(r),void o.close();o.close(),this.loadPage(),this.cdr.detectChanges()}),n.modal=o,this.cdr.detectChanges()}handlerCancel(){this.isAddNew=!1,this.cdr.detectChanges()}handlerSave(t){var o=this;return(0,_.Z)(function*(){try{o.processUpload(t)}catch(n){o.IComMessageService.showAlertMessageError(n?.error?.error_message||"Upload Media Failed")}finally{o.isLoading=!1,o.cdr.detectChanges()}})()}processUpload(t){var o=this;return(0,_.Z)(function*(){const n=new FormData;t[0]?.originFileObj&&n.append("image",t[0].originFileObj);const r={product_id:o.product?.id,...o.modelForm};o.isLoading=!0,o.cdr.detectChanges();let a=null;try{if(t[0]?.originFileObj&&(a=yield(0,d.lastValueFrom)(o.productService.uploadMediaProduct(n))),!r.id)return delete r.id,r.url=a?.data?.path||"",yield(0,d.lastValueFrom)(o.productService.addMediaProduct(r)),o.IComMessageService.showAlertMessageDone("Th\xeam h\xecnh \u1ea3nh th\xe0nh c\xf4ng"),o.handlerCancel(),void o.loadPage();r.url=a?.data?.path||r?.url,yield(0,d.lastValueFrom)(o.productService.updateMediaProduct(r)),o.IComMessageService.showAlertMessageDone("S\u1eeda h\xecnh \u1ea3nh th\xe0nh c\xf4ng"),o.modelForm={},o.handlerCancel(),o.loadPage()}catch(f){o.IComMessageService.showAlertMessageError(f?.error?.error_message||"Upload media fail")}})()}handlerEdit(t,o){t.stopPropagation(),this.modelForm=o,this.fileList=[{uid:"-1",name:"Img",status:"done",url:this.modelForm.url,thumbUrl:this.modelForm.url}];const n=this.modalService.create({nzTitle:"S\u1eeda h\xecnh \u1ea3nh",nzContent:J,nzMaskClosable:!1,nzKeyboard:!1,nzClosable:!0,nzViewContainerRef:this.viewContainerRef,nzData:{form:this.form,modelForm:this.modelForm,fileList:this.fileList},nzWidth:968,nzFooter:[]}),r=n.getContentComponent();r.icomSave.subscribe(a=>{a&&(this.handlerSave(a),n.close()),n.close(),this.loadPage(),this.cdr.detectChanges()}),r.modal=n,this.cdr.detectChanges()}handlerRemove(t,o){t.stopPropagation(),this.modalService.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a h\xecnh \u1ea3nh n\xe0y kh\xf4ng?",nzContent:`<b style="color: red;">${o.name}</b>`,nzOkText:"X\xf3a",nzOkType:"primary",nzOkDanger:!0,nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDelete.bind(this,o),nzCancelText:"H\u1ee7y"},"error")}processDelete(t){return(0,d.lastValueFrom)(this.productService.deleteProductMedia(t.id||"")).then(()=>{this.IComMessageService.showAlertMessageDone("X\xf3a h\xecnh \u1ea3nh th\xe0nh c\xf4ng"),this.loadPage()}).catch(o=>{this.IComMessageService.showAlertMessageError(o?.error?.error_message||"X\xf3a th\u1ea5t b\u1ea1i")})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-media"]],viewQuery:function(o,n){if(1&o&&(e.\u0275\u0275viewQuery(be,7),e.\u0275\u0275viewQuery(Ce,7),e.\u0275\u0275viewQuery(ze,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.statusRef=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.removeRef=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.avatarRef=r.first)}},inputs:{fields:"fields",rows:"rows",product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:8,vars:2,consts:[["class","w-full h-full flex",4,"ngIf"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],["statusRef",""],["removeRef",""],["avatarRef",""],[1,"w-full","h-full","flex"],[1,"mb-4","w-full","h-full","flex","flex-col","pr-4","pt-4","bg-white","border","rounded-md","overflow-hidden"],["class","flex flex-end pl-4",4,"ngIf"],["class","w-full h-full mt-4",4,"ngIf"],[1,"flex","flex-end","pl-4"],["icomLibsHasPermissionDirective","","nz-button","",1,"!flex","!items-center",3,"action","nzType","click"],[1,"w-full","h-full","mt-4"],[1,"material","expandable","striped","w-full","h-full",3,"rows","columns","headerHeight","columnMode","rowHeight","scrollbarH","loadingIndicator"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"],["icomLibsHasPermissionDirective","",1,"name-container","cursor-pointer",3,"action","click"],["nz-icon","","nzType","edit","nzTheme","twotone",1,"cursor-pointer"],["nz-icon","","nzType","delete","nzTheme","twotone"],[1,"name-container","cursor-pointer"],["width","200","height","100",3,"src"]],template:function(o,n){1&o&&(e.\u0275\u0275template(0,we,4,2,"div",0),e.\u0275\u0275template(1,De,1,1,"nz-spin",1),e.\u0275\u0275template(2,Te,2,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,Pe,2,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,Me,2,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275property("ngIf",!n.loadingIndicator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loadingIndicator))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,b.FormlyModule,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,S.NgxDatatableModule,S.DatatableComponent,w.NgIf,C.NzIconModule,C.NzIconDirective,O.NzUploadModule,h.NzSpinModule,h.NzSpinComponent,D.E],encapsulation:2})}return i})();const Ne=["statusRef"],ke=["removeRef"];function Ve(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275element(1,"formly-form",7),e.\u0275\u0275elementStart(2,"div",8)(3,"div",9)(4,"button",10),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.handlerSave(n))}),e.\u0275\u0275text(5," L\u01b0u "),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("model",t.model)("fields",t.fields)("options",t.options)("form",t.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary")("nzLoading",t.isLoading)}}const Ae=function(){return[]};let je=(()=>{class i{constructor(t){this.router=t,this.form=new u.FormGroup({}),this.options={},this.fields=[],this.productService=(0,e.inject)(z.k),this.iComLibsServicesInventoryService=(0,e.inject)(z.NH),this.modalService=(0,e.inject)(R.NzModalService),this.IComMessageService=(0,e.inject)(L.Qi),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.model={}}ngOnInit(){this.fields=(i=>[{key:"inventory_id",type:"select-custom",templateOptions:{label:"Kho",placeholder:"Select Inventory",viewValue:"name",labelProp:"name",required:!0,valueProp:"id",options:this.iComLibsServicesInventoryService.searchInventory().pipe((0,d.map)(m=>m?.data?.items))}}])(),this.configTable={loadingIndicator:!0,columns:[{prop:"name",sortable:!1,name:"T\xean kho"},{prop:"type",sortable:!1,name:"Lo\u1ea1i kho"},{prop:"sold_stock",sortable:!1,name:"T\u1ed5ng \u0111\xe3 b\xe1n"},{prop:"in_stock",sortable:!1,name:"T\u1ed5ng c\xf2n l\u1ea1i"},{prop:"total_stock",sortable:!1,name:"T\u1ed5ng s\u1ed1 s\u1ea3n ph\u1ea9m"}],headerHeight:50,rowHeight:"auto",pageLimit:10},this.loadPage()}loadPage(){var t=this;return(0,_.Z)(function*(){try{t.loadingIndicator=!0;const o=yield(0,d.lastValueFrom)(t.productService.getProductInventories(t.product?.id||""));if(o&&o.data&&o.data){const n=[...o.data.items||[]];t.rows=n}}catch(o){console.log(o)}finally{t.loadingIndicator=!1,t.cdr.detectChanges()}})()}handlerClickAddProductToInventory(){this.isAddNew=!this.isAddNew}handlerCancel(){this.isAddNew=!1,this.model={}}handlerSave(t){var o=this;return(0,_.Z)(function*(){t.stopPropagation();try{if(!o.form.valid)return void Object.keys(o.form.controls).forEach(r=>{o.form.controls[r].touched=!0});o.form.markAsTouched(),o.form.submitted=!0,o.isLoading=!0;const n={...o.model,product_id:o.product?.id};yield(0,d.lastValueFrom)(o.productService.getInventoryProducts(n)),o.IComMessageService.showAlertMessageDone("Add product to inventory success"),o.handlerCancel(),o.loadPage()}catch(n){o.IComMessageService.showAlertMessageError(n?.error?.error_message)}finally{o.isLoading=!1,o.cdr.detectChanges()}})()}static#e=this.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(j.Router))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-inventory"]],viewQuery:function(o,n){if(1&o&&(e.\u0275\u0275viewQuery(Ne,7),e.\u0275\u0275viewQuery(ke,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.statusRef=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.removeRef=r.first)}},inputs:{fields:"fields",rows:"rows",product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:7,vars:10,consts:[[1,"mb-4","w-full","h-full","flex","flex-col","!p-4","bg-white","border","rounded-md"],[1,""],["nz-button","",1,"!flex","!items-center",3,"nzType","click"],["class","w-full mt-4 bg-white ",4,"ngIf"],[1,"w-full","h-full","mt-4"],[1,"material","expandable","striped","w-full","h-full",3,"rows","columns","headerHeight","columnMode","rowHeight","scrollbarH","loadingIndicator"],[1,"w-full","mt-4","bg-white"],[3,"model","fields","options","form"],["nz-row",""],["nz-col","",1,"search-area","flex"],["nz-button","",3,"nzType","nzLoading","click"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2),e.\u0275\u0275listener("click",function(){return n.handlerClickAddProductToInventory()}),e.\u0275\u0275text(3," Th\xeam s\u1ea3n ph\u1ea9m v\xe0o kho "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,Ve,6,6,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275element(6,"ngx-datatable",5),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("nzType","primary"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isAddNew),e.\u0275\u0275advance(2),e.\u0275\u0275property("rows",n.rows)("columns",n.configTable.columns||e.\u0275\u0275pureFunction0(9,Ae))("headerHeight",n.configTable.headerHeight||50)("columnMode","force")("rowHeight",n.configTable.rowHeight||50)("scrollbarH",!0)("loadingIndicator",n.loadingIndicator))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,b.FormlyModule,b.FormlyForm,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,S.NgxDatatableModule,S.DatatableComponent,w.NgIf,C.NzIconModule],encapsulation:2,changeDetection:0})}return i})();var Re=s(86991),Oe=s(17891),He=s(34755),Be=s(39656),$=s(57317),q=s(35329);let ee=(()=>{class i{ngOnInit(){this.product.created_at&&(this.product.created_at_format=N(this.product.created_at).format("DD/MM/YYYY HH:mm"),this.product.updated_at_format=N(this.product.updated_at).format("DD/MM/YYYY HH:mm"))}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-history"]],inputs:{product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:20,vars:6,consts:[["nzTitle","L\u1ecbch s\u1eed c\u1eadp nh\u1eadt",2,"width","300px"],[2,"color","#8b8b8b"],["nzType","vertical"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"nz-card",0)(1,"p")(2,"span",1),e.\u0275\u0275text(3,"T\xe0i kho\u1ea3n t\u1ea1o:\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"nz-divider",2),e.\u0275\u0275elementStart(6,"p")(7,"span",1),e.\u0275\u0275text(8,"Th\u1eddi gian t\u1ea1o:\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"nz-divider",2),e.\u0275\u0275elementStart(11,"p")(12,"span",1),e.\u0275\u0275text(13,"T\xe0i kho\u1ea3n c\u1eadp nh\u1eadt cu\u1ed1i:\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"nz-divider",2),e.\u0275\u0275elementStart(16,"p")(17,"span",1),e.\u0275\u0275text(18,"Th\u1eddi gian c\u1eadp nh\u1eadt cu\u1ed1i:\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" [",null==n.product||null==n.product.creator_info?null:n.product.creator_info.customer_id,"] ",null==n.product||null==n.product.creator_info?null:n.product.creator_info.full_name," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",(null==n.product?null:n.product.created_at_format)||(null==n.product?null:n.product.created_at),""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate2(" [",null==n.product||null==n.product.updater_info?null:n.product.updater_info.customer_id,"] ",null==n.product||null==n.product.updater_info?null:n.product.updater_info.full_name,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",(null==n.product?null:n.product.updated_at_format)||(null==n.product?null:n.product.updated_at),""))},dependencies:[$.NzCardModule,$.NzCardComponent,q.NzDividerModule,q.NzDividerComponent],encapsulation:2})}return i})();var te=s(59618);function Ge(i,m){if(1&i&&e.\u0275\u0275element(0,"icom-libs-product-detail-history",10),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("product",t.product)}}function Qe(i,m){1&i&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd())}const Ue=function(){return{$implicit:"Icon"}},Ze=function(){return{"background-color":"#ffffff",color:"black"}},We=["*"];let Ye=(()=>{class i{constructor(t,o){this.viewContainerRef=t,this.componentFactoryResolver=o,this.popupComponentRef=null,this.popupCondition=!0}ngOnInit(){}handlerToggleCollapse(){this.hidden=!this.hidden}loadPopupComponent(){const t=this.componentFactoryResolver.resolveComponentFactory(ee);this.popupComponentRef=this.viewContainerRef.createComponent(t),this.popupComponent=this.popupComponentRef.instance}handlePopupConfirm(){console.log("Popup confirmed")}handlePopupCancel(){console.log("Popup canceled")}static#e=this.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(e.ComponentFactoryResolver))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-template"]],inputs:{hidden:"hidden",title:"title",product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],ngContentSelectors:We,decls:13,vars:10,consts:[[1,"w-full","bg-white","rounded-md","border","p-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","m-0"],[1,"flex","items-center"],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipTitleContext","nzTooltipColor","nzTooltipOverlayStyle"],["nz-icon","","nzType","clock-circle","nzTheme","outline",1,"font-normal"],["titleTemplate",""],[1,"ml-4","items-center","flex",3,"click"],["nz-icon","",1,"ml-2",3,"nzType"],["class","mt-4",4,"ngIf"],[3,"product"],[1,"mt-4"]],template:function(o,n){if(1&o&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h4",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3)(5,"span",4),e.\u0275\u0275element(6,"span",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Ge,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(9,"a",7),e.\u0275\u0275listener("click",function(){return n.handlerToggleCollapse()}),e.\u0275\u0275text(10),e.\u0275\u0275element(11,"span",8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(12,Qe,2,0,"div",9),e.\u0275\u0275elementEnd()),2&o){const r=e.\u0275\u0275reference(8);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",n.title," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzTooltipTitle",r)("nzTooltipTitleContext",e.\u0275\u0275pureFunction0(8,Ue))("nzTooltipColor","#ffffff")("nzTooltipOverlayStyle",e.\u0275\u0275pureFunction0(9,Ze)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.hidden?"Thu g\u1ecdn":"M\u1edf r\u1ed9ng"," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType",n.hidden?"up":"down"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.hidden)}},dependencies:[C.NzIconModule,C.NzIconDirective,w.NgIf,Be.NzPopconfirmModule,te.NzToolTipModule,te.NzTooltipDirective,ee],encapsulation:2})}return i})();var Ke=s(8111),oe=s(75150);function Xe(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"button",8),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.handlerSave(n))}),e.\u0275\u0275text(2," L\u01b0u "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",9),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.handlerCancel(n))}),e.\u0275\u0275text(4," \u0110\xf3ng "),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("action","edit")("nzLoading",t.isLoading)("nzType","primary"),e.\u0275\u0275advance(2),e.\u0275\u0275property("action","edit")}}function Je(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(n.toggleDisabled())}),e.\u0275\u0275text(2," S\u1eeda "),e.\u0275\u0275elementEnd()()}2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("action","edit")("nzType","primary"))}function $e(i,m){if(1&i&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"form",3),e.\u0275\u0275element(3,"formly-form",4),e.\u0275\u0275elementStart(4,"div",5),e.\u0275\u0275template(5,Xe,5,4,"div",6),e.\u0275\u0275template(6,Je,3,2,"div",6),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.form)("nzLayout","vertical"),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",t.model)("fields",t.fields)("options",t.options)("form",t.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=t.options&&null!=t.options.formState&&t.options.formState.disabled)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.options||null==t.options.formState?null:t.options.formState.disabled)}}let qe=(()=>{class i{constructor(){this.form=new u.FormGroup({}),this.options={formState:{disabled:!0}},this.fields=[],this.listFields=[],this.subject=new d.Subject,this.campaignService=(0,e.inject)(z.wb),this.iComLibsServicesProductCardService=(0,e.inject)(z.Oz),this.IComMessageService=(0,e.inject)(L.Qi),this.cdr=(0,e.inject)(e.ChangeDetectorRef)}ngOnInit(){var t=this;return(0,_.Z)(function*(){t.iComLibsServicesProductCardService.getListField().pipe((0,d.map)(o=>o.data.map(n=>({...n})))).subscribe(o=>{t.listFields=o,t.setField(),t.cdr.detectChanges()});try{t.loadingIndicator=!0;const o=yield(0,d.lastValueFrom)(t.iComLibsServicesProductCardService.getRegisterForm(t.product?.id||""));t.model=o?.data,t.setField();const n=t.model?.form_registration?.input_required?.map(r=>r.id);t.model.form_registration.input_required=n,t.modelOrigin=(0,F.cloneDeep)(t.model)}catch(o){t.IComMessageService.showAlertMessageError(o?.error?.error_message)}finally{t.loadingIndicator=!1,t.cdr.detectChanges()}})()}setField(){var n,t=this;if(this.fields=[{key:"form_registration",type:"",props:{label:"Hi\u1ec3n th\u1ecb form \u0111\u0103ng k\xfd",changeChecked:(n,r)=>{const a=r.fieldGroup.find(f=>"checked"===f.key);this.subject.next(!!n),console.log("vo"),a.model.checked=n},setChecked:n=>n?.fieldGroup?.find(a=>"checked"===a.key)?.model?.checked},expressions:{"props.readonly":"formState.disabled"},wrappers:["collapse"],fieldGroup:[{key:"checked",defaultValue:!1,type:"checkbox",className:"hidden"},{key:"input_required",type:"select-custom",props:{label:"Form input required",placeholder:"Ch\u1ecdn Form input required",viewValue:"title",labelProp:"title",valueProp:"id",multiple:!0,required:!0,options:this.listFields,change:(n=(0,_.Z)(function*(r,a){const f=yield(0,d.lastValueFrom)(t.iComLibsServicesProductCardService.getListField());f&&f.data.find(k=>a?.includes(k.id))}),function(a,f){return n.apply(this,arguments)}),changeCheckbox:function(){var n=(0,_.Z)(function*(r,a){const f=t.listFields;if(f){const T=f.find(k=>"PHONE_NUMBER"===k.code);if(!T)return;T.enable_edit=a}});return function(a,f){return n.apply(this,arguments)}}()},expressions:{"props.disabled":"formState.disabled"}},{key:"click_action_type",type:"select-custom",className:"basis-6/12",props:{label:"\u0110i\u1ec1u h\u01b0\u1edbng call to action",placeholder:"Ch\u1ecdn \u0110i\u1ec1u h\u01b0\u1edbng call to action",viewValue:"title",labelProp:"title",valueProp:"id",required:!0,options:this.campaignService.getListActionType().pipe((0,d.map)(n=>n.data))},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:n=>{const r=n.formControl?.parent,a=r?.get("click_action_type");a&&a.valueChanges.pipe((0,d.startWith)(a.value),(0,d.distinctUntilChanged)()).subscribe(f=>{n?.props?.options instanceof d.Observable&&n?.props?.options.subscribe(T=>{const k=T.find(Z=>Z.id===f),V=r?.get("specific_type_click_action_selected");V&&V.setValue("input"===k?.type?"input":"select")})})}}},{key:"specific_type_click_action_selected",defaultValue:"",className:"hidden",type:"input"},{key:"click_action_param",type:"select-custom",className:"basis-6/12",hideExpression:(n,r,a)=>"input"===a?.parent?.model.specific_type_click_action_selected,props:{label:"Tham s\u1ed1 \u0111i\u1ec1u h\u01b0\u1edbng",placeholder:"Ch\u1ecdn Tham s\u1ed1 \u0111i\u1ec1u h\u01b0\u1edbng",options:[],viewValue:"title",labelProp:"title",valueProp:"id"},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:n=>{const r=n?.form?.get("click_action_type");r&&(n.templateOptions.options=r.valueChanges.pipe((0,d.startWith)(r.value),(0,d.distinctUntilChanged)(),(0,d.concatMap)(a=>this.campaignService.getListActionParam(a).pipe((0,d.map)(f=>(f.data.find(T=>n?.model?.click_action_param===T.id)||n.formControl.setValue(null),f.data))))))}}}]},{key:"form_confirm",type:"",expressions:{"props.readonly":"formState.disabled"},hooks:{onInit:n=>{this.subject.subscribe(r=>{n.props&&(n.props.readonly=!r)})}},props:{label:"Hi\u1ec3n th\u1ecb form x\xe1c nh\u1eadn",changeChecked:(n,r)=>{const a=r.fieldGroup.find(f=>"checked"===f.key);console.log(a),a.model.checked=n},setChecked:n=>n?.fieldGroup?.find(a=>"checked"===a.key)?.model?.checked},wrappers:["collapse"],fieldGroup:[{key:"checked",defaultValue:!1,type:"checkbox",className:"hidden"},{key:"click_action_type",type:"select-custom",className:"basis-6/12",props:{label:"\u0110i\u1ec1u h\u01b0\u1edbng call to action",placeholder:"Ch\u1ecdn \u0110i\u1ec1u h\u01b0\u1edbng call to action",viewValue:"title",labelProp:"title",valueProp:"id",required:!0,options:this.campaignService.getListActionType().pipe((0,d.map)(n=>n.data))},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:n=>{const r=n.formControl?.parent,a=r?.get("click_action_type");a&&a.valueChanges.pipe((0,d.startWith)(a.value),(0,d.distinctUntilChanged)()).subscribe(f=>{n?.props?.options instanceof d.Observable&&n?.props?.options.subscribe(T=>{const k=T.find(Z=>Z.id===f),V=r?.get("specific_type_click_action_selected");V&&V.setValue("input"===k?.type?"input":"select")})})}}},{key:"specific_type_click_action_selected",defaultValue:"",className:"hidden",type:"input"},{key:"click_action_param",hideExpression:(n,r,a)=>"input"!==a?.parent?.model.specific_type_click_action_selected,type:"input",className:"basis-6/12",props:{label:"Gi\xe1 tr\u1ecb Tham s\u1ed1 \u0111i\u1ec1u h\u01b0\u1edbng",placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb"},expressions:{"props.disabled":"formState.disabled"}},{key:"click_action_param",type:"select-custom",className:"basis-6/12",hideExpression:(n,r,a)=>"input"===a?.parent?.model.specific_type_click_action_selected,props:{label:"Tham s\u1ed1 \u0111i\u1ec1u h\u01b0\u1edbng",placeholder:"Ch\u1ecdn Tham s\u1ed1 \u0111i\u1ec1u h\u01b0\u1edbng",options:[],viewValue:"title",labelProp:"title",valueProp:"id"},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:n=>{const r=n?.form?.get("click_action_type");r&&(n.templateOptions.options=r.valueChanges.pipe((0,d.startWith)(r.value),(0,d.distinctUntilChanged)(),(0,d.concatMap)(a=>this.campaignService.getListActionParam(a).pipe((0,d.map)(f=>(f.data.find(T=>n?.model?.click_action_param===T.id)||n.formControl.setValue(null),f.data))))))}}}]}],!this.model?.form_registration?.input_required)return;const o=this.model?.form_registration?.input_required;this.listFields=this.listFields.map(n=>{let r;return console.log(o),o.forEach(a=>{a.code===n?.code&&(r=n,r.enable_edit=a.enable_edit)}),r||n})}handlerSave(t){var o=this;return(0,_.Z)(function*(){t.stopPropagation(),t.preventDefault();try{if(o.form.invalid)return void(0,Ke.c2)(o.form);o.isLoading=!0,o.cdr.detectChanges(),o.form.markAsTouched(),o.form.submitted=!0;const n=(0,F.cloneDeep)(o.model);n.form_registration.input_required=o.listFields?.filter(r=>o.model?.form_registration.input_required?.includes(r?.id)),yield(0,d.lastValueFrom)(o.iComLibsServicesProductCardService.updateRegisterForm(o.product?.id||0,n)),o.modelOrigin=(0,F.cloneDeep)(o.model),o.IComMessageService.showAlertMessageDone("S\u1eeda gi\xe1 s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng."),o.toggleDisabled()}catch(n){o.IComMessageService.showAlertMessageError(n?.error?.error_message)}finally{o.isLoading=!1,o.cdr.detectChanges()}})()}handlerCancel(t){t.stopPropagation(),t.preventDefault(),this.toggleDisabled(),this.form.reset(this.modelOrigin)}toggleDisabled(){this.options.formState.disabled=!this.options.formState.disabled}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail-other"]],inputs:{product:"product"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:1,vars:1,consts:[["class","w-full h-full flex",4,"ngIf"],[1,"w-full","h-full","flex"],[1,"flex","w-full","h-full","flex-col","bg-white","border","rounded-md"],["nz-form","",1,"bg-white","rounded-md","h-full","flex","flex-col","!p-4","overflow-y-auto",3,"formGroup","nzLayout"],[3,"model","fields","options","form"],["nz-row","",1,"p-4","border"],["nz-col","","class","search-area flex",4,"ngIf"],["nz-col","",1,"search-area","flex"],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzLoading","nzType","click"],["icomLibsHasPermissionDirective","","nz-button","",1,"ml-4",3,"action","click"],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzType","click"]],template:function(o,n){1&o&&e.\u0275\u0275template(0,$e,7,8,"div",0),2&o&&e.\u0275\u0275property("ngIf",n.listFields&&(null==n.listFields?null:n.listFields.length))},dependencies:[I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,u.\u0275NgNoValidate,u.NgControlStatusGroup,u.FormGroupDirective,b.FormlyModule,b.FormlyForm,y.NzButtonModule,y.NzButtonComponent,l.\u0275NzTransitionPatchDirective,p.NzWaveDirective,S.NgxDatatableModule,w.NgIf,C.NzIconModule,O.NzUploadModule,h.NzSpinModule,D.E,v.NzFormModule,oe.NzColDirective,oe.NzRowDirective,v.NzFormDirective],encapsulation:2})}return i})();function et(i,m){if(1&i&&(e.\u0275\u0275elementStart(0,"nz-page-header-title"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.product.name||"")}}function tt(i,m){if(1&i&&e.\u0275\u0275element(0,"icom-libs-product-detail-inventory",15),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("product",t.product)}}function ot(i,m){if(1&i&&e.\u0275\u0275element(0,"icom-libs-inventory-items-list",21),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("inventoryId",-1)("hiddenImport",!1)("productId",t.product.id||0)}}function nt(i,m){if(1&i&&e.\u0275\u0275element(0,"icom-libs-product-detail-other",15),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("product",t.product)}}function it(i,m){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nz-page-header-footer",4)(1,"div",5)(2,"nz-tabset",6)(3,"nz-tab",7)(4,"div",8)(5,"div",9)(6,"icom-libs-product-detail-template",10)(7,"icom-libs-product-detail-general",11),e.\u0275\u0275listener("icomSave",function(n){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.handlerIcomSave(n))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",9)(9,"div",12)(10,"div",13)(11,"icom-libs-product-detail-template",14),e.\u0275\u0275element(12,"icom-libs-product-detail-language",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",16)(14,"icom-libs-product-detail-template",14),e.\u0275\u0275element(15,"icom-libs-product-detail-price",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(16,"div",9)(17,"icom-libs-product-detail-template",14),e.\u0275\u0275element(18,"icom-libs-product-detail-media",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"nz-tab",17),e.\u0275\u0275template(20,tt,1,1,"ng-template",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"nz-tab",19),e.\u0275\u0275template(22,ot,1,3,"ng-template",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"nz-tab",20),e.\u0275\u0275template(24,nt,1,1,"ng-template",18),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSelectedIndex",0),e.\u0275\u0275advance(4),e.\u0275\u0275property("hidden",!0)("product",t.productTemp)("title","Th\xf4ng tin chung"),e.\u0275\u0275advance(1),e.\u0275\u0275property("product",t.productTemp),e.\u0275\u0275advance(4),e.\u0275\u0275property("product",t.productTemp)("title","Th\xf4ng tin chi ti\u1ebft"),e.\u0275\u0275advance(1),e.\u0275\u0275property("product",t.product),e.\u0275\u0275advance(2),e.\u0275\u0275property("product",t.productTemp)("title","Thanh to\xe1n"),e.\u0275\u0275advance(1),e.\u0275\u0275property("product",t.product),e.\u0275\u0275advance(2),e.\u0275\u0275property("product",t.productTemp)("title","H\xecnh \u1ea3nh"),e.\u0275\u0275advance(1),e.\u0275\u0275property("product",t.product)}}function rt(i,m){1&i&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"nz-spin",23),e.\u0275\u0275elementEnd())}let at=(()=>{class i{constructor(t,o){this.route=t,this.router=o,this.productId="",this.productService=(0,e.inject)(z.k),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.location=(0,e.inject)(w.Location),this.backClicked=new e.EventEmitter,this.saveClicked=new e.EventEmitter,this.options={gridType:"fit",compactType:"compactUp+compactLeft",margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,mobileBreakpoint:640,minCols:1,maxCols:4,minRows:1,maxRows:100,maxItemCols:100,minItemCols:1,maxItemRows:100,minItemRows:1,maxItemArea:2500,minItemArea:1,defaultItemCols:1,defaultItemRows:1,fixedColWidth:105,fixedRowHeight:105,keepFixedHeightInMobile:!1,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,dragEnabled:!0,resizeEnabled:!0,pushItems:!0,swap:!0,pushDirections:{pushOff:!0,enabled:!0},displayGrid:"onDragAndResize",disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1},this.itemConfig1={cols:2,rows:2,y:0,x:0},this.itemConfig2={cols:2,rows:2,y:0,x:2},this.itemConfig3={cols:2,rows:1,y:1,x:0},this.itemConfig4={cols:2,rows:2,y:1,x:2},this.handleRouterChange()}handleRouterChange(){this.router.events.subscribe(()=>{const t=this.route.snapshot.params.id;t&&(this.productId=t,this.isRouter=!0,this.callApi())}),setTimeout(()=>{this.productId||this.handleLocationPathChange()},500)}handleLocationPathChange(){const o=this.location.path().split("/").pop();o&&(this.productId=o,this.callApi())}callApi(){var t=this;return(0,_.Z)(function*(){try{t.product=yield(0,d.lastValueFrom)(t.productService.getProduct(t.productId)),t.productTemp=(0,F.cloneDeep)(t.product),t.cdr.detectChanges()}catch(o){console.log(o)}})()}handlerNzBack(){this.isRouter?this.router.navigateByUrl("product/card"):(this.isAdd?this.backClicked.emit(this.product):this.backClicked.emit(),this.location.replaceState("product/card"))}handlerIcomSave(t){this.saveClicked.emit(t)}static#e=this.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(j.ActivatedRoute),e.\u0275\u0275directiveInject(j.Router))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-product-detail"]],outputs:{backClicked:"backClicked",saveClicked:"saveClicked"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:4,vars:3,consts:[["nzBackIcon","",1,"site-page-header","h-full","w-full","flex","flex-col",2,"position","absolute","top","0","left","250px","width","calc(100% - 250px)","background","#f0f2f5","height","100%","overflow","hidden",3,"nzBack"],[4,"ngIf"],["class","w-full h-full","style","height: calc(100% - 68px) !important",4,"ngIf"],["class","loading-container absolute left-1/2","style","top: 50%;",4,"ngIf"],[1,"w-full","h-full",2,"height","calc(100% - 68px) !important"],[1,"w-full","h-full"],[3,"nzSelectedIndex"],["nzTitle","Th\xf4ng tin chung"],[1,"w-full","flex","flex-col"],[1,"w-full","p-2"],[3,"hidden","product","title"],[3,"product","icomSave"],[1,"flex","w-full","h-full"],[1,"w-50",2,"width","50%"],[3,"product","title"],[3,"product"],[1,"w-50","pl-4",2,"width","50%"],["nzTitle","Kho"],["nz-tab",""],["nzTitle","Danh s\xe1ch item"],["nzTitle","Th\xf4ng tin b\u1ed5 sung"],[3,"inventoryId","hiddenImport","productId"],[1,"loading-container","absolute","left-1/2",2,"top","50%"],["nzSize","large"]],template:function(o,n){1&o&&(e.\u0275\u0275elementStart(0,"nz-page-header",0),e.\u0275\u0275listener("nzBack",function(){return n.handlerNzBack()}),e.\u0275\u0275template(1,et,2,1,"nz-page-header-title",1),e.\u0275\u0275template(2,it,25,14,"nz-page-header-footer",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,rt,2,0,"div",3)),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.product&&n.product.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.product&&n.product.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.product||!n.product.id))},dependencies:[S.NgxDatatableModule,I.FormlyNgZorroAntdModule,u.ReactiveFormsModule,b.FormlyModule,y.NzButtonModule,v.NzFormModule,B.NzTypographyModule,A.NzPageHeaderModule,A.NzPageHeaderComponent,A.NzPageHeaderTitleDirective,A.NzPageHeaderFooterDirective,P.NzSpaceModule,E.NzTabsModule,E.NzTabSetComponent,E.NzTabComponent,E.NzTabDirective,C.NzIconModule,Q,U,w.NgIf,qe,fe,Le,je,Re.IcomLibInventoryListItemsComponent,h.NzSpinModule,h.NzSpinComponent,Oe.NzSelectModule,He.GridsterModule,Ye],styles:["[_nghost-%COMP%]     nz-tabset .ant-tabs-tabpane{overflow:auto;height:100%}"],changeDetection:0})}return i})()},58658:(ne,H,s)=>{s.d(H,{B:()=>d});var _=s(49671),e=s(36151),u=s(93484),b=s(44729),I=s(13391),S=s(62059),y=s(16283),v=s(33635),B=s(53750),A=s(14817),P=s(18019),E=s(15311),C=s(91872),z=s(8111),j=s(47809),G=s(54829),N=s(75150);function Q(h,D){if(1&h){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"button",6),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(l);const g=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(g.handlerSave(c))}),e.\u0275\u0275text(2," L\u01b0u "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",7),e.\u0275\u0275listener("click",function(c){e.\u0275\u0275restoreView(l);const g=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(g.handlerCancel(c))}),e.\u0275\u0275text(4,"\u0110\xf3ng"),e.\u0275\u0275elementEnd()()}if(2&h){const l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","primary")("nzLoading",l.isLoading)}}function L(h,D){if(1&h){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(l);const c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.toggleDisabled())}),e.\u0275\u0275text(2," S\u1eeda "),e.\u0275\u0275elementEnd()()}if(2&h){const l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","primary")("nzLoading",l.isLoading)}}function F(h,D){if(1&h&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,Q,5,2,"div",4),e.\u0275\u0275template(2,L,3,2,"div",4),e.\u0275\u0275elementEnd()),2&h){const l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=l.options&&null!=l.options.formState&&l.options.formState.disabled)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==l.options||null==l.options.formState?null:l.options.formState.disabled)}}let d=(()=>{class h{constructor(){this.form=new u.FormGroup({}),this.options={formState:{disabled:!0}},this.fields=[],this.icomSave=new e.EventEmitter,this.productService=(0,e.inject)(b.k),this.cardService=(0,e.inject)(b.Oz),this.iComMessageService=(0,e.inject)(B.Qi),this.destroyRef=(0,e.inject)(e.DestroyRef),this.changeDetectorRef=(0,e.inject)(e.ChangeDetectorRef),this.model={}}ngOnInit(){this.fields=((h,D)=>[{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"name",type:"input",className:"w-full",props:{label:"T\xean s\u1ea3n ph\u1ea9m",placeholder:"T\xean s\u1ea3n ph\u1ea9m",type:"string",required:!0},expressions:{"props.disabled":"formState.disabled"}},{key:"items",type:"input-custom",className:"w-[200px] ml-4",props:{label:"S\u1ed1 item t\u1ed1i \u0111a/ giao d\u1ecbch",placeholder:"S\u1ed1 item t\u1ed1i \u0111a/ giao d\u1ecbch",type:"string",disabled:!0,readonly:!0},defaultValue:1,expressions:{"props.disabled":"formState.disabled"}}]},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"code",type:"input",className:"basis-1/2",props:{label:"Code",placeholder:"Code",type:"string",required:!0},expressions:{"props.disabled":l=>"GENCODE_TYPE_FROM_3RD_PARTY"===l.model?.gen_code_type||D.disabled}},{key:"status",type:"select-custom",className:"basis-1/2 ml-4",expressions:{"props.disabled":"formState.disabled"},defaultValue:0,props:{label:"Tr\u1ea1ng th\xe1i",viewValue:"name",labelProp:"name",search:!0,placeholder:"Tr\u1ea1ng th\xe1i",valueProp:"int_value",required:!0,options:h.getOptionType("PRODUCT_STATUS").pipe((0,v.map)(l=>l?.data))}}]},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"start_time",className:"w-[300px]",type:"date",props:{required:!0,label:"B\u1eaft \u0111\u1ea7u hi\u1ec3n th\u1ecb",placeholder:"Ch\u1ecdn th\u1eddi gian",ShowTime:!0,format:"dd-MM-yyyy HH:mm"},expressions:{"props.disabled":"formState.disabled"}},{key:"end_time",className:"w-[300px]",type:"date",props:{label:"K\u1ebft th\xfac hi\u1ec3n th\u1ecb",ShowTime:!0,placeholder:"Ch\u1ecdn th\u1eddi gian",format:"dd-MM-yyyy HH:mm"},expressions:{"props.disabled":"formState.disabled"}}]},{className:"section-label",template:'<hr class="my-4"/>'},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"category_ids",type:"select-custom",className:"basis-1/2",props:{label:"Danh m\u1ee5c",placeholder:"Danh m\u1ee5c",viewValue:"name",labelProp:"name",valueProp:"id",multiple:!0,options:h.getCategoryForSelect().pipe((0,v.map)(l=>l?.data?.items))},expressions:{"props.disabled":"formState.disabled"}},{key:"group_ids",type:"select-custom",className:"basis-1/2 ml-4",props:{label:"Hi\u1ec3n th\u1ecb tr\xean app",placeholder:"Hi\u1ec3n th\u1ecb tr\xean app",viewValue:"name",multiple:!0,labelProp:"name",valueProp:"id",required:!0,options:h.getGroupForSelect().pipe((0,v.map)(l=>l?.data?.items))},expressions:{"props.disabled":"formState.disabled"}}]},{key:"organization_id",type:"select-custom",props:{label:"\u0110\u1ed1i t\xe1c",placeholder:"\u0110\u1ed1i t\xe1c",required:!0,valueProp:"id",labelProp:"name",options:h.getOrg().pipe((0,v.map)(l=>l?.data))},expressions:{"props.disabled":"formState.disabled"}},{key:"brand_id",type:"select-custom",props:{label:"Th\u01b0\u01a1ng hi\u1ec7u",options:[],required:!0,placeholder:"Th\u01b0\u01a1ng hi\u1ec7u",valueProp:"id",labelProp:"name"},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:l=>{const p=l.parent.get("organization_id").formControl;l.props.options=p.valueChanges.pipe((0,v.startWith)(p.value),(0,v.distinctUntilChanged)(),(0,v.concatMap)(c=>c?h.getBrandByOrg(c).pipe((0,v.map)(g=>{const x=g?.data?.find(M=>l?.model?.brand_id===M.id);return l.parent.model.specific_brands_object=g?.data||[],x||(l.formControl.setValue(null),l.parent.get("store_ids").formControl?.setValue(null)),g?.data||[]})):(l.parent.get("store_ids").formControl?.setValue(null),l.parent.get("brand_id").formControl?.setValue(null),[])))}}},{key:"store_ids",type:"select-custom",props:{label:"Chi nh\xe1nh",placeholder:"Chi nh\xe1nh",viewValue:"name",labelProp:"name",valueProp:"id",multiple:!0},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:l=>{const p=l.parent.get("brand_id").formControl;l.props.options=p.valueChanges.pipe((0,v.startWith)(p.value),(0,v.distinctUntilChanged)(),(0,v.tap)(c=>{const g=l.parent?.model?.specific_brands_object?.find(M=>M.id===c);l.parent.model.brand_code=g?g.code:null}),(0,v.concatMap)(c=>{if(!c)return l.formControl.setValue([]),l.parent.model.brand_code="",[];const g=l.parent?.model?.specific_brands_object?.find(M=>M.id===c);return l.parent.model.brand_code=g?g.code:null,h.getStoreByBrand(c).pipe((0,v.map)(M=>(M?.data?.find(U=>l?.model?.store_ids?.includes(U.id))||l.formControl.setValue([]),M?.data||[])))}))}}}])(this.productService,this.options.formState),this.model&&this.model.catalog_ids&&this.model.catalog_ids?.length&&(this.model.catalog_ids=this.model.catalog_ids[0]),this.modelOrigin=(0,P.cloneDeep)(this.model),this.isAdd&&this.toggleDisabled(),setTimeout(()=>{this.form.controls.gen_code_type?.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.map)(()=>{this.form.reset(this.model)})).subscribe()},200)}handlerSave(l,p){var c=this;return(0,_.Z)(function*(){if(l?.stopPropagation(),l?.preventDefault(),c.form.valid)try{if(c.model?.start_time&&c.model?.end_time&&C(c.model?.end_time).isBefore(c.model?.start_time))return void c.iComMessageService.showAlertMessageError("Th\u1eddi gian k\u1ebft th\xfac kh\xf4ng \u0111\u01b0\u1ee3c nh\u1ecf h\u01a1n th\u1eddi gian b\u1eaft \u0111\u1ea7u.");c.form.markAsTouched(),c.form.submitted=!0,p&&p.isLoading&&p.isLoading();const g=(0,P.cloneDeep)(c.model);if(g&&g.catalog_ids&&(g.catalog_ids=[g.catalog_ids]),c.isLoading=!0,c.model=(0,z.oS)(c.model,"specific"),c.isAdd){const x=yield(0,v.lastValueFrom)(c.cardService.createProduct(g));c.icomSave.emit(x?.data),p&&p.success&&p.success(x?.data?.id),c.iComMessageService.showAlertMessageDone("T\u1ea1o s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng")}else{const x=yield(0,v.lastValueFrom)(c.cardService.updateProduct(c.model?.id||0,g));p&&p.success&&p.success(),c.icomSave.emit(x?.data),c.iComMessageService.showAlertMessageDone("S\u1eeda s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng"),c.modelOrigin=(0,P.cloneDeep)(c.model),c.toggleDisabled()}}catch(g){p&&p.loadDone&&p.loadDone(),c.iComMessageService.showAlertMessageError(g?.error?.error_message||"T\u1ea1o s\u1ea3n ph\u1ea9m th\u1ea5t b\u1ea1i")}finally{p&&p.loadDone&&p.loadDone(),c.isLoading=!1,c.changeDetectorRef.detectChanges()}else Object.keys(c.form.controls).forEach(g=>{c.form.controls[g].touched=!0})})()}toggleDisabled(){this.options.formState.disabled=!this.options.formState.disabled}handlerCancel(l){l.stopPropagation(),this.toggleDisabled(),this.model=(0,P.cloneDeep)(this.modelOrigin)}static#e=this.\u0275fac=function(p){return new(p||h)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["icom-libs-product-add_edit"]],inputs:{model:"model",isAdd:"isAdd"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:3,vars:7,consts:[["nz-form","",1,"pb-4","bg-white","border","rounded-md","h-full","flex","flex-col",3,"formGroup","nzLayout"],[1,"overflow-auto","px-4","pt-4",3,"model","fields","options","form"],["nz-row","","class","p-4 border",4,"ngIf"],["nz-row","",1,"p-4","border"],["nz-col","","class","search-area flex",4,"ngIf"],["nz-col","",1,"search-area","flex"],["nz-button","",3,"nzType","nzLoading","click"],["nz-button","",1,"ml-4",3,"click"]],template:function(p,c){1&p&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275element(1,"formly-form",1),e.\u0275\u0275template(2,F,3,2,"div",2),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275property("formGroup",c.form)("nzLayout","vertical"),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",c.model)("fields",c.fields)("options",c.options)("form",c.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.model&&c.model.id))},dependencies:[S.FormlyNgZorroAntdModule,u.ReactiveFormsModule,u.\u0275NgNoValidate,u.NgControlStatusGroup,u.FormGroupDirective,I.FormlyModule,I.FormlyForm,y.NzButtonModule,y.NzButtonComponent,j.\u0275NzTransitionPatchDirective,G.NzWaveDirective,A.NgIf,E.NzFormModule,N.NzColDirective,N.NzRowDirective,E.NzFormDirective],encapsulation:2,changeDetection:0})}return h})()}}]);