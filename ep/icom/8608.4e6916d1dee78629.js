(self.webpackChunkicom=self.webpackChunkicom||[]).push([[8608],{50856:(v,m,o)=>{o.r(m),o.d(m,{IcomLibsFlashSaleGroupComponent:()=>O});var c=o(49671),e=o(36151),h=o(34423),i=o(67626),p=o(14817),u=o(93484),D=o(62059),S=o(13391),C=o(16283),y=o(87757),g=o(14859),T=o(37586),x=o(53750),E=o(78504),F=o(6743),z=o(33635),w=o(44729),b=o(60202),M=o(47809),P=o(54829),_=o(71579);function N(s,f){if(1&s){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td",20),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",20),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",20),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",20),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td",20)(11,"div",21)(12,"button",22),e.\u0275\u0275text(13," H\xe0nh \u0111\u1ed9ng "),e.\u0275\u0275element(14,"span",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"nz-dropdown-menu",null,24)(17,"ul",25)(18,"li",26),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.showEditModal(r))}),e.\u0275\u0275text(19,"S\u1eeda"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"li",26),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.showDeleteConfirm(r))}),e.\u0275\u0275text(21,"X\xf3a"),e.\u0275\u0275elementEnd()()()()()()}if(2&s){const t=f.$implicit,l=f.index,n=e.\u0275\u0275reference(16),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",10*((null==r.pagination?null:r.pagination.page)-1)+l+1,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(7,7,t.created_at,"dd/MM/yyyy HH:mm")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.created_by_name),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary")("nzShape","round")("nzDropdownMenu",n)}}function j(s,f){if(1&s&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==t.pagination?null:t.pagination.total_rows)||0," ")}}const I=function(){return{x:"1500px",y:"calc(100vh - 380px)"}},L=function(){return[10,15,20,30,40,50]};let O=(()=>{class s{constructor(){this.listOfData=[],this.rows=[],this.form=new u.FormGroup({}),this.model={},this.options={},this.total=1,this.loading=!0,this.pageSize=5,this.pageIndex=1,this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"name",type:"search-input",className:"mb-4 basis-6/12",props:{type:"text",placeholder:"T\xecm ki\u1ebfm theo t\xean nh\xf3m flash sale"}}]}],this.modalService=(0,e.inject)(T.NzModalService),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.icomLibsDynamicComponentService=(0,e.inject)(x.Gj),this.iComLibsServicesProjectFlashSaleService=(0,e.inject)(w.Rm),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.router=(0,e.inject)(b.Router),this.iComMessageService=(0,e.inject)(x.Qi)}ngOnInit(){this.loadPage(1)}loadPage(t=1,l=10){var n=this;return(0,c.Z)(function*(){try{n.loading=!0;const a={...{...n.model},size:l,page:t},d=yield(0,z.lastValueFrom)(n.iComLibsServicesProjectFlashSaleService.listGroup({...a}));if(d&&d.data&&d.data.items)return n.rows=d.data.items||[],void(n.pagination=d.data.pagination);n.rows=[],n.pagination=d.data.pagination}catch(r){console.log(r)}finally{n.loading=!1,n.cdr.detectChanges()}})()}handlerSearch(t){t.stopPropagation(),t.preventDefault(),this.loadPage(1)}handlerBackFlashSale(t){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl("flash-sale/list")}showAddModal(t){t.stopPropagation(),t.preventDefault();const l=this.modalService.create({nzTitle:"Th\xeam nh\xf3m flash sale",nzContent:E.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y",nzOkText:"L\u01b0u",nzOkType:"primary",nzOnOk:()=>new Promise(n=>{const r=l.getContentComponent();r.onSave.pipe((0,z.take)(1)).subscribe(a=>{200===a.code?(this.iComMessageService.showAlertMessageDone("T\u1ea1o nh\xf3m flash sale th\xe0nh c\xf4ng."),n(!0),this.loadPage(1)):(this.iComMessageService.showAlertMessageError(a?.error?.error_message||"T\u1ea1o nh\xf3m flash sale th\u1ea5t b\u1ea1i."),n(!1),l.updateConfig({nzOkLoading:!1}))}),r.handlerSave()}),nzOkLoading:!1})}onPageChange(t){this.loadPage(t,this.pagination.limit)}onPageSizeChange(t){this.loadPage(1,t)}showEditModal(t){const l=this.modalService.create({nzTitle:"S\u1eeda nh\xf3m flash sale",nzContent:E.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzData:{title:"S\u1eeda nh\xf3m flash sale",data:t},nzOnOk:()=>new Promise(n=>{const r=l.getContentComponent();r.onSave.subscribe(a=>{200===a.code?(this.iComMessageService.showAlertMessageDone("S\u1eeda nh\xf3m flash sale th\xe0nh c\xf4ng."),n(!0),this.loadPage(1)):(this.iComMessageService.showAlertMessageError(a?.error?.error_message||"S\u1eeda nh\xf3m flash sale th\u1ea5t b\u1ea1i."),n(!1),l.updateConfig({nzOkLoading:!1}))}),r.handlerSave()}),nzOkLoading:!1})}showDeleteConfirm(t){var l=this;const n=this.modalService.confirm({nzTitle:"X\xf3a nh\xf3m flash sale",nzContent:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a nh\xf3m ${t.name}?`,nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"\u0110\u1ed3ng \xfd",nzOkLoading:!1,nzOkType:"primary",nzOnOk:(r=(0,c.Z)(function*(){n.updateConfig({nzOkLoading:!0});try{yield(0,z.lastValueFrom)(l.iComLibsServicesProjectFlashSaleService.deleteGroup({_id:t._id})),l.loadPage(1),l.iComMessageService.showAlertMessageDone("X\xf3a nh\xf3m flash sale th\xe0nh c\xf4ng.")}catch(a){console.log(a),l.iComMessageService.showAlertMessageError(a?.error?.error_message||"X\xf3a nh\xf3m  flash sale th\u1ea5t b\u1ea1i.")}finally{n.updateConfig({nzOkLoading:!1}),n.destroy()}}),function(){return r.apply(this,arguments)})});var r}static#e=this.\u0275fac=function(l){return new(l||s)};static#n=this.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["icom-libs-product-group"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:36,vars:21,consts:[[1,"flex","w-full","h-full","flex-col"],["nz-button","","nzType","link","routerLink","/your-path",1,"text-primary-500","hover:text-primary-600","!flex","items-center",3,"click"],["nz-icon","","nzType","arrow-left"],["nz-form","",1,"!p-4","bg-white","border","rounded-md",3,"formGroup","keydown.enter"],[1,"w-full"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-col","",1,"search-area","flex","items-center"],["nz-button","",1,"!flex","!items-center",3,"nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],[1,"w-full","h-full","mt-4","overflow-hidden"],["nzShowSizeChanger","",1,"h-full",3,"nzScroll","nzData","nzLoading","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange"],["editableTable","","sectionTable",""],["nzWidth","100px",1,"text-xs","font-semibold"],[1,"text-xs","font-semibold"],[4,"ngFor","ngForOf"],["footerTemplate",""],[1,"text-xs","!p-3"],[1,"name-container"],["nz-button","","nz-button","","nz-dropdown","",3,"nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"footer-content"]],template:function(l,n){if(1&l&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275listener("click",function(a){return n.handlerBackFlashSale(a)}),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275text(3," Nh\xf3m flash sale "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"form",3),e.\u0275\u0275listener("keydown.enter",function(a){return a.preventDefault()}),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275element(6,"formly-form",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6)(8,"div",7)(9,"button",8),e.\u0275\u0275listener("click",function(a){return n.showAddModal(a)}),e.\u0275\u0275element(10,"span",9),e.\u0275\u0275text(11," Th\xeam nh\xf3m flash sale "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",10)(13,"button",11),e.\u0275\u0275listener("click",function(a){return n.handlerSearch(a)}),e.\u0275\u0275element(14,"i",12),e.\u0275\u0275text(15," L\u1ecdc "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(16,"div",13)(17,"nz-table",14,15),e.\u0275\u0275listener("nzPageIndexChange",function(a){return n.onPageChange(a)})("nzPageSizeChange",function(a){return n.onPageSizeChange(a)}),e.\u0275\u0275elementStart(20,"thead")(21,"tr")(22,"th",16),e.\u0275\u0275text(23,"STT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",17),e.\u0275\u0275text(25,"T\xean"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"th",17),e.\u0275\u0275text(27,"Th\u1eddi gian t\u1ea1o"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"th",17),e.\u0275\u0275text(29,"Ng\u01b0\u1eddi t\u1ea1o"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"th",17),e.\u0275\u0275text(31,"H\xe0nh \u0111\u1ed9ng"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"tbody"),e.\u0275\u0275template(33,N,22,10,"tr",18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(34,j,2,1,"ng-template",null,19,e.\u0275\u0275templateRefExtractor)),2&l){const r=e.\u0275\u0275reference(35);e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",n.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("model",n.model)("fields",n.fields)("options",n.options)("form",n.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary"),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzType","primary"),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzScroll",e.\u0275\u0275pureFunction0(19,I))("nzData",n.rows)("nzData",n.rows)("nzLoading",n.loading)("nzTotal",null==n.pagination?null:n.pagination.total_rows)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",null==n.pagination?null:n.pagination.page)("nzFrontPagination",!1)("nzPageSizeOptions",e.\u0275\u0275pureFunction0(20,L))("nzFooter",r),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.rows)}},dependencies:[h._t,i.NzTableModule,i.NzTableComponent,i.NzTableCellDirective,i.NzThMeasureDirective,i.NzTheadComponent,i.NzTbodyComponent,i.NzTrDirective,p.DatePipe,p.NgFor,D.FormlyNgZorroAntdModule,u.ReactiveFormsModule,u.\u0275NgNoValidate,u.NgControlStatusGroup,u.FormGroupDirective,S.FormlyModule,S.FormlyForm,C.NzButtonModule,C.NzButtonComponent,M.\u0275NzTransitionPatchDirective,P.NzWaveDirective,y.NzIconModule,y.NzIconDirective,g.NzDropDownModule,_.NzMenuDirective,_.NzMenuItemComponent,g.NzDropDownDirective,g.NzDropdownMenuComponent,g.NzDropdownButtonDirective,T.NzModalModule,F.NzInputModule],encapsulation:2,changeDetection:0})}return s})()},46973:(v,m,o)=>{o.d(m,{K:()=>e});const e=(0,o(82306).d)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"})},82306:(v,m,o)=>{function c(e){const i=e(p=>{Error.call(p),p.stack=(new Error).stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}o.d(m,{d:()=>c})}}]);