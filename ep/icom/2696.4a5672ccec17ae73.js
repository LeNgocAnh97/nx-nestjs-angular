(self.webpackChunkicom=self.webpackChunkicom||[]).push([[2696],{67786:(S,p,i)=>{i.d(p,{E:()=>e});var c=i(36151),v=i(248);let e=(()=>{class l{constructor(s,m){this.el=s,this.permissionService=m}ngOnInit(){this.permissionService.getPermission(this.action)||this.el.nativeElement.style.setProperty("display","none","important")}static#e=this.\u0275fac=function(m){return new(m||l)(c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(v.$))};static#t=this.\u0275dir=c.\u0275\u0275defineDirective({type:l,selectors:[["","icomLibsHasPermissionDirective",""]],inputs:{action:"action"},standalone:!0})}return l})()},84028:(S,p,i)=>{i.d(p,{EC:()=>s,JC:()=>v,Jj:()=>e,l0:()=>l,uv:()=>g});const v=()=>[{value:"Th\xe1ng 1",id:1},{value:"Th\xe1ng 2",id:2},{value:"Th\xe1ng 3",id:3},{value:"Th\xe1ng 4",id:4},{value:"Th\xe1ng 5",id:5},{value:"Th\xe1ng 6",id:6},{value:"Th\xe1ng 7",id:7},{value:"Th\xe1ng 8",id:8},{value:"Th\xe1ng 9",id:9},{value:"Th\xe1ng 10",id:10},{value:"Th\xe1ng 11",id:11},{value:"Th\xe1ng 12",id:12}],e=()=>[{value:"Ng\xe0y 1",id:1},{value:"Ng\xe0y 2",id:2},{value:"Ng\xe0y 3",id:3},{value:"Ng\xe0y 4",id:4},{value:"Ng\xe0y 5",id:5},{value:"Ng\xe0y 6",id:6},{value:"Ng\xe0y 7",id:7},{value:"Ng\xe0y 8",id:8},{value:"Ng\xe0y 9",id:9},{value:"Ng\xe0y 10",id:10},{value:"Ng\xe0y 11",id:11},{value:"Ng\xe0y 12",id:12},{value:"Ng\xe0y 13",id:13},{value:"Ng\xe0y 14",id:14},{value:"Ng\xe0y 15",id:15},{value:"Ng\xe0y 16",id:16},{value:"Ng\xe0y 17",id:17},{value:"Ng\xe0y 18",id:18},{value:"Ng\xe0y 19",id:19},{value:"Ng\xe0y 20",id:20},{value:"Ng\xe0y 21",id:21},{value:"Ng\xe0y 22",id:22},{value:"Ng\xe0y 23",id:23},{value:"Ng\xe0y 24",id:24},{value:"Ng\xe0y 25",id:25},{value:"Ng\xe0y 26",id:26},{value:"Ng\xe0y 27",id:27},{value:"Ng\xe0y 28",id:28},{value:"Ng\xe0y 29",id:29},{value:"Ng\xe0y 30",id:30},{value:"Ng\xe0y 31",id:31}],l=()=>[{value:"Th\u1ee9 2",id:1},{value:"Th\u1ee9 3",id:2},{value:"Th\u1ee9 4",id:3},{value:"Th\u1ee9 5",id:4},{value:"Th\u1ee9 6",id:5},{value:"Th\u1ee9 7",id:6},{value:"Ch\u1ee7 nh\u1eadt",id:0}],g=()=>[{value:"0 gi\u1edd",id:0},{value:"1 gi\u1edd",id:1},{value:"2 gi\u1edd",id:2},{value:"3 gi\u1edd",id:3},{value:"4 gi\u1edd",id:4},{value:"5 gi\u1edd",id:5},{value:"6 gi\u1edd",id:6},{value:"7 gi\u1edd",id:7},{value:"8 gi\u1edd",id:8},{value:"9 gi\u1edd",id:9},{value:"10 gi\u1edd",id:10},{value:"11 gi\u1edd",id:11},{value:"12 gi\u1edd",id:12},{value:"13 gi\u1edd",id:13},{value:"14 gi\u1edd",id:14},{value:"15 gi\u1edd",id:15},{value:"16 gi\u1edd",id:16},{value:"17 gi\u1edd",id:17},{value:"18 gi\u1edd",id:18},{value:"19 gi\u1edd",id:19},{value:"20 gi\u1edd",id:20},{value:"21 gi\u1edd",id:21},{value:"22 gi\u1edd",id:22},{value:"23 gi\u1edd",id:23}],s=()=>[{value:"Ng\u1eebng k\xedch ho\u1ea1t",id:"INACTIVE"},{value:"K\xedch ho\u1ea1t",id:"ACTIVE"}]},32696:(S,p,i)=>{i.r(p),i.d(p,{IcomLibsFlashSaleListComponent:()=>O});var c=i(49671),v=i(34423),e=i(36151),l=i(67626),g=i(14817),s=i(93484),m=i(62059),h=i(13391),y=i(16283),T=i(87757),z=i(14859),E=i(37586),_=i(53750),L=i(60202),C=i(44729),x=i(33635),N=i(84028),P=i(68216),D=i(59618),F=i(67786),b=i(47809),w=i(54829),I=i(71579);const M=function(d,f){return{"text-green-500":d,"text-red-500":f}};function j(d,f){if(1&d){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",22),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",22)(6,"div",23),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"td",22),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",22),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td",22),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td",24),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"findValueById"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",22),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td",22),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td")(25,"div",25)(26,"button",26),e.\u0275\u0275text(27," H\xe0nh \u0111\u1ed9ng "),e.\u0275\u0275element(28,"span",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"nz-dropdown-menu",null,28)(31,"ul",29)(32,"li",30),e.\u0275\u0275listener("click",function(n){const o=e.\u0275\u0275restoreView(t).$implicit,u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.handlerView(n,o))}),e.\u0275\u0275text(33," Xem "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"li",30),e.\u0275\u0275listener("click",function(n){const o=e.\u0275\u0275restoreView(t).$implicit,u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.handlerEdit(n,o))}),e.\u0275\u0275text(35," S\u1eeda "),e.\u0275\u0275elementEnd()()()()()()}if(2&d){const t=f.$implicit,r=f.index,n=e.\u0275\u0275reference(30),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",((null==a.pagination?null:a.pagination.page)-1)*(null==a.pagination?null:a.pagination.limit)+r+1," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.code),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzTooltipTitle",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name||"-"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(10,16,t.start_time,"dd/MM/yyyy HH:mm")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(13,19,t.end_time,"dd/MM/yyyy HH:mm")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((null==t.flash_sale_config||null==t.flash_sale_config.products?null:t.flash_sale_config.products.length)||0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(28,M,"ACTIVE"===t.status,"INACTIVE"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(18,22,t.status,a.ListStatus)||"-"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(21,25,t.created_at,"dd/MM/yyyy HH:mm")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.created_by_name),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary")("nzShape","round")("nzDropdownMenu",n),e.\u0275\u0275advance(6),e.\u0275\u0275property("action","view"),e.\u0275\u0275advance(2),e.\u0275\u0275property("action","edit")}}function B(d,f){if(1&d&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&d){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==t.pagination?null:t.pagination.total_rows)||0," ")}}const A=function(){return{y:"calc(100vh - 430px)"}},H=function(){return[10,15,20,30,40,50]};let O=(()=>{class d{constructor(){this.listOfData=[],this.form=new s.FormGroup({}),this.model={},this.ListStatus=(0,N.EC)(),this.rows=[],this.options={formState:{hidden:!1}},this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"name",type:"search-input",className:"basis-6/12",props:{placeholder:"T\xecm ki\u1ebfm theo m\xe3, t\xean flash sale",nzPrefixIcon:"search"}}]},{className:"flex flex-row flex-wrap",fieldGroupClassName:"flex w-full",fieldGroup:[{key:"status",type:"select-custom",className:"basis-6/12",props:{placeholder:"Tr\u1ea1ng th\xe1i",valueProp:"id",labelProp:"value",label:"Tr\u1ea1ng th\xe1i",viewValue:"value",options:(0,N.EC)()},expressions:{hide:"!formState.hidden"}},{key:"effect",type:"select-custom",className:"basis-6/12",props:{placeholder:"Hi\u1ec7u l\u1ef1c",valueProp:"id",labelProp:"value",viewValue:"value",label:"Hi\u1ec7u l\u1ef1c",options:[{id:"non expired",value:"C\xf2n hi\u1ec7u l\u1ef1c"},{id:"expired",value:"H\u1ebft hi\u1ec7u l\u1ef1c"}]},expressions:{hide:"!formState.hidden"}}]}],this.modalService=(0,e.inject)(E.NzModalService),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.icomLibsDynamicComponentService=(0,e.inject)(_.Gj),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.router=(0,e.inject)(L.Router),this.iComLibsServicesProjectDynamicHomeService=(0,e.inject)(C.KL),this.iComLibsServicesProjectFlashSaleService=(0,e.inject)(C.Rm),this.IComMessageService=(0,e.inject)(_.Qi)}ngOnInit(){this.loadPage(1)}drop(t){(0,v.bA)(this.listOfData,t.previousIndex,t.currentIndex)}handlerSearch(t){t.stopPropagation(),t.preventDefault(),this.loadPage(1)}handlerReset(){this.form.reset(),this.loadPage(1)}loadPage(t=1,r=10){var n=this;return(0,c.Z)(function*(){try{n.loading=!0;const o={...{...n.model},size:r,page:t},u=yield(0,x.lastValueFrom)(n.iComLibsServicesProjectFlashSaleService.list({...o}));if(u&&u.data&&u.data.items)return n.rows=u.data.items||[],void(n.pagination=u.data.pagination);n.rows=[],n.pagination=u.data.pagination}catch(a){console.log(a)}finally{n.loading=!1,n.cdr.detectChanges()}})()}handlerToggleCollapse(t){t.stopPropagation(),t.preventDefault(),this.options.formState.hidden=!this.options.formState.hidden}handlerView(t,r){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl(`flash-sale/list/detail?id=${r._id}&mode=view`)}handlerEdit(t,r){var n=this;return(0,c.Z)(function*(){t.stopPropagation(),t.preventDefault();try{const a=r?._id||"";if((yield(0,x.lastValueFrom)(n.iComLibsServicesProjectFlashSaleService.detail(+a)))?.data?.is_transaction_exists)return void n.IComMessageService.showAlertMessageError("Flash sale \u0111\xe3 c\xf3 giao d\u1ecbch th\xe0nh c\xf4ng. B\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p s\u1eeda.");n.router.navigateByUrl(`flash-sale/list/detail?id=${r._id}&mode=edit`)}catch(a){const u=a?.error?.error_message;n.IComMessageService.showAlertMessageError(u)}})()}handlerActivate(t){t.stopPropagation(),t.preventDefault()}showModal(t){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl("flash-sale/list/detail?mode=add")}handlerOpenGroupSale(t){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl("flash-sale/list/group")}onPageChange(t){this.loadPage(t,this.pagination.limit)}onPageSizeChange(t){this.loadPage(1,t)}static#e=this.\u0275fac=function(r){return new(r||d)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["icom-libs-flash-sale-list"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:51,vars:29,consts:[[1,"flex","w-full","h-full","flex-col"],[1,"w-full","!p-2","bg-white","border","rounded-md"],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzType","click"],["nz-form","",1,"!p-4","bg-white","border","rounded-md","mt-4",3,"formGroup","keydown.enter"],[1,"w-full","items-center"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-col","",1,"search-area","flex","items-center"],["icomLibsHasPermissionDirective","","nz-button","",1,"!flex","!items-center",3,"action","nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],["icomLibsHasPermissionDirective","","nz-button","",1,"ml-4","!flex","!items-center",3,"action","click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],["icomLibsHasPermissionDirective","",1,"ml-4","items-center","flex",3,"action","click"],["nz-icon","",1,"ml-2",3,"nzType"],[1,"w-full","d-flex","h-full","mt-4","overflow-hidden"],["nzShowSizeChanger","","cdkDropList","",1,"h-full",3,"nzScroll","nzData","nzLoading","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange","cdkDropListDropped"],["flashSaleTable","","sectionTable",""],["nzWidth","10%",1,"text-xs"],[4,"ngFor","ngForOf"],["footerTemplate",""],[1,"text-xs","!p-2"],["appShowTooltipOnOverflow","","nz-tooltip","",1,"overflow-hidden","text-ellipsis","whitespace-nowrap",3,"nzTooltipTitle"],[1,"text-xs","!p-2",3,"ngClass"],[1,"name-container"],["nz-button","","nz-button","","nz-dropdown","",3,"nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["icomLibsHasPermissionDirective","","nz-menu-item","",3,"action","click"],[1,"footer-content"]],template:function(r,n){if(1&r&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2),e.\u0275\u0275listener("click",function(o){return n.handlerOpenGroupSale(o)}),e.\u0275\u0275text(3," Qu\u1ea3n l\xfd nh\xf3m flash sale "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",3),e.\u0275\u0275listener("keydown.enter",function(o){return n.handlerSearch(o)}),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275element(6,"formly-form",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6)(8,"div",7)(9,"button",2),e.\u0275\u0275listener("click",function(o){return n.showModal(o)}),e.\u0275\u0275element(10,"span",8),e.\u0275\u0275text(11," Th\xeam m\u1edbi "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",9)(13,"button",10),e.\u0275\u0275listener("click",function(o){return n.handlerSearch(o)}),e.\u0275\u0275element(14,"i",11),e.\u0275\u0275text(15," L\u1ecdc "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",12),e.\u0275\u0275listener("click",function(){return n.handlerReset()}),e.\u0275\u0275element(17,"i",13),e.\u0275\u0275text(18," L\xe0m m\u1edbi "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"a",14),e.\u0275\u0275listener("click",function(o){return n.handlerToggleCollapse(o)}),e.\u0275\u0275text(20),e.\u0275\u0275element(21,"span",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(22,"div",16)(23,"nz-table",17,18),e.\u0275\u0275listener("nzPageIndexChange",function(o){return n.onPageChange(o)})("nzPageSizeChange",function(o){return n.onPageSizeChange(o)})("cdkDropListDropped",function(o){return n.drop(o)}),e.\u0275\u0275elementStart(26,"thead")(27,"tr")(28,"th",19),e.\u0275\u0275text(29,"STT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"th",19),e.\u0275\u0275text(31,"M\xe3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"th",19),e.\u0275\u0275text(33,"T\xean"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"th",19),e.\u0275\u0275text(35,"T\u1eeb ng\xe0y"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th",19),e.\u0275\u0275text(37,"\u0110\u1ebfn ng\xe0y"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"th",19),e.\u0275\u0275text(39,"S\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"th",19),e.\u0275\u0275text(41,"Tr\u1ea1ng th\xe1i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"th",19),e.\u0275\u0275text(43,"Th\u1eddi gian t\u1ea1o"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th",19),e.\u0275\u0275text(45,"Ng\u01b0\u1eddi t\u1ea1o"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(46,"th",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"tbody"),e.\u0275\u0275template(48,j,36,31,"tr",20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(49,B,2,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor)),2&r){const a=e.\u0275\u0275reference(24),o=e.\u0275\u0275reference(50);e.\u0275\u0275advance(2),e.\u0275\u0275property("action","view")("nzType","link"),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("model",n.model)("fields",n.fields)("options",n.options)("form",n.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("action","add")("nzType","primary"),e.\u0275\u0275advance(4),e.\u0275\u0275property("action","view")("nzType","primary"),e.\u0275\u0275advance(3),e.\u0275\u0275property("action","view"),e.\u0275\u0275advance(3),e.\u0275\u0275property("action","view"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.options.formState.hidden?"Thu g\u1ecdn":"M\u1edf r\u1ed9ng"," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType",n.options.formState.hidden?"up":"down"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzScroll",e.\u0275\u0275pureFunction0(27,A))("nzData",n.rows)("nzLoading",n.loading)("nzTotal",null==n.pagination?null:n.pagination.total_rows)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",null==n.pagination?null:n.pagination.page)("nzFrontPagination",!1)("nzPageSizeOptions",e.\u0275\u0275pureFunction0(28,H))("nzData",n.rows)("nzFooter",o),e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",a.data)}},dependencies:[v._t,v.Wj,l.NzTableModule,l.NzTableComponent,l.NzTableCellDirective,l.NzThMeasureDirective,l.NzTheadComponent,l.NzTbodyComponent,l.NzTrDirective,g.DatePipe,g.NgFor,m.FormlyNgZorroAntdModule,s.ReactiveFormsModule,s.\u0275NgNoValidate,s.NgControlStatusGroup,s.FormGroupDirective,h.FormlyModule,h.FormlyForm,y.NzButtonModule,y.NzButtonComponent,b.\u0275NzTransitionPatchDirective,w.NzWaveDirective,T.NzIconModule,T.NzIconDirective,z.NzDropDownModule,I.NzMenuDirective,I.NzMenuItemComponent,z.NzDropDownDirective,z.NzDropdownMenuComponent,z.NzDropdownButtonDirective,E.NzModalModule,P._,g.NgClass,D.NzToolTipModule,D.NzTooltipDirective,F.E],encapsulation:2,changeDetection:0})}return d})()},68216:(S,p,i)=>{i.d(p,{_:()=>e});var c=i(36151);let e=(()=>{class l{transform(s,m){if(!s||!m)return null;const h=m.find(y=>y.id===s);return h?h.value:null}static#e=this.\u0275fac=function(m){return new(m||l)};static#t=this.\u0275pipe=c.\u0275\u0275definePipe({name:"findValueById",type:l,pure:!0,standalone:!0})}return l})()}}]);