(self.webpackChunkicom=self.webpackChunkicom||[]).push([[6991],{86991:(ue,x,a)=>{a.r(x),a.d(x,{IcomLibInventoryListItemsComponent:()=>pe,ProductInfoComponent:()=>L});var e=a(36151),c=a(93484),E=a(16283),m=a(44729),l=a(33635),u=a(14817),y=a(87757),v=a(37586),h=a(53750),g=a(60202),p=a(49671),_=a(13391);function M(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"label",5),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"div",6)(6,"div",4)(7,"label",5),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" T\xean S\u1ea3n Ph\u1ea9m: ",t.dataProduct.name,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" Lo\u1ea1i S\u1ea3n Ph\u1ea9m: ",t.dataProduct.gen_code_type,"")}}let D=(()=>{class i{constructor(){this.form=new c.FormGroup({}),this.model={},this.options={formState:{hideQuantity:!0}},this.IComLibsServicesProductService=(0,e.inject)(m.k),this.inventoryService=(0,e.inject)(m.NH),this.IComMessageService=(0,e.inject)(h.Qi),this.nzModalData=(0,e.inject)(v.NZ_MODAL_DATA),this.icomSave=new e.EventEmitter,this.fields=[]}ngOnInit(){var t=this;return(0,p.Z)(function*(){if(t.fields=[{key:"product_id",type:"input",className:"basis-4/12",props:{label:"ID S\u1ea3n Ph\u1ea9m",placeholder:"Nh\u1eadp ID S\u1ea3n Ph\u1ea9m",type:"string",required:!0,change:(n=(0,p.Z)(function*(o,r){try{if(t.options.formState.hideQuantity=!0,!t.model.product_id)return void(t.dataProduct=void 0);const d=yield(0,l.lastValueFrom)(t.IComLibsServicesProductService.getProduct(t.model.product_id));t.dataProduct=d,t.options.formState.hideQuantity=!1}catch{t.dataProduct=void 0}}),function(r,d){return n.apply(this,arguments)})}},{key:"inventory_product_id",type:"select-custom",className:"basis-4/12",props:{label:"T\xean Kho",placeholder:"Ch\u1ecdn T\xean Kho",type:"string",viewValue:"name",labelProp:"name",required:!0,valueProp:"id",options:t.inventoryService.searchInventory().pipe((0,l.map)(n=>n?.data?.items))}},{key:"quantity",type:"input",className:"basis-4/12",props:{label:"S\u1ed1 L\u01b0\u1ee3ng",required:!0,placeholder:"Nh\u1eadp S\u1ed1 L\u01b0\u1ee3ng",type:"number"},expressions:{hide:"formState.hideQuantity"}}],t.nzModalData.productId){t.model.product_id=t.nzModalData.productId||"";try{if(t.options.formState.hideQuantity=!0,!t.model.product_id)return void(t.dataProduct=void 0);const n=yield(0,l.lastValueFrom)(t.IComLibsServicesProductService.getProduct(t.model.product_id));t.dataProduct=n,t.options.formState.hideQuantity=!1}catch{t.dataProduct=void 0}}var n})()}handlerSave(t){var n=this;return(0,p.Z)(function*(){try{if(!n.form.valid)return Object.keys(n.form.controls).forEach(o=>{n.form.controls[o].touched=!0}),void(t.success&&t.success());if(n.dataProduct&&"GENCODE_TYPE_PRE_GENERATED"!==n.dataProduct.gen_code_type)return n.IComMessageService.showAlertMessageError("Ch\u1ec9 th\xeam m\u1ee5c cho lo\u1ea1i gen code l\xe0 Pre Gen"),void(t.success&&t.success());n.form.markAsTouched(),n.form.submitted=!0,n.processUpload(t)}catch(o){n.IComMessageService.showAlertMessageDone(o?.error?.error_message)}})()}processUpload(t){var n=this;return(0,p.Z)(function*(){const o={...n.model};o.product_id=+o.product_id||0,delete o.id;try{yield(0,l.lastValueFrom)(n.inventoryService.save(o)),n.IComMessageService.showAlertMessageDone("Th\xeam M\u1ee5c Kho th\xe0nh c\xf4ng"),t.success&&t.success(),n.icomSave.emit(!0)}catch(r){n.IComMessageService.showAlertMessageError(r?.error?.error_message||"Th\xeam M\u1ee5c Kho th\u1ea5t b\u1ea1i")}finally{t.success&&t.success()}})()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-inventory-items-list-add_manual"]],inputs:{productId:"productId"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:3,vars:6,consts:[["nz-form","",1,"!p-4","bg-white","border","rounded-md",3,"formGroup"],[3,"model","fields","options","form"],[4,"ngIf"],[1,"mt-4"],[1,"form-group"],[1,"control-label"],[1,"mt-5"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275element(1,"formly-form",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,M,9,2,"ng-container",2)),2&n&&(e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",o.model)("fields",o.fields)("options",o.options)("form",o.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.dataProduct))},dependencies:[_.FormlyModule,_.FormlyForm,c.ReactiveFormsModule,c.\u0275NgNoValidate,c.NgControlStatusGroup,c.FormGroupDirective,u.NgIf],encapsulation:2})}return i})();var b=a(71684),I=a(99595),S=(a(16564),a(926));function N(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"div",12)(1,"label",13),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" T\xean S\u1ea3n Ph\u1ea9m: ",t.dataProduct.name,"")}}function j(i,s){1&i&&e.\u0275\u0275element(0,"nz-spin",14),2&i&&e.\u0275\u0275property("nzSize","large")}function A(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275template(2,N,3,1,"div",10),e.\u0275\u0275template(3,j,1,1,"nz-spin",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isLoadingContent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isLoadingContent)}}let w=(()=>{class i{constructor(t){this.msg=t,this.form=new c.FormGroup({}),this.model={},this.options={formState:{hideQuantity:!0}},this.fileList=[],this.IComLibsServicesProductService=(0,e.inject)(m.k),this.inventoryService=(0,e.inject)(m.NH),this.IComMessageService=(0,e.inject)(h.Qi),this.nzModalData=(0,e.inject)(v.NZ_MODAL_DATA),this.icomSave=new e.EventEmitter,this.beforeUpload=(n,o)=>new l.Observable(r=>{const d="text/csv"===n.type;if(!d)return this.msg.error("Ch\u1ec9 c\xf3 th\u1ec3 t\u1ea3i l\xean t\u1ec7p CSV!"),void r.complete();const C=n.size/1024/1024<2;return C?this.fileList&&this.fileList.length?(this.msg.error("Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ea3i l\xean m\u1ed9t t\u1ec7p"),void r.complete()):(r.next(d&&C),void r.complete()):(this.msg.error("K\xedch th\u01b0\u1edbc t\u1ec7p kh\xf4ng \u0111\u01b0\u1ee3c v\u01b0\u1ee3t qu\xe1 2MB!"),void r.complete())}),this.fields=[]}ngOnInit(){var t=this;return(0,p.Z)(function*(){if(t.fields=[{key:"product_id",type:"input",className:"basis-4/12",props:{label:"ID S\u1ea3n Ph\u1ea9m",placeholder:"Nh\u1eadp ID S\u1ea3n Ph\u1ea9m",viewValue:"label",required:!0,change:(n=(0,p.Z)(function*(o,r){try{if(!t.model.product_id)return void(t.dataProduct=void 0);t.isLoadingContent=!0;const d=yield(0,l.lastValueFrom)(t.IComLibsServicesProductService.getProduct(t.model.product_id));t.dataProduct=d}catch{t.dataProduct=void 0}finally{t.isLoadingContent=!1}}),function(r,d){return n.apply(this,arguments)})}},{key:"inventory_id",type:"select-custom",parsers:[n=>+n],className:"basis-4/12",props:{label:"Kho",placeholder:"Ch\u1ecdn Kho",type:"string",viewValue:"name",labelProp:"name",required:!0,valueProp:"id",options:t.inventoryService.searchInventory().pipe((0,l.map)(n=>n?.data?.items))}}],t.nzModalData.productId){t.model.product_id=t.nzModalData.productId||"";try{if(!t.model.product_id)return void(t.dataProduct=void 0);t.isLoadingContent=!0;const n=yield(0,l.lastValueFrom)(t.IComLibsServicesProductService.getProduct(t.model.product_id));t.dataProduct=n}catch{t.dataProduct=void 0}finally{t.isLoadingContent=!1}}var n})()}handlerSave(t){var n=this;return(0,p.Z)(function*(){try{if(!n.form.valid)return Object.keys(n.form.controls).forEach(o=>{n.form.controls[o].touched=!0}),void(t.success&&t.success());n.form.markAsTouched(),n.form.submitted=!0,n.processUpload(t)}catch(o){n.IComMessageService.showAlertMessageError(o?.error?.error_message||"Import th\u1ea5t b\u1ea1i")}})()}processUpload(t){this.isLoading=!0;const n=new FormData;n.append("file",this.fileList[0].originFileObj);const o={...this.model,expirte_time:null};this.inventoryService.uploadFile(n).pipe((0,l.map)(r=>{o.file_id=r.data?.file_id||"",this.inventoryService.import(o).subscribe({next:()=>{this.IComMessageService.showAlertMessageDone("Import th\xe0nh c\xf4ng"),t.success&&t.success(),this.icomSave.emit(!0)},error:d=>{this.IComMessageService.showAlertMessageError(d?.error?.error_message),this.isLoading=!1,t.success&&t.success()}})})).subscribe({error:r=>{this.IComMessageService.showAlertMessageError(r?.error?.error_message),this.isLoading=!1,t.success&&t.success()}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(b.NzMessageService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-inventory-items-list-import_file"]],inputs:{productId:"productId"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:12,vars:9,consts:[[1,"!p-4","bg-white","border","rounded-md"],["nz-form","",3,"formGroup"],[3,"model","fields","options","form"],["nzName","avatar","nzType","drag",1,"basis-1/2","ml-4","h-full","w-full",3,"nzMultiple","nzFileList","nzBeforeUpload","nzFileListChange"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"],[4,"ngIf"],[1,"mt-4"],["class","form-group",4,"ngIf"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],[1,"form-group"],[1,"control-label"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1),e.\u0275\u0275element(2,"formly-form",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"nz-upload",3),e.\u0275\u0275listener("nzFileListChange",function(d){return o.fileList=d}),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275elementStart(5,"p",4),e.\u0275\u0275element(6,"span",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"p",6),e.\u0275\u0275text(8,"T\u1ea3i l\xean t\u1ec7p CSV"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"p",7),e.\u0275\u0275text(10,"K\xedch th\u01b0\u1edbc kh\xf4ng v\u01b0\u1ee3t qu\xe1 2 MB"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,A,4,2,"ng-container",8)),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("model",o.model)("fields",o.fields)("options",o.options)("form",o.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzMultiple",!1)("nzFileList",o.fileList)("nzBeforeUpload",o.beforeUpload),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",o.dataProduct))},dependencies:[_.FormlyModule,_.FormlyForm,c.ReactiveFormsModule,c.\u0275NgNoValidate,c.NgControlStatusGroup,c.FormGroupDirective,u.NgIf,I.NzUploadModule,I.NzUploadComponent,S.NzSpinModule,S.NzSpinComponent],encapsulation:2})}return i})();var k=a(8111),V=a(30424),R=a(74843),z=a(8581),f=a(63801),T=a(57317),O=a(62059),F=a(15311);let B=(()=>{class i{constructor(t){this.msg=t,this.form=new c.FormGroup({}),this.model={},this.options={formState:{hideQuantity:!0}},this.listFields=[],this.iComLibsServicesProductCardService=(0,e.inject)(m.Oz),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.nzModalData=(0,e.inject)(v.NZ_MODAL_DATA),this.IComMessageService=(0,e.inject)(h.Qi),this.iComLibsServicesProjectDynamicHomeService=(0,e.inject)(m.KL),this.icomSave=new e.EventEmitter,this.fields=[]}ngOnInit(){var t=this;return(0,p.Z)(function*(){try{if(console.log(t.nzModalData),!t.nzModalData.productId)return;t.productId=t.nzModalData.productId;const n=yield(0,l.lastValueFrom)(t.iComLibsServicesProductCardService.getGiaoDichProduct(t.nzModalData.productItemsId));t.model=n?.data?.admin_inventory_card_detail??{},t.iComLibsServicesProductCardService.getListFieldProdcutId(t.nzModalData.productId??0).pipe((0,l.map)(o=>o.data.map(r=>({...r})))).subscribe(o=>{t.listFields=o,t.setField(),t.cdr.detectChanges()})}catch{}})()}setField(){this.fields=[{key:"card_code",type:"input",props:{label:"M\xe3 th\u1ebb",required:!0,disabled:this.isFieldDisabled("card_code"),placeholder:"xxxxe678"},hideExpression:()=>this.isFieldExist("card_code")},{key:"expire_date",type:"date",props:{label:"H\u1ea1n s\u1eed d\u1ee5ng",ShowTime:!0,format:"dd-MM-yyyy",required:!0,disabled:this.isFieldDisabled("expire_date")},hideExpression:()=>this.isFieldExist("expire_date")},{key:"count_checkup_used",type:"input",templateOptions:{label:"L\u01b0\u1ee3t \u0111\xe3 s\u1eed d\u1ee5ng",type:"number",required:!0,disabled:this.isFieldDisabled("count_checkup_used")},hideExpression:()=>this.isFieldExist("count_checkup_used")},{key:"birth_date",type:"date",props:{label:"Ng\xe0y sinh",ShowTime:!0,format:"dd-MM-yyyy",disabled:this.isFieldDisabled("birth_date")},expressions:{"props.disabled":"formState.disabled"},hideExpression:()=>this.isFieldExist("birth_date")},{key:"phone_number",type:"input",templateOptions:{label:"S\u0110T ng\u01b0\u1eddi mua",placeholder:"0987234323",disabled:this.isFieldDisabled("phone_number")},hideExpression:()=>this.isFieldExist("phone_number")},{key:"full_name",type:"input",props:{label:"H\u1ecd v\xe0 t\xean",placeholder:"Tr\u01b0\u01a1ng Th\u1ecb Ph\u1ee5ng",disabled:this.isFieldDisabled("full_name")},hideExpression:()=>this.isFieldExist("full_name")},{key:"email",type:"input",props:{label:"Email",placeholder:"Email",disabled:this.isFieldDisabled("email")},hideExpression:()=>this.isFieldExist("email")},{key:"email",type:"input",props:{label:"Email",placeholder:"Email",disabled:this.isFieldDisabled("email")},hideExpression:()=>this.isFieldExist("email")},{key:"location_province_code",type:"select-custom",templateOptions:{label:"T\u1ec9nh/Th\xe0nh ph\u1ed1",placeholder:"TP. H\u1ed3 Ch\xed Minh",viewValue:"value",labelProp:"value",valueProp:"id",disabled:this.isFieldDisabled("location_province_code"),options:this.iComLibsServicesProjectDynamicHomeService.listCity().pipe((0,l.map)(t=>t?.data))},hideExpression:()=>this.isFieldExist("location_province_code")},{key:"location_district_code",type:"select-custom",props:{label:"Qu\u1eadn/Huy\u1ec7n",placeholder:"Qu\u1eadn 1",disabled:this.isFieldDisabled("location_district_code"),viewValue:"district_name",labelProp:"district_name",valueProp:"district_code",options:this.iComLibsServicesProjectDynamicHomeService.listCity().pipe((0,l.map)(t=>t?.data))},hideExpression:()=>this.isFieldExist("location_district_code"),hooks:{onInit:t=>{console.log(t);const n=t.parent.get("location_province_code").formControl;t.props.options=n.valueChanges.pipe((0,l.startWith)(n.value),(0,l.distinctUntilChanged)(),(0,l.concatMap)(o=>o?this.iComLibsServicesProductCardService.getDistricts(o).pipe((0,l.map)(r=>{console.log(r?.data);const d=r?.data?.find(C=>t?.model?.location_district_code===C.district_code);return console.log(t?.model?.location_district_code),d||(t.formControl.setValue(null),t.parent.get("location_district_code").formControl?.setValue(null)),r?.data||[]})):(t.parent.get("location_district_code").formControl?.setValue(null),[])))}}},{key:"address_full",type:"input",templateOptions:{label:"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3",disabled:this.isFieldDisabled("address_full"),placeholder:"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3"},hideExpression:()=>this.isFieldExist("address_full")}]}isFieldExist(t){return console.log(t.toUpperCase()),!this.listFields.some(n=>n.code===t.toUpperCase())}handlerSave(t){var n=this;return(0,p.Z)(function*(){try{if(!n.form.valid)return Object.keys(n.form.controls).forEach(o=>{n.form.controls[o].touched=!0}),void(t.success&&t.success());n.form.markAsTouched(),n.form.submitted=!0,n.processUpload(t)}catch(o){n.IComMessageService.showAlertMessageError(o?.error?.error_message||"Import th\u1ea5t b\u1ea1i")}})()}processUpload(t){var n=this;return(0,p.Z)(function*(){const o={...n.model};try{const r=yield(0,l.lastValueFrom)(n.iComLibsServicesProductCardService.updateGiaoDichCardProduct(n.nzModalData.productId,o));n.IComMessageService.showAlertMessageDone("Th\xeam M\u1ee5c Kho th\xe0nh c\xf4ng"),t.success&&t.success(),n.icomSave.emit(r?.data)}catch(r){n.IComMessageService.showAlertMessageError(r?.error?.error_message||"Th\xeam M\u1ee5c Kho th\u1ea5t b\u1ea1i")}finally{t.success&&t.success()}})()}isFieldDisabled(t){return!1===this.listFields.find(o=>o.code===t.toUpperCase())?.enable_edit}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(b.NzMessageService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-update-information"]],inputs:{productId:"productId"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:2,vars:5,consts:[["nz-form","",3,"nzLayout","formGroup"],[3,"form","fields","model"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275element(1,"formly-form",1),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275property("nzLayout","vertical")("formGroup",o.form),e.\u0275\u0275advance(1),e.\u0275\u0275property("form",o.form)("fields",o.fields)("model",o.model))},dependencies:[_.FormlyModule,_.FormlyForm,c.ReactiveFormsModule,c.\u0275NgNoValidate,c.NgControlStatusGroup,c.FormGroupDirective,I.NzUploadModule,S.NzSpinModule,O.FormlyNgZorroAntdModule,F.NzFormModule,F.NzFormDirective],encapsulation:2})}return i})();var P=a(59618),G=a(48290);function U(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"Lo\u1ea1i s\u1ea3n ph\u1ea9m "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"icomLibsCoreGetValueList"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind4(6,1,null==t.data?null:t.data.type,"code",t.listStatus,"name"))}}function H(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"T\xean s\u1ea3n ph\u1ea9m"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data?null:t.data.name)}}function K(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"SKU"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data?null:t.data.sku)}}function Q(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"Th\u1eddi gian giao d\u1ecbch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(6,1,null==t.data?null:t.data.transaction_time,"dd/MM/yyyy HH:mm:ss"))}}function Z(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data?null:t.data.phone_number)}}function $(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",10),e.\u0275\u0275listener("click",function(o){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.handleEdit(o))}),e.\u0275\u0275elementEnd()}}function Y(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"M\xe3 th\u1ebb"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",11),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("nzTooltipTitle",null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.card_code),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",(null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.card_code)||"-"," ")}}function W(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"L\u01b0\u1ee3t \u0111\xe3 s\u1eed d\u1ee5ng"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.count_checkup_used)}}function X(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"H\u1ea1n s\u1eed d\u1ee5ng"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(6,1,null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.expired_date,"dd/MM/yyyy"))}}function J(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"H\u1ecd v\xe0 t\xean"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.full_name)}}function q(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.phone_number)}}function ee(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"Ng\xe0y sinh"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(6,1,null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.birth_date,"dd/MM/yyyy"))}}function te(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"T\u1ec9nh th\xe0nh"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"icomLibsCoreGetValueList"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(6,1,null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.location_province_code,"id",t.listCity))}}function ne(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"Qu\u1eadn huy\u1ec7n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"icomLibsCoreGetValueList"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind4(6,1,null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.location_district_code,"district_code",t.listDistrict,"district_name"))}}function ie(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"p",6),e.\u0275\u0275text(3,"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.data||null==t.data.admin_inventory_card_detail?null:t.data.admin_inventory_card_detail.address_full)}}function oe(i,s){if(1&i&&(e.\u0275\u0275elementStart(0,"nz-card",8),e.\u0275\u0275template(1,$,1,0,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(3,"div",5),e.\u0275\u0275template(4,Y,6,2,"ng-container",3),e.\u0275\u0275template(5,W,6,1,"ng-container",3),e.\u0275\u0275template(6,X,7,4,"ng-container",3),e.\u0275\u0275template(7,J,6,1,"ng-container",3),e.\u0275\u0275template(8,q,6,1,"ng-container",3),e.\u0275\u0275template(9,ee,7,4,"ng-container",3),e.\u0275\u0275template(10,te,7,5,"ng-container",3),e.\u0275\u0275template(11,ne,7,6,"ng-container",3),e.\u0275\u0275template(12,ie,6,1,"ng-container",3),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275reference(2),n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("nzExtra",t),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.card_code),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.count_checkup_used),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.expired_date),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.full_name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.phone_number),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.birth_date),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.location_province_code),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.location_district_code),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.data||null==n.data.admin_inventory_card_detail?null:n.data.admin_inventory_card_detail.address_full)}}function re(i,s){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nz-card",4)(2,"div",5),e.\u0275\u0275template(3,U,7,6,"ng-container",3),e.\u0275\u0275template(4,H,6,1,"ng-container",3),e.\u0275\u0275template(5,K,6,1,"ng-container",3),e.\u0275\u0275elementStart(6,"div")(7,"p",6),e.\u0275\u0275text(8,"S\u1ed1 l\u01b0\u1ee3ng"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"p"),e.\u0275\u0275text(10,"1"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,Q,7,4,"ng-container",3),e.\u0275\u0275template(12,Z,6,1,"ng-container",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,oe,13,10,"nz-card",7),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==t.data?null:t.data.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.data?null:t.data.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.data?null:t.data.sku),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==t.data?null:t.data.transaction_time),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.data?null:t.data.phone_number),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.data&&(null==t.data?null:t.data.admin_inventory_card_detail))}}let L=(()=>{class i{constructor(t,n,o){this.modalService=t,this.route=n,this.router=o,this.backClicked=new e.EventEmitter,this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.componentFactoryResolver=(0,e.inject)(e.ComponentFactoryResolver),this.iComLibsServicesProductCardService=(0,e.inject)(m.Oz),this.iComLibsServicesProductService=(0,e.inject)(m.k),this.location=(0,e.inject)(u.Location),this.IComMessageService=(0,e.inject)(h.Qi),this.iComLibsServicesProjectDynamicHomeService=(0,e.inject)(m.KL),this.handleRouterChange()}handleRouterChange(){this.router.events.subscribe(()=>{const t=this.route.snapshot.params.id;t&&(this.productItemsId=+t,this.isRouter=!0,this.callApi())}),setTimeout(()=>{this.handleLocationPathChange()},500)}callApi(){var t=this;return(0,p.Z)(function*(){t.setListCity(),t.setStatus();try{const n=yield(0,l.lastValueFrom)(t.iComLibsServicesProductCardService.getGiaoDichProduct(t.productItemsId??0));t.data=n.data,t.setListDistrict(),t.cdr.detectChanges()}catch(n){console.log(n)}})()}setListCity(){this.iComLibsServicesProjectDynamicHomeService.listCity().pipe((0,l.map)(t=>t?.data)).subscribe(t=>{this.listCity=t,this.cdr.detectChanges()})}setListDistrict(){this.iComLibsServicesProductCardService.getDistricts(this.data?.admin_inventory_card_detail?.location_province_code).pipe((0,l.map)(t=>t?.data)).subscribe(t=>{this.listDistrict=t,this.cdr.detectChanges()})}setStatus(){this.iComLibsServicesProductService.getOptionType("PRODUCT_TYPE").pipe((0,l.map)(t=>t?.data)).subscribe(t=>{this.listStatus=t,this.cdr.detectChanges()})}handleLocationPathChange(){const n=this.location.path().split("/").pop();n&&(this.productItemsId=n,this.callApi())}handleEdit(t){t.stopPropagation();const n=this.modalService.create({nzTitle:"C\u1eadp nh\u1eadt th\xf4ng tin",nzContent:B,nzMaskClosable:!1,nzClosable:!1,nzOnOk:()=>Promise.reject(),nzViewContainerRef:this.viewContainerRef,nzData:{productId:this.data?this.data.admin_inventory_card_detail.product_id:this.productId,productItemsId:this.productItemsId,success:()=>{n.destroy()}},nzFooter:[{label:"\u0110\xf3ng",onClick:()=>n.destroy()},{label:"L\u01b0u",type:"primary",loading:!1,onClick(){this.loading=!0,n.getContentComponent().handlerSave({success:()=>{this.loading=!1,n?.containerInstance?.cdr?.detectChanges()}})}}]});n.getContentComponent().icomSave.subscribe(r=>{this.data.admin_inventory_card_detail&&(this.data.admin_inventory_card_detail=r),this.cdr.detectChanges(),n.destroy()})}handlerNzBack(){this.isRouter?this.router.navigateByUrl("inventory/customer"):(this.backClicked.emit(),this.location.replaceState("inventory/customer"))}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(v.NzModalService),e.\u0275\u0275directiveInject(g.ActivatedRoute),e.\u0275\u0275directiveInject(g.Router))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-product-info"]],inputs:{productItemsId:"productItemsId",productId:"productId"},outputs:{backClicked:"backClicked"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:6,vars:2,consts:[["nzBackIcon","",1,"site-page-header","h-full","w-full","flex","flex-col",2,"position","absolute","top","0","left","250px","width","calc(100% - 250px)","background","#f0f2f5","height","100%",3,"nzBack"],[1,"w-full","h-full"],[1,"bg-gray-100","p-4","rounded-md"],[4,"ngIf"],["nzTitle","Th\xf4ng tin chung",1,"mb-4"],[1,"grid","grid-cols-3","gap-4"],[1,"font-semibold"],["nzTitle","Additional info","class","mt-4",3,"nzExtra",4,"ngIf"],["nzTitle","Additional info",1,"mt-4",3,"nzExtra"],["editTemplate",""],["nz-icon","","nzType","edit","nzTheme","outline",1,"cursor-pointer",2,"font-size","18px",3,"click"],["appShowTooltipOnOverflow","","nz-tooltip","",1,"overflow-hidden","text-ellipsis","whitespace-nowrap",3,"nzTooltipTitle"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"nz-page-header",0),e.\u0275\u0275listener("nzBack",function(){return o.handlerNzBack()}),e.\u0275\u0275elementStart(1,"nz-page-header-title"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"nz-page-header-footer",1)(4,"div",2),e.\u0275\u0275template(5,re,14,6,"ng-container",3),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==o.data?null:o.data.name)||""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.data))},dependencies:[T.NzCardModule,T.NzCardComponent,u.DatePipe,f.NzPageHeaderModule,f.NzPageHeaderComponent,f.NzPageHeaderTitleDirective,f.NzPageHeaderFooterDirective,u.NgIf,y.NzIconModule,y.NzIconDirective,P.NzToolTipModule,P.NzTooltipDirective,G.nG],encapsulation:2})}return i})();var ae=a(47809),le=a(54829);function se(i,s){if(1&i&&e.\u0275\u0275element(0,"nz-page-header",5),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("nzTitle",t.productName||"")}}function de(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"icom-libs-core-components-table",6),e.\u0275\u0275listener("icomAdd",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.handlerAdd())})("icomFunctionControl",function(o){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.handlerFunctionControl(o))}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(),n=e.\u0275\u0275reference(5);e.\u0275\u0275property("buttonTemplate",n)("columns",t.columns)("loadFn",t.loadData)("fields",t.fields)("model",t.model)("form",t.form)("limit",20)("displayExportFile",!0)("defaultExpand",!0)("functionExportFile",t.functionExportFile)("functionParse",t.functionParse)}}function ce(i,s){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"button",9),e.\u0275\u0275listener("click",function(o){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.showModal(o))}),e.\u0275\u0275element(2,"i",10),e.\u0275\u0275text(3," Th\xeam th\u1ee7 c\xf4ng "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.handlerShowModalImportFile())}),e.\u0275\u0275element(5,"i",12),e.\u0275\u0275text(6," Th\xeam b\u1eb1ng file "),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",t.customerInvetory)("nzType","primary"),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",t.customerInvetory)("nzType","primary")}}function me(i,s){if(1&i&&e.\u0275\u0275template(0,ce,7,4,"div",7),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.hiddenImport)}}let pe=(()=>{class i{showModal(t){t.stopPropagation(),t.preventDefault();const n=this.modalService.create({nzTitle:"Th\xeam M\u1ee5c Kho",nzContent:D,nzMaskClosable:!1,nzClosable:!1,nzOnOk:()=>Promise.reject(),nzViewContainerRef:this.viewContainerRef,nzData:{productId:-1===this.productId?"":this.productId},nzFooter:[{label:"\u0110\xf3ng",onClick:()=>n.destroy()},{label:"L\u01b0u",type:"primary",loading:!1,onClick(){this.loading=!0,n.getContentComponent().handlerSave({success:()=>{this.loading=!1,n.containerInstance.cdr.detectChanges()}})}}]});n.getContentComponent().icomSave.subscribe(()=>{n.destroy()})}handlerShowModalImportFile(){const t=this.modalService.create({nzTitle:"Nh\u1eadp M\u1ee5c Kho",nzContent:w,nzMaskClosable:!1,nzClosable:!1,nzOnOk:()=>Promise.reject(),nzViewContainerRef:this.viewContainerRef,nzData:{productId:-1===this.productId?"":this.productId,success:()=>{t.destroy()}},nzFooter:[{label:"\u0110\xf3ng",onClick:()=>t.destroy()},{label:"L\u01b0u",type:"primary",loading:!1,onClick(){this.loading=!0,t.getContentComponent().handlerSave({success:()=>{this.loading=!1,t?.containerInstance?.cdr?.detectChanges()}})}}]});t.getContentComponent().icomSave.subscribe(()=>{t.destroy()})}constructor(t,n,o){this.inventoryService=t,this.decimalPipe=n,this.modalService=o,this.location=(0,e.inject)(u.Location),this.iComMessageService=(0,e.inject)(h.Qi),this.icomLibsDynamicComponentService=(0,e.inject)(h.Gj),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.componentFactoryResolver=(0,e.inject)(e.ComponentFactoryResolver),this.form=new c.FormGroup({}),this.model={},this.iComLibsServicesInventoryService=(0,e.inject)(m.NH),this.productService=(0,e.inject)(m.k),this.IComMessageService=(0,e.inject)(h.Qi),this.fields=[{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"product_type",type:"select-custom",className:"basis-4/12 ",templateOptions:{label:"Lo\u1ea1i s\u1ea3n ph\u1ea9m",placeholder:"Select Tr\u1ea1ng th\xe1i",viewValue:"name",labelProp:"name",valueProp:"code",options:this.productService.getOptionType("PRODUCT_TYPE").pipe((0,l.map)(r=>r?.data))},expressions:{hide:"!formState.hidden"}},{key:"campaign_id",type:"input",className:"basis-4/12",props:{label:"M\xe3 Chi\u1ebfn D\u1ecbch",placeholder:"Nh\u1eadp M\xe3 Chi\u1ebfn D\u1ecbch",type:"string"},expressions:{hide:"!formState.hidden"}},{key:"inventory",type:"select-custom",className:"basis-3/12 ",props:{label:"T\xean Kho",viewValue:"name",labelProp:"name",valueProp:"id",options:this.inventoryService.searchInventory().pipe((0,l.map)(r=>r?.data?.items))},expressions:{hide:"!formState.hidden"}}]},{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"order_id",type:"input",className:"basis-4/12 ",props:{label:"M\xe3 \u0110\u01a1n H\xe0ng",placeholder:"Nh\u1eadp M\xe3 \u0110\u01a1n H\xe0ng",type:"string"},expressions:{hide:"!formState.hidden"}},{key:"buyer_customer_id",type:"input",className:"basis-4/12 ",props:{label:"Buyer Customer Id",placeholder:"Nh\u1eadp Buyer Customer Id",type:"string"},expressions:{hide:"!formState.hidden"}},{key:"status",type:"select-custom",className:"basis-3/12 ",props:{label:"Tr\u1ea1ng Th\xe1i",placeholder:"Ch\u1ecdn Tr\u1ea1ng Th\xe1i",viewValue:"name",labelProp:"name",valueProp:"int_value",options:this.productService.getOptionType("INVENTORY_ITEM_STATUS").pipe((0,l.map)(r=>r?.data))},expressions:{hide:"!formState.hidden"}}]}],this.listStatus=[],this.router=(0,e.inject)(g.Router),this.route=(0,e.inject)(g.ActivatedRoute),this.permissionService=(0,e.inject)(V.$A),this.loadData=r=>this.inventoryService.getListProductsInventories(r,{product_id:this.model?.product||this.productId,inventory_id:this.model?.inventory||this.inventoryId}),this.functionParse=r=>r?.map(d=>({...d,...d.creator_info})),this.functionExportFile=(r,d)=>{(0,k.cT)(`${z.N.apiGatewayUrl}${z.N.suffixProduct}/v1.0/inventory/${this.model?.inventory||this.inventoryId}/products/${this.model?.product||this.productId}/items/export`,"Danh s\xe1ch Kho",this.iComMessageService,r,!1,!0,d)},this.columns=[],this.hiddenImport=!0,this.route.queryParams.pipe().subscribe(r=>{r&&(this.inventoryId=this.inventoryId||r?.inventory||"",this.productId=this.productId||r?.product||"",this.productName=this.productName||r?.name||"")})}ngOnInit(){console.log(this.hiddenImport),(0,l.combineLatest)([this.productService.getOptionType("INVENTORY_ITEM_STATUS"),this.productService.getOptionType("PRODUCT_TYPE")]).subscribe(t=>{this.listStatus=t?.[0]?.data;const n=t?.[1]?.data;this.columns=[{key:"action",type:"button",buttonText:"Xem chi ti\u1ebft",buttonType:"primary",callback:this.viewItem.bind(this)},{title:"Id",key:"id",type:"text"},{title:"T\xean s\u1ea3n ph\u1ea9m",key:"name",type:"text",width:"300px"},{title:"Lo\u1ea1i s\u1ea3n ph\u1ea9m",key:"product_type",pipe:"array",type:"text",pipeArgs:n,keyField:"code",labelField:"name",width:"200px"},{title:"ID s\u1ea3n ph\u1ea9m",key:"product_id",type:"text"},{title:"Kho",key:"inventory_name",type:"text"},{title:"M\xe3 Chi\u1ebfn D\u1ecbch",key:"campaign_id",type:"text"},{title:"S\u1ed1 Serial",key:"serial",type:"text"},{title:"M\xe3 \u0110\u01a1n H\xe0ng",key:"order_id",type:"text",width:"300px"},{title:"Th\u1eddi gian mua",key:"start_time",type:"text",pipe:"time"},{title:"Th\u1eddi gian h\u1ebft h\u1ea1n",key:"end_time",type:"text",pipe:"time"},{title:"Tr\u1ea1ng Th\xe1i",key:"status",pipe:"array",type:"text",pipeArgs:this.listStatus,keyField:"int_value",labelField:"name"},{title:"Buyer Customer Id",key:"buyer_customer_id",type:"text"},{title:"Ng\xe0y T\u1ea1o",key:"created_at",type:"text",pipe:"time"}]})}deleteItem(t){this.modalService.confirm({nzTitle:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ${t?.code} ?`,nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzOkDanger:!0,nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDeleteSection.bind(this,t),nzCancelText:"H\u1ee7y b\u1ecf"},"error")}processDeleteSection(t){return(0,l.lastValueFrom)(this.iComLibsServicesInventoryService.deleteTicket(t?.id||"")).then(()=>{this.IComMessageService.showAlertMessageDone("Thao t\xe1c th\xe0nh c\xf4ng."),this.router.navigateByUrl("inventory/transfer"),this.eventFunctionControl.reset()}).catch(n=>{this.IComMessageService.showAlertMessageError(n?.error?.error_message||"Thao t\xe1c th\u1ea5t b\u1ea1i")})}handlerAdd(){this.router.navigateByUrl("inventory/transfer/detail?mode=add")}handlerFunctionControl(t){this.eventFunctionControl=t}viewItem(t,n){this.childComponentRef&&this.removeComponentFromComponent(this,this.childComponentRef),this.childComponentRef=this.icomLibsDynamicComponentService.appendComponentToComponent(this,L),this.childComponentRef.instance.isAdd=n||!1,this.childComponentRef.instance.productItemsId=t.id,this.childComponentRef.instance.productId=13467,this.childComponentRef.instance.backClicked.subscribe(o=>{o&&this.eventFunctionControl.mergeItem&&this.eventFunctionControl.mergeItem("id",o),this.location.replaceState("inventory/customer"),this.childComponentRef&&this.removeComponentFromComponent(this,this.childComponentRef),this.childComponentRef=null}),this.location.replaceState(`inventory/items/detail/${t.id}`),this.cdr.detectChanges()}removeComponentFromComponent(t,n){const o=t.viewContainerRef,r=o.indexOf(n.hostView);-1!==r&&o.detach(r),n.destroy()}static#e=this.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(m.NH),e.\u0275\u0275directiveInject(u.DecimalPipe),e.\u0275\u0275directiveInject(v.NzModalService))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-inventory-items-list"]],inputs:{inventoryId:"inventoryId",productId:"productId",productName:"productName",customerInvetory:"customerInvetory",hiddenImport:"hiddenImport"},standalone:!0,features:[e.\u0275\u0275ProvidersFeature([u.DecimalPipe]),e.\u0275\u0275StandaloneFeature],decls:6,vars:2,consts:[["nzBackIcon","",3,"nzTitle",4,"ngIf"],[1,"flex","w-full","h-full","flex-col"],["nz-row","",1,"w-full","pr-4","h-full",2,"justify-content","end","padding-right","8px"],[3,"buttonTemplate","columns","loadFn","fields","model","form","limit","displayExportFile","defaultExpand","functionExportFile","functionParse","icomAdd","icomFunctionControl",4,"ngIf"],["yourCustomTemplate",""],["nzBackIcon","",3,"nzTitle"],[3,"buttonTemplate","columns","loadFn","fields","model","form","limit","displayExportFile","defaultExpand","functionExportFile","functionParse","icomAdd","icomFunctionControl"],["class","flex",4,"ngIf"],[1,"flex"],["nz-button","",1,"flex","items-center",3,"hidden","nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-button","",1,"ml-4",3,"hidden","nzType","click"],["nz-icon","","nzType","file-add","nzTheme","outline"]],template:function(n,o){1&n&&(e.\u0275\u0275template(0,se,1,1,"nz-page-header",0),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,de,1,11,"icom-libs-core-components-table",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,me,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)),2&n&&(e.\u0275\u0275property("ngIf",o.productId&&-1!==o.productId&&o.productName),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.loadData))},dependencies:[R.d,u.NgIf,E.NzButtonModule,E.NzButtonComponent,ae.\u0275NzTransitionPatchDirective,le.NzWaveDirective,f.NzPageHeaderModule,f.NzPageHeaderComponent,y.NzIconModule,y.NzIconDirective],encapsulation:2,changeDetection:0})}return i})()}}]);