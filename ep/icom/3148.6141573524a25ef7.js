(self.webpackChunkicom=self.webpackChunkicom||[]).push([[3148],{67786:(E,y,r)=>{r.d(y,{E:()=>e});var u=r(36151),c=r(248);let e=(()=>{class h{constructor(b,C){this.el=b,this.permissionService=C}ngOnInit(){this.permissionService.getPermission(this.action)||this.el.nativeElement.style.setProperty("display","none","important")}static#e=this.\u0275fac=function(C){return new(C||h)(u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(c.$))};static#t=this.\u0275dir=u.\u0275\u0275defineDirective({type:h,selectors:[["","icomLibsHasPermissionDirective",""]],inputs:{action:"action"},standalone:!0})}return h})()},84028:(E,y,r)=>{r.d(y,{EC:()=>b,JC:()=>c,Jj:()=>e,l0:()=>h,uv:()=>f});const c=()=>[{value:"Th\xe1ng 1",id:1},{value:"Th\xe1ng 2",id:2},{value:"Th\xe1ng 3",id:3},{value:"Th\xe1ng 4",id:4},{value:"Th\xe1ng 5",id:5},{value:"Th\xe1ng 6",id:6},{value:"Th\xe1ng 7",id:7},{value:"Th\xe1ng 8",id:8},{value:"Th\xe1ng 9",id:9},{value:"Th\xe1ng 10",id:10},{value:"Th\xe1ng 11",id:11},{value:"Th\xe1ng 12",id:12}],e=()=>[{value:"Ng\xe0y 1",id:1},{value:"Ng\xe0y 2",id:2},{value:"Ng\xe0y 3",id:3},{value:"Ng\xe0y 4",id:4},{value:"Ng\xe0y 5",id:5},{value:"Ng\xe0y 6",id:6},{value:"Ng\xe0y 7",id:7},{value:"Ng\xe0y 8",id:8},{value:"Ng\xe0y 9",id:9},{value:"Ng\xe0y 10",id:10},{value:"Ng\xe0y 11",id:11},{value:"Ng\xe0y 12",id:12},{value:"Ng\xe0y 13",id:13},{value:"Ng\xe0y 14",id:14},{value:"Ng\xe0y 15",id:15},{value:"Ng\xe0y 16",id:16},{value:"Ng\xe0y 17",id:17},{value:"Ng\xe0y 18",id:18},{value:"Ng\xe0y 19",id:19},{value:"Ng\xe0y 20",id:20},{value:"Ng\xe0y 21",id:21},{value:"Ng\xe0y 22",id:22},{value:"Ng\xe0y 23",id:23},{value:"Ng\xe0y 24",id:24},{value:"Ng\xe0y 25",id:25},{value:"Ng\xe0y 26",id:26},{value:"Ng\xe0y 27",id:27},{value:"Ng\xe0y 28",id:28},{value:"Ng\xe0y 29",id:29},{value:"Ng\xe0y 30",id:30},{value:"Ng\xe0y 31",id:31}],h=()=>[{value:"Th\u1ee9 2",id:1},{value:"Th\u1ee9 3",id:2},{value:"Th\u1ee9 4",id:3},{value:"Th\u1ee9 5",id:4},{value:"Th\u1ee9 6",id:5},{value:"Th\u1ee9 7",id:6},{value:"Ch\u1ee7 nh\u1eadt",id:0}],f=()=>[{value:"0 gi\u1edd",id:0},{value:"1 gi\u1edd",id:1},{value:"2 gi\u1edd",id:2},{value:"3 gi\u1edd",id:3},{value:"4 gi\u1edd",id:4},{value:"5 gi\u1edd",id:5},{value:"6 gi\u1edd",id:6},{value:"7 gi\u1edd",id:7},{value:"8 gi\u1edd",id:8},{value:"9 gi\u1edd",id:9},{value:"10 gi\u1edd",id:10},{value:"11 gi\u1edd",id:11},{value:"12 gi\u1edd",id:12},{value:"13 gi\u1edd",id:13},{value:"14 gi\u1edd",id:14},{value:"15 gi\u1edd",id:15},{value:"16 gi\u1edd",id:16},{value:"17 gi\u1edd",id:17},{value:"18 gi\u1edd",id:18},{value:"19 gi\u1edd",id:19},{value:"20 gi\u1edd",id:20},{value:"21 gi\u1edd",id:21},{value:"22 gi\u1edd",id:22},{value:"23 gi\u1edd",id:23}],b=()=>[{value:"Ng\u1eebng k\xedch ho\u1ea1t",id:"INACTIVE"},{value:"K\xedch ho\u1ea1t",id:"ACTIVE"}]},70002:(E,y,r)=>{r.r(y),r.d(y,{IcomLibsFlashSaleDetailComponent:()=>Pe});var u=r(49671),c=r(14817),e=r(36151),h=r(87757),f=r(63801),b=r(38831),C=r(59600),V=r(47332),P=r(926),g=r(67626),T=r(93484),G=r(13391),j=r(91872),I=r(84028),R=r(66049),A=r(18019),p=r(33635),F=r(60202),w=r(53750),z=r(44729),W=r(37586),x=r(16283),Y=r(57317),K=r(32936),B=r(15311),U=r(67056),D=r(8111),$=r(78504),Z=r(67786),L=r(47809),M=r(54829);function q(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.handlerCancel(n))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"H\u1ee7y"),e.\u0275\u0275elementEnd()()}}function J(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.handlerSave(n))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"L\u01b0u"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("action","edit")("nzLoading",t.isLoading)}}function Q(i,d){1&i&&(e.\u0275\u0275elementStart(0,"nz-space"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275template(2,q,3,0,"button",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275template(4,J,3,2,"button",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function X(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nz-page-header",4),e.\u0275\u0275listener("nzBack",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(n.handlerCancel())}),e.\u0275\u0275elementStart(1,"nz-page-header-title"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"nz-page-header-content",5)(4,"form",6)(5,"div",7)(6,"div",8),e.\u0275\u0275element(7,"formly-form",9),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(8,"nz-page-header-footer",10),e.\u0275\u0275template(9,Q,5,0,"nz-space",0),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==t.data?null:t.data.name)||"T\u1ea1o m\u1edbi"),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("model",t.model)("fields",t.fields)("form",t.form)("options",t.options),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","view"!==t.mode)}}function ee(i,d){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,X,10,7,"nz-page-header",3),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.data)}}function te(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.handlerActivate(n))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"K\xedch ho\u1ea1t"),e.\u0275\u0275elementEnd()()}2&i&&e.\u0275\u0275property("action","edit")}function ne(i,d){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,te,3,1,"button",20),e.\u0275\u0275elementContainerEnd())}function ae(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.handlerDeactivate(n))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Ng\u1eebng K\xedch ho\u1ea1t"),e.\u0275\u0275elementEnd()()}2&i&&e.\u0275\u0275property("action","edit")}function ie(i,d){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ae,3,1,"button",20),e.\u0275\u0275elementContainerEnd())}function oe(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.handlerEdit(n))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"S\u1eeda"),e.\u0275\u0275elementEnd()()}2&i&&e.\u0275\u0275property("action","edit")}function le(i,d){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,oe,3,1,"button",20),e.\u0275\u0275elementContainerEnd())}function re(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275listener("click",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(o.handlerRemove(n))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"X\xf3a"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("action","delete")("nzLoading",t.isLoading)("nzDanger",!0)}}function se(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"nz-space",18),e.\u0275\u0275template(1,ne,2,0,"ng-container",0),e.\u0275\u0275template(2,ie,2,0,"ng-container",0),e.\u0275\u0275template(3,le,2,0,"ng-container",0),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275template(5,re,3,3,"button",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ACTIVE"!==(null==t.model?null:t.model.status)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ACTIVE"===(null==t.model?null:t.model.status)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t.model&&t.model.is_transaction_exists))}}function de(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"div",15)(1,"form",16)(2,"div",5)(3,"div",8),e.\u0275\u0275element(4,"formly-form",9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(5,se,6,3,"nz-space",17),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.form)("nzLayout","vertical"),e.\u0275\u0275advance(3),e.\u0275\u0275property("model",t.model)("fields",t.fields)("form",t.form)("options",t.options),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.mode&&"view"===t.mode)}}function pe(i,d){1&i&&e.\u0275\u0275element(0,"nz-spin",23),2&i&&e.\u0275\u0275property("nzSize","large")}let ue=(()=>{class i{constructor(){var t=this;this.form=new T.FormGroup({}),this.options={formState:{disabled:!1}},this.iComLibsServicesProjectDynamicHomeService=(0,e.inject)(z.KL),this.iComLibsServicesProjectFlashSaleService=(0,e.inject)(z.Rm),this.campaignService=(0,e.inject)(z.wb),this.productService=(0,e.inject)(z.k),this.isLoadingDetails=!0,this.allGroups=[],this.fields=[],this.groupsSelectionChanged=new p.BehaviorSubject([]),this.listInventory=[],this.route=(0,e.inject)(F.ActivatedRoute),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.modalService=(0,e.inject)(W.NzModalService),this.router=(0,e.inject)(F.Router),this.viewContainerRef=(0,e.inject)(e.ViewContainerRef),this.IComMessageService=(0,e.inject)(w.Qi),this.icomLibsDynamicComponentService=(0,e.inject)(w.Gj),this.destroyRef=(0,e.inject)(e.DestroyRef),this.iComLibsServicesInventoryService=(0,e.inject)(z.NH),this.icomDetailFlashSale=new e.EventEmitter,this.mode="view",this.route.queryParams.pipe((0,R.takeUntilDestroyed)(this.destroyRef)).subscribe(function(){var a=(0,u.Z)(function*(n){try{if(n){const o=yield(0,p.lastValueFrom)(t.iComLibsServicesProjectFlashSaleService.listGroup({page:1,size:99999}));if(t.allGroups=o?.data?.items||[],!n.id)return t.mode="add",t.data={type_end_time:"SPECTIME",type_start_time:"SPECTIME",campaign_type:"FLASHSALE",customer_group:{config:[{operator:"in",type:"time_now",value:[],attribute:"month",group:"time",id:"uuid1"},{operator:"in",type:"time_now",value:[],attribute:"day",group:"time",id:"uuid2"},{operator:"in",type:"time_now",value:[],attribute:"day_of_week",group:"time",id:"uuid3"},{operator:"in",type:"time_now",value:[],attribute:"hour",group:"time",id:"uuid4"},{operator:"in",type:"customer_profile",value:[],attribute:"membership_level",group:"customer",id:"uuid5"},{operator:"in",type:"customer_profile",value:[],attribute:"address_city",group:"customer",id:"uuid6"}],relationship:"uuid1 && uuid2  && uuid3 && uuid4 && uuid5 && uuid6"},flash_sale_config:{products:[],inventory_id:"",reward:{name:"+10",reward_level:"1",type:"all",items:[{type:"point_percent",value:null}]}}},t.model=(0,A.cloneDeep)(t.data),t.setFields(),t.updateSelectedGroups(),t.updateFieldReadonlyStatus(),t.options={formState:{disabled:!1,required:!1,mainModel:t.model}},t.isLoadingDetails=!1,void t.cdr?.detectChanges();try{const l=n?.id||"",s=yield(0,p.lastValueFrom)(t.iComLibsServicesProjectFlashSaleService.detail(+l));t.data=s?.data||{},t.icomDetailFlashSale.emit(t.data);const m=yield t.getListVoucherSelected();m&&(t.data.flash_sale_config.products=m),t.model=(0,A.cloneDeep)(t.data),t.setFields(),t.updateFieldReadonlyStatus(),t.updateSelectedGroups(),t.options={formState:{disabled:!1,required:!1,mainModel:t.model}}}catch(l){console.log(l)}finally{t.isLoadingDetails=!1,t.cdr?.detectChanges()}}}catch{t.isLoadingDetails=!1,t.cdr.detectChanges()}});return function(n){return a.apply(this,arguments)}}())}updateSelectedGroups(){const t=this.model?.groups;if(!t||!t.length)return;const a=t?.map(n=>this.allGroups.find(o=>o._id===n)||{id:n,name:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"});this.groupsSelectionChanged.next(a)}setFields(){var t=this;this.fields=[{fieldGroupClassName:"flex flex-col",className:"basis-1/2",key:"",wrappers:["group"],props:{label:"Th\xf4ng tin chung"},expressions:{"props.disabled":"formState.disabled"},fieldGroup:[{key:"code",className:"basis-4/12",type:"input-custom",props:{label:"M\xe3",maxLength:8,placeholder:"Nh\u1eadp m\xe3",readonly:!0},validation:[{name:"noWhitespace",options:{errorPath:"value"}}]},{key:"name",className:"basis-4/12",type:"input-custom",props:{label:"T\xean",required:!0,maxLength:50,placeholder:"Nh\u1eadp t\xean",readonly:!0},validators:{validation:[{name:"noWhitespace",options:{errorPath:"value"}}]}},{key:"groups",type:"select-custom",defaultValue:[],props:{label:"Nh\xf3m Flash Sale",multiple:!0,viewValue:"name",maxMultiSelectItems:12,readonly:!0,labelProp:"name",valueProp:"_id",options:this.iComLibsServicesProjectFlashSaleService.listGroup({page:1,size:99999}).pipe((0,p.map)(n=>n?.data?.items?.map((o,l)=>({...o}))||[])),functionAddNew:(n,o)=>{const l=this.modalService.create({nzTitle:"Th\xeam nh\xf3m flash sale",nzContent:$.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y",nzOkText:"L\u01b0u",nzOkType:"primary",nzOnOk:()=>new Promise(s=>{const m=l.getContentComponent();m.onSave.pipe((0,p.take)(1)).subscribe(function(){var S=(0,u.Z)(function*(_){if(_){t.IComMessageService.showAlertMessageDone("T\u1ea1o nh\xf3m flash sale th\xe0nh c\xf4ng."),s(!0);const v=n.formControl.getRawValue();n.formControl.setValue([...v,_?.data?._id]);const k=yield(0,p.lastValueFrom)(t.iComLibsServicesProjectFlashSaleService.listGroup({page:1,size:99999}));t.allGroups=k?.data?.items||[];const Fe=(n?.formControl?.value).map(H=>({id:H,name:t.findGroupById(H).name}));t.groupsSelectionChanged.next(Fe),o&&o(),l.updateConfig({nzOkLoading:!1})}});return function(_){return S.apply(this,arguments)}}()),m.handlerSave()}),nzOkLoading:!1})},placeholder:"Ch\u1ecdn nh\xf3m Flash Sale",change:n=>{const l=(n?.formControl?.value).map(s=>({id:s,name:this.findGroupById(s).name}));this.groupsSelectionChanged.next(l)}}},{key:"start_time",type:"date",props:{label:"T\u1eeb",ShowTime:!0,required:!0,datepickerOptions:{nzFormat:"dd/MM/yyyy HH:mm"},readonly:!0,emitTimeLocal:!0,format:"dd-MM-yyyy HH:mm",placeholder:"DD-MM-YYYY hh:mm",change:(n,o)=>{n?.parent?.fieldGroup?.find(s=>"end_time"===s.key)&&this.form.get("end_time")?.updateValueAndValidity()}},validators:{validation:[this.startTimeValidator]}},{key:"end_time",type:"date",props:{label:"\u0110\u1ebfn",required:!0,ShowTime:!0,format:"dd-MM-yyyy HH:mm",placeholder:"DD-MM-YYYY hh:mm",datepickerOptions:{nzFormat:"dd/MM/yyyy HH:mm"},readonly:!0,emitTimeLocal:!0,change:(n,o)=>{n?.parent?.fieldGroup?.find(s=>"start_time"===s.key)&&this.form.get("start_time")?.updateValueAndValidity()}},validators:{validation:[this.startTimeValidator]}},{key:"customer_group.config[0].value",type:"select-custom",defaultValue:[],props:{label:"Theo th\xe1ng",multiple:!0,viewValue:"value",readonly:!0,labelProp:"value",valueProp:"id",options:(0,I.JC)(),placeholder:"Ch\u1ecdn th\xe1ng"}},{key:"customer_group.config[1].value",type:"select-custom",defaultValue:[],props:{label:"Theo ng\xe0y",multiple:!0,viewValue:"value",readonly:!0,labelProp:"value",valueProp:"id",options:(0,I.Jj)(),placeholder:"Ch\u1ecdn ng\xe0y"}},{key:"customer_group.config[2].value",type:"select-custom",defaultValue:[],props:{label:"Theo th\u1ee9",multiple:!0,readonly:!0,viewValue:"value",labelProp:"value",valueProp:"id",options:(0,I.l0)(),placeholder:"Ch\u1ecdn th\u1ee9"}},{key:"customer_group.config[3].value",type:"select-custom",defaultValue:[],props:{label:"Theo gi\u1edd",multiple:!0,readonly:!0,viewValue:"value",labelProp:"value",valueProp:"id",options:(0,I.uv)(),placeholder:"Ch\u1ecdn gi\u1edd"}}]},{fieldGroupClassName:"flex flex-col mt-2",className:"basis-1/2 pl-4 mt-2",key:"",wrappers:["group"],expressions:{"props.disabled":"formState.disabled"},fieldGroup:[{key:"customer_group.config[4].value",type:"select-custom",defaultValue:[],props:{label:"H\u1ea1ng h\u1ed9i vi\xean",viewValue:"value",labelProp:"value",readonly:!0,valueProp:"id",multiple:!0,options:this.iComLibsServicesProjectDynamicHomeService.listMembersShip().pipe((0,p.map)(n=>n?.data))}},{key:"customer_group.config[5].value",type:"select-custom",defaultValue:[],props:{label:"T\u1ec9nh/ th\xe0nh ph\u1ed1",viewValue:"value",labelProp:"value",valueProp:"id",multiple:!0,readonly:!0,options:this.iComLibsServicesProjectDynamicHomeService.listCity().pipe((0,p.map)(n=>n?.data))}},{key:"status",type:"radio-custom",defaultValue:"ACTIVE",props:{label:"Tr\u1ea1ng th\xe1i",readonly:!0,viewValue:"name",labelProp:"name",valueProp:"id",options:[{name:"K\xedch ho\u1ea1t",id:"ACTIVE"},{name:"Ng\u1eebng k\xedch ho\u1ea1t",id:"INACTIVE"}]}},{key:"config_layout.no_product",className:"basis-4/12",type:"nz-input-number",defaultValue:5,props:{label:"Hi\u1ec3n th\u1ecb tr\xean trang ch\u1ee7",required:!0,max:9999999999,min:3,readonly:!0,type:"number"},validators:{validation:[{name:"noWhitespace",options:{errorPath:"value"}}]}},{key:"config_layout.header_img",type:"upload",className:"basis-6/12 ",props:{label:"\u1ea2nh banner",size:1048576,className:"w-[150px] ",readonly:!0,disabled:!0,labelType:"Image",width:375,height:100}},{key:"note",type:"textarea-custom",props:{label:"Ghi ch\xfa",rows:5,readonly:!0,maxLength:500}},{key:"creator_info.full_name",type:"input-custom",props:{label:"Ng\u01b0\u1eddi t\u1ea1o",readonly:!0,disabled:!0},expressions:{"props.disabled":"formState.disabled"},hideExpression:(n,o,l)=>"view"!==this.mode},{key:"created_at",type:"date",props:{label:"Th\u1eddi gian t\u1ea1o",ShowTime:!0,required:!1,datepickerOptions:{nzFormat:"dd/MM/yyyy HH:mm"},readonly:!0,format:"dd-MM-yyyy HH:mm",placeholder:"DD-MM-YYYY hh:mm"},hideExpression:(n,o,l)=>"view"!==this.mode},{key:"updater_info.full_name",type:"input-custom",props:{label:"Ng\u01b0\u1eddi s\u1eeda",readonly:!0,disabled:!0},expressions:{"props.disabled":"formState.disabled"},hideExpression:(n,o,l)=>"view"!==this.mode},{key:"updated_at",type:"date",props:{label:"Th\u1eddi gian s\u1eeda",ShowTime:!0,required:!1,datepickerOptions:{nzFormat:"dd/MM/yyyy HH:mm"},readonly:!0,format:"dd-MM-yyyy HH:mm",placeholder:"DD-MM-YYYY hh:mm"},hideExpression:(n,o,l)=>"view"!==this.mode}]},{fieldGroupClassName:"flex flex-col mt-4",className:"basis-4/6  mt-4 test2",key:"flash_sale_config",wrappers:["group"],props:{label:"",readonly:!0,disabled:!0},expressions:{"props.disabled":"formState.disabled"},fieldGroup:[{key:"",wrappers:["collapse"],props:{readonly:!0,disabled:!0,label:"T\xedch \u0111i\u1ec3m khi mua s\u1ea3n ph\u1ea9m",changeChecked:(n,o)=>{o.fieldGroup.find(s=>"reward.is_active"===s.key).model.reward.is_active=n},setChecked:n=>n?.fieldGroup?.find(l=>"reward.is_active"===l.key)?.model.reward?.is_active},fieldGroupClassName:"flex flex-col",fieldGroup:[{key:"reward.items[0].value",type:"nz-input-number",props:{label:"T\u1ef7 l\u1ec7 quy \u0111\u1ed5i \u0111i\u1ec3m th\u01b0\u1edfng",addonText:"VND = 1 \u0111i\u1ec3m th\u01b0\u1edfng",type:"number",outputNullable:!0,placeholder:"Nh\u1eadp s\u1ed1",min:1,max:9999999999,readonly:!0,disabled:!0,required:!0},expressions:{"props.disabled":"formState.disabled","props.required":"model?.reward?.is_active"}},{key:"reward.is_active",defaultValue:!1,type:"checkbox",className:"hidden"},{key:"reward.is_accept_add_point_payment_by_point",type:"multi-checkbox",defaultValue:!1,props:{disabled2:"view"===this.mode,value2:this.model?.flash_sale_config?.reward?.is_accept_add_point_payment_by_point,options:[{label:"Kh\xf4ng t\xedch \u0111i\u1ec3m cho c\xe1c giao d\u1ecbch thanh to\xe1n b\u1eb1ng \u0111i\u1ec3m th\u01b0\u1edfng",value:"Kh\xf4ng t\xedch \u0111i\u1ec3m cho c\xe1c giao d\u1ecbch thanh to\xe1n b\u1eb1ng \u0111i\u1ec3m th\u01b0\u1edfng"}],change:(n,o)=>{setTimeout(()=>{this.model?.flash_sale_config?.reward?.is_accept_add_point_payment_by_point&&(this.model.flash_sale_config.reward.is_accept_add_point_payment_by_point=o||!1)},200)}},expressions:{"props.required":"model?.reward?.is_active"}},{key:"sponsor",props:{readonly:!0,disabled:!0,label:"Nh\xe0 t\xe0i tr\u1ee3",addText:"Th\xeam nh\xe0 t\xe0i tr\u1ee3",required:!1},expressions:{"props.disabled":"formState.disabled","props.required":()=>this.model?.flash_sale_config?.reward?.is_active},type:"array",fieldArray:{wrappers:["group"],fieldGroupClassName:"flex row items-center",fieldGroup:[{key:"id",type:"select-custom",className:"basis-6/12",props:{label:"Nh\xe0 t\xe0i tr\u1ee3",placeholder:"Ch\u1ecdn nh\xe0 t\xe0i tr\u1ee3",viewValue:"title",labelProp:"title",valueProp:"id",readonly:!0,required:!0,options:this.campaignService.getContributor().pipe((0,p.map)(n=>n.data))},expressions:{"props.disabled":"formState.disabled","props.required":()=>this.model?.flash_sale_config?.reward?.is_active}},{key:"value",type:"nz-input-number",className:"basis-6/12 pl-2",props:{placeholder:"Nh\u1eadp t\u1ef7 l\u1ec7 t\xe0i tr\u1ee3",label:"T\u1ef7 l\u1ec7 t\xe0i tr\u1ee3",type:"number",readonly:!0,disabled:!0,min:0,required:!0,max:100},expressions:{"props.disabled":"formState.disabled","props.required":()=>this.model?.flash_sale_config?.reward?.is_active}},{key:"balance",type:"nz-input-number",className:"basis-3/12 flex-none",props:{label:"T\xe0i kho\u1ea3n k\xfd qu\u1ef9",disabled:!0,required:!0,readonly:!0,ignoreChange:!0},expressions:{"props.disabled":"formState.disabled","props.required":()=>this.model?.flash_sale_config?.reward?.is_active},hooks:{onInit:n=>{(n?.formControl?.parent?.get("id")).valueChanges.subscribe(s=>{const S=n?.parent?.fieldGroup?.find(v=>"id"===v.key)?.props?.options;let _;S instanceof p.Observable?S.subscribe(v=>{_=v.find(k=>k.id===s),n?.formControl?.setValue(_?.balance||0)}):Array.isArray(S)&&(_=S.find(v=>v.value===s),n?.formControl?.setValue(_?.balance||0))})}}}]}},{key:"pool",type:"select-custom",props:{label:"Lo\u1ea1i \u0111i\u1ec3m th\u01b0\u1edfng C\u1ea5p 1",type:"text",placeholder:"C\u1ea5p 1 (Pool)",readonly:!0,viewValue:"title",labelProp:"title",valueProp:"id",required:!0,options:this.campaignService.getPool().pipe((0,p.map)(n=>n.data))},expressions:{"props.disabled":"formState.disabled","props.required":"model?.reward?.is_active"}},{key:"sub_pool",type:"select-custom",props:{label:"Lo\u1ea1i \u0111i\u1ec3m th\u01b0\u1edfng C\u1ea5p 2",type:"text",placeholder:"C\u1ea5p 2 (Pool)",viewValue:"title",labelProp:"title",readonly:!0,valueProp:"id",required:!0,options:[]},expressions:{"props.disabled":"formState.disabled","props.required":"model?.reward?.is_active"},hooks:{onInit:n=>{const o=n?.parent?.fieldGroup?.[4].formControl;o&&n.props&&(n.props.options=o.valueChanges.pipe((0,p.startWith)(o.value),(0,p.distinctUntilChanged)(),(0,p.switchMap)(l=>l?this.campaignService.getSubPool({pool_id:l}).pipe((0,p.map)(s=>(s?.data?.find(m=>n?.model?.sub_pool===m.id)||n.formControl?.setValue(null),s.data))):[]))).subscribe()}}}]}]},{fieldGroupClassName:"flex flex-col mt-4",className:"basis-2/6 pl-4  mt-4  test2",key:"flash_sale_config",wrappers:["group"],props:{label:"",readonly:!0,disabled:!0},expressions:{"props.disabled":"formState.disabled"},fieldGroup:[{key:"limit_product",wrappers:["collapse"],props:{label:"Gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng mua c\u1ee7a m\u1ed9t kh\xe1ch h\xe0ng cho m\u1ed7i s\u1ea3n ph\u1ea9m",changeChecked:(n,o)=>{o.fieldGroup.find(s=>"is_active"===s.key).model.is_active=n},setChecked:n=>n?.fieldGroup?.find(l=>"is_active"===l.key)?.model?.is_active},fieldGroupClassName:"flex flex-col",fieldGroup:[{key:"is_active",defaultValue:!1,type:"checkbox",className:"hidden"},{key:"value",type:"input-custom",props:{label:"S\u1ed1 l\u01b0\u1ee3ng gi\u1edbi h\u1ea1n",type:"number",placeholder:"Nh\u1eadp s\u1ed1",readonly:!0,disabled:!0,required:!0,max:9999999999},expressions:{"props.disabled":"formState.disabled","props.required":"model?.is_active"}}]}]},{key:"flash_sale_config",fieldGroupClassName:"flex flex-col",className:"w-full mt-4 test2",hideExpression:()=>"view"===this.mode,wrappers:["group"],fieldGroup:[{key:"inventory_id",type:"select-custom",defaultValue:[],props:{label:"Kho s\u1ea3n ph\u1ea9m",required:!0,readonly:!0,viewValue:"name",labelProp:"name",valueProp:"id",emitList:(n,o)=>{this.listInventory=n,this.listInventory?.some(s=>s.id===this.model?.flash_sale_config?.inventory_id)||o.formControl?.setValue(o.defaultValue)},options:[],placeholder:"Ch\u1ecdn kho s\u1ea3n ph\u1ea9m"},hooks:{onInit:n=>{"add"===this.mode||"edit"===this.mode?n.props&&(n.props.options=this.iComLibsServicesInventoryService.listInventoryFlashSale({page:1,limit:999999}).pipe((0,p.map)(o=>o?.data?.items?.filter(l=>"INVENTORY_TYPE_FLASHSALE"===l.type)||[]))):"view"===this.mode&&n.props&&(n.props.options=this.iComLibsServicesInventoryService.listInventory({page:1,limit:999999}).pipe((0,p.map)(o=>o?.data?.items?.filter(l=>"INVENTORY_TYPE_FLASHSALE"===l.type)||[])))}}},{key:"products",type:"dropdown-table",className:"w-full",hideExpression:()=>"view"===this.mode,wrappers:["group"],hooks:{onInit:n=>{const o=this.form.get("flash_sale_config.inventory_id");o&&o.valueChanges.pipe((0,p.startWith)(o.value),(0,p.distinctUntilChanged)()).subscribe(l=>{const s={start_time:this.model?.start_time,end_time:this.model?.end_time};n.props&&(n.props.objectUpload={id:this.data._id||"",inventory_id:this.model?.flash_sale_config?.inventory_id,...s,groups:this.model?.groups||[]}),n.props&&(n.props.listOptionDropdown=(m,S)=>{const _={...s,...S};return this.iComLibsServicesInventoryService.getListProductFlashSaleOfInventory(l,{page:m||1,limit:15,..._}).pipe((0,p.map)(v=>v?.data))}),n={...n}})}},props:{label:"S\u1ea3n ph\u1ea9m",import:!0,nzOptionHeightPx:72,customOption:!0,id:this.data._id||"",objectUpload:{id:this.data._id||"",inventory_id:this.model?.flash_sale_config?.inventory_id,start_time:this.model?.start_time,end_time:this.model?.end_time,groups:this.model?.groups||[]},placeholder:"Th\xeam voucher theo m\xe3, t\xean voucher, m\xe3 s\u1ea3n ph\u1ea9m c\u1ee7a NCC",readonly:!0,keyGetValue:"inventory_id",listOptionDropdown:null,nzServerSearch:!0,callBackThis:n=>{this.DropDownTableRef=n},changeItems:n=>{this.model.flash_sale_config.products=n||[]},columns:[{name:"STT",width:"60px",field:"index",type:"index"},{name:"M\xe3 MyPoint",width:"10%",field:"product_id",ignoreParseNumber:!0,type:"text"},{name:"T\xean voucher",width:"20%",field:"name",type:"text"},{name:"Nh\xf3m Flash Sale",width:"20%",field:"groups",type:"multi-select",required:!0,options:this.groupsSelectionChanged?.asObservable().pipe((0,p.map)(n=>n.map(o=>({name:o.name,id:o._id||o.id}))))},{name:"T\xean NCC",width:"10%",field:"brand_name",type:"text"},{name:"Gi\xe1 flash sale",width:"10%",required:!0,field:"price",max:999999999,min:1,inputType:"number",type:"input"},{name:"S\u1ed1 l\u01b0\u1ee3ng",width:"10%",field:"quantity",required:!0,max:999999999,min:1,inputType:"number",type:"input"},{name:"\u0110\xe3 b\xe1n \u1ea3o",width:"10%",required:!0,field:"sold_fake",max:999999999,min:1,inputType:"number",type:"input"},{name:"H\xe0nh \u0111\u1ed9ng",width:"%",field:"actions",type:"action"}]}}]}]}startTimeValidator(t){const a=t.parent?.value?.start_time,n=t.parent?.value?.end_time;return a&&n&&j(n).isBefore(j(a).add(5,"minutes"))?{startTimeInvalid5Minutes:!0}:null}ngOnInit(){setInterval(()=>{console.log(this.model)},5e3)}handlerCancel(t){t?.stopPropagation(),t?.preventDefault(),"view"!==this.mode?this.modalService.confirm({nzTitle:this.model?.id?"B\u1ea1n c\xf3 h\u1ee7y b\u1ecf thao t\xe1c ?":"B\u1ea1n c\xf3 mu\u1ed1n h\u1ee7y th\xeam m\u1edbi flash sale kh\xf4ng?",nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzMaskClosable:!1,nzClosable:!0,nzOnOk:()=>this.router.navigateByUrl("flash-sale/list"),nzCancelText:"\u0110\xf3ng"},"info"):this.router.navigateByUrl("flash-sale/list")}updateFieldReadonlyStatus(){let t=!0;("edit"===this.mode||"add"===this.mode)&&(t=!1),this.options.formState.disabled=t,this.fields.forEach(a=>{this.setReadonlyForField(a,t)})}setReadonlyForField(t,a){t?.fieldGroup?.length&&t?.fieldGroup?.forEach(n=>this.setReadonlyForField(n,a)),t.fieldArray?.fieldGroup?.length&&t.props?(!t.props.ignoreChange&&(t.props.readonly=a),!t.props.ignoreChange&&(t.props.disabled=a),t.fieldArray?.fieldGroup?.forEach(n=>this.setReadonlyForField(n,a))):t.props&&(!t.props.ignoreChange&&(t.props.readonly=a),!t.props.ignoreChange&&(t.props.disabled=a))}validate(){return!(this.model?.config_layout?.no_product>this.model?.flash_sale_config?.products?.length&&(this.IComMessageService.showAlertMessageError("S\u1ed1 s\u1ea3n ph\u1ea9m trong b\u1ea3ng c\u1ea7n l\u1edbn h\u01a1n ho\u1eb7c b\u1eb1ng S\u1ed1 l\u01b0\u1ee3ng hi\u1ec3n th\u1ecb tr\xean Trang ch\u1ee7"),1))}handlerSave(t){var a=this;return(0,u.Z)(function*(){t.stopPropagation(),t.preventDefault();let n=!0;if(n=a.DropDownTableRef.handlerSave(),a.form.invalid)return void(0,D.c2)(a.form);if(!a.validate()||!n)return;const o=a.model.flash_sale_config.reward?.items;o&&o.length>0&&o.forEach(l=>{""===l.value&&(l.value=null)});try{a.isLoading=!0;const l=a.getFilteredProductData(),s={...a.model,flash_sale_config:{...a.model.flash_sale_config,products:l}};a.data?._id?yield(0,p.lastValueFrom)(a.iComLibsServicesProjectFlashSaleService.edit(s)):yield(0,p.lastValueFrom)(a.iComLibsServicesProjectFlashSaleService.create(s)),a.IComMessageService.showAlertMessageDone(a.data?._id?"S\u1eeda flash sale th\xe0nh c\xf4ng.":"T\u1ea1o m\u1edbi flash sale th\xe0nh c\xf4ng."),a.router.navigateByUrl("flash-sale/list")}catch(l){const m=l?.error?.error_message;if(m&&m.includes("{inventory_name}")){const S=a.form?.get("flash_sale_config.inventory_id")?.value||a.data?.flash_sale_config?.inventory_id,_=a.findInventoryNameById(S),v=m.replace("{inventory_name}",_);a.IComMessageService.showAlertMessageError(v)}else a.IComMessageService.showAlertMessageError(m||(a.data?._id?"S\u1eeda flash sale th\u1ea5t b\u1ea1i.":"T\u1ea1o m\u1edbi flash sale th\u1ea5t b\u1ea1i."))}finally{a.isLoading=!1,a.cdr.detectChanges()}})()}getListVoucherSelected(){var t=this;return(0,u.Z)(function*(){if(!t.data?.flash_sale_config?.products?.length)return Promise.resolve(void 0);try{const a=yield(0,p.lastValueFrom)(t.iComLibsServicesProjectFlashSaleService.voucherList({_id:t.data?._id,page:1,size:999999}));return Promise.resolve(a?.data?.items.map(n=>({...n,...n.product_detail})))}catch{return Promise.resolve([])}})()}customDropdownValidator(t){return Array.isArray(t.value)&&0!==t.value.length?null:{required:!0}}handlerEdit(t){t.stopPropagation(),t.preventDefault(),this.mode="edit",this.setFields(),this.updateSelectedGroups(),this.updateFieldReadonlyStatus(),this.options={formState:{disabled:!1,required:!1,mainModel:this.model}}}handlerRemove(t){t.stopPropagation(),this?.model?.is_transaction_exists?this.IComMessageService.showAlertMessageError("Flash sale \u0111\xe3 c\xf3 giao d\u1ecbch th\xe0nh c\xf4ng. B\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p s\u1eeda."):this.modalService.confirm({nzTitle:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ${this.data?.name} ?`,nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzOkDanger:!0,nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDeleteSection.bind(this,this.data),nzCancelText:"H\u1ee7y b\u1ecf"},"error")}processDeleteSection(t){return(0,p.lastValueFrom)(this.iComLibsServicesProjectFlashSaleService.delete(t?._id||"")).then(()=>{this.IComMessageService.showAlertMessageDone("Thao t\xe1c th\xe0nh c\xf4ng."),this.router.navigateByUrl("flash-sale/list")}).catch(a=>{this.IComMessageService.showAlertMessageError(a?.error?.error_message||"Thao t\xe1c th\u1ea5t b\u1ea1i")})}handlerActivate(t){t.stopPropagation(),this.modalService.confirm({nzTitle:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n k\xedch ho\u1ea1t ${this.data?.name} ?`,nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processChangeStatus.bind(this,this.data),nzCancelText:"H\u1ee7y b\u1ecf"},"info")}processChangeStatus(t){var a=this;return(0,u.Z)(function*(){try{yield(0,p.lastValueFrom)(a.iComLibsServicesProjectFlashSaleService.changeStatusActive({_id:t?._id||""})),a.IComMessageService.showAlertMessageDone("Thao t\xe1c th\xe0nh c\xf4ng."),a.router.navigateByUrl("flash-sale/list")}catch(n){a.IComMessageService.showAlertMessageError(n?.error?.error_message||"Thao t\xe1c th\u1ea5t b\u1ea1i")}})()}processDeactivate(t){var a=this;return(0,u.Z)(function*(){try{yield(0,p.lastValueFrom)(a.iComLibsServicesProjectFlashSaleService.changeStatusInactive({_id:t?._id||""})),a.IComMessageService.showAlertMessageDone("Thao t\xe1c th\xe0nh c\xf4ng."),a.router.navigateByUrl("flash-sale/list")}catch(n){a.IComMessageService.showAlertMessageError(n?.error?.error_message||"Thao t\xe1c th\u1ea5t b\u1ea1i")}})()}handlerDeactivate(t){t.stopPropagation(),this.modalService.confirm({nzTitle:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ng\u1eebng k\xedch ho\u1ea1t ${this.data?.name} ?`,nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDeactivate.bind(this,this.data),nzCancelText:"H\u1ee7y b\u1ecf"},"info")}findGroupById(t){return this.allGroups.find(a=>a._id===t)}getFilteredProductData(){return(this.model?.flash_sale_config?.products).map(a=>{const n={product_id:a.product_id||a.id,price:a.price,quantity:a.quantity,sold_fake:a.sold_fake,groups:a.groups};return Object.keys(a).forEach(o=>{o.startsWith("field_system")&&(n[o]=a[o])}),n})}findInventoryNameById(t){const a=this.listInventory?.find(n=>n.id===t);return a?a.name:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"}ngOnDestroy(){this.groupsSelectionChanged.complete()}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-flash_sale-detail-general"]],inputs:{data:"data",mode:"mode"},outputs:{icomDetailFlashSale:"icomDetailFlashSale"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:3,vars:3,consts:[[4,"ngIf"],["class","flex flex-col w-full h-full bg-white !pl-0 pr-0",4,"ngIf"],["class","w-full h-full flex justify-center items-center","nzSimple","",3,"nzSize",4,"ngIf"],["class","h-full w-full flex flex-col !absolute top-0 left-0 !pb-4 !pt-0 !pl-4 !pr-0 !bg-[#f0f2f5]","nzBackIcon","",3,"nzBack",4,"ngIf"],["nzBackIcon","",1,"h-full","w-full","flex","flex-col","!absolute","top-0","left-0","!pb-4","!pt-0","!pl-4","!pr-0","!bg-[#f0f2f5]",3,"nzBack"],[1,"w-full","h-full","flex","overflow-auto","!py-0","!pl-0","!pr-4","flex-col"],["nz-form","",3,"formGroup"],[1,"flex","flex-col"],[1,"w-full","items-center","test"],[3,"model","fields","form","options"],[1,"flex","justify-end"],["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["icomLibsHasPermissionDirective","","nz-button","","nzType","primary",3,"action","nzLoading","click",4,"nzSpaceItem"],["nz-button","","nzType","default",3,"click"],["icomLibsHasPermissionDirective","","nz-button","","nzType","primary",3,"action","nzLoading","click"],[1,"flex","flex-col","w-full","h-full","bg-white","!pl-0","pr-0"],["nz-form","",1,"h-full","overflow-hidden","!pl-2",3,"formGroup","nzLayout"],["class","flex justify-end  p-3 border",4,"ngIf"],[1,"flex","justify-end","p-3","border"],["icomLibsHasPermissionDirective","","nz-button","","nzType","primary",3,"action","nzLoading","nzDanger","click",4,"nzSpaceItem"],["icomLibsHasPermissionDirective","","nz-button","","nzType","default",3,"action","click",4,"nzSpaceItem"],["icomLibsHasPermissionDirective","","nz-button","","nzType","default",3,"action","click"],["icomLibsHasPermissionDirective","","nz-button","","nzType","primary",3,"action","nzLoading","nzDanger","click"],["nzSimple","",1,"w-full","h-full","flex","justify-center","items-center",3,"nzSize"]],template:function(a,n){1&a&&(e.\u0275\u0275template(0,ee,2,1,"ng-container",0),e.\u0275\u0275template(1,de,6,7,"div",1),e.\u0275\u0275template(2,pe,1,1,"nz-spin",2)),2&a&&(e.\u0275\u0275property("ngIf",("add"===n.mode||"edit"===n.mode)&&!n.isLoadingDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","view"===n.mode&&!n.isLoadingDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isLoadingDetails))},dependencies:[G.FormlyModule,G.FormlyForm,T.ReactiveFormsModule,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective,c.CommonModule,c.NgIf,V.NzTypographyModule,f.NzPageHeaderModule,f.NzPageHeaderComponent,f.NzPageHeaderTitleDirective,f.NzPageHeaderContentDirective,f.NzPageHeaderFooterDirective,b.NzSpaceModule,b.NzSpaceComponent,b.NzSpaceItemDirective,C.NzTabsModule,h.NzIconModule,Y.NzCardModule,U.NzStepsModule,B.NzFormModule,B.NzFormDirective,x.NzButtonModule,x.NzButtonComponent,L.\u0275NzTransitionPatchDirective,M.NzWaveDirective,K.NzDescriptionsModule,P.NzSpinModule,P.NzSpinComponent,Z.E],styles:[".test[_ngcontent-%COMP%]     formly-group{display:flex;flex-wrap:wrap}.test[_ngcontent-%COMP%]     formly-group .test2 nz-form-label{width:auto!important}"],changeDetection:0})}return i})();var O=r(59022),N=r(8581);function ce(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.downloadSampleFile())}),e.\u0275\u0275element(1,"span",16),e.\u0275\u0275text(2," Xu\u1ea5t file "),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("nzType","primary")}function me(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=d.$implicit,a=d.last;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",null==t?null:t.name,"",a?"":", "," ")}}function he(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",17),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",17),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",18),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",17),e.\u0275\u0275template(8,me,2,2,"span",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",17),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",17),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td",17),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",17),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td",17),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"number"),e.\u0275\u0275elementEnd()()),2&i){const t=d.$implicit,a=d.index,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",(n.pagination.page-1)*(n.pagination.limit||10)+a+1," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.product_detail?null:t.product_detail.product_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t||null==t.product_detail?null:t.product_detail.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.groups_detail),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t||null==t.product_detail?null:t.product_detail.brand_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,9,t.price)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,11,t.quantity)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,13,null==t?null:t.sold_real)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,15,t.sold_fake))}}function ge(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",t.pagination.total_rows||0," ")}}const fe=function(){return{x:"1500px",y:"calc(100vh - 380px)"}},_e=function(){return[10,20,30,40,50]};let ve=(()=>{class i{constructor(){this.displayData=[],this.pagination={page:1,limit:10,total_pages:1,total_rows:10,sort:"asc"},this.loading=!0,this.allGroups=[],this.rows=[],this.IComMessageService=(0,e.inject)(w.Qi),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.iComLibsServicesProjectFlashSaleService=(0,e.inject)(z.Rm),this.iComLibsServicesInventoryService=(0,e.inject)(z.NH)}ngOnInit(){var t=this;return(0,u.Z)(function*(){const a=yield(0,p.lastValueFrom)(t.iComLibsServicesProjectFlashSaleService.listGroup({page:1,limit:99999}));t.allGroups=a?.data?.items||[],t.iComLibsServicesInventoryService.listInventory({page:1,limit:999999}).pipe((0,p.map)(n=>{const o=n?.data?.items?.find(l=>l.id===t.data?.flash_sale_config?.inventory_id)||[];o?.name&&(t.nameInventory=o?.name)})).subscribe(),t.loadPage(1)})()}loadPage(t=1,a=10){var n=this;return(0,u.Z)(function*(){try{n.loading=!0;const o={_id:n.data._id,size:a,page:t},l=yield(0,p.lastValueFrom)(n.iComLibsServicesProjectFlashSaleService.voucherList(o));if(l&&l.data&&l.data.items)return n.rows=l.data.items||[],void(n.pagination=l.data.pagination);n.rows=[],n.pagination=l.data.pagination}catch(o){console.log(o)}finally{n.loading=!1,n.cdr.detectChanges()}})()}onPageChange(t){this.loadPage(t,this.pagination.limit)}onPageSizeChange(t){this.loadPage(1,t)}downloadSampleFile(){(0,D.cT)(`${N.N.apiGatewayUrl}${N.N.suffixCampaignV3}/flashsale/voucher/export`,"DanhSachSanPham",this.IComMessageService,{_id:this.data._id})}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-product-table"]],inputs:{data:"data"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:34,vars:14,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"w-full","justify-end","flex","my-2"],["nz-button","",3,"nzType","click",4,"ngIf"],[1,"w-full"],[1,"font-semibold"],[1,"w-full","h-full","d-flex","mt-4","overflow-hidden"],["nzShowSizeChanger","",1,"h-full",3,"nzScroll","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzData","nzPageIndexChange","nzPageSizeChange"],["table",""],["nzWidth","5%",1,"text-xs"],["nzWidth","15%",1,"text-xs"],["nzWidth","20%",1,"text-xs"],["nzWidth","10%",1,"text-xs"],["nzWidth","100px",1,"text-xs"],[4,"ngFor","ngForOf"],["footerTemplate",""],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"text-xs","!p-3"],[1,"text-xs","!p-3","text-truncate"],[1,"footer-content"]],template:function(a,n){if(1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,ce,3,1,"button",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3)(4,"span",4),e.\u0275\u0275text(5,"Kho s\u1ea3n ph\u1ea9m:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",5)(8,"nz-table",6,7),e.\u0275\u0275listener("nzPageIndexChange",function(l){return n.onPageChange(l)})("nzPageSizeChange",function(l){return n.onPageSizeChange(l)}),e.\u0275\u0275elementStart(10,"thead")(11,"tr")(12,"th",8),e.\u0275\u0275text(13,"STT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th",9),e.\u0275\u0275text(15,"M\xe3 MyPoint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th",10),e.\u0275\u0275text(17,"T\xean voucher"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th",11),e.\u0275\u0275text(19,"Nh\xf3m flash sale"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th",11),e.\u0275\u0275text(21,"T\xean NCC"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",11),e.\u0275\u0275text(23,"Gi\xe1 flash sale"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",11),e.\u0275\u0275text(25,"S\u1ed1 l\u01b0\u1ee3ng"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"th",12),e.\u0275\u0275text(27,"\u0110\xe3 b\xe1n th\u1eadt"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"th",12),e.\u0275\u0275text(29,"\u0110\xe3 b\xe1n \u1ea3o"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"tbody"),e.\u0275\u0275template(31,he,23,17,"tr",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(32,ge,2,1,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){const o=e.\u0275\u0275reference(33);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==n.rows?null:n.rows.length),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.nameInventory," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzScroll",e.\u0275\u0275pureFunction0(12,fe))("nzTotal",n.pagination.total_rows||1)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",n.pagination.page||1)("nzFrontPagination",!1)("nzPageSizeOptions",e.\u0275\u0275pureFunction0(13,_e))("nzFooter",o)("nzData",n.rows),e.\u0275\u0275advance(23),e.\u0275\u0275property("ngForOf",n.rows)}},dependencies:[g.NzTableModule,g.NzTableComponent,g.NzTableCellDirective,g.NzThMeasureDirective,g.NzTheadComponent,g.NzTbodyComponent,g.NzTrDirective,O.NzPaginationModule,c.DecimalPipe,c.NgFor,c.NgIf,x.NzButtonModule,x.NzButtonComponent,L.\u0275NzTransitionPatchDirective,M.NzWaveDirective],encapsulation:2,changeDetection:0})}return i})();function ye(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.downloadSampleFile())}),e.\u0275\u0275element(1,"span",13),e.\u0275\u0275text(2," Xu\u1ea5t file "),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("nzType","primary")}function Se(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",14),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",14),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",14),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",14),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td",14),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td",14),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td",14),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",14),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td",14),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",14),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td",14),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"td",14),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td",14),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"td",14),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td",14),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()()),2&i){const t=d.$implicit,a=d.index,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",(n.pagination.page-1)*n.pagination.limit+a+1," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(7,15,t.transaction_time,"dd/MM/yyyy HH:mm")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.product_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.brand_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.product_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,18,t.quantity)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,20,t.sale_price)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,22,t.total)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.discount_flash_sale||0),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(27,24,null==t?null:t.total_need_to_pay)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,26,t.pay_point)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(33,28,t.pay_cash)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.full_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.phone_number)}}function be(i,d){if(1&i&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==t.pagination?null:t.pagination.total_rows)||0," ")}}const Ce=function(){return{x:"1500px",y:"calc(100vh - 350px)"}},ze=function(){return[10,20,30,40,50]};let xe=(()=>{class i{constructor(){this.isLoading=!1,this.pagination={page:1,limit:10,total_pages:1,total_rows:10,sort:"asc"},this.loading=!0,this.rows=[],this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.iComLibsServicesProjectFlashSaleService=(0,e.inject)(z.Rm),this.IComMessageService=(0,e.inject)(w.Qi)}ngOnInit(){this.loadPage(1)}downloadSampleFile(){(0,D.cT)(`${N.N.apiGatewayUrl}${N.N.suffixCampaignV3}/flashsale/voucher/transaction/export`,"LichSuGiaoDich",this.IComMessageService,{_id:this.data._id})}loadPage(t=1,a=10){var n=this;return(0,u.Z)(function*(){try{n.loading=!0;const o={_id:n.data._id,size:a,page:t},l=yield(0,p.lastValueFrom)(n.iComLibsServicesProjectFlashSaleService.transactionList(o));if(l&&l.data&&l.data.items)return n.rows=l.data.items||[],void(n.pagination=l.data.pagination);n.rows=[],n.pagination=l.data.pagination}catch(o){console.log(o)}finally{n.loading=!1,n.cdr.detectChanges()}})()}onPageChange(t){this.loadPage(t,this.pagination.limit)}onPageSizeChange(t){this.loadPage(1,t)}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-history"]],inputs:{data:"data"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:42,vars:15,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"w-full","justify-end","flex","my-2"],["nz-button","",3,"nzType","click",4,"ngIf"],[1,"w-full","h-full","d-flex","mt-4","overflow-hidden"],["nzShowSizeChanger","",1,"h-full",3,"nzScroll","nzData","nzTotal","nzPageSize","nzLoading","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange"],["table",""],["nzWidth","100px",1,"text-xs"],["nzWidth","300px",1,"text-xs"],["nzWidth","150px",1,"text-xs"],["nzWidth","200px",1,"text-xs"],[4,"ngFor","ngForOf"],["footerTemplate",""],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"text-xs","!p-3"],[1,"footer-content"]],template:function(a,n){if(1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,ye,3,1,"button",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3)(4,"nz-table",4,5),e.\u0275\u0275listener("nzPageIndexChange",function(l){return n.onPageChange(l)})("nzPageSizeChange",function(l){return n.onPageSizeChange(l)}),e.\u0275\u0275elementStart(6,"thead")(7,"tr")(8,"th",6),e.\u0275\u0275text(9,"STT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",7),e.\u0275\u0275text(11,"M\xe3 giao d\u1ecbch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th",8),e.\u0275\u0275text(13," Th\u1eddi gian giao d\u1ecbch th\xe0nh c\xf4ng "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th",8),e.\u0275\u0275text(15,"M\xe3 s\u1ea3n ph\u1ea9m tr\xean MyPoint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th",9),e.\u0275\u0275text(17,"T\xean NCC"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th",9),e.\u0275\u0275text(19,"T\xean voucher"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th",6),e.\u0275\u0275text(21,"S\u1ed1 l\u01b0\u1ee3ng"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",6),e.\u0275\u0275text(23,"Gi\xe1 b\xe1n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",6),e.\u0275\u0275text(25,"T\u1ed5ng ti\u1ec1n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"th",9),e.\u0275\u0275text(27,"S\u1ed1 ti\u1ec1n gi\u1ea3m gi\xe1"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"th",8),e.\u0275\u0275text(29,"T\u1ed5ng ti\u1ec1n c\u1ea7n thanh to\xe1n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"th",8),e.\u0275\u0275text(31,"S\u1ed1 \u0111i\u1ec3m \u0111\xe3 d\xf9ng \u0111\u1ec3 thanh to\xe1n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"th",8),e.\u0275\u0275text(33,"S\u1ed1 ti\u1ec1n \u0111\xe3 d\xf9ng \u0111\u1ec3 thanh to\xe1n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"th",8),e.\u0275\u0275text(35,"Ng\u01b0\u1eddi mua"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th",8),e.\u0275\u0275text(37,"S\u0110T"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(38,"tbody"),e.\u0275\u0275template(39,Se,38,30,"tr",10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(40,be,2,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){const o=e.\u0275\u0275reference(41);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==n.rows?null:n.rows.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzScroll",e.\u0275\u0275pureFunction0(13,Ce))("nzData",n.rows)("nzTotal",(null==n.pagination?null:n.pagination.total_rows)||1)("nzPageSize",10)("nzLoading",n.isLoading)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",(null==n.pagination?null:n.pagination.page)||1)("nzFrontPagination",!1)("nzPageSizeOptions",e.\u0275\u0275pureFunction0(14,ze))("nzFooter",o)("nzData",n.rows),e.\u0275\u0275advance(35),e.\u0275\u0275property("ngForOf",n.rows)}},dependencies:[g.NzTableModule,g.NzTableComponent,g.NzTableCellDirective,g.NzThMeasureDirective,g.NzTheadComponent,g.NzTbodyComponent,g.NzTrDirective,O.NzPaginationModule,c.DecimalPipe,c.DatePipe,c.NgFor,c.NgIf,x.NzButtonModule,x.NzButtonComponent,L.\u0275NzTransitionPatchDirective,M.NzWaveDirective],encapsulation:2,changeDetection:0})}return i})();function Te(i,d){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"icom-libs-flash_sale-detail-general",7),e.\u0275\u0275listener("icomDetailFlashSale",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.handlerDetailFlashSale(n))}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("mode",t.mode)}}function Ee(i,d){if(1&i&&e.\u0275\u0275element(0,"app-product-table",9),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.inventory)}}function Ie(i,d){1&i&&(e.\u0275\u0275elementStart(0,"nz-tab",8),e.\u0275\u0275template(1,Ee,1,1,"ng-template",4),e.\u0275\u0275elementEnd())}function we(i,d){if(1&i&&e.\u0275\u0275element(0,"app-history",9),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.inventory)}}function Ne(i,d){1&i&&(e.\u0275\u0275elementStart(0,"nz-tab",10),e.\u0275\u0275template(1,we,1,1,"ng-template",4),e.\u0275\u0275elementEnd())}let Pe=(()=>{class i{constructor(){this.listOfData=[],this.tabs=[{title:"Th\xf4ng tin chung",content:"Content of Tab Pane 1",isLoading:!1},{title:"Danh s\xe1ch \u0111\u01a1n h\xe0ng",content:"Content of Tab Pane 2",isLoading:!1},{title:"L\u1ecbch s\u1eed giao d\u1ecbch",content:"Content of Tab Pane 3",isLoading:!1}],this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.route=(0,e.inject)(F.ActivatedRoute)}ngOnInit(){var t=this;this.route.queryParams.pipe().subscribe(function(){var a=(0,u.Z)(function*(n){n&&(t.mode=n.mode,t.inventoryId=n.mode,t.cdr.detectChanges())});return function(n){return a.apply(this,arguments)}}())}handlerDetailFlashSale(t){this.inventory=t,this.cdr.detectChanges()}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["icom-libs-flash-sale-detail"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:10,vars:3,consts:[["nzBackIcon","",1,"site-page-header","h-full","w-full","flex","flex-col","!p-0"],[1,"w-full","h-full","!pt-0","flex","overflow-hidden"],[1,"h-full","w-full"],["nzTitle","Th\xf4ng tin chung"],["nz-tab",""],["nzTitle","Danh s\xe1ch s\u1ea3n ph\u1ea9m ",4,"ngIf"],["nzTitle","L\u1ecbch s\u1eed giao d\u1ecbch",4,"ngIf"],[1,"h-full","w-full",3,"mode","icomDetailFlashSale"],["nzTitle","Danh s\xe1ch s\u1ea3n ph\u1ea9m "],[3,"data"],["nzTitle","L\u1ecbch s\u1eed giao d\u1ecbch"]],template:function(a,n){1&a&&(e.\u0275\u0275elementStart(0,"nz-page-header",0)(1,"nz-page-header-title"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"nz-page-header-content",1)(4,"div",2)(5,"nz-tabset")(6,"nz-tab",3),e.\u0275\u0275template(7,Te,1,1,"ng-template",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ie,2,0,"nz-tab",5),e.\u0275\u0275template(9,Ne,2,0,"nz-tab",6),e.\u0275\u0275elementEnd()()()()),2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==n.inventory?null:n.inventory.name)||"T\u1ea1o m\u1edbi"),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf","view"===n.mode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","view"===n.mode))},dependencies:[V.NzTypographyModule,f.NzPageHeaderModule,f.NzPageHeaderComponent,f.NzPageHeaderTitleDirective,f.NzPageHeaderContentDirective,b.NzSpaceModule,C.NzTabsModule,C.NzTabSetComponent,C.NzTabComponent,C.NzTabDirective,h.NzIconModule,c.NgIf,g.NzTableModule,P.NzSpinModule,ue,ve,xe],styles:[".test[_ngcontent-%COMP%]     formly-group{display:flex;flex-wrap:wrap}"],changeDetection:0})}return i})()},46973:(E,y,r)=>{r.d(y,{K:()=>c});const c=(0,r(82306).d)(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"})},82306:(E,y,r)=>{function u(c){const h=c(f=>{Error.call(f),f.stack=(new Error).stack});return h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h}r.d(y,{d:()=>u})}}]);