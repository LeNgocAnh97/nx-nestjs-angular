(self.webpackChunkicom=self.webpackChunkicom||[]).push([[575],{40575:(te,g,i)=>{i.r(g),i.d(g,{IcomLibsInventoryDetailComponent:()=>ee});var d=i(14817),e=i(36151),z=i(60202),p=i(44729),v=i(87757),m=i(63801),D=i(38831),y=i(59600),x=i(47332),w=i(23770),I=i(91872),f=i(926);function N(t,r){if(1&t&&e.\u0275\u0275element(0,"icom-libs-inventory-add_edit",1),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("model",n.inventory)}}let j=(()=>{class t{constructor(){this.inventoryService=(0,e.inject)(p.NH)}ngOnInit(){this.inventory&&(!this.inventory.rent_from||!this.inventory.rent_to||(this.inventory.date_range=[I(this.inventory.rent_from).toDate(),I(this.inventory.rent_to).toDate()]))}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["icom-libs-inventory-detail-general"]],inputs:{inventory:"inventory"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:1,vars:1,consts:[[3,"model",4,"ngIf"],[3,"model"]],template:function(o,a){1&o&&e.\u0275\u0275template(0,N,1,1,"icom-libs-inventory-add_edit",0),2&o&&e.\u0275\u0275property("ngIf",a.inventory)},dependencies:[w.IcomLibsInventoryAddEditComponent,f.NzSpinModule,d.NgIf],encapsulation:2})}return t})();var P=i(49671),C=i(93484),L=i(13391),M=i(62059),_=i(16283),b=i(33635),S=i(21786),E=i(37586),R=i(53750),h=i(8111);const H=(t,r)=>[{prop:"",cellTemplate:t,width:120,sortable:!1},{prop:"sku",sortable:!1,width:200},{prop:"name",sortable:!1,width:400},{prop:"type",width:200,sortable:!1},{prop:"order",width:100,sortable:!1,pipe:(0,h.E2)()},{prop:"gen_code_type",width:200,sortable:!1,name:"Gen Code Type"},{prop:"start_time",width:150,sortable:!1,pipe:(0,h.ZR)()},{prop:"end_time",width:150,sortable:!1,pipe:(0,h.ZR)()},{prop:"status",width:100,sortable:!1,cellTemplate:r}];var u=i(14859);class F{constructor(){this.size=0,this.totalElements=0,this.totalPages=0,this.pageNumber=0}}var O=i(47809),G=i(54829),T=i(71579);const V=["selectRef"],A=["statusRef"];function Q(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"button",6),e.\u0275\u0275text(2," Action "),e.\u0275\u0275element(3,"span",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"nz-dropdown-menu",null,8)(6,"ul",9)(7,"li",10),e.\u0275\u0275listener("click",function(a){const l=e.\u0275\u0275restoreView(n).row,c=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(c.handlerViewDetail(a,l))}),e.\u0275\u0275text(8," Edit "),e.\u0275\u0275elementEnd()()()()}if(2&t){const n=e.\u0275\u0275reference(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","primary")("nzShape","round")("nzDropdownMenu",n)}}function B(t,r){1&t&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275text(1,"Draft"),e.\u0275\u0275elementEnd())}function Z(t,r){1&t&&(e.\u0275\u0275elementStart(0,"span",16),e.\u0275\u0275text(1,"Submitted"),e.\u0275\u0275elementEnd())}function U(t,r){1&t&&(e.\u0275\u0275elementStart(0,"span",16),e.\u0275\u0275text(1,"Approved"),e.\u0275\u0275elementEnd())}function $(t,r){1&t&&(e.\u0275\u0275elementStart(0,"span",17),e.\u0275\u0275text(1,"Rejected"),e.\u0275\u0275elementEnd())}function Y(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275elementContainerStart(1,11),e.\u0275\u0275template(2,B,2,0,"span",12),e.\u0275\u0275template(3,Z,2,0,"span",13),e.\u0275\u0275template(4,U,2,0,"span",13),e.\u0275\u0275template(5,$,2,0,"span",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&t){const n=r.row;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",n.status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",3)}}const W=function(){return[]};let J=(()=>{class t{constructor(n){this.router=n,this.form=new C.FormGroup({}),this.options={},this.pagination=new F,this.fields=[],this.productService=(0,e.inject)(p.k),this.modalService=(0,e.inject)(E.NzModalService),this.IComMessageService=(0,e.inject)(R.Qi),this.inventoryService=(0,e.inject)(p.NH),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.modelForm={},this.pagination.pageNumber=0}ngOnInit(){this.configTable={loadingIndicator:!0,columns:H(this.selectRef,this.statusRef),headerHeight:50,rowHeight:"auto",pageLimit:10},(0,b.combineLatest)([this.productService.getOptionType("PRODUCT_TYPE"),this.productService.getOptionType("PRODUCT_GENCODE_TYPE")]).subscribe(n=>{const[o,a]=n,s=this.configTable.columns?.find(c=>"type"===c.prop);s&&(s.pipe=this.pipeParseStatus(o)),this.configTable.columns=this.configTable.columns;const l=this.configTable.columns?.find(c=>"gen_code_type"===c.prop);l&&(l.pipe=this.pipeParseStatus(a)),this.configTable.columns=this.configTable.columns}),this.loadPage()}pipeParseStatus(n){const o=n.data;return{transform:a=>o.find(l=>l.code===a).name}}loadPage(){var n=this;return(0,P.Z)(function*(){try{n.loadingIndicator=!0;const o=yield(0,b.lastValueFrom)(n.inventoryService.getListProductOfInventory(n.inventory?.id||""));if(o&&o.data&&o.data.items){const a=[...o.data.items||[]];n.rows=a}}catch(o){console.log(o)}finally{n.loadingIndicator=!1,n.cdr.detectChanges()}})()}handlerViewDetail(n,o){n.stopPropagation(),this.router.navigateByUrl(`/inventory/product?inventory=${this.inventory?.id}&product=${o.id}&name=${o.name}`)}static#e=this.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275directiveInject(z.Router))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["icom-libs-inventory-detail-product"]],viewQuery:function(o,a){if(1&o&&(e.\u0275\u0275viewQuery(V,7),e.\u0275\u0275viewQuery(A,7)),2&o){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(a.selectRef=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(a.statusRef=s.first)}},inputs:{fields:"fields",rows:"rows",inventory:"inventory"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:7,vars:9,consts:[[1,"mb-4","w-full","h-full","flex","flex-col","!p-4","bg-white","border","rounded-md"],[1,"w-full","h-full","flex"],[1,"material","expandable","striped","w-full","h-full",2,"height","calc(100vh - 229px) !important",3,"rows","columns","headerHeight","columnMode","rowHeight","scrollbarH","scrollbarV","loadingIndicator"],["selectRef",""],["statusRef",""],[1,"name-container"],["nz-button","","nz-button","","nz-dropdown","",3,"nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[3,"ngSwitch"],["nz-typography","",4,"ngSwitchCase"],["nz-typography","","nzType","success",4,"ngSwitchCase"],["nz-typography","","nzType","danger",4,"ngSwitchCase"],["nz-typography",""],["nz-typography","","nzType","success"],["nz-typography","","nzType","danger"]],template:function(o,a){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"ngx-datatable",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(3,Q,9,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Y,6,5,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("rows",a.rows)("columns",a.configTable.columns||e.\u0275\u0275pureFunction0(8,W))("headerHeight",a.configTable.headerHeight||50)("columnMode","standard")("rowHeight",50)("scrollbarH",!0)("scrollbarV",!0)("loadingIndicator",a.loadingIndicator))},dependencies:[M.FormlyNgZorroAntdModule,C.ReactiveFormsModule,L.FormlyModule,_.NzButtonModule,_.NzButtonComponent,O.\u0275NzTransitionPatchDirective,G.NzWaveDirective,S.NgxDatatableModule,S.DatatableComponent,v.NzIconModule,v.NzIconDirective,u.NzDropDownModule,T.NzMenuDirective,T.NzMenuItemComponent,u.NzDropDownDirective,u.NzDropdownMenuComponent,u.NzDropdownButtonDirective,d.NgSwitch,d.NgSwitchCase],encapsulation:2,changeDetection:0})}return t})();function K(t,r){if(1&t&&e.\u0275\u0275element(0,"icom-libs-inventory-detail-general",9),2&t){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("inventory",n.inventory)}}function X(t,r){1&t&&e.\u0275\u0275element(0,"nz-spin",10)}function k(t,r){1&t&&e.\u0275\u0275element(0,"nz-spin",10)}function q(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",3)(1,"nz-tabset",4)(2,"nz-tab",5),e.\u0275\u0275template(3,K,1,1,"icom-libs-inventory-detail-general",6),e.\u0275\u0275template(4,X,1,0,"nz-spin",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"nz-tab",8),e.\u0275\u0275element(6,"icom-libs-inventory-detail-product",9),e.\u0275\u0275template(7,k,1,0,"nz-spin",7),e.\u0275\u0275elementEnd()()()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("nzSelectedIndex",0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.inventory),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.inventory),e.\u0275\u0275advance(2),e.\u0275\u0275property("inventory",n.inventory),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.inventory)}}let ee=(()=>{class t{constructor(n){this.routeActive=n,this.inventoryService=(0,e.inject)(p.NH),this.cdr=(0,e.inject)(e.ChangeDetectorRef),this.inventoryId=this.routeActive.snapshot.params.id}ngOnInit(){this.inventoryService.getInventory(this.inventoryId).subscribe(n=>{this.inventory=n.data,this.cdr.detectChanges()})}static#e=this.\u0275fac=function(o){return new(o||t)(e.\u0275\u0275directiveInject(z.ActivatedRoute))};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["icom-libs-inventory-detail"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:5,vars:2,consts:[["nzBackIcon","",1,"site-page-header","h-full","w-full","flex","flex-col"],[1,"w-full","h-full"],["class","h-full",4,"ngIf"],[1,"h-full"],[1,"h-full","w-full",3,"nzSelectedIndex"],["nzTitle","General"],[3,"inventory",4,"ngIf"],["nzSimple","",4,"ngIf"],["nzTitle","Inventory Product"],[3,"inventory"],["nzSimple",""]],template:function(o,a){1&o&&(e.\u0275\u0275elementStart(0,"nz-page-header",0)(1,"nz-page-header-title"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"nz-page-header-footer",1),e.\u0275\u0275template(4,q,8,5,"div",2),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==a.inventory?null:a.inventory.name)||""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.inventory&&a.inventory.id))},dependencies:[x.NzTypographyModule,m.NzPageHeaderModule,m.NzPageHeaderComponent,m.NzPageHeaderTitleDirective,m.NzPageHeaderFooterDirective,D.NzSpaceModule,y.NzTabsModule,y.NzTabSetComponent,y.NzTabComponent,v.NzIconModule,d.NgIf,j,J,f.NzSpinModule,f.NzSpinComponent],encapsulation:2,changeDetection:0})}return t})()}}]);