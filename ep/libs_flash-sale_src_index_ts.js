"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([["libs_flash-sale_src_index_ts"],{5594:(A,h,o)=>{o.d(h,{E:()=>e});var g=o(248),c=o(1699);let e=(()=>{class l{constructor(u,p){this.el=u,this.permissionService=p}ngOnInit(){this.permissionService.getPermission(this.action)||this.el.nativeElement.style.setProperty("display","none","important")}static#e=this.\u0275fac=function(p){return new(p||l)(c.Y36(c.SBq),c.Y36(g.$))};static#t=this.\u0275dir=c.lG2({type:l,selectors:[["","icomLibsHasPermissionDirective",""]],inputs:{action:"action"},standalone:!0})}return l})()},2696:(A,h,o)=>{o.r(h),o.d(h,{IcomLibsFlashSaleListComponent:()=>H});var g=o(1670),c=o(3989),e=o(1699),l=o(1340),v=o(6575),u=o(8849),p=o(7313),z=o(8399),T=o(8619),S=o(7090),f=o(7505),Z=o(9404),D=o(9466),P=o(9717),E=o(4447),y=o(5942),_=o(1236),x=o(4905),b=o(8216),L=o(881),w=o(5594),U=o(479),F=o(5920),C=o(2456);const I=function(r,m){return{"text-green-500":r,"text-red-500":m}};function M(r,m){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",22),e._uU(2),e.qZA(),e.TgZ(3,"td",22),e._uU(4),e.qZA(),e.TgZ(5,"td",22)(6,"div",23),e._uU(7),e.qZA()(),e.TgZ(8,"td",22),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td",22),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td",22),e._uU(15),e.qZA(),e.TgZ(16,"td",24),e._uU(17),e.ALo(18,"findValueById"),e.qZA(),e.TgZ(19,"td",22),e._uU(20),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"td",22),e._uU(23),e.qZA(),e.TgZ(24,"td")(25,"div",25)(26,"button",26),e._uU(27," H\xe0nh \u0111\u1ed9ng "),e._UZ(28,"span",27),e.qZA(),e.TgZ(29,"nz-dropdown-menu",null,28)(31,"ul",29)(32,"li",30),e.NdJ("click",function(n){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.handlerView(n,a))}),e._uU(33," Xem "),e.qZA(),e.TgZ(34,"li",30),e.NdJ("click",function(n){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.handlerEdit(n,a))}),e._uU(35," S\u1eeda "),e.qZA()()()()()()}if(2&r){const t=m.$implicit,s=m.index,n=e.MAs(30),i=e.oxw();e.xp6(2),e.hij(" ",((null==i.pagination?null:i.pagination.page)-1)*(null==i.pagination?null:i.pagination.limit)+s+1," "),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Q6J("nzTooltipTitle",t.name),e.xp6(1),e.hij(" ",t.name||"-"," "),e.xp6(2),e.Oqu(e.xi3(10,16,t.start_time,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(e.xi3(13,19,t.end_time,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu((null==t.flash_sale_config||null==t.flash_sale_config.products?null:t.flash_sale_config.products.length)||0),e.xp6(1),e.Q6J("ngClass",e.WLB(28,I,"ACTIVE"===t.status,"INACTIVE"===t.status)),e.xp6(1),e.hij(" ",e.xi3(18,22,t.status,i.ListStatus)||"-"," "),e.xp6(3),e.Oqu(e.xi3(21,25,t.created_at,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.created_by_name),e.xp6(3),e.Q6J("nzType","primary")("nzShape","round")("nzDropdownMenu",n),e.xp6(6),e.Q6J("action","view"),e.xp6(2),e.Q6J("action","edit")}}function J(r,m){if(1&r&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==t.pagination?null:t.pagination.total_rows)||0," ")}}const N=function(){return{y:"calc(100vh - 430px)"}},O=function(){return[10,15,20,30,40,50]};let H=(()=>{class r{constructor(){this.listOfData=[],this.form=new u.cw({}),this.model={},this.ListStatus=(0,x.EC)(),this.rows=[],this.options={formState:{hidden:!1}},this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"name",type:"search-input",className:"basis-6/12",props:{placeholder:"T\xecm ki\u1ebfm theo m\xe3, t\xean flash sale",nzPrefixIcon:"search"}}]},{className:"flex flex-row flex-wrap",fieldGroupClassName:"flex w-full",fieldGroup:[{key:"status",type:"select-custom",className:"basis-6/12",props:{placeholder:"Tr\u1ea1ng th\xe1i",valueProp:"id",labelProp:"value",label:"Tr\u1ea1ng th\xe1i",viewValue:"value",options:(0,x.EC)()},expressions:{hide:"!formState.hidden"}},{key:"effect",type:"select-custom",className:"basis-6/12",props:{placeholder:"Hi\u1ec7u l\u1ef1c",valueProp:"id",labelProp:"value",viewValue:"value",label:"Hi\u1ec7u l\u1ef1c",options:[{id:"non expired",value:"C\xf2n hi\u1ec7u l\u1ef1c"},{id:"expired",value:"H\u1ebft hi\u1ec7u l\u1ef1c"}]},expressions:{hide:"!formState.hidden"}}]}],this.modalService=(0,e.f3M)(Z.Sf),this.viewContainerRef=(0,e.f3M)(e.s_b),this.icomLibsDynamicComponentService=(0,e.f3M)(D.G),this.cdr=(0,e.f3M)(e.sBO),this.router=(0,e.f3M)(E.F0),this.iComLibsServicesProjectDynamicHomeService=(0,e.f3M)(y.KL),this.iComLibsServicesProjectFlashSaleService=(0,e.f3M)(y.Rm),this.IComMessageService=(0,e.f3M)(P.Q)}ngOnInit(){this.loadPage(1)}drop(t){(0,c.bA)(this.listOfData,t.previousIndex,t.currentIndex)}handlerSearch(t){t.stopPropagation(),t.preventDefault(),this.loadPage(1)}handlerReset(){this.form.reset(),this.loadPage(1)}loadPage(t=1,s=10){var n=this;return(0,g.Z)(function*(){try{n.loading=!0;const a={...{...n.model},size:s,page:t},d=yield(0,_.n)(n.iComLibsServicesProjectFlashSaleService.list({...a}));if(d&&d.data&&d.data.items)return n.rows=d.data.items||[],void(n.pagination=d.data.pagination);n.rows=[],n.pagination=d.data.pagination}catch(i){console.log(i)}finally{n.loading=!1,n.cdr.detectChanges()}})()}handlerToggleCollapse(t){t.stopPropagation(),t.preventDefault(),this.options.formState.hidden=!this.options.formState.hidden}handlerView(t,s){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl(`flash-sale/list/detail?id=${s._id}&mode=view`)}handlerEdit(t,s){var n=this;return(0,g.Z)(function*(){t.stopPropagation(),t.preventDefault();try{const i=s?._id||"";if((yield(0,_.n)(n.iComLibsServicesProjectFlashSaleService.detail(+i)))?.data?.is_transaction_exists)return void n.IComMessageService.showAlertMessageError("Flash sale \u0111\xe3 c\xf3 giao d\u1ecbch th\xe0nh c\xf4ng. B\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p s\u1eeda.");n.router.navigateByUrl(`flash-sale/list/detail?id=${s._id}&mode=edit`)}catch(i){const d=i?.error?.error_message;n.IComMessageService.showAlertMessageError(d)}})()}handlerActivate(t){t.stopPropagation(),t.preventDefault()}showModal(t){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl("flash-sale/list/detail?mode=add")}handlerOpenGroupSale(t){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl("flash-sale/list/group")}onPageChange(t){this.loadPage(t,this.pagination.limit)}onPageSizeChange(t){this.loadPage(1,t)}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["icom-libs-flash-sale-list"]],standalone:!0,features:[e.jDz],decls:51,vars:29,consts:[[1,"flex","w-full","h-full","flex-col"],[1,"w-full","!p-2","bg-white","border","rounded-md"],["icomLibsHasPermissionDirective","","nz-button","",3,"action","nzType","click"],["nz-form","",1,"!p-4","bg-white","border","rounded-md","mt-4",3,"formGroup","keydown.enter"],[1,"w-full","items-center"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-col","",1,"search-area","flex","items-center"],["icomLibsHasPermissionDirective","","nz-button","",1,"!flex","!items-center",3,"action","nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],["icomLibsHasPermissionDirective","","nz-button","",1,"ml-4","!flex","!items-center",3,"action","click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],["icomLibsHasPermissionDirective","",1,"ml-4","items-center","flex",3,"action","click"],["nz-icon","",1,"ml-2",3,"nzType"],[1,"w-full","d-flex","h-full","mt-4","overflow-hidden"],["nzShowSizeChanger","","cdkDropList","",1,"h-full",3,"nzScroll","nzData","nzLoading","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange","cdkDropListDropped"],["flashSaleTable","","sectionTable",""],["nzWidth","10%",1,"text-xs"],[4,"ngFor","ngForOf"],["footerTemplate",""],[1,"text-xs","!p-2"],["appShowTooltipOnOverflow","","nz-tooltip","",1,"overflow-hidden","text-ellipsis","whitespace-nowrap",3,"nzTooltipTitle"],[1,"text-xs","!p-2",3,"ngClass"],[1,"name-container"],["nz-button","","nz-button","","nz-dropdown","",3,"nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["icomLibsHasPermissionDirective","","nz-menu-item","",3,"action","click"],[1,"footer-content"]],template:function(s,n){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(a){return n.handlerOpenGroupSale(a)}),e._uU(3," Qu\u1ea3n l\xfd nh\xf3m flash sale "),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("keydown.enter",function(a){return n.handlerSearch(a)}),e.TgZ(5,"div",4),e._UZ(6,"formly-form",5),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"button",2),e.NdJ("click",function(a){return n.showModal(a)}),e._UZ(10,"span",8),e._uU(11," Th\xeam m\u1edbi "),e.qZA()(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(a){return n.handlerSearch(a)}),e._UZ(14,"i",11),e._uU(15," L\u1ecdc "),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return n.handlerReset()}),e._UZ(17,"i",13),e._uU(18," L\xe0m m\u1edbi "),e.qZA(),e.TgZ(19,"a",14),e.NdJ("click",function(a){return n.handlerToggleCollapse(a)}),e._uU(20),e._UZ(21,"span",15),e.qZA()()()(),e.TgZ(22,"div",16)(23,"nz-table",17,18),e.NdJ("nzPageIndexChange",function(a){return n.onPageChange(a)})("nzPageSizeChange",function(a){return n.onPageSizeChange(a)})("cdkDropListDropped",function(a){return n.drop(a)}),e.TgZ(26,"thead")(27,"tr")(28,"th",19),e._uU(29,"STT"),e.qZA(),e.TgZ(30,"th",19),e._uU(31,"M\xe3"),e.qZA(),e.TgZ(32,"th",19),e._uU(33,"T\xean"),e.qZA(),e.TgZ(34,"th",19),e._uU(35,"T\u1eeb ng\xe0y"),e.qZA(),e.TgZ(36,"th",19),e._uU(37,"\u0110\u1ebfn ng\xe0y"),e.qZA(),e.TgZ(38,"th",19),e._uU(39,"S\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m"),e.qZA(),e.TgZ(40,"th",19),e._uU(41,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(42,"th",19),e._uU(43,"Th\u1eddi gian t\u1ea1o"),e.qZA(),e.TgZ(44,"th",19),e._uU(45,"Ng\u01b0\u1eddi t\u1ea1o"),e.qZA(),e._UZ(46,"th",19),e.qZA()(),e.TgZ(47,"tbody"),e.YNc(48,M,36,31,"tr",20),e.qZA()()()(),e.YNc(49,J,2,1,"ng-template",null,21,e.W1O)),2&s){const i=e.MAs(24),a=e.MAs(50);e.xp6(2),e.Q6J("action","view")("nzType","link"),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("model",n.model)("fields",n.fields)("options",n.options)("form",n.form),e.xp6(3),e.Q6J("action","add")("nzType","primary"),e.xp6(4),e.Q6J("action","view")("nzType","primary"),e.xp6(3),e.Q6J("action","view"),e.xp6(3),e.Q6J("action","view"),e.xp6(1),e.hij(" ",n.options.formState.hidden?"Thu g\u1ecdn":"M\u1edf r\u1ed9ng"," "),e.xp6(1),e.Q6J("nzType",n.options.formState.hidden?"up":"down"),e.xp6(2),e.Q6J("nzScroll",e.DdM(27,N))("nzData",n.rows)("nzLoading",n.loading)("nzTotal",null==n.pagination?null:n.pagination.total_rows)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",null==n.pagination?null:n.pagination.page)("nzFrontPagination",!1)("nzPageSizeOptions",e.DdM(28,O))("nzData",n.rows)("nzFooter",a),e.xp6(25),e.Q6J("ngForOf",i.data)}},dependencies:[c._t,c.Wj,l.HQ,l.N8,l.Uo,l._C,l.Om,l.p0,l.$Z,v.uU,v.ax,p.u,u.UX,u._Y,u.JL,u.sg,z.X0,z.T7,T.sL,T.ix,U.w,F.dQ,S.PV,S.Ls,f.b1,C.wO,C.u9,f.cm,f.RR,f.wA,Z.Qp,b._,v.mk,L.cg,L.SY,w.E],encapsulation:2,changeDetection:0})}return r})()}}]);
//# sourceMappingURL=libs_flash-sale_src_index_ts.js.map