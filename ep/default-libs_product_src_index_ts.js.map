{"version":3,"file":"default-libs_product_src_index_ts.js","mappings":"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","names":["IcomLibsProductListComponent","constructor","modalService","this","form","FormGroup","model","inventoryService","inject","IComLibsServicesProductService","productService","IComMessageService","fields","fieldGroupClassName","className","fieldGroup","key","type","props","label","placeholder","expressions","viewValue","labelProp","valueProp","options","getOptionType","pipe","map","result","data","hide","templateOptions","router","Router","permissionService","PermissionService","cdr","ChangeDetectorRef","loadData","params","searchProduct","functionParse","item","creator_info","columns","ngOnInit","_this","_asyncToGenerator","title","pipeArgs","actions","name","callback","viewItem","bind","condition","getPermission","editItem","status","combineLatest","subscribe","results","dataType","dataGenCodeType","dataStatus","columnType","find","pipeParseStatus","columnGenCodeType","columnStatus","detectChanges","id","code","value","string_value","navigateByUrl","handlerAdd","handlerFunctionControl","event","eventFunctionControl","showModal","isVisible","handleOk","addEditComp","handlerSave","undefined","success","navigate","isLoading","isOkLoading","loadDone","loadPage","offset","arg0","Error","handleCancel","handlerViewDetail","e","row","stopPropagation","url","serializeUrl","createUrlTree","window","open","static","t","i0","i1","core","Xpm","selectors","standalone","features","decls","vars","consts","template","rf","ctx","$event","FormlyNgZorroAntdModule","ReactiveFormsModule","FormlyModule","NzButtonModule","NzFormModule","i2","NzTypographyModule","NzIconModule","NzModalModule","NzSelectModule","FormsModule","NzDropDownModule","IcomLibsCoreTableComponent","encapsulation","changeDetection","_r4","ctx_r3","ctx_r5","handlerCancel","ctx_r1","_r7","ctx_r6","toggleDisabled","ctx_r2","IcomLibsProductAddEditComponent_div_2_div_1_Template","IcomLibsProductAddEditComponent_div_2_div_2_Template","ctx_r0","formState","disabled","IcomLibsProductAddEditComponent","icomSave","EventEmitter","iComMessageService","destroyRef","DestroyRef","changeDetectorRef","ConfigFormly","required","field","gen_code_type","defaultValue","hooks","onChanges","genCodeType","parent","get","formControl","valueChanges","startWith","distinctUntilChanged","unlimit","search","ShowTime","format","multiple","getCategoryForSelect","items","getGroupForSelect","getCatalogForSelect","min","getOrg","onInit","organization_id","concatMap","idPool","getBrandByOrg","option","brand_id","setValue","getStoreByBrand","store_ids","includes","catalog_ids","length","modelOrigin","cloneDeep","isAdd","setTimeout","controls","reset","preventDefault","valid","start_time","end_time","dayjs","isBefore","showAlertMessageError","markAsTouched","submitted","lastValueFrom","createProduct","showAlertMessageDone","updateProduct","err","error","error_message","Object","keys","forEach","touched","inputs","outputs","IcomLibsProductAddEditComponent_div_2_Template","i3","i4","i5","NgIf","i6","i7"],"sourceRoot":"webpack:///","sources":["./libs/product/src/list/list.component.ts","./libs/product/src/list/list.component.html","./libs/product/src/add-edit/add-edit.component.html","./libs/product/src/add-edit/add-edit.component.ts","./libs/product/src/add-edit/defines/formly.define.ts"],"sourcesContent":["import { IcomLibsProductAddEditComponent } from './../add-edit/add-edit.component';\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnInit,\n  PipeTransform,\n  TemplateRef,\n  ViewChild,\n  inject,\n} from '@angular/core';\nimport { FormGroup, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  FormlyFormOptions,\n  FormlyFieldConfig,\n  FormlyModule,\n} from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport {\n  ColumnMode,\n  NgxDatatableModule,\n  TableColumn,\n} from '@swimlane/ngx-datatable';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { IComLibsServicesInventoryService, IComLibsServicesProductService } from '@icom/services/projects';\nimport { combineLatest, lastValueFrom, map } from 'rxjs';\nimport { NgForOf, NgIf, NgSwitch, NgSwitchCase, SlicePipe } from '@angular/common';\nimport { NzTypographyModule } from 'ng-zorro-antd/typography';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { IProduct, TYPE_TEMPLATE_REF } from '@icom/interfaces';\nimport * as dayjs from 'dayjs';\nimport { NzModalModule, NzModalService } from 'ng-zorro-antd/modal';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { Router } from '@angular/router';\nimport { IComMessageService } from '@icom/services/common';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Page } from '../defines/page.model';\nimport { NzImageModule } from 'ng-zorro-antd/image';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\nimport { formatDatePipe } from '@icom/defines';\nimport { IcomLibsCoreTableComponent } from '@icom/components/table';\nimport { PermissionService } from '@icom/services/authenticate';\nimport { IcomLibsHasPermissionDirective } from '@icom/directive';\n@Component({\n  selector: 'icom-libs-product-list',\n  templateUrl: './list.component.html',\n  standalone: true,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NzFormModule,\n    NgForOf,\n    NgSwitch,\n    NgSwitchCase,\n    NzTypographyModule,\n    NzIconModule,\n    NzModalModule,\n    NzSelectModule,\n    FormsModule,\n    NzDropDownModule,\n    // IcomLibsInventoryAddEditComponent,\n    NgIf,\n    IcomLibsCoreTableComponent,\n    IcomLibsHasPermissionDirective\n  ],\n  styles: []\n})\nexport class IcomLibsProductListComponent implements OnInit {\n  form = new FormGroup({});\n  model = {};\n  columns: any[];\n\n  private eventFunctionControl: any;\n\n  protected inventoryService = inject(IComLibsServicesProductService);\n  protected productService = inject(IComLibsServicesProductService);\n  protected IComMessageService = inject(IComMessageService);\n\n  protected fields: FormlyFieldConfig[] = [\n    {\n      fieldGroupClassName: 'flex flex-col',\n      className: 'basis-1/2',\n      fieldGroup: [\n        {\n          key: 'name',\n          type: 'input',\n          className: 'basis-4/12',\n          props: {\n            label: 'Name',\n            placeholder: 'Enter Name',\n            type: 'string',\n          },\n          expressions: {\n            'props.': 'formState.disabled',\n          },\n        },\n        {\n          key: 'gen_code_type',\n          type: 'select-custom',\n          className: 'basis-4/12 ',\n          props: {\n            label: 'Gen Code Type',\n            placeholder: 'Select Gen Code Type',\n            viewValue: 'name',\n            labelProp: 'name',\n            valueProp: 'code',\n            options: this.productService\n              .getOptionType('PRODUCT_GENCODE_TYPE')\n              .pipe(\n                map((result) => {\n                  return result?.data;\n                })\n              ),\n          },\n          expressions: { hide: '!formState.hidden' },\n        },\n        {\n          key: 'sku',\n          type: 'input',\n          className: 'basis-4/12',\n          props: {\n            label: 'Sku',\n            placeholder: 'Enter Sku',\n            type: 'string',\n          },\n          expressions: { hide: '!formState.hidden' },\n        },\n      ],\n    },\n\n    {\n      fieldGroupClassName: 'flex flex-col',\n      className: 'basis-1/2',\n      fieldGroup: [\n        {\n          key: 'brand',\n          type: 'input',\n          className: 'basis-4/12',\n          props: {\n            label: 'Brand Name',\n            placeholder: 'Enter Brand Name',\n            type: 'string',\n          },\n          expressions: { hide: '!formState.hidden' },\n        },\n        {\n          key: 'status',\n          type: 'select-custom',\n          className: 'basis-4/12 ',\n          props: {\n            label: 'Status',\n            viewValue: 'name',\n            labelProp: 'name',\n            placeholder: 'Select Status',\n            valueProp: 'int_value',\n            options: this.productService.getOptionType('PRODUCT_STATUS').pipe(\n              map((result) => {\n                return result?.data;\n              })\n            ),\n          },\n          expressions: { hide: '!formState.hidden' },\n        },\n        {\n          key: 'type',\n          type: 'select-custom',\n          className: 'basis-4/12 ',\n          templateOptions: {\n            label: 'Type',\n            placeholder: 'Select Type',\n            viewValue: 'name',\n            labelProp: 'name',\n            valueProp: 'code',\n            options: this.productService.getOptionType('PRODUCT_TYPE').pipe(\n              map((result) => {\n                return result?.data;\n              })\n            ),\n          },\n          expressions: { hide: '!formState.hidden' },\n        },\n      ]\n    },\n  ];\n  protected router = inject(Router);\n  protected permissionService  = inject(PermissionService);\n  protected cdr  = inject(ChangeDetectorRef);\n  isVisible!: boolean;\n  isOkLoading!: boolean;\n  addEditComp: any;\n\n  constructor(\n    private modalService: NzModalService\n  ) {\n    this.columns = [];\n  }\n  async ngOnInit() {\n    this.columns = [\n      { title: 'Id', type: 'text', key: 'id'},\n      { title: 'Ảnh đại diện', key: 'medias[0].url', type: 'image' },\n      { title: 'SKU', key: 'sku', type: 'text' },\n      { title: 'Tên sản phẩm', key: 'name', type: 'text' },\n      { title: 'Số lượng', key: 'quantity_available', type: 'text' },\n      { title: 'Thương hiệu', key: 'brand.name', type: 'text' },\n      {\n        title: 'Loại', key: 'type', pipe: 'array',\n        type: 'text',\n        pipeArgs: []\n      },\n      {\n        title: 'Gen Code Type', key: 'gen_code_type', pipe: 'array',\n        type: 'text',\n        pipeArgs: []\n      },\n      { title: 'Thời gian bắt đầu', key: 'start_time', type: 'text', pipe: 'time' },\n      { title: 'Thời gian kết thúc', key: 'end_time', type: 'text', pipe: 'time'  },\n      {\n        title: 'Trạng thái', key: 'status', pipe: 'array',\n        type: 'text',\n        pipeArgs: []\n      },\n      {\n        title: 'Thao tác',\n        key: 'actions',\n        type: 'action',\n        actions: [\n          {\n            name: 'Xem',\n            callback: this.viewItem.bind(this),\n            condition: (data: any) => {\n             return this.permissionService.getPermission('view');\n            }\n          },\n          {\n            name: 'Sửa',\n            callback: this.editItem.bind(this),\n            condition: (data: any) => {\n              if(!this.permissionService.getPermission('edit')) {\n                return false;\n              }\n              return data.status === 'COMPLETED' ? false : true;\n            }\n          },\n          \n        ],\n      },\n    ];\n    combineLatest([\n      this.productService.getOptionType('PRODUCT_TYPE'),\n      this.productService.getOptionType('PRODUCT_GENCODE_TYPE'),\n      this.productService.getOptionType('PRODUCT_STATUS')\n    ]).subscribe((results: any) => {\n      const [dataType, dataGenCodeType, dataStatus] = results;\n      const columnType = this.columns.find((item) => item.key === 'type');\n      columnType && (columnType.pipeArgs = this.pipeParseStatus(dataType));\n      this.columns = [...this.columns];\n\n      const columnGenCodeType = this.columns.find((item) => item.key === 'gen_code_type');\n      columnGenCodeType && (columnGenCodeType.pipeArgs = this.pipeParseStatus(dataGenCodeType));\n      this.columns = [...this.columns];\n\n      const columnStatus = this.columns.find((item) => item.key === 'status');\n      columnStatus && (columnStatus.pipeArgs = this.pipeParseStatus(dataStatus));\n      this.columns = [...this.columns];\n      \n      this.cdr.detectChanges();\n    });\n  }\n\n  private pipeParseStatus(data: any) {\n    return data.data.map((item: any) => {\n      return {\n        ...item,\n        id: item.code,\n        value: item.name || item.string_value,\n        // class: 'text-gray-500'\n      }\n    });\n  }\n\n  public loadData = (params: any) => {\n    return this.inventoryService.searchProduct(params);\n  }\n\n  functionParse = (params: any) => {\n    return params?.map((item: any) => {\n      return {\n        ...item,\n        ...item.creator_info,\n      }\n    })\n  }\n\n  editItem(data: any): void {\n    this.router.navigateByUrl(`inventory/transfer/detail?id=${data.id}&mode=edit`);\n  }\n\n  viewItem(data: any): void {\n    this.router.navigateByUrl(`inventory/transfer/detail?id=${data.id}&mode=view`);\n  }\n\n\n\n\n  handlerAdd() {\n    this.router.navigateByUrl(`inventory/transfer/detail?mode=add`);\n  }\n\n  handlerFunctionControl(event: any) {\n    this.eventFunctionControl = event;\n  }\n\n  protected showModal(): void {\n\n    // if(!this.permissionService.checkPermission('Product', 'view')) {\n    //   return;\n    // }\n    // console.log(this.permissionService.checkPermission('Product'));\n    this.isVisible = true;\n  }\n\n  protected handleOk(): void {\n    const event = {\n      success: (id: string) => {\n        this.isVisible = false;\n        this.router.navigate(['/product/voucher/detail', id]);\n      },\n      isLoading: () => {\n        this.isOkLoading = true;\n      },\n      loadDone: () => {\n        this.isOkLoading = false;\n        this.loadPage({ offset: 0 });\n      },\n    };\n    this.addEditComp.handlerSave(undefined, event);\n  }\n  loadPage(arg0: { offset: number; }) {\n    throw new Error('Method not implemented.');\n  }\n\n  protected handleCancel(): void {\n    this.isVisible = false;\n  }\n\n\n  protected handlerViewDetail(e: Event, row: IProduct) {\n    e.stopPropagation();\n    const url = this.router.serializeUrl(\n      this.router.createUrlTree([`/product/voucher/detail/${row.id}`])\n    );\n  \n    window.open(url, '_blank');\n  }\n}\n","<div class=\"flex w-full h-full flex-col\">\n  <div nz-row class=\" w-full pr-4 h-full\" style=\"justify-content: end; padding-right: 8px;\">\n    <icom-libs-core-components-table\n      class=\"w-full h-full\"\n      [columns]=\"columns\"\n      [loadFn]=\"loadData\"\n      [fields]=\"fields\"\n      [model]=\"model\"\n      [form]=\"form\"\n      [functionParse]=\"functionParse\"\n      (icomAdd)=\"showModal()\"\n      (icomFunctionControl)=\"handlerFunctionControl($event)\"\n    ></icom-libs-core-components-table>\n  </div>\n</div>\n\n\n","<form [formGroup]=\"form\" nz-form class=\"pb-4 bg-white border rounded-md h-full flex flex-col\" [nzLayout]=\"'vertical'\">\n  <formly-form\n    class=\"overflow-auto px-4 pt-4 \"\n    [model]=\"model\"\n    [fields]=\"fields\"\n    [options]=\"options\"\n    [form]=\"form\"\n  ></formly-form>\n\n  <div *ngIf=\"model && model.id\" nz-row class=\"p-4 border\">\n    <div *ngIf=\"!options?.formState?.disabled\" nz-col class=\"search-area flex\">\n      <button nz-button [nzType]=\"'primary'\" [nzLoading]=\"isLoading\" (click)=\"handlerSave($event)\">\n        Submit\n      </button>\n      <button nz-button class=\"ml-4\" (click)=\"handlerCancel($event)\">Cancel</button>\n    </div>\n\n    <div *ngIf=\"options?.formState?.disabled\" nz-col class=\"search-area flex\">\n      <button nz-button [nzType]=\"'primary'\" [nzLoading]=\"isLoading\" (click)=\"toggleDisabled()\">\n        Edit\n      </button>\n    </div>\n  </div>\n</form>","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, DestroyRef, EventEmitter, Input, OnInit, Output, inject } from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { IProduct, TYPE_FORM_CONTROL } from '@icom/interfaces';\nimport { IComLibsServicesProductService } from '@icom/services/projects';\nimport {\n  FormlyFormOptions,\n  FormlyFieldConfig,\n  FormlyModule,\n} from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { ConfigFormly } from './defines/formly.define';\nimport { distinctUntilChanged, lastValueFrom, map, tap } from 'rxjs';\nimport { IComMessageService } from '@icom/services/common';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { JsonPipe, NgIf } from '@angular/common';\nimport { cloneDeep } from 'lodash';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport * as dayjs from 'dayjs';\nimport { IcomLibsHasPermissionDirective } from '@icom/directive';\n@Component({\n  // eslint-disable-next-line @angular-eslint/component-selector\n  selector: 'icom-libs-product-add_edit',\n  templateUrl: './add-edit.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzFormModule,\n    JsonPipe,\n    IcomLibsHasPermissionDirective\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class IcomLibsProductAddEditComponent implements OnInit {\n  protected form = new FormGroup({});\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: true,\n    },\n  };\n  protected fields: FormlyFieldConfig[] = [];\n  protected modelOrigin: IProduct | undefined;\n  protected isLoading!: boolean;\n\n  @Input() model: IProduct | undefined;\n  @Input() isAdd!: boolean;\n\n  @Output() icomSave: EventEmitter<IProduct> = new EventEmitter();\n  \n  protected productService = inject(IComLibsServicesProductService);\n  protected iComMessageService= inject(IComMessageService);\n  protected destroyRef = inject(DestroyRef);\n  protected changeDetectorRef = inject(ChangeDetectorRef);\n  \n  constructor() {\n    this.model = {};\n  }\n\n  ngOnInit() {\n    this.fields = ConfigFormly(this.productService, this.options.formState);\n    this.model && this.model.catalog_ids && ( this.model.catalog_ids as number[])?.length && (this.model.catalog_ids = (this.model.catalog_ids as number[])[0] as number);\n    this.modelOrigin = cloneDeep(this.model);\n    if(this.isAdd) {\n      this.toggleDisabled();\n    }\n    setTimeout(() => {\n      (this.form.controls as  any)['gen_code_type']?.valueChanges.pipe(\n        distinctUntilChanged(),\n        map(() => {\n          this.form.reset(this.model);\n        })\n      ).subscribe();\n    }, 200);\n  }\n\n  public async handlerSave(e?: Event, event?: any) {\n    e?.stopPropagation();\n    e?.preventDefault();\n    if (!this.form.valid) {\n      Object.keys(this.form.controls as TYPE_FORM_CONTROL).forEach((key) => {\n        (this.form.controls as TYPE_FORM_CONTROL)[key].touched = true;\n      });\n      return;\n    }\n    try {\n      if(this.model?.start_time && this.model?.end_time && dayjs(this.model?.end_time).isBefore(this.model?.start_time)) {\n        this.iComMessageService.showAlertMessageError('Thời gian kết thúc  không được nhỏ hơn thời gian bắt đầu.');\n        return;\n      }\n      this.form.markAsTouched();\n      (this.form as TYPE_FORM_CONTROL).submitted = true;\n      event && event.isLoading && event.isLoading(); \n      const model = cloneDeep(this.model);\n      model && model.catalog_ids && (model.catalog_ids = [model.catalog_ids as number]);\n      this.isLoading = true;\n      if (this.isAdd) {\n        const result: any = await lastValueFrom(this.productService.createProduct(model));\n        event && event.success && event.success(result?.data?.id);\n        this.iComMessageService.showAlertMessageDone('Create product success');\n      }\n\n      else {\n      \tawait lastValueFrom(this.productService.updateProduct(this.model?.id || 0, model));\n      \tevent && event.success && event.success();\n        this.iComMessageService.showAlertMessageDone('Edit product success');\n        this.modelOrigin = cloneDeep(this.model);\n        this.toggleDisabled();\n      }\n    } catch (err) {\n      event && event.loadDone && event.loadDone(); \n      this.iComMessageService.showAlertMessageError( (err as HttpErrorResponse)?.error?.error_message || 'Create product fail');\n    } finally {\n      event && event.loadDone && event.loadDone(); \n      this.isLoading = false;\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  protected toggleDisabled() {\n    this.options.formState.disabled = !this.options.formState.disabled;\n  }\n\n  protected handlerCancel(e: Event) {\n    e.stopPropagation();\n    this.toggleDisabled();\n    this.model = cloneDeep(this.modelOrigin);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { FormControl } from '@angular/forms';\nimport { IComLibsServicesProductService } from '@icom/services/projects';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\nimport { concatMap, distinctUntilChanged, map, startWith, tap } from 'rxjs';\n\nexport const ConfigFormly = (\n  productService: IComLibsServicesProductService,\n  formState: any\n): FormlyFieldConfig[] => [\n  {\n    key: 'name',\n    type: 'input',\n    props: {\n      label: 'Name',\n      placeholder: 'Enter Name',\n      type: 'string',\n      required: true,\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n  {\n    key: 'gen_code_type',\n    type: 'select-custom',\n    className: 'w-[500px]',\n    props: {\n      label: 'Gen Code Type',\n      placeholder: 'Select Gen Code Type',\n      viewValue: 'name',\n      labelProp: 'name',\n      valueProp: 'code',\n      required: true,\n      options: productService.getOptionType('PRODUCT_GENCODE_TYPE').pipe(\n        map((result) => {\n          return result?.data;\n        })\n      ),\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n  {\n    key: 'code',\n    type: 'input',\n    className: 'basis-1/2',\n    props: {\n      label: 'Code',\n      placeholder: 'Enter Code',\n      type: 'string',\n      required: true,\n    },\n    expressions: {\n      'props.disabled': (field: FormlyFieldConfig) => {\n        return (\n          field.model?.gen_code_type === 'GENCODE_TYPE_FROM_3RD_PARTY' ||\n          formState.disabled\n        );\n      },\n    },\n  },\n  {\n    key: 'unlimit',\n    defaultValue: true,\n    type: 'checkbox',\n    props: {\n      label: 'Unlimit',\n    },\n    expressions: {\n      'props.disabled': (field: FormlyFieldConfig) => {\n        return (\n          field.model?.gen_code_type === 'GENCODE_TYPE_PRE_GENERATED' ||\n          formState.disabled\n        );\n      },\n    },\n    hooks: {\n      onChanges: (field: any) => {\n        const genCodeType: FormControl =\n          field.parent.get('gen_code_type').formControl;\n        if (!genCodeType) {\n          return;\n        }\n        genCodeType.valueChanges\n          .pipe(\n            startWith(genCodeType.value),\n            distinctUntilChanged(),\n            map((value: string) => {\n              if (value === 'GENCODE_TYPE_AUTO_ONE_BY_ONE') {\n                field.props.disabled = false;\n                field.model.unlimit = true;\n                return;\n              }\n              if (value === 'GENCODE_TYPE_FROM_3RD_PARTY') {\n                field.props.disabled = false;\n                field.model.unlimit = true;\n                return;\n              }\n              field.props.disabled = true;\n              field.model.unlimit = false;\n            })\n          )\n          .subscribe();\n      },\n    },\n  },\n  {\n    key: 'belong_to_merchant',\n    type: 'checkbox',\n    props: {\n      label: 'Select Merchant',\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n  {\n    fieldGroupClassName: 'flex row items-center',\n    key: '',\n    fieldGroup: [\n      {\n        key: 'type',\n        type: 'select-custom',\n        className: 'basis-1/2',\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n        props: {\n          label: 'Type',\n          placeholder: 'Select Type',\n          viewValue: 'name',\n          labelProp: 'name',\n          required: true,\n          valueProp: 'code',\n          options: productService.getOptionType('PRODUCT_TYPE').pipe(\n            map((result) => {\n              return result?.data;\n            })\n          ),\n        },\n      },\n      {\n        key: 'status',\n        type: 'select-custom',\n        className: 'basis-1/2 ml-4',\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n        props: {\n          label: 'Status',\n          viewValue: 'name',\n          labelProp: 'name',\n          search: true,\n          placeholder: 'Select Status',\n          valueProp: 'int_value',\n          required: true,\n          options: productService.getOptionType('PRODUCT_STATUS').pipe(\n            map((result) => {\n              return result?.data;\n            })\n          ),\n        },\n      },\n    ],\n  },\n  {\n    fieldGroupClassName: 'flex row items-center',\n    key: '',\n    fieldGroup: [\n      {\n        key: 'start_time',\n        className: 'w-[300px]',\n        type: 'date', // Sử dụng trường kiểu tùy chỉnh 'range-picker'\n        props: {\n          required: true,\n          label: 'Start Time',\n          ShowTime: true,\n          format: 'dd-MM-yyyy HH:mm',\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n      {\n        key: 'end_time',\n        className: 'w-[300px]',\n        type: 'date', // Sử dụng trường kiểu tùy chỉnh 'range-picker'\n        props: {\n          // required: true,\n          label: 'End Time',\n          ShowTime: true,\n          format: 'dd-MM-yyyy HH:mm',\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n    ],\n  },\n\n  {\n    className: 'section-label',\n    template: '<hr class=\"my-4\"/>',\n  },\n  {\n    fieldGroupClassName: 'flex row items-center',\n    key: '',\n    fieldGroup: [\n      {\n        key: 'category_ids',\n        type: 'select-custom',\n        className: 'basis-1/2',\n        props: {\n          label: 'Category',\n          placeholder: 'Select Category',\n          viewValue: 'name',\n          labelProp: 'name',\n          valueProp: 'id',\n          multiple: true,\n          options: productService.getCategoryForSelect().pipe(\n            map((result) => {\n              return result?.data?.items;\n            })\n          ),\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n      {\n        key: 'group_ids',\n        type: 'select-custom',\n        className: 'basis-1/2 ml-4',\n        props: {\n          label: 'Group',\n          placeholder: 'Select Group',\n          viewValue: 'name',\n          multiple: true,\n          labelProp: 'name',\n          valueProp: 'id',\n          required: true,\n          options: productService.getGroupForSelect().pipe(\n            map((result) => {\n              return result?.data?.items;\n            })\n          ),\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n    ],\n  },\n  {\n    fieldGroupClassName: 'flex row items-center',\n    key: '',\n    fieldGroup: [\n      {\n        key: 'catalog_ids',\n        type: 'select-custom',\n        className: 'basis-1/2',\n        props: {\n          label: 'Catalog',\n          placeholder: 'Select Catalog',\n          viewValue: 'name',\n          labelProp: 'name',\n          valueProp: 'id',\n          options: productService.getCatalogForSelect().pipe(\n            map((result) => {\n              return result?.data?.items;\n            })\n          ),\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n      {\n        key: 'catalog_show_order',\n        type: 'input',\n        defaultValue: 0,\n        className: 'basis-1/2 ml-4',\n        props: {\n          label: 'Catalog show order',\n          placeholder: 'Enter Catalog show order',\n          type: 'number',\n          min: 0,\n          required: true,\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n      {\n        key: 'show_order',\n        type: 'input',\n        defaultValue: 0,\n        className: 'basis-1/2 ml-4',\n        props: {\n          label: 'Order',\n          placeholder: 'Enter Order',\n          type: 'number',\n          min: 0,\n          required: true,\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n    ],\n  },\n  {\n    key: 'import_mode',\n    type: 'select-custom',\n    props: {\n      label: 'Import mode',\n      placeholder: 'Select Import mode*',\n      viewValue: 'name',\n      labelProp: 'name',\n      valueProp: 'code',\n      required: true,\n      options: productService.getOptionType('IMPORT_MODE').pipe(\n        map((result) => {\n          return result?.data;\n        })\n      ),\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n  {\n    className: 'section-label',\n    template: '<hr class=\"my-4\"/>',\n  },\n  {\n    key: 'organization_id',\n    type: 'select-custom',\n    props: {\n      label: 'Organization',\n      placeholder: 'Select Organization*',\n      required: true,\n      valueProp: 'id',\n      labelProp: 'name',\n      options: productService.getOrg().pipe(\n        map((result) => {\n          return result?.data;\n        })\n      ),\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n  {\n    key: 'brand_id',\n    type: 'select-custom',\n    props: {\n      label: 'Brand',\n      options: [],\n      required: true,\n      placeholder: 'Select Brand',\n      valueProp: 'id',\n      labelProp: 'name',\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n    hooks: {\n      onInit: (field: any) => {\n        const organization_id: FormControl =\n          field.parent.get('organization_id').formControl;\n        field.props.options = organization_id.valueChanges.pipe(\n          startWith(organization_id.value),\n          distinctUntilChanged(),\n          concatMap((idPool: string) => {\n            if (!idPool) {\n              field.parent.get('store_ids').formControl?.setValue(null);\n              field.parent.get('brand_id').formControl?.setValue(null);\n              return [];\n            }\n            return productService.getBrandByOrg(idPool).pipe(\n              map((result) => {\n                if (!result?.data?.find((option: any) => field?.model?.brand_id === option.id)) {\n                  field.formControl.setValue(null);\n                  field.parent.get('store_ids').formControl?.setValue(null);\n                }\n                return result?.data || [];\n              })\n            );\n          })\n        );\n      },\n    },\n  },\n  {\n    key: 'store_ids',\n    type: 'select-custom',\n    props: {\n      label: 'Store',\n      placeholder: 'Select Store',\n      viewValue: 'name',\n      labelProp: 'name',\n      valueProp: 'id',\n      multiple: true,\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n    hooks: {\n      onInit: (field: any) => {\n        const brand_id: FormControl = field.parent.get('brand_id').formControl;\n        field.props.options = brand_id.valueChanges.pipe(\n          startWith(brand_id.value),\n          distinctUntilChanged(),\n          concatMap((idPool: string) => {\n            if (!idPool) {\n              field.formControl.setValue([]);\n              return [];\n            }\n            return productService.getStoreByBrand(idPool).pipe(\n              map((result) => {\n                if (!result?.data?.find((option: any) => field?.model?.store_ids?.includes(option.id))) {\n                  field.formControl.setValue([]);\n                }\n                return result?.data || [];\n              })\n            );\n          })\n        );\n      },\n    },\n  },\n];\n"],"x_google_ignoreList":[]}