"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([[802],{4802:(A,c,o)=>{o.r(c),o.d(c,{IcomLibInventoryListComponent:()=>F});var h=o(5861),e=o(5879),y=o(6223),d=o(4729),x=o(4843),a=o(6814),v=o(2787),m=o(7398),g=o(9717),C=o(8111),f=o(8581),u=o(3304),b=o(1221);function T(s,M){if(1&s){const t=e.EpF();e.TgZ(0,"icom-libs-core-components-table",3),e.NdJ("icomAdd",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handlerAdd())})("icomFunctionControl",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.handlerFunctionControl(i))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("columns",t.columns)("loadFn",t.loadData)("fields",t.fields)("model",t.model)("form",t.form)("displayExportFile",!0)("ignoreButtonAdd",!0)("functionExportFile",t.functionExportFile)("functionParse",t.functionParse)}}let F=(()=>{class s{constructor(t,n){var i=this;this.datePipe=t,this.modalService=n,this.form=new y.cw({}),this.iComLibsServicesProjectAdminUserService=(0,e.f3M)(d.lF),this.productService=(0,e.f3M)(d.k),this.iComMessageService=(0,e.f3M)(g.Q),this.router=(0,e.f3M)(v.F0),this.loadData=l=>this.iComLibsServicesProjectAdminUserService.getUserHistoryList(l),this.functionParse=l=>l?.map(r=>({...r,...r.creator_info})),this.functionExportFile=function(){var l=(0,h.Z)(function*(r,p){(0,C.cT)(`${f.N.apiGatewayUrl}${f.N.suffixAdmin}/v2.0/export/activity_logs`,"MauFileExportLichSuThaoTac",i.iComMessageService,r,!1,!0,p)});return function(r,p){return l.apply(this,arguments)}}(),this.columns=[],this.fields=[]}ngOnInit(){const t=u().format("YYYY-MM-DD"),n=u(t).subtract(3,"month").format("YYYY-MM-DD");this.model={start_time:n,end_time:t},this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"search",type:"search-input",className:"mb-4 basis-6/12",props:{type:"text",placeholder:"T\xecm ki\u1ebfm theo s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, n\u1ed9i dung"}}]},{className:"flex flex-row flex-wrap",fieldGroupClassName:"flex w-full",fieldGroup:[{key:"feature_code",type:"select-custom",className:"flex-1",props:{viewValue:"feature_text",labelProp:"feature_text",label:"T\xednh n\u0103ng",valueProp:"feature_code",placeholder:"Ch\u1ecdn t\xednh n\u0103ng",options:this.iComLibsServicesProjectAdminUserService.getActivityFeatures().pipe((0,m.U)(i=>i?.data))},expressions:{hide:"!formState.hidden"}},{key:"start_time",className:"flex-1",defaultValue:this.model.start_time,type:"date",props:{label:"T\u1eeb",nzAllowClear:!1,placeholder:"DD/MM/YYYY",format:"dd-MM-yyyy"},expressions:{hide:"!formState.hidden"}}]},{className:"flex flex-row flex-wrap",fieldGroupClassName:"flex w-full",fieldGroup:[{key:"action_code",type:"select-custom",className:"flex-1 ",props:{placeholder:"Kho chuy\u1ec3n",label:"Thao t\xe1c",viewValue:"action_text",labelProp:"action_text",valueProp:"action_code",options:this.iComLibsServicesProjectAdminUserService.getActivityActions().pipe((0,m.U)(i=>i?.data))},expressions:{hide:"!formState.hidden"}},{key:"end_time",className:"flex-1",type:"date",defaultValue:this.model.end_time,props:{label:"\u0110\u1ebfn",nzAllowClear:!1,placeholder:"DD/MM/YYYY",format:"dd-MM-yyyy"},expressions:{hide:"!formState.hidden"}}]}],this.columns=[{title:"STT",type:"index"},{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i h\u1ed9i vi\xean",key:"username",type:"text"},{title:"T\xednh n\u0103ng",key:"feature_text",type:"text"},{title:"Th\u1eddi gian",key:"created_at",type:"text",pipe:"time"},{title:"Thao t\xe1c",key:"action_text",type:"text"},{title:"N\u1ed9i dung",key:"content",type:"text",pipe:"truncate",pipeArgs:[{length:50,omission:"\u2026"}]},{title:"\u0110\u1ecba ch\u1ec9 IP",key:"ip_address",type:"text"},{title:"Thi\u1ebft b\u1ecb",key:"device",type:"text"},{title:"H\u1ec7 \u0111i\u1ec1u h\xe0nh",key:"operating_system",type:"text"},{title:"Thao t\xe1c",key:"actions",type:"action",actions:[{name:"Xem",callback:this.viewItem.bind(this),condition:()=>!0}]}]}editItem(t){this.router.navigateByUrl(`inventory/transfer/detail?id=${t.id}&mode=edit`)}viewItem(t){this.router.navigateByUrl(`customer/user-history/detail?id=${t._id}&mode=view`)}deleteItem(t){this.modalService.confirm({nzTitle:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ${t?.code} ?`,nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzOkDanger:!0,nzMaskClosable:!1,nzClosable:!1,nzCancelText:"H\u1ee7y b\u1ecf"},"error")}handlerAdd(){this.router.navigateByUrl("inventory/transfer/detail?mode=add")}handlerFunctionControl(t){this.eventFunctionControl=t}static#e=this.\u0275fac=function(n){return new(n||s)(e.Y36(a.uU),e.Y36(b.Sf))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["icom-libs-admin-user-history"]],standalone:!0,features:[e._Bn([a.JJ,a.uU]),e.jDz],decls:3,vars:1,consts:[[1,"flex","w-full","h-full","flex-col"],["nz-row","",1,"w-full","pr-4","h-full",2,"justify-content","end","padding-right","8px"],[3,"columns","loadFn","fields","model","form","displayExportFile","ignoreButtonAdd","functionExportFile","functionParse","icomAdd","icomFunctionControl",4,"ngIf"],[3,"columns","loadFn","fields","model","form","displayExportFile","ignoreButtonAdd","functionExportFile","functionParse","icomAdd","icomFunctionControl"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,T,1,9,"icom-libs-core-components-table",2),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngIf",i.loadData))},dependencies:[x.d,a.O5],encapsulation:2,changeDetection:0})}return s})()}}]);