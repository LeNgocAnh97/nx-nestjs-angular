"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([[856],{9466:(x,f,t)=>{t.d(f,{G:()=>n});var d=t(5879);let n=(()=>{class p{constructor(l,s,c){this.componentFactoryResolver=l,this.appRef=s,this.injector=c}appendComponentToBody(l){const c=this.componentFactoryResolver.resolveComponentFactory(l).create(this.injector);return this.appRef.attachView(c.hostView),document.body.appendChild(c.hostView.rootNodes[0]),c}appendComponentToComponent(l,s){const c=this.componentFactoryResolver.resolveComponentFactory(s);return l.viewContainerRef.createComponent(c)}removeComponentFromBody(l){this.appRef.detachView(l.hostView),l.destroy()}removeComponentFromComponent(l,s){const c=l.viewContainerRef,h=c.indexOf(s.hostView);-1!==h&&c.detach(h),s.destroy()}static#n=this.\u0275fac=function(s){return new(s||p)(d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(d.zs3))};static#e=this.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},856:(x,f,t)=>{t.r(f),t.d(f,{IcomLibsFlashSaleGroupComponent:()=>R});var d=t(5861),n=t(5879),p=t(6236),u=t(9663),l=t(6814),s=t(6223),c=t(19),h=t(5545),C=t(2840),T=t(551),z=t(7422),y=t(1221),Z=t(9466),L=t(9717),S=t(241),M=t(824),F=t(708),P=t(8180),b=t(4729),A=t(2787),O=t(855),_=t(1958),w=t(2987);function D(m,v){if(1&m){const o=n.EpF();n.TgZ(0,"tr")(1,"td",20),n._uU(2),n.qZA(),n.TgZ(3,"td",20),n._uU(4),n.qZA(),n.TgZ(5,"td",20),n._uU(6),n.ALo(7,"date"),n.qZA(),n.TgZ(8,"td",20),n._uU(9),n.qZA(),n.TgZ(10,"td",20)(11,"div",21)(12,"button",22),n._uU(13," H\xe0nh \u0111\u1ed9ng "),n._UZ(14,"span",23),n.qZA(),n.TgZ(15,"nz-dropdown-menu",null,24)(17,"ul",25)(18,"li",26),n.NdJ("click",function(){const i=n.CHM(o).$implicit,a=n.oxw();return n.KtG(a.showEditModal(i))}),n._uU(19,"S\u1eeda"),n.qZA(),n.TgZ(20,"li",26),n.NdJ("click",function(){const i=n.CHM(o).$implicit,a=n.oxw();return n.KtG(a.showDeleteConfirm(i))}),n._uU(21,"X\xf3a"),n.qZA()()()()()()}if(2&m){const o=v.$implicit,r=v.index,e=n.MAs(16),i=n.oxw();n.xp6(2),n.hij(" ",10*((null==i.pagination?null:i.pagination.page)-1)+r+1,""),n.xp6(2),n.Oqu(o.name),n.xp6(2),n.hij(" ",n.xi3(7,7,o.created_at,"dd/MM/yyyy HH:mm")," "),n.xp6(3),n.Oqu(o.created_by_name),n.xp6(3),n.Q6J("nzType","primary")("nzShape","round")("nzDropdownMenu",e)}}function E(m,v){if(1&m&&(n.TgZ(0,"div",27),n._uU(1),n.qZA()),2&m){const o=n.oxw();n.xp6(1),n.hij(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==o.pagination?null:o.pagination.total_rows)||0," ")}}const G=function(){return{x:"1500px",y:"calc(100vh - 380px)"}},U=function(){return[10,15,20,30,40,50]};let R=(()=>{class m{constructor(){this.listOfData=[],this.rows=[],this.form=new s.cw({}),this.model={},this.options={},this.total=1,this.loading=!0,this.pageSize=5,this.pageIndex=1,this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"name",type:"search-input",className:"mb-4 basis-6/12",props:{type:"text",placeholder:"T\xecm ki\u1ebfm theo t\xean nh\xf3m flash sale"}}]}],this.modalService=(0,n.f3M)(y.Sf),this.viewContainerRef=(0,n.f3M)(n.s_b),this.icomLibsDynamicComponentService=(0,n.f3M)(Z.G),this.iComLibsServicesProjectFlashSaleService=(0,n.f3M)(b.Rm),this.cdr=(0,n.f3M)(n.sBO),this.router=(0,n.f3M)(A.F0),this.iComMessageService=(0,n.f3M)(L.Q)}ngOnInit(){this.loadPage(1)}loadPage(o=1,r=10){var e=this;return(0,d.Z)(function*(){try{e.loading=!0;const a={...{...e.model},size:r,page:o},g=yield(0,F.n)(e.iComLibsServicesProjectFlashSaleService.listGroup({...a}));if(g&&g.data&&g.data.items)return e.rows=g.data.items||[],void(e.pagination=g.data.pagination);e.rows=[],e.pagination=g.data.pagination}catch(i){console.log(i)}finally{e.loading=!1,e.cdr.detectChanges()}})()}handlerSearch(o){o.stopPropagation(),o.preventDefault(),this.loadPage(1)}handlerBackFlashSale(o){o.stopPropagation(),o.preventDefault(),this.router.navigateByUrl("flash-sale/list")}showAddModal(o){o.stopPropagation(),o.preventDefault();const r=this.modalService.create({nzTitle:"Th\xeam nh\xf3m flash sale",nzContent:S.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y",nzOkText:"L\u01b0u",nzOkType:"primary",nzOnOk:()=>new Promise(e=>{const i=r.getContentComponent();i.onSave.pipe((0,P.q)(1)).subscribe(a=>{200===a.code?(this.iComMessageService.showAlertMessageDone("T\u1ea1o nh\xf3m flash sale th\xe0nh c\xf4ng."),e(!0),this.loadPage(1)):(this.iComMessageService.showAlertMessageError(a?.error?.error_message||"T\u1ea1o nh\xf3m flash sale th\u1ea5t b\u1ea1i."),e(!1),r.updateConfig({nzOkLoading:!1}))}),i.handlerSave()}),nzOkLoading:!1})}onPageChange(o){this.loadPage(o,this.pagination.limit)}onPageSizeChange(o){this.loadPage(1,o)}showEditModal(o){const r=this.modalService.create({nzTitle:"S\u1eeda nh\xf3m flash sale",nzContent:S.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzData:{title:"S\u1eeda nh\xf3m flash sale",data:o},nzOnOk:()=>new Promise(e=>{const i=r.getContentComponent();i.onSave.subscribe(a=>{200===a.code?(this.iComMessageService.showAlertMessageDone("S\u1eeda nh\xf3m flash sale th\xe0nh c\xf4ng."),e(!0),this.loadPage(1)):(this.iComMessageService.showAlertMessageError(a?.error?.error_message||"S\u1eeda nh\xf3m flash sale th\u1ea5t b\u1ea1i."),e(!1),r.updateConfig({nzOkLoading:!1}))}),i.handlerSave()}),nzOkLoading:!1})}showDeleteConfirm(o){var r=this;const e=this.modalService.confirm({nzTitle:"X\xf3a nh\xf3m flash sale",nzContent:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a nh\xf3m ${o.name}?`,nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"\u0110\u1ed3ng \xfd",nzOkLoading:!1,nzOkType:"primary",nzOnOk:(i=(0,d.Z)(function*(){e.updateConfig({nzOkLoading:!0});try{yield(0,F.n)(r.iComLibsServicesProjectFlashSaleService.deleteGroup({_id:o._id})),r.loadPage(1),r.iComMessageService.showAlertMessageDone("X\xf3a nh\xf3m flash sale th\xe0nh c\xf4ng.")}catch(a){console.log(a),r.iComMessageService.showAlertMessageError(a?.error?.error_message||"X\xf3a nh\xf3m  flash sale th\u1ea5t b\u1ea1i.")}finally{e.updateConfig({nzOkLoading:!1}),e.destroy()}}),function(){return i.apply(this,arguments)})});var i}static#n=this.\u0275fac=function(r){return new(r||m)};static#e=this.\u0275cmp=n.Xpm({type:m,selectors:[["icom-libs-product-group"]],standalone:!0,features:[n.jDz],decls:36,vars:21,consts:[[1,"flex","w-full","h-full","flex-col"],["nz-button","","nzType","link","routerLink","/your-path",1,"text-primary-500","hover:text-primary-600","!flex","items-center",3,"click"],["nz-icon","","nzType","arrow-left"],["nz-form","",1,"!p-4","bg-white","border","rounded-md",3,"formGroup","keydown.enter"],[1,"w-full"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-col","",1,"search-area","flex","items-center"],["nz-button","",1,"!flex","!items-center",3,"nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],[1,"w-full","h-full","mt-4","overflow-hidden"],["nzShowSizeChanger","",1,"h-full",3,"nzScroll","nzData","nzLoading","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange"],["editableTable","","sectionTable",""],["nzWidth","100px",1,"text-xs","font-semibold"],[1,"text-xs","font-semibold"],[4,"ngFor","ngForOf"],["footerTemplate",""],[1,"text-xs","!p-3"],[1,"name-container"],["nz-button","","nz-button","","nz-dropdown","",3,"nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"footer-content"]],template:function(r,e){if(1&r&&(n.TgZ(0,"div",0)(1,"a",1),n.NdJ("click",function(a){return e.handlerBackFlashSale(a)}),n._UZ(2,"i",2),n._uU(3," Nh\xf3m flash sale "),n.qZA(),n.TgZ(4,"form",3),n.NdJ("keydown.enter",function(a){return a.preventDefault()}),n.TgZ(5,"div",4),n._UZ(6,"formly-form",5),n.qZA(),n.TgZ(7,"div",6)(8,"div",7)(9,"button",8),n.NdJ("click",function(a){return e.showAddModal(a)}),n._UZ(10,"span",9),n._uU(11," Th\xeam nh\xf3m flash sale "),n.qZA()(),n.TgZ(12,"div",10)(13,"button",11),n.NdJ("click",function(a){return e.handlerSearch(a)}),n._UZ(14,"i",12),n._uU(15," L\u1ecdc "),n.qZA()()()(),n.TgZ(16,"div",13)(17,"nz-table",14,15),n.NdJ("nzPageIndexChange",function(a){return e.onPageChange(a)})("nzPageSizeChange",function(a){return e.onPageSizeChange(a)}),n.TgZ(20,"thead")(21,"tr")(22,"th",16),n._uU(23,"STT"),n.qZA(),n.TgZ(24,"th",17),n._uU(25,"T\xean"),n.qZA(),n.TgZ(26,"th",17),n._uU(27,"Th\u1eddi gian t\u1ea1o"),n.qZA(),n.TgZ(28,"th",17),n._uU(29,"Ng\u01b0\u1eddi t\u1ea1o"),n.qZA(),n.TgZ(30,"th",17),n._uU(31,"H\xe0nh \u0111\u1ed9ng"),n.qZA()()(),n.TgZ(32,"tbody"),n.YNc(33,D,22,10,"tr",18),n.qZA()()()(),n.YNc(34,E,2,1,"ng-template",null,19,n.W1O)),2&r){const i=n.MAs(35);n.xp6(4),n.Q6J("formGroup",e.form),n.xp6(2),n.Q6J("model",e.model)("fields",e.fields)("options",e.options)("form",e.form),n.xp6(3),n.Q6J("nzType","primary"),n.xp6(4),n.Q6J("nzType","primary"),n.xp6(4),n.Q6J("nzScroll",n.DdM(19,G))("nzData",e.rows)("nzData",e.rows)("nzLoading",e.loading)("nzTotal",null==e.pagination?null:e.pagination.total_rows)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",null==e.pagination?null:e.pagination.page)("nzFrontPagination",!1)("nzPageSizeOptions",n.DdM(20,U))("nzFooter",i),n.xp6(16),n.Q6J("ngForOf",e.rows)}},dependencies:[p._t,u.HQ,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,l.uU,l.ax,c.u,s.UX,s._Y,s.JL,s.sg,h.X0,h.T7,C.sL,C.ix,O.w,_.dQ,T.PV,T.Ls,z.b1,w.wO,w.u9,z.cm,z.RR,z.wA,y.Qp,M.o7],encapsulation:2,changeDetection:0})}return m})()}}]);