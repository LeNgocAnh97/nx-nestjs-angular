{"version":3,"file":"libs_user_change-password_src_index_ts.js","mappings":"0VASQA,MAAA,aAAAA,CAMC,UACOA,MAAA,cAAGA,gCAFTA,MAAA,YAAAC,EAAAC,oDAOFF,MAAA,cAIEA,MAAA,iBAAAG,GAAAH,MAAAI,GAAA,MAAAC,EAAAL,QAAA,OAASA,MAAAK,EAAAC,cAAAH,GAAqB,GAE9BH,MAAA,UAAMA,MAAA,cAAGA,WCKZ,IAAMO,EAA2B,MAAlC,MAAOA,EAkEXC,YACUC,EACAC,EACAC,GAFAC,KAAAH,qBACAG,KAAAF,oBACAE,KAAAD,eApEVC,KAAAC,KAAO,IAAIC,KAAU,IACrBF,KAAAG,MAAa,GACbH,KAAAI,QAA6B,GAE7BJ,KAAAK,OAA8B,CAC5B,CACEC,IAAK,kBACLC,KAAM,kBACNC,gBAAiB,CACfC,MAAO,wCACPC,UAAW,QACXC,YAAa,kDACbC,UAAU,IAGd,CACEN,IAAK,cACLC,KAAM,kBACNC,gBAAiB,CACfC,MAAO,8BACPC,UAAW,QACXC,YAAa,wCACbC,UAAU,EACVC,UAAW,GAEbC,WAAY,CACVC,SAAU,CACRC,UAAW,qFACXC,UAAW,sFAIjB,CACEX,IAAK,kBACLC,KAAM,kBACNC,gBAAiB,CACfE,UAAW,QACXD,MAAO,+CACPE,YAAa,iDACbC,UAAU,EACVC,UAAW,EACXK,UAAW,IAEbC,aAAc,CACZC,SAAU,UAEZC,WAAY,CACVC,WAAY,CACVC,WAAaC,IACX,MAAMC,EAAQD,EAAQC,MAChBC,EAAkBF,EAAQG,KAAKC,IAAI,eACzC,OAAOF,GAAmBD,IAAUC,EAAgBD,OAEtDI,QAAS,2DAGbf,WAAY,CACVC,SAAU,CACRC,UAAW,qFACXC,UAAW,sFAUf,CAEJa,cACM9B,KAAKC,KAAK8B,SACZC,QAAqBhC,KAAKC,MAG5BD,KAAKD,aAAakC,QAAQ,CACxBC,QAAS,0FACTC,UAAW,iJACXC,OAAQA,KACN,IACEpC,KAAKV,WAAY,EAEjBU,KAAKC,KAAKoC,QACVrC,KAAKH,mBAAmByC,qBAAqB,4DACtCC,GACPvC,KAAKH,mBAAmB2C,sBAAuBD,GAA2BE,OAAOC,eAAiB,+BAElG1C,KAAKV,WAAY,IAGrBqD,SAAU,WACVC,aAAc,gBAGlB,CAEAlD,cAAcmD,GACZA,EAAEC,kBACFD,EAAEE,iBACF/C,KAAKC,KAAKoC,OACZ,CAACW,SAAAhD,KAAA,mBAAAiD,iBAtGUtD,GAA2BP,MAAA8D,KAAA9D,mBAAA+D,MAAA,EAAAH,SAAAhD,KAAA,UAAAoD,EAAAC,IAAA,MAA3B1D,EAA2B2D,UAAA,2BAAAC,YAAA,EAAAC,SAAA,CAAApE,OAAAqE,MAAA,EAAAC,KAAA,EAAAC,OAAA,qbAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDhCxCzE,MAAA,YAAgIA,MAAA,6BAAY0E,EAAAhC,aAAa,GACvJ1C,MAAA,mBAKAA,MAAA,UAAAA,CAA2B,cAEvBA,MAAA,GACEA,MAAA,EAAA2E,EAAA,gBASF3E,QAEAA,MAAA,GACEA,MAAA,EAAA4E,EAAA,gBAQF5E,QACFA,mBA9BEA,MAAA,YAAA0E,EAAA7D,KAAAb,CAAkB,uBAEpBA,MAAA,GAAAA,MAAA,QAAA0E,EAAA3D,MAAAf,CAAe,SAAA0E,EAAAzD,OAAfjB,CAAe,OAAA0E,EAAA7D,sBCkBfgE,KACAC,KAAmBC,eACnBC,KAAcC,KAAAC,IAAAC,KACdC,KAAYC,KACZC,KAEAC,KAAYC,KACZC,IAEAC,KAAaC,WAAAC,cAAA,WAGJrF,CAA2B","names":["i0","ctx_r0","isLoading","$event","_r3","ctx_r2","handlerCancel","LibsChangePasswordComponent","constructor","iComMessageService","changeDetectorRef","modalService","this","form","FormGroup","model","options","fields","key","type","templateOptions","label","className","placeholder","required","minLength","validation","messages","minlength","maxlength","maxLength","modelOptions","updateOn","validators","fieldMatch","expression","control","value","passwordControl","root","get","message","handlerSave","invalid","markFormGroupTouched","confirm","nzTitle","nzContent","nzOnOk","reset","showAlertMessageDone","err","showAlertMessageError","error","error_message","nzOkText","nzCancelText","e","stopPropagation","preventDefault","static","t","i1","i2","core","Xpm","selectors","standalone","features","decls","vars","consts","template","rf","ctx","LibsChangePasswordComponent_button_5_Template","LibsChangePasswordComponent_button_7_Template","NzInputModule","ReactiveFormsModule","i3","NzButtonModule","i4","i5","i6","NzFormModule","i7","NzDrawerModule","FormlyModule","i8","FormlyNgZorroAntdModule","NzSpaceModule","i9","encapsulation"],"sourceRoot":"webpack:///","sources":["./libs/user/change-password/src/change-password/change-password.component.html","./libs/user/change-password/src/change-password/change-password.component.ts"],"sourcesContent":["<form [formGroup]=\"form\" nz-form class=\"bg-white rounded-md h-full flex flex-col !p-4 overflow-y-auto\" [nzLayout]=\"'vertical'\"  (ngSubmit)=\"handlerSave()\">\n  <formly-form\n    [model]=\"model\"\n    [fields]=\"fields\"\n    [form]=\"form\"\n  ></formly-form>\n  <div class=\"flex flex-end\">\n    <nz-space>\n      <ng-container>\n        <button\n          *nzSpaceItem\n          nz-button\n          nzType=\"primary\"\n          type=\"submit\"\n          [nzLoading]=\"isLoading\"\n        >\n          <span>Lưu</span>\n        </button>\n      </ng-container>\n    \n      <ng-container>\n        <button\n          *nzSpaceItem\n          nz-button\n          nzType=\"default\"\n          (click)=\"handlerCancel($event)\"\n        >\n          <span>Hủy</span>\n        </button>\n      </ng-container>\n    </nz-space>\n  </div>\n  \n</form>\n\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, ReactiveFormsModule, NonNullableFormBuilder, FormControl } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzDrawerModule } from 'ng-zorro-antd/drawer';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\nimport { markFormGroupTouched } from '@icom/defines';\nimport { IComMessageService } from '@icom/services/common';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { NzModalService } from 'ng-zorro-antd/modal';\n\n\n@Component({\n  selector: 'libs-change-password',\n  templateUrl: './change-password.component.html',\n  standalone: true,\n  imports: [\n    NzInputModule,\n    ReactiveFormsModule,\n    NzButtonModule,\n    NzFormModule,\n    NzDrawerModule,\n    NzFormModule,\n    FormlyModule,\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    NzSpaceModule,\n  ]\n})\nexport class LibsChangePasswordComponent {\n  form = new FormGroup({});\n  model: any = {};\n  options: FormlyFormOptions = {};\n  isLoading!: boolean;\n  fields: FormlyFieldConfig[] = [\n    {\n      key: 'currentPassword',\n      type: 'password-custom',\n      templateOptions: {\n        label: 'Mật khẩu hiện tại',\n        className: 'w-1/2',\n        placeholder: 'Nhập mật khẩu hiện tại',\n        required: true,\n      },\n    },\n    {\n      key: 'newPassword',\n      type: 'password-custom',\n      templateOptions: {\n        label: 'Mật khẩu mới',\n        className: 'w-1/2',\n        placeholder: 'Nhập mật khẩu mới',\n        required: true,\n        minLength: 5,\n      },\n      validation: {\n        messages: {\n          minlength: 'Mật khẩu phải lớn hơn hoặc bằng 5 ký tự',\n          maxlength: 'Mật khẩu không được dài hơn 15 ký tự',\n        },\n      },\n    },\n    {\n      key: 'confirmPassword',\n      type: 'password-custom',\n      templateOptions: {\n        className: 'w-1/2',\n        label: 'Xác nhận mật khẩu mới',\n        placeholder: 'Nhập lại mật khẩu mới',\n        required: true,\n        minLength: 5,\n        maxLength: 15,\n      },\n      modelOptions: {\n        updateOn: 'submit',\n      },\n      validators: {\n        fieldMatch: {\n          expression: (control: any) => {\n            const value = control.value;\n            const passwordControl = control.root.get('newPassword');\n            return passwordControl && value === passwordControl.value;\n          },\n          message: 'Mật khẩu xác nhận không khớp',\n        }\n      },\n      validation: {\n        messages: {\n          minlength: 'Mật khẩu phải lớn hơn hoặc bằng 5 ký tự',\n          maxlength: 'Mật khẩu không được dài hơn 15 ký tự'\n        },\n      },\n    }\n  ];\n\n  constructor(\n    private iComMessageService: IComMessageService, // Replace with your actual service\n    private changeDetectorRef: ChangeDetectorRef,\n    private modalService: NzModalService, // Add this\n  ) { }\n\n  handlerSave() {\n    if (this.form.invalid) {\n      markFormGroupTouched(this.form);\n      return;\n    }\n    this.modalService.confirm({\n      nzTitle: 'Bạn có chắc chắn muốn đổi mật khẩu không?',\n      nzContent: 'Hành động này sẽ lưu thay đổi mật khẩu của bạn và không thể hoàn tác.',\n      nzOnOk: () => {\n        try {\n          this.isLoading = true;\n          // ... Your custom validation logic ...\n          this.form.reset(); \n          this.iComMessageService.showAlertMessageDone('Đổi mật khẩu thành công.');\n        } catch (err) {\n          this.iComMessageService.showAlertMessageError((err as HttpErrorResponse)?.error?.error_message || 'Create product fail');\n        } finally {\n          this.isLoading = false;\n        }\n      },\n      nzOkText: 'Lưu',\n      nzCancelText: 'Đóng',\n    });\n\n  }\n\n  handlerCancel(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.form.reset(); \n  }\n}\n\n"],"x_google_ignoreList":[]}