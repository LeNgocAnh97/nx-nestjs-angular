{"version":3,"file":"libs_campaign_management_detail_src_index_ts.js","mappings":"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","names":["startTimeValidator","control","startTime","parent","value","start_time","endTime","end_time","dayjs","isBefore","startTimeInvalid","IComLibsCampaignManagementDetailGeneralComponent","constructor","this","form","FormGroup","fields","options","formState","disabled","icomFunctionControl","EventEmitter","campaignService","inject","IComLibsServicesProjectCampaignV3Service","FormlyConfigForm","key","type","className","props","placeholder","label","required","validators","validation","name","errorPath","expressions","defaultValue","viewValue","labelProp","valueProp","getListTimeStart","pipe","map","result","data","ShowTime","format","emitTimeLocal","DisabledDate","current","today","Date","setHours","change","field","event","fieldGroup","find","f","get","updateValueAndValidity","hideExpression","type_start_time","getListTimeEnd","type_end_time","expressionProperties","props.DisabledDate","model","startValue","fieldGroupClassName","addText","fieldArray","wrappers","operator","id","attribute","group","formControl","markAsTouched","min","console","log","ngOnInit","mode","emit","save","handleSave","bind","type_click_action_selected","valid","submitted","Object","keys","controls","forEach","touched","static","t","core","Xpm","selectors","inputs","outputs","standalone","features","i0","decls","vars","consts","template","rf","ctx","FormlyNgZorroAntdModule","ReactiveFormsModule","i1","FormlyModule","i2","NzButtonModule","NzSpinModule","NzFormModule","i3","encapsulation","changeDetection","uniqueNameValidator","listMission","valueBeforeDirty","dirty","namesList","item","push","filter","trim","length","uniqueName","IComLibsCampaignManagementDetailMissionAddEditInformationComponent","nzModalData","NZ_MODAL_DATA","iComLibsServicesProjectCampaignV3Service","FormlyConfigAddEditGeneralForm","existingNames","missions","modeExtend","size","labelType","width","height","getTypeMissions","getContributor","max","hooks","onInit","valueChanges","subscribe","selectedOptionValue","selectedOption","Observable","option","setValue","balance","Array","isArray","getPool","poolIdControl","templateOptions","startWith","distinctUntilChanged","concatMap","idPool","getSubPool","pool_id","sub_pool","getActionMission","description","getListActionType","selectedId","typeField","specific_type_click_action_selected","getListActionParam","click_action_param","invalid","markFormGroupTouched","isAdd","NzStepsModule","IComLibsCampaignManagementDetailMissionAddEditRewardComponent","productService","IComLibsServicesProductService","icomMessageService","IComMessageService","FormlyConfigAddEditRewardForm","dataCondition","changeChecked","is_active","setChecked","getRewardLevel","getRewardForm","mainModel","reward","getTypeReward","functionCheckExist","items","itemsOfModel","listIdSelected","includes","multiple","getProductFromCampaigns","getMessageTemplate","hide","reward_reference","listVoucher","listVoucherRef","type_value","showAlertMessageError","esm_browser_native","randomUUID","crypto","getRandomValues","rnds8","Uint8Array","rng","Error","byteToHex","i","toString","slice","esm_browser_v4","v4","buf","offset","native","rnds","random","unsafeStringify","arr","ConfigFormlyConditionActionEvent","ConfigFormlyConditionTransactionTag","ConfigFormlyConditionTransactionTagDependent","ListFormula2","groupId","$event","item_r3","_r5","$implicit","ctx_r4","handlerClick","IComLibsCampaignAddEditConditionModalComponent_ul_2_li_1_Template","ctx_r0","listFormula","item_r6","IComLibsCampaignAddEditConditionModalComponent","listFormulaSelected","icomSave","cdr","ChangeDetectorRef","teams","sportControl","sportId","team","listItemSelected","setTimeout","sub_group","next","keySubGroup","list","groupTwo","detectChanges","e","itemAdd","stopPropagation","preventDefault","trackByFn","index","user","handlerSave","uuidv4","IComLibsCampaignAddEditConditionModalComponent_ul_2_Template","IComLibsCampaignAddEditConditionModalComponent_nz_tag_4_Template","NgIf","NzListModule","i4","NgFor","NzTagModule","i5","IcomLibsCampaignConvertTooltipConditionPipe","transform","string","Yjl","pure","_r3","ctx_r2","handlerAddCondition","condition_r5","ctx_r8","_r13","ctx_r11","handlerRemove","IComLibsCampaignManagementDetailMissionAddEditConditionComponent_ng_container_3_ng_container_1_div_1_form_7_Template","IComLibsCampaignManagementDetailMissionAddEditConditionComponent_ng_container_3_ng_container_1_div_1_button_8_Template","_c0","ctx_r7","IComLibsCampaignManagementDetailMissionAddEditConditionComponent_ng_container_3_ng_container_1_div_1_Template","specific_hidden","IComLibsCampaignManagementDetailMissionAddEditConditionComponent_ng_container_3_ng_container_1_Template","ctx_r1","config","IComLibsCampaignManagementDetailMissionAddEditConditionComponent","modalService","NzModalService","viewContainerRef","ViewContainerRef","mapFormField","configAllFormCondition","specific_name_formula","nzPlaceHolder","nzShowTime","onlyDay","ConfigAllFormCondition","modal","create","nzTitle","nzContent","nzMaskClosable","nzClosable","nzViewContainerRef","nzWidth","nzFooter","onClick","destroy","loading","getContentComponent","error","relationship","dataMission","convertObject","originalObject","newObjects","after_specific_day","before_specific_day","row","IComLibsCampaignManagementDetailMissionAddEditConditionComponent_button_2_Template","IComLibsCampaignManagementDetailMissionAddEditConditionComponent_ng_container_3_Template","i6","i7","NzDropDownModule","NzSelectModule","FormsModule","_r6","ctx_r5","handlerFunctionControl","_c1","_r8","_r10","ctx_r9","condition","_r17","ctx_r16","handlerPrev","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_ng_container_1_button_1_Template","_r20","ctx_r19","handlerNextStep","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_ng_container_2_button_1_Template","_r23","ctx_r22","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_ng_container_3_button_1_Template","_r25","ctx_r24","handlerClose","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_ng_container_1_Template","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_ng_container_2_Template","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_ng_container_3_Template","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_button_5_Template","IComLibsCampaignManagementDetailMissionAddEditComponent","ngAfterViewInit","updateConfig","templateFooter","containerInstance","eventFunctionControl","handlerIndexChange","viewQuery","IComLibsCampaignManagementDetailMissionAddEditComponent_icom_libs_campaign_management_detail_mission_information_5_Template","IComLibsCampaignManagementDetailMissionAddEditComponent_icom_libs_campaign_management_detail_mission_reward_6_Template","IComLibsCampaignManagementDetailMissionAddEditComponent_icom_libs_campaign_management_detail_mission_condition_7_Template","IComLibsCampaignManagementDetailMissionAddEditComponent_ng_template_8_Template","NzSpaceModule","_r4","ctx_r3","handlerAddNew","undefined","_r18","handleEditMission","_r21","handlerCopy","_r24","_r27","ctx_r25","result_r28","title","result_r29","sponsor","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_container_14_ng_template_2_Template","_r30","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_template_21_div_0_div_1_span_4_Template","rewardItem_r38","i_r39","items_r36","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_template_21_div_0_div_1_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_template_21_div_0_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_button_6_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_button_7_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_button_8_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_button_9_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_container_12_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_container_14_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_container_18_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_ng_template_21_Template","action","listDataActionMission","listDataContributor","_r14","IComLibsCampaignManagementDetailMissionComponent_div_7_div_1_Template","IComLibsCampaignManagementDetailMissionComponent","getListOrderAction","getListOrderActionBy","ConfigFormlyMissionOrder","combineLatest","results","dataActionMission","dataContributor","view","nzKeyboard","nzData","cloneDeep","instance","close","mergeObjects","obj1","obj2","hasOwnProperty","confirm","nzOkText","nzOkType","nzOkDanger","nzOnOk","processDeleteMission","nzCancelText","mission","IComLibsCampaignManagementDetailMissionComponent_div_4_Template","IComLibsCampaignManagementDetailMissionComponent_nz_empty_6_Template","IComLibsCampaignManagementDetailMissionComponent_div_7_Template","NzEmptyModule","i8","NzDescriptionsModule","IcomCampaignDetailMissionParseValue","NzStatisticModule","i9","NzPageHeaderModule","i10","DecimalPipe","NzIconModule","i11","IComLibsCampaignManagementDetailLayoutComponent","maxLength","_r11","ctx_r10","dataCampaign","ctx_r12","config_mission","_r15","ctx_r14","config_layout","IComLibsCampaignManagementDetailComponent_div_8_icom_libs_campaign_management_detail_general_1_Template","IComLibsCampaignManagementDetailComponent_div_8_icom_libs_campaign_management_detail_mission_2_Template","IComLibsCampaignManagementDetailComponent_div_8_icom_libs_campaign_management_detail_layout_3_Template","handlerCancel","pre","IComLibsCampaignManagementDetailComponent_ng_container_14_button_1_Template","IComLibsCampaignManagementDetailComponent_ng_container_15_button_1_Template","_r26","handlerSaveDraft","isLoading","IComLibsCampaignManagementDetailComponent_ng_container_16_button_1_Template","_r29","ctx_r28","ctx_r27","IComLibsCampaignManagementDetailComponent_ng_container_17_button_1_Template","IComLibsCampaignManagementDetailComponent","router","Router","destroyRef","DestroyRef","route","ActivatedRoute","isLoadingFirst","queryParams","takeUntilDestroyed","params","detail","response","dataCampaignOrigin","err","_this","_asyncToGenerator","processSubmit","trimFormFields","formValues","_this2","status","addSpecificGeneral","lastValueFrom","addEditCampaign","showAlertMessageDone","navigateByUrl","error_message","_this3","copyItem","foundItem","customer_group","gocItem","assign","IComLibsCampaignManagementDetailComponent_div_8_Template","IComLibsCampaignManagementDetailComponent_nz_spin_9_Template","IComLibsCampaignManagementDetailComponent_button_13_Template","IComLibsCampaignManagementDetailComponent_ng_container_14_Template","IComLibsCampaignManagementDetailComponent_ng_container_15_Template","IComLibsCampaignManagementDetailComponent_ng_container_16_Template","IComLibsCampaignManagementDetailComponent_ng_container_17_Template","CommonModule","NzTypographyModule","NzTabsModule","NzCardModule"],"sourceRoot":"webpack:///","sources":["./libs/campaign/management/detail/src/src/defines/general.define.ts","./libs/campaign/management/detail/src/src/general/general.component.ts","./libs/campaign/management/detail/src/src/general/general.component.html","./libs/campaign/management/detail/src/src/mission/add-edit/defines/general.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/information/information.component.ts","./libs/campaign/management/detail/src/src/mission/add-edit/information/information.component.html","./libs/campaign/management/detail/src/src/mission/add-edit/reward/reward.component.ts","./libs/campaign/management/detail/src/src/mission/add-edit/defines/reward.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/reward/reward.component.html","./node_modules/uuid/dist/esm-browser/native.js","./node_modules/uuid/dist/esm-browser/rng.js","./node_modules/uuid/dist/esm-browser/stringify.js","./node_modules/uuid/dist/esm-browser/v4.js","./libs/campaign/management/detail/src/src/mission/add-edit/defines/condition/action-event.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/defines/condition/transaction-tags.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/defines/condition/condition.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/condition/modal/modal.component.html","./libs/campaign/management/detail/src/src/mission/add-edit/condition/modal/modal.component.ts","./libs/campaign/management/detail/src/src/mission/add-edit/pipes/convert-tooltip-condition.pipe.ts","./libs/campaign/management/detail/src/src/mission/add-edit/condition/condition.component.html","./libs/campaign/management/detail/src/src/mission/add-edit/condition/condition.component.ts","./libs/campaign/management/detail/src/src/mission/add-edit/defines/condition/max-action-number.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/defines/condition/specific_deadline.define.ts","./libs/campaign/management/detail/src/src/mission/add-edit/add-edit.component.html","./libs/campaign/management/detail/src/src/mission/add-edit/add-edit.component.ts","./libs/campaign/management/detail/src/src/mission/mission.component.html","./libs/campaign/management/detail/src/src/mission/mission.component.ts","./libs/campaign/management/detail/src/src/defines/mission.define.ts","./libs/campaign/management/detail/src/src/layout/layout.component.ts","./libs/campaign/management/detail/src/src/defines/layout.define.ts","./libs/campaign/management/detail/src/src/layout/layout.component.html","./libs/campaign/management/detail/src/src/detail.component.html","./libs/campaign/management/detail/src/src/detail.component.ts"],"sourcesContent":["import { FormControl, FormGroup, ValidationErrors } from '@angular/forms';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\nimport * as dayjs from 'dayjs';\nimport { map } from 'rxjs';\n\nexport const FormlyConfigForm = (\n  form: FormGroup,\n  campaignService: IComLibsServicesProjectCampaignV3Service\n): FormlyFieldConfig[] => {\n  return [\n    {\n      key: 'name',\n      type: 'input',\n      className: '',\n      props: {\n        placeholder: 'Nhập tên chiến dịch',\n        label: 'Tên chiến dịch',\n        type: 'string',\n        required: true,\n\n      },\n      validators: {\n        validation: [{ name: 'noWhitespace', options: { errorPath: 'value' } }],\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'type_start_time',\n      type: 'radio',\n      className: 'basis-6/12',\n      defaultValue: 'SPECTIME',\n      props: {\n        label: 'Thời gian bắt đầu',\n        required: true,\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        options: campaignService.getListTimeStart().pipe(\n          map((result) => {\n            return result.data;\n          })\n        ),\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'start_time',\n      type: 'date',\n      className: 'basis-6/12',\n      props: {\n        ShowTime: true,\n        format: 'dd-MM-yyyy HH:mm:ss',\n        placeholder: 'DD-MM-YYYY hh:mm:ss',\n        required: true,\n        emitTimeLocal: true,\n        DisabledDate: (current: Date): boolean => {\n          const today = new Date();\n          today.setHours(0, 0, 0, 0);\n          return current < today;\n        },\n        change: (field, event: any) => {\n          const endField = field?.parent?.fieldGroup?.find((f: any) => f.key === 'end_time');\n          if (endField) {\n            const control = form.get('end_time') as FormControl;\n            control.updateValueAndValidity();\n          }\n        },\n      },\n      hideExpression: (field: any) => {\n        return field?.type_start_time\n          ? field?.type_start_time !== 'SPECTIME'\n          : true;\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      validators: {\n        validation: [startTimeValidator],\n      },\n    },\n    {\n      key: 'type_end_time',\n      type: 'radio',\n      className: 'basis-6/12',\n      defaultValue: 'SPECTIME',\n      props: {\n        label: 'Thời gian kết thúc',\n        required: true,\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        options: campaignService.getListTimeEnd().pipe(\n          map((result) => {\n            return result.data;\n          })\n        ),\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'end_time',\n      type: 'date',\n      className: 'basis-6/12',\n      props: {\n        required: true,\n        placeholder: 'DD-MM-YYYY hh:mm:ss',\n        emitTimeLocal: true,\n        ShowTime: true,\n        format: 'dd-MM-yyyy HH:mm:ss',\n        DisabledDate: (current: Date): boolean => {\n          const today = new Date();\n          today.setHours(0, 0, 0, 0);\n          return current < today;\n        },\n        change: (field, event: any) => {\n          const startField = field?.parent?.fieldGroup?.find(f => f.key === 'start_time');\n          if (startField) {\n            const control = form.get('start_time') as FormControl;\n            control.updateValueAndValidity();\n          }\n        },\n      },\n      hideExpression: (field: any) => {\n        return field?.type_end_time ? field?.type_end_time !== 'SPECTIME' : true;\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      expressionProperties: {\n        'props.DisabledDate': (model: any, formState: any, field?: FormlyFieldConfig) => {\n          const startValue = formState?.model?.start_time;\n          if (startValue) {\n            return (current: Date) => dayjs(current).isBefore(dayjs(startValue));\n          }\n          return (current: Date) => false;\n        }\n      },\n      validators: {\n        validation: [startTimeValidator],\n      },\n    },\n    {\n      key: 'description',\n      type: 'quill-editor',\n      className: 'basis-6/12',\n      props: {\n        label: 'Thể lệ chương trình',\n        placeholder: 'Nhập thể lệ',\n        required: true,\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      fieldGroupClassName: 'w-full items-center mt-4',\n      key: 'customer_group',\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      fieldGroup: [\n        {\n          type: 'array',\n          key: 'config',\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n          props: {\n            label: 'Khách hàng',\n            addText: 'Thêm Khách hàng',\n          },\n\n          fieldArray: {\n            wrappers: ['group'],\n            hideExpression: (field: any) => {\n              if (\n                field.operator === 'after_specific_day' ||\n                field.operator === 'before_specific_day'\n              ) {\n                return true;\n              }\n              return false;\n            },\n            fieldGroup: [\n              {\n                key: 'type',\n                type: 'select-custom',\n                className: 'basis-6/12',\n                props: {\n                  label: 'Khách hàng',\n                  placeholder: 'Chọn điều kiện',\n                  viewValue: 'name',\n                  labelProp: 'name',\n                  valueProp: 'id',\n                  options: [\n                    { name: 'Hồ sơ khách hàng ', id: 'customer_profile' },\n                  ],\n                },\n              },\n              {\n                key: 'attribute',\n                type: 'select-custom',\n                props: {\n                  placeholder: 'Chọn điều kiện',\n                  viewValue: 'name',\n                  labelProp: 'name',\n                  valueProp: 'id',\n                  options: [\n                    {\n                      name: 'Theo thời gian đăng ký mới',\n                      id: 'thoi_gian_dang_ky',\n                    },\n                    {\n                      name: 'Theo số điện thoại',\n                      id: 'phone',\n                    },\n                  ],\n                  change: (field: any) => {\n                    if (field.model && field?.model?.attribute === 'thoi_gian_dang_ky' && !field?.model?.operator) { \n                      field.model.operator = 'before_duration';\n                      field.model.group = 'customer';\n                    }\n                    if (field.model && field?.model?.attribute === 'phone' && !field?.model?.operator) { \n                      field.model.operator = 'in';\n                      field.model.group = 'customer';\n                    }\n                    field.formControl.markAsTouched();\n                  }\n                },\n                hideExpression: (field: any) => {\n                  if (!field?.type) {\n                    return true;\n                  }\n                  return field?.type === 'customer_profile' ? false : true;\n                }\n              },\n              {\n                fieldGroupClassName: 'flex row items-center mt-4',\n                key: '',\n                hideExpression: (field: any) => {\n                  if (!field?.attribute) {\n                    return true;\n                  }\n                  return field?.attribute === 'thoi_gian_dang_ky' ? false : true;\n                },\n                fieldGroup: [\n                  {\n                    key: 'value',\n                    type: 'nz-input-number',\n                    props: {\n                      placeholder: 'Nhập số',\n                      type: 'number',\n                      min: 0,\n                    },\n                  },\n                  {\n                    key: 'unit',\n                    type: 'select-custom',\n                    className: ' ml-4',\n                    defaultValue: 'day',\n                    props: {\n                      viewValue: 'name',\n                      labelProp: 'name',\n                      valueProp: 'id',\n                      required: true,\n                      options: [\n                        {\n                          id: 'day',\n                          name: 'Ngày',\n                        },\n                      ],\n                    },\n                  },\n                ],\n              },\n              {\n                key: 'value',\n                hideExpression: (field: any) => {\n                  console.log(field)\n                  if (!field?.attribute) {\n                    return true;\n                  }\n                  return field?.attribute === 'phone' ? false : true;\n                },\n                type: 'tags',\n                props: {\n                  // label: 'ajhi'\n                }\n              }\n            ],\n          },\n        },\n      ],\n    },\n  ];\n};\n\n\n\nfunction startTimeValidator(control: FormGroup): ValidationErrors | null {\n  const startTime = control.parent?.value?.start_time;\n  const endTime = control.parent?.value?.end_time;\n\n  if (startTime && endTime && dayjs(endTime).isBefore(startTime)) {\n    return { 'startTimeInvalid': true };\n  }\n  return null;\n}\n","import { NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, inject } from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { FormlyConfigForm } from '../defines/general.define';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { TYPE_FORM_CONTROL } from '@icom/interfaces';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'icom-libs-campaign-management-detail-general',\n  templateUrl: './general.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailGeneralComponent {\n  protected form: FormGroup = new FormGroup({});\n  protected model: any;\n  protected modelOrigin!: any;\n  protected fields: FormlyFieldConfig[] = [];\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: false\n    }\n  };\n  protected isLoading!: boolean;\n\n  @Input() data: any | undefined;\n  @Input() mode: 'view' | 'edit' | undefined;\n\n  @Output() icomFunctionControl: EventEmitter<any> = new EventEmitter<any>();\n\n  private campaignService = inject(IComLibsServicesProjectCampaignV3Service);\n\n  constructor() {\n    this.fields = FormlyConfigForm(this.form, this.campaignService);\n  }\n\n\n\n  ngOnInit() {\n    if (this.mode === 'view') {\n      this.options.formState.disabled = true;\n    }\n    this.icomFunctionControl.emit({\n      save: this.handleSave.bind(this)\n    });\n    this.data.type_click_action_selected = '';\n  }\n\n  protected handleSave(): boolean {\n    if (!this.form.valid) {\n      Object.keys(this.form.controls as TYPE_FORM_CONTROL).forEach((key) => {\n        (this.form.controls as TYPE_FORM_CONTROL)[key].touched = true;\n      });\n      return false;\n    }\n    this.form.markAsTouched();\n    (this.form as TYPE_FORM_CONTROL).submitted = true;\n    return true;\n  }\n}\n","<div  class=\"w-full h-full flex\">\n  <div class=\"flex w-full h-full flex-col bg-white border rounded-md\">\n    <form [formGroup]=\"form\" nz-form class=\"bg-white rounded-md h-full flex flex-col !p-4 overflow-y-auto\" [nzLayout]=\"'vertical'\">\n      <formly-form\n        [model]=\"data\"\n        [fields]=\"fields\"\n        [options]=\"options\"\n        [form]=\"form\"\n      ></formly-form>\n    </form>\n  </div>\n</div>","import { ValidationErrors, FormControl } from '@angular/forms';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\nimport {\n  Observable,\n  concatMap,\n  distinctUntilChanged,\n  map,\n  startWith,\n} from 'rxjs';\n\n\nexport function uniqueNameValidator(listMission?: any[], mode?: string): ValidationErrors | null  {\n  let valueBeforeDirty = '';\n  return (control: FormControl): ValidationErrors | null => {\n    (!control.dirty && mode === 'edit') && (valueBeforeDirty = control.value);\n    const namesList: any[] = [];\n    listMission?.forEach((item: any) => {\n      namesList.push(item.name);\n    }); \n    if (namesList.filter((item) => control?.value?.trim() === item)?.length && valueBeforeDirty !== control?.value?.trim() ) {\n      return { 'uniqueName': 'Tên này đã được sử dụng.' };\n    }\n    return null;\n  };\n}\n\nexport const FormlyConfigAddEditGeneralForm = (\n  campaignService: IComLibsServicesProjectCampaignV3Service,\n  existingNames?: any[],\n  mode?: string\n): FormlyFieldConfig[] => {\n  return [\n    {\n      key: 'name',\n      type: 'input',\n      className: '',\n      props: {\n        placeholder: 'Nhập tên nhiệm vụ',\n        label: 'Tên nhiệm vụ',\n        type: 'string',\n        required: true,\n      },\n      validators: {\n        validation: [\n          { name: 'noWhitespace', options: { errorPath: 'value' } },\n          uniqueNameValidator(existingNames, mode)\n        ],\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'avatar',\n      type: 'upload',\n      className: '',\n      props: {\n        label: 'Icon đại diện',\n        size: 1024 * 100,\n        required: true,\n        labelType: 'Image',\n        width: 200,\n        height: 200,\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'type',\n      type: 'select-custom',\n      className: 'basis-6/12',\n      props: {\n        label: 'Loại nhiệm vụ',\n        placeholder: 'Chọn loại nhiệm vụ',\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        required: true,\n        options: campaignService.getTypeMissions().pipe(\n          map((result) => {\n            return result.data;\n          })\n        ),\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'info',\n      type: 'quill-editor',\n      className: 'basis-6/12',\n      props: {\n        label: 'Thông tin nhiệm vụ',\n        placeholder: 'Nhập mô tả',\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'description',\n      type: 'textarea',\n      className: 'basis-6/12',\n      props: {\n        label: 'Mô tả nhiệm vụ',\n        placeholder: 'Nhập thông tin',\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'sponsor',\n      props: {\n        required: true,\n        label: 'Nhà tài trợ',\n        addText: 'Thêm nhà tài trợ',\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      type: 'array',\n      fieldArray: {\n        fieldGroupClassName: 'flex row items-center',\n        fieldGroup: [\n          {\n            key: 'id',\n            type: 'select-custom',\n            className: 'basis-8/12',\n            props: {\n              label: 'Nhà tài trợ',\n              placeholder: 'Chọn nhà tài trợ',\n              viewValue: 'title',\n              labelProp: 'title',\n              valueProp: 'id',\n              required: true,\n              options: campaignService.getContributor().pipe(\n                map((result) => {\n                  return result.data;\n                })\n              ),\n            },\n          },\n          {\n            key: 'value',\n            type: 'nz-input-number',\n            className: 'basis-4/12 ml-4',\n            props: {\n              placeholder: 'Nhập tỷ lệ tài trợ',\n              label: 'Tỷ lệ tài trợ',\n              type: 'number',\n              min: 0,\n              max: 100,\n              required: true,\n            },\n          },\n          {\n            key: 'balance',\n            type: 'input',\n            className: 'basis-4/12 ml-4',\n            props: {\n              label: 'Tài khoản ký quỹ',\n              disabled: true,\n              required: true,\n            },\n            hooks: {\n              onInit: (field) => {\n                const form = field?.formControl?.parent;\n                const fieldBControl = form?.get('id') as FormControl;\n\n                fieldBControl.valueChanges.subscribe((selectedOptionValue) => {\n                  const fieldBConfig = field?.parent?.fieldGroup?.find(\n                    (f) => f.key === 'id'\n                  );\n                  const options = fieldBConfig?.props?.options;\n\n                  let selectedOption = undefined;\n                  if (options instanceof Observable) {\n                    options.subscribe((data) => {\n                      selectedOption = data.find(\n                        (option) => option.id === selectedOptionValue\n                      );\n                      field?.formControl?.setValue(\n                        selectedOption?.balance || 0\n                      );\n                    });\n                  } else if (Array.isArray(options)) {\n                    selectedOption = options.find(\n                      (option) => option.value === selectedOptionValue\n                    );\n                    field?.formControl?.setValue(selectedOption?.balance || 0);\n                  }\n                });\n              },\n            },\n          },\n        ],\n      },\n    },\n    {\n      key: 'pool',\n      type: 'select-custom',\n      props: {\n        label: 'Loại điểm thưởng Cấp 1',\n        type: 'text',\n        placeholder: 'Cấp 1 (Pool)',\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        required: true,\n        options: campaignService.getPool().pipe(\n          map((result) => {\n            return result.data;\n          })\n        ),\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'sub_pool',\n      type: 'select-custom',\n      props: {\n        label: 'Loại điểm thưởng Cấp 2',\n        type: 'text',\n        placeholder: 'Cấp 2 (Pool)',\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        required: true,\n        options: [],\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      hooks: {\n        onInit: (field: any) => {\n          const poolIdControl = field?.form?.get('pool');\n          if (!poolIdControl) {\n            return;\n          }\n          field.templateOptions.options = poolIdControl.valueChanges.pipe(\n            startWith(poolIdControl.value),\n            distinctUntilChanged(),\n            concatMap((idPool: string) => {\n              return campaignService.getSubPool({ pool_id: idPool }).pipe(\n                map((result) => {\n                  if (!result?.data?.find((option: any) => field?.model?.sub_pool === option.id)) {\n                    field.formControl.setValue(null);\n                  }\n                  return result.data;\n                })\n              );\n            })\n          );\n        },\n      },\n    },\n    {\n      key: 'action',\n      type: 'select-custom',\n      props: {\n        label: 'Hành động thực hiện nhiệm vụ',\n        type: 'text',\n        placeholder: ' Chọn hành động',\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        required: true,\n        options: campaignService.getActionMission().pipe(\n          map((result) => {\n            return result.data;\n          })\n        ),\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'lock',\n      type: 'checkbox',\n      props: {\n        label: 'Khóa thực hiện nhiệm vụ sau khi tham gia ',\n        description: 'Khách hàng chỉ cần xác nhận tham gia nhiệm vụ 1 lần  (ví dụ ấn button Thực hiện) thì có thể thực hiện nhiệm vụ bất kỳ lúc nào trong thời gian diễn ra chiến dịch mà không cần ấn lại.'\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'click_action_type',\n      type: 'select-custom',\n      className: 'basis-6/12',\n      props: {\n        label: 'Xử lý khi ấn nút thực hiện nhiệm vụ',\n        placeholder: 'Chọn xử lý',\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n        options: campaignService.getListActionType().pipe(\n          map((result) => {\n            return result.data;\n          })\n        ),\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      hooks: {\n        onInit: (field) => {\n          const form = field.formControl?.parent;\n          const control = form?.get('click_action_type');\n          if (control) {\n            control.valueChanges\n              .pipe(startWith(control.value), distinctUntilChanged())\n              .subscribe((selectedId) => {\n                if (field?.props?.options instanceof Observable) {\n                  field?.props?.options.subscribe((data) => {\n                    const selectedOption = data.find(\n                      (option) => option.id === selectedId\n                    );\n                    // Cập nhật field `specific_type_click_action_selected` dựa trên loại của option đã chọn\n                    const typeField = form?.get('specific_type_click_action_selected');\n                    if (typeField) {\n                      if (selectedOption?.type === 'input') {\n                        typeField.setValue('input');\n                      } else {\n                        typeField.setValue('select');\n                      }\n                    }\n                  });\n                }\n              });\n          }\n        },\n      },\n    },\n    {\n      key: 'specific_type_click_action_selected',\n      defaultValue: '',\n      className: 'hidden',\n      type: 'input'\n    },\n    {\n      key: 'click_action_param',\n      hideExpression: (model, formState, field) =>\n        field?.parent?.model.specific_type_click_action_selected !== 'input',\n      type: 'input',\n      className: 'basis-6/12',\n      props: {\n        label: 'Giá trị tham số',\n        placeholder: 'Nhập giá trị',\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n    },\n    {\n      key: 'click_action_param',\n      type: 'select-custom',\n      className: 'basis-6/12',\n      hideExpression: (model, formState, field) =>\n        field?.parent?.model.specific_type_click_action_selected === 'input',\n      props: {\n        label: 'Tham số',\n        placeholder: 'Chọn tham số',\n        options: [],\n        viewValue: 'title',\n        labelProp: 'title',\n        valueProp: 'id',\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      hooks: {\n        onInit: (field: any) => {\n          const poolIdControl = field?.form?.get('click_action_type');\n          if (!poolIdControl) {\n            return;\n          }\n          field.templateOptions.options = poolIdControl.valueChanges.pipe(\n            startWith(poolIdControl.value),\n            distinctUntilChanged(),\n            concatMap((idPool: string) => {\n           \n              return campaignService.getListActionParam(idPool).pipe(\n                map((result) => {\n                  if (!result.data.find((option: any) => field?.model?.click_action_param === option.id)) {\n                    field.formControl.setValue(null);\n                  }\n                  return result.data;\n                })\n              );\n            })\n          );\n        },\n      },\n    },\n  ];\n};\n","import { markFormGroupTouched } from '@icom/defines';\nimport { NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output, inject } from '@angular/core';\nimport { FormArray, FormControl, FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { NZ_MODAL_DATA } from 'ng-zorro-antd/modal';\nimport { FormlyConfigAddEditGeneralForm } from '../defines/general.define';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { TYPE_FORM_CONTROL } from '@icom/interfaces';\n\n@Component({\n  selector: 'icom-libs-campaign-management-detail-mission-information',\n  templateUrl: './information.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule,\n    NzStepsModule\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailMissionAddEditInformationComponent implements OnInit {\n  protected form: FormGroup = new FormGroup({});\n  protected fields: FormlyFieldConfig[] = [];\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: false,\n    },\n  };\n\n  @Input() mode: 'view' | 'edit' | undefined;\n  @Input() modeExtend: 'view' | 'edit' | 'copy' | undefined;\n  \n  @Input() model: any;\n  @Input() isAdd!: boolean;\n  @Input() missions: any[] | undefined;\n\n  @Output() icomFunctionControl: EventEmitter<any> = new EventEmitter<any>();\n\n  protected readonly nzModalData = inject(NZ_MODAL_DATA);\n  protected readonly iComLibsServicesProjectCampaignV3Service = inject(IComLibsServicesProjectCampaignV3Service);\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    this.fields = FormlyConfigAddEditGeneralForm(\n      this.iComLibsServicesProjectCampaignV3Service, this.missions, this.modeExtend);\n\n    this.model = this.nzModalData.model;\n    this.icomFunctionControl.emit({\n      save: this.handleSave.bind(this)\n    });\n    if (this.mode === 'view') {\n      this.options.formState.disabled = true;\n    }\n  }\n\n  protected handleSave() {\n    if (this.form.invalid) {\n      markFormGroupTouched(this.form);\n      return;\n    }\n    return true;\n  }\n\n  \n}\n\n","<form [formGroup]=\"form\" nz-form [nzLayout]=\"'vertical'\">\n  <formly-form\n    [model]=\"model\"\n    [fields]=\"fields\"\n    [options]=\"options\"\n    [form]=\"form\"\n  ></formly-form>\n</form>","import { NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  inject,\n} from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport {\n  FormlyFieldConfig,\n  FormlyFormOptions,\n  FormlyModule,\n} from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { FormlyConfigAddEditRewardForm } from '../defines/reward.define';\nimport {\n  IComLibsServicesProductService,\n  IComLibsServicesProjectCampaignV3Service,\n} from '@icom/services/projects';\nimport { TYPE_FORM_CONTROL } from '@icom/interfaces';\nimport { markFormGroupTouched } from '@icom/defines';\nimport { IComMessageService } from '@icom/services/common';\n\n@Component({\n  selector: 'icom-libs-campaign-management-detail-mission-reward',\n  templateUrl: './reward.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule,\n    NzStepsModule,\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailMissionAddEditRewardComponent\n  implements OnInit {\n  protected form: FormGroup = new FormGroup({});\n  protected modelOrigin!: any;\n  protected fields: FormlyFieldConfig[] = [];\n  protected options!: FormlyFormOptions;\n\n  protected readonly campaignService = inject(\n    IComLibsServicesProjectCampaignV3Service\n  );\n  protected readonly productService = inject(IComLibsServicesProductService);\n  protected readonly icomMessageService = inject(IComMessageService);\n\n  @Input() mode: 'view' | 'edit' | undefined;\n  @Input() isAdd!: boolean;\n  @Input() data: any;\n  @Input() model: any;\n\n  @Output() icomFunctionControl: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor() {\n\n  }\n\n  ngOnInit() {\n    this.fields = FormlyConfigAddEditRewardForm(\n      this.campaignService,\n      this.productService,\n      this.data\n    );\n    this.options = {\n      formState: {\n        disabled: false,\n        required: false,\n        mainModel: this.model,\n      },\n    };\n    this.icomFunctionControl.emit({\n      save: this.handleSave.bind(this),\n    });\n    if (this.mode === 'view') {\n      this.options.formState.disabled = true;\n    }\n  }\n\n  protected handleSave() {\n    if (this.form.invalid) {\n      markFormGroupTouched(this.form);\n      return;\n    }\n    const listVoucher = this.model?.reward?.items?.find((item: any) => item.type === 'voucher');\n    const listVoucherRef = this.model?.reward_reference?.items?.find((item: any) => item.type === 'voucher');\n    if(this.model?.reward?.type === 'random' && listVoucher && this.model?.reward?.type_value > listVoucher?.id?.length) {\n      this.icomMessageService.showAlertMessageError('Với hình thức thưởng ngẫu nhiên, số phần thưởng cho mỗi khách hàng phải nhỏ hơn hoặc bằng số voucher đã chọn.');\n      return;\n    }\n    if(this.model?.reward?.type === 'random' && this.model?.reward?.items?.find((item: any) => item.type === 'point')) {\n      this.icomMessageService.showAlertMessageError('Hình thức thưởng ngẫu nhiên chỉ áp dụng cho loại phần thưởng voucher.');\n      return;\n    }\n    if(this.model?.reward?.type === 'random' && listVoucherRef && this.model?.reward_reference?.type_value > listVoucherRef?.id?.length) {\n      this.icomMessageService.showAlertMessageError('Với hình thức thưởng ngẫu nhiên, số phần thưởng cho mỗi khách hàng phải nhỏ hơn hoặc bằng số voucher đã chọn.');\n      return;\n    }\n    if(this.model?.reward?.type === 'random' && this.model?.reward_reference?.type === 'random' && this.model?.reward_reference?.items?.find((item: any) => item.type === 'point')) {\n      this.icomMessageService.showAlertMessageError('Hình thức thưởng ngẫu nhiên chỉ áp dụng cho loại phần thưởng voucher.');\n      return;\n    }\n    return true;\n  }\n}\n","import {\n  IComLibsServicesProductService,\n  IComLibsServicesProjectCampaignV3Service,\n} from '@icom/services/projects';\nimport { FieldTypeConfig, FormlyFieldConfig } from '@ngx-formly/core';\nimport { map } from 'rxjs';\n\nexport const FormlyConfigAddEditRewardForm = (\n  campaignService: IComLibsServicesProjectCampaignV3Service,\n  productService: IComLibsServicesProductService,\n  dataCondition: any\n): FormlyFieldConfig[] => {\n  return [\n    {\n      key: 'reward',\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      wrappers: ['collapse'],\n      props: {\n        label: 'Phần thưởng cho người thực hiện hành động',\n        changeChecked: (value: boolean, field: any) => {\n          const fieldActive = field.fieldGroup.find(\n            (item: any) => item.key === 'is_active'\n          );\n          fieldActive.model.is_active = value;\n        },\n        setChecked: (field: any) => {\n          const fieldActive = field?.fieldGroup?.find(\n            (item: any) => item.key === 'is_active'\n          );\n          return fieldActive?.model?.is_active;\n        },\n      },\n      fieldGroup: [\n        {\n          key: 'name',\n          type: 'input',\n          className: '',\n          props: {\n            placeholder: 'Nhập tên phần thưởng',\n            label: 'Tên phần thưởng',\n            type: 'string',\n          },\n          validators: {\n            validation: [\n              { name: 'noWhitespace', options: { errorPath: 'value' } },\n            ],\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'is_active',\n          defaultValue: false,\n          type: 'checkbox',\n          className: 'hidden',\n        },\n        {\n          key: 'reward_level',\n          type: 'select-custom',\n          props: {\n            label: 'Mức thưởng',\n            placeholder: 'Chọn mức thưởng',\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            options: campaignService.getRewardLevel().pipe(\n              map((result) => {\n                return result.data;\n              })\n            ),\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'type',\n          type: 'select-custom',\n          props: {\n            label: 'Hình thức thưởng',\n            placeholder: 'Chọn hình thức thưởng',\n\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            options: campaignService.getRewardForm().pipe(\n              map((result) => {\n                return result.data;\n              })\n            ),\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'type_value',\n          type: 'nz-input-number',\n          props: {\n            label: ' Nhập số phần thưởng',\n            placeholder: 'Nhập giá trị',\n            min: 0,\n            max: 999999,\n            type: 'number',\n          },\n          hideExpression: (model: any) => {\n            return model.type !== 'random';\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'items',\n          type: 'array',\n          props: {\n            label: 'Loại phần thưởng',\n            addText: 'Thêm phần thưởng',\n            required: true,\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n          fieldArray: {\n            wrappers: ['group'],\n            props: {\n              label: ''\n            },\n            expressions: {\n              'props.disabled': 'formState.disabled',\n              'props.required': (field: FormlyFieldConfig) => {\n                return field?.options?.formState?.mainModel?.reward?.is_active || false\n              },\n            },\n            fieldGroup: [\n              {\n                key: 'type',\n                type: 'select-custom',\n                props: {\n                  label: 'Loại phần thưởng',\n                  placeholder: 'Chọn loại phần thưởng',\n                  viewValue: 'title',\n                  labelProp: 'title',\n                  valueProp: 'id',\n                  required: true,\n                  options: campaignService.getTypeReward().pipe(\n                    map((result) => {\n                      return result.data;\n                    })\n                  ),\n                  functionCheckExist:  (field: FormlyFieldConfig, items: any[]) => {\n                    const model = field.options?.formState.mainModel;\n                    const itemsOfModel =  model && model?.reward?.items;\n                    const listIdSelected: any[] = [];\n                    itemsOfModel?.forEach((item: any) => {\n                      listIdSelected.push(item?.type || '');\n                    })\n                    items?.length && items?.forEach((item: any) => {\n                      listIdSelected.includes(item.id) && (item.disabled = true);\n                    });\n                  },\n                },\n\n                expressions: {\n                  'props.required': (field: FormlyFieldConfig) => {\n                    return field?.options?.formState?.mainModel?.reward?.is_active || false\n                  },\n                },\n              },\n              {\n                key: 'value',\n                type: 'nz-input-number',\n                className: '',\n                props: {\n                  placeholder: 'Nhập Điểm thưởng',\n                  label: 'Giá trị',\n                  type: 'number',\n                  required: true,\n                  min: 0,\n                },\n                hideExpression: (field: any) => {\n                  if (!field?.type) {\n                    return true;\n                  }\n                  return field?.type === 'point' ? false : true;\n                },\n                expressions: {\n                  'props.required': (field: FormlyFieldConfig) => {\n                    return field?.options?.formState?.mainModel?.reward?.is_active || false\n                  },\n                },\n              },\n              {\n                key: 'id',\n                type: 'select-custom',\n                props: {\n                  label: 'Voucher',\n                  placeholder: 'Chọn voucher',\n                  viewValue: 'name',\n                  labelProp: 'name',\n                  valueProp: 'id',\n                  required: true,\n                  multiple: true,\n                  options: productService\n                    .getProductFromCampaigns()\n                    .pipe(\n                      map((result) => {\n                        return result?.data;\n                      })\n                    ),\n                },\n                hideExpression: (field: any) => {\n                  if (!field?.type) {\n                    return true;\n                  }\n                  return field?.type === 'voucher' ? false : true;\n                },\n                expressions: {\n                  'props.required': (field: FormlyFieldConfig) => {\n                    return field?.options?.formState?.mainModel?.reward?.is_active || false\n                  },\n                },\n              },\n            ],\n          },\n        },\n        {\n          key: 'message_template',\n          type: 'select-custom',\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n          props: {\n            label: 'Thông báo',\n            placeholder: 'Chọn mẫu thông báo',\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            options: campaignService.getMessageTemplate().pipe(\n              map((result) => {\n                return result.data;\n              })\n            ),\n          },\n        },\n      ],\n    },\n    {\n      key: 'reward_reference',\n      expressions: {\n        'props.disabled': 'formState.disabled',\n        'props.required': 'model?.is_active',\n      },\n      props: {\n        label: 'Phần thưởng cho người giới thiệu',\n        changeChecked: (value: boolean, field: any) => {\n          const fieldActive = field.fieldGroup.find(\n            (item: any) => item.key === 'is_active'\n          );\n          fieldActive.model.is_active = value;\n        },\n        setChecked: (field: any) => {\n          const fieldActive = field?.fieldGroup?.find(\n            (item: any) => item.key === 'is_active'\n          );\n          return fieldActive?.model?.is_active;\n        },\n      },\n      className: ' mt-4',\n      wrappers: ['collapse'],\n      fieldGroup: [\n        {\n          key: 'name',\n          type: 'input',\n          className: '',\n          props: {\n            placeholder: 'Nhập tên phần thưởng',\n            label: 'Tên phần thưởng',\n            type: 'string',\n          },\n          validators: {\n            validation: [\n              { name: 'noWhitespace', options: { errorPath: 'value' } },\n            ],\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'is_active',\n          defaultValue: false,\n          type: 'checkbox',\n          hide: true,\n        },\n        {\n          key: 'reward_level',\n          type: 'select-custom',\n          props: {\n            label: 'Mức thưởng',\n            placeholder: 'Chọn mức thưởng',\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            options: campaignService.getRewardLevel().pipe(\n              map((result) => {\n                return result.data;\n              })\n            ),\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'type',\n          type: 'select-custom',\n          props: {\n            label: 'Hình thức thưởng',\n            placeholder: 'Chọn hình thức thưởng',\n\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            options: campaignService.getRewardForm().pipe(\n              map((result) => {\n                return result.data;\n              })\n            ),\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'type_value',\n          type: 'nz-input-number',\n          props: {\n            label: ' Nhập số phần thưởng',\n            placeholder: 'Nhập giá trị',\n            min: 0,\n            max: 999999,\n            type: 'number',\n          },\n          hideExpression: (model: any) => {\n            return model.type !== 'random';\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': 'model?.is_active',\n          },\n        },\n        {\n          key: 'items',\n          type: 'array',\n          props: {\n            label: 'Loại phần thưởng',\n            addText: 'Thêm phần thưởng',\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n            'props.required': (field: FormlyFieldConfig) => {\n              return field?.options?.formState?.mainModel?.reward_reference?.is_active || false\n            },\n          },\n          fieldArray: {\n            wrappers: ['group'],\n            expressions: {\n              'props.disabled': 'formState.disabled',\n              'props.required': (field: FormlyFieldConfig) => {\n                return field?.options?.formState?.mainModel?.reward_reference?.is_active || false\n              },\n            },\n            fieldGroup: [\n              {\n                key: 'type',\n                type: 'select-custom',\n                props: {\n                  label: 'Loại phần thưởng',\n                  placeholder: 'Chọn loại phần thưởng',\n                  viewValue: 'title',\n                  labelProp: 'title',\n                  valueProp: 'id',\n                  functionCheckExist:  (field: FormlyFieldConfig, items: any[]) => {\n                    const model = field.options?.formState.mainModel;\n                    const itemsOfModel =  model && model?.reward_reference?.items;\n                    const listIdSelected: any[] = [];\n                    itemsOfModel?.forEach((item: any) => {\n                      listIdSelected.push(item?.type || '');\n                    })\n                    items?.length && items?.forEach((item: any) => {\n                      listIdSelected.includes(item.id) && (item.disabled = true);\n                    });\n                  },\n                  options: campaignService.getTypeReward().pipe(\n                    map((result) => {\n                      return result.data;\n                    })\n                  ),\n                },\n                expressions: {\n                  'props.required': (field: FormlyFieldConfig) => {\n                    return field?.options?.formState?.mainModel?.reward_reference?.is_active || false\n                  },\n                },\n              },\n              {\n                key: 'value',\n                type: 'nz-input-number',\n                className: '',\n                props: {\n                  placeholder: 'Nhập Điểm thưởng',\n                  label: 'Giá trị',\n                  type: 'number',\n\n                  min: 0,\n                },\n                hideExpression: (field: any) => {\n                  if (!field?.type) {\n                    return true;\n                  }\n                  return field?.type === 'point' ? false : true;\n                },\n                expressions: {\n                  'props.required': (field: FormlyFieldConfig) => {\n                    return field?.options?.formState?.mainModel?.reward_reference?.is_active || false\n                  },\n                },\n              },\n              {\n                key: 'id',\n                type: 'select-custom',\n                props: {\n                  label: 'Voucher',\n                  placeholder: 'Chọn voucher',\n                  viewValue: 'name',\n                  labelProp: 'name',\n                  valueProp: 'id',\n                  multiple: true,\n                  options: productService\n                    .getProductFromCampaigns()\n                    .pipe(\n                      map((result) => {\n                        return result?.data;\n                      })\n                    ),\n                },\n                hideExpression: (field: any) => {\n                  if (!field?.type) {\n                    return true;\n                  }\n                  return field?.type === 'voucher' ? false : true;\n                },\n                expressions: {\n                  'props.required': (field: FormlyFieldConfig) => {\n                    return field?.options?.formState?.mainModel?.reward_reference?.is_active || false\n                  },\n                },\n              },\n            ],\n          },\n        },\n        {\n          key: 'message_template',\n          type: 'select-custom',\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n          props: {\n            label: 'Thông báo',\n            placeholder: 'Chọn mẫu thông báo',\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            options: campaignService.getMessageTemplate().pipe(\n              map((result) => {\n                return result.data;\n              })\n            ),\n          },\n        },\n      ],\n    },\n  ];\n};\n","<form [formGroup]=\"form\" nz-form [nzLayout]=\"'vertical'\">\n  <formly-form\n    [model]=\"model\"\n    [fields]=\"fields\"\n    [options]=\"options\"\n    [form]=\"form\"\n  ></formly-form>\n</form>","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { IComLibsServicesProjectCampaignV3Service } from \"@icom/services/projects\";\nimport { FormlyFieldConfig } from \"@ngx-formly/core\";\nimport { map } from \"rxjs\";\n\nexport const ConfigFormlyConditionActionEvent = (campaignService: IComLibsServicesProjectCampaignV3Service): FormlyFieldConfig[] => [\n  {\n    fieldGroupClassName: 'flex row  mt-4',\n    key: '',\n    fieldGroup: [\n      {\n        key: 'value',\n        type: 'nz-input-number',\n        className: 'basis-2/12 w-36',\n        props: {\n          placeholder: 'Nhập số',\n          type: 'number',\n          min: 0,\n          required: true,\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n      {\n        key: 'unit',\n        type: 'select-custom',\n        className: 'basis-1/12 ml-4',\n        defaultValue: 'day',\n        props: {\n          viewValue: 'name',\n          labelProp: 'name',\n          valueProp: 'id',\n          required: true,\n          options: [\n            {\n              id: \"day\",\n              name: 'Ngày'\n            }\n          ]\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n      {\n        key: 'sub_value',\n        type: 'select-custom',\n        className: 'basis-8/12 ml-4',\n        props: {\n          label: 'Tính từ thời điểm',\n          placeholder: 'Chọn hành động/ sự kiện',\n          viewValue: 'title',\n          labelProp: 'title',\n          required: true,\n          valueProp: 'id',\n          options: campaignService.getActionMission()\n          .pipe(\n            map(result => {\n              return result.data;\n            }\n            ))\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n    ],\n  }\n]","import { IComLibsServicesProjectCampaignV3Service } from \"@icom/services/projects\";\nimport { FormlyFieldConfig } from \"@ngx-formly/core\";\nimport { map } from \"rxjs\";\n\nexport const ConfigFormlyConditionTransactionTag = (campaignService: IComLibsServicesProjectCampaignV3Service): FormlyFieldConfig[] => [\n  {\n    fieldGroupClassName: 'flex row items-center mt-4',\n    key: '',\n    fieldGroup: [\n      {\n        key: 'sub_value',\n        type: 'select-custom',\n        className: 'basis-5/12',\n        props: {\n          placeholder: 'Chọn hành động/ sự kiện',\n          viewValue: 'title',\n          labelProp: 'title',\n          required: true,\n          valueProp: 'id',\n          options: campaignService.getActionMission()\n            .pipe(\n              map(result => {\n                return result.data;\n              }\n              ))\n        },\n        expressions: {\n          'props.disabled': 'formState.disabled',\n        },\n      },\n    ],\n  }\n]\n\nexport const ConfigFormlyConditionTransactionTagDependent = (campaignService: IComLibsServicesProjectCampaignV3Service): FormlyFieldConfig[] => [\n  {   \n    key: 'sub_value_2',\n    type: 'select-custom',\n    className: 'basis-5/12 mt-4',\n    props: {\n      placeholder: 'Chọn hành động/ sự kiện',\n      viewValue: 'title',\n      label: 'Phụ thuộc hành động/ sự kiện chưa xảy ra',\n      labelProp: 'title',\n      valueProp: 'id',\n      required: true,\n      options: campaignService.getActionMission()\n        .pipe(\n          map(result => {\n            return result.data;\n          }\n          ))\n    },\n  },\n  {   \n    key: 'sub_value',\n    type: 'select-custom',\n    className: 'basis-5/12 ml-4',\n    props: {\n      placeholder: 'Chọn hành động/ sự kiện',\n      viewValue: 'title',\n      label: 'Phụ thuộc hành động/ sự kiện đã xảy ra',\n      labelProp: 'title',\n      required: true,\n      valueProp: 'id',\n      options: campaignService.getActionMission()\n        .pipe(\n          map(result => {\n            return result.data;\n          }\n          ))\n    },\n  },\n]","import { FormlyFieldConfig } from '@ngx-formly/core';\nimport { ConfigFormlyConditionActionEvent } from './action-event.define';\nimport { ConfigFormlyConditionMaxActionNumber } from './max-action-number.define';\nimport { ConfigFormlyConditionTransactionTag, ConfigFormlyConditionTransactionTagDependent } from './transaction-tags.define';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { FormGroup } from '@angular/forms';\nimport { ConfigFormlyConditionSpecificDeadline } from './specific_deadline.define';\n\nexport class DefineCondition {\n  public static CAMPAIGN_EXPIRE_TIME = 'campaign_expire_time';\n  public static BY_ACTION_BY_EVENT = 'by_action_by_event';\n}\n\nexport const ListFormula1 = () => {\n  return  [\n    {\n      id: 'customer',\n      name: 'Khách hàng'\n    },\n    {\n      id: 'action',\n      name: 'Hành động/ Sự kiện'\n    },\n    {\n      id: 'reward',\n      name: 'Phần thưởng'\n    },\n    {\n      id: 'customer_reference',\n      name: 'Người được mời'\n    }\n  ]\n} \n\nexport const AndOr = (): FormlyFieldConfig[] => {\n  return [{\n    key: 'operator',\n    type: 'select-custom',\n    className: 'flex',\n    defaultValue: '&&',\n    props: {\n      viewValue: 'name',\n      labelProp: 'name',\n      valueProp: 'id',\n      required: true,\n      options: [\n        {\n          id: \"&&\",\n          name: 'Và'\n        },\n        {\n          id: \"||\",\n          name: 'Hoặc'\n        }\n      ]\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  }]\n}\n\nexport const ConfigAllFormCondition = (campaignService: IComLibsServicesProjectCampaignV3Service) => [\n  {\n    type: 'by_action_by_event',\n    fields: [...ConfigFormlyConditionActionEvent(campaignService), ...AndOr()],\n    group: 'customer',\n    specific_name_formula: 'Theo hành động/ sự kiện',\n    form: new FormGroup({})\n  },\n  {\n    type: 'count_task_complete',\n    group: 'action',\n    specific_name_formula: 'Số lần tính hoàn thành nhiệm vụ',\n    fields: [...ConfigFormlyConditionMaxActionNumber(), ...AndOr()],\n    form: new FormGroup({})\n  },\n  {\n    type: 'max_action_number',\n    group: 'action',\n    specific_name_formula: 'Số lần tối đa',\n    fields: [...ConfigFormlyConditionMaxActionNumber(), ...AndOr()],\n    form: new FormGroup({})\n  },\n  {\n    type: 'time_limited_rewards',\n    group: 'reward',\n    specific_name_formula: 'Thời hạn xét thưởng',\n    fields: [...ConfigFormlyConditionActionEvent(campaignService), ...AndOr()],\n    form: new FormGroup({})\n  },\n  {\n    type: 'campaign_limits',\n    group: 'reward',\n    specific_name_formula: 'Giới hạn theo chiến dịch',\n    fields: [...AndOr()],\n    form: new FormGroup({})\n  },\n  {\n    type: 'action_event_record_rewards',\n    group: 'reward',\n    specific_name_formula: 'Hành động/ sự kiện ghi nhận thưởng',\n    fields: [ ...ConfigFormlyConditionTransactionTag(campaignService), ...AndOr()],\n    form: new FormGroup({})\n  },\n  {\n    type: 'action_event_dependent',\n    group: 'reward',\n    specific_name_formula: 'Hành động/ sự kiện phụ thuộc',\n    fields: [ ...ConfigFormlyConditionTransactionTagDependent(campaignService), ...AndOr()],\n    form: new FormGroup({})\n  },\n  {\n    type: 'thoi_gian_dang_ky',\n    fields: [...ConfigFormlyConditionSpecificDeadline(), ...AndOr()],\n    group: 'customer_reference',\n    specific_name_formula: 'Thời hạn cụ thể',\n    form: new FormGroup({})\n  },\n]\n\nexport const ListFormula2 = [\n  {\n    id: '1',\n    name: 'Thời hạn tham gia chiến dịch',\n    groupId: 'customer',\n    items: [\n      {\n        type: 'by_action_by_event',\n        name: 'Theo hành động/ sự kiện',\n        groupId: 'customer', \n        items: []\n      }\n    ]\n  },\n  {\n    id: '2',\n    name: 'Số lần thực hiện',\n    groupId: 'action',\n    items: [\n      {\n        type: 'count_task_complete',\n        name: 'Số lần tính hoàn thành nhiệm vụ',\n        groupId: 'customer',\n        items: []\n      },\n      {\n        type: 'max_action_number',\n        name: 'Số lần tối đa',\n        groupId: 'customer',\n        items: []\n      }\n    ]\n  },\n  {\n    id: '3',\n    name: 'Thời gian liên quan',\n    groupId: 'reward',\n    items: [\n      {\n        type: 'time_limited_rewards',\n        name: 'Thời hạn xét thưởng',\n        groupId: 'reward',\n        items: []\n      },\n    ]\n  },\n  {\n    id: '4',\n    name: 'Số phần thưởng',\n    groupId: 'reward',\n    items: [\n      {\n        type: 'campaign_limits',\n        name: 'Giới hạn theo chiến dịch',\n        groupId: 'reward',\n        items: []\n      },\n    ]\n  },\n  {\n    id: '5', name: 'Hành động liên quan', groupId: 'reward', items: [\n      {\n        type: 'action_event_record_rewards',\n        name: 'Hành động/ sự kiện ghi nhận thưởng',\n        groupId: 'reward',\n        items: []\n      },\n      {\n        type: 'action_event_dependent',\n        name: 'Hành động/ sự kiện phụ thuộc',\n        groupId: 'reward',\n        items: []\n      },\n    ]\n  },\n  {\n    id: '6',\n    name: 'Hồ sơ khách hàng',\n    groupId: 'customer_reference',\n    items: [\n      {\n        type: 'thoi_gian_dang_ky',\n        name: 'Theo thời gian đăng ký mới',\n        groupId: 'customer_reference', items: [\n          {\n            type: 'count_task_complete',\n            name: 'Số lần tính hoàn thành nhiệm vụ',\n            groupId: 'customer_reference',\n            items: []\n          },\n          {\n            type: 'max_action_number',\n            name: 'Số lần tối đa',\n            groupId: 'customer_reference',\n            items: []\n          }\n        ]\n      }\n    ]\n  },\n];","<form [formGroup]=\"form\" nz-form [nzLayout]=\"'vertical'\">\n  <formly-form\n    [model]=\"model\"\n    [fields]=\"fields\"\n    [options]=\"options\"\n    [form]=\"form\"\n  ></formly-form>\n</form>\n\n<ul\n  *ngIf=\"listFormula && listFormula.length\"\n  nz-list\n  [nzDataSource]=\"listFormula\"\n  nzBordered\n  nzSize=\"small\"\n>\n  <li nz-list-item *ngFor=\"let item of listFormula\" nzNoFlex>\n    <ul nz-list-item-actions>\n      <nz-list-item-action>\n        <a (click)=\"handlerClick($event, item)\">+</a>\n      </nz-list-item-action>\n    </ul>\n    {{ item.name }}\n  </li>\n</ul>\n\n<div class=\"mt-4 w-full h-full\">\n  <nz-tag\n    *ngFor=\"let item of listFormulaSelected; index as i; trackBy: trackByFn\"\n    [nzMode]=\"'closeable'\">\n    {{ item.name }}\n  </nz-tag>\n</div>\n","import { JsonPipe, NgFor, NgForOf, NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, OnInit, Output, inject } from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { distinctUntilChanged, map, startWith } from 'rxjs/operators';\nimport { NzListModule } from 'ng-zorro-antd/list';\nimport { NzTagModule } from 'ng-zorro-antd/tag';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ListFormula1, ListFormula2 } from '../../defines/condition/condition.define';\n@Component({\n  selector: 'icom-libs-campaign-management-detail-mission-condition-modal',\n  templateUrl: './modal.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule,\n    NzStepsModule,\n    NzListModule, JsonPipe,\n    NgFor,\n    NzTagModule, NgForOf\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class IComLibsCampaignAddEditConditionModalComponent implements OnInit {\n  protected form: FormGroup = new FormGroup({});\n  protected modelOrigin!: any;\n  protected fields: FormlyFieldConfig[] = [];\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: true,\n    },\n  };\n  protected model: any;\n  protected listItemSelected: any;\n  protected listFormula: any[] = [];\n  protected listFormulaSelected: any[] = [];\n  \n  @Output() icomSave: EventEmitter<any[]> = new EventEmitter<any[]>();\n\n  private cdr = inject(ChangeDetectorRef);\n\n  constructor() {\n    this.model = {};\n    this.fields = [\n      {\n        key: 'group',\n        type: 'select-custom',\n        defaultValue: 'customer',\n        props: {\n          label: 'Tiêu chí cấp 1',\n          viewValue: 'name',\n          labelProp: 'name',\n          valueProp: 'id',\n          options: ListFormula1()\n        },\n      },\n      {\n        key: 'sub_group',\n        type: 'select-custom',\n        props: {\n          label: 'Tiêu chí cấp 2',\n          viewValue: 'name',\n          labelProp: 'name',\n          valueProp: 'id',\n          options: []\n        },\n        hooks: {\n          onInit: (field: any) => {\n            const teams: any = ListFormula2;\n\n            const sportControl = field?.parent?.get?.('group').formControl;\n            field.props.options = sportControl?.valueChanges.pipe(\n              startWith(sportControl.value),\n              distinctUntilChanged(),\n              map(() => {\n                const sportId = sportControl.value;\n                const options = teams.filter((team: any) => team.groupId === sportId);\n                if (!options.find((option: any) => sportId === option.id)) {\n                  field.formControl.setValue(null);\n                }\n                const items = options as any[];\n                if (options && items as any[] && items.length) {\n                  this.listItemSelected = items || [];\n                }\n                return options;\n              }),\n            );\n          },\n        },\n      }\n    ]\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      (this.form.controls as any)['sub_group']?.valueChanges.subscribe({\n        next: (keySubGroup: any) => {\n          let list: any[] = [];\n          this.listItemSelected.forEach((groupTwo: any) => {\n            const items = [groupTwo].find((item: any) => item.id === keySubGroup)?.items\n            if(items && items.length) {\n              list = items;\n            }\n          });\n          this.listFormula = list;\n          this.cdr.detectChanges();\n        }\n      });\n    }, 200);\n  }\n\n  protected handlerClick(e: Event, itemAdd: any) {\n    e.stopPropagation();\n    e.preventDefault();\n    if(this.listFormulaSelected && this.listFormulaSelected.length && this.listFormulaSelected.find(item  => item.type === itemAdd.type)) {\n      return;\n    }\n    this.listFormulaSelected.push(itemAdd);\n    this.cdr.detectChanges();\n  }\n\n  protected trackByFn(index: any, user: any) {\n    return user.id;\n  }\n\n  public handlerSave() {\n    this.icomSave.emit(this.listFormulaSelected.map((item) => {\n      return {\n        ...item, \n        id: item.id ||  uuidv4()\n      }\n    }));\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { ListFormula1, ListFormula2 } from '../defines/condition/condition.define';\n\n@Pipe({\n  name: 'icomLibsCampaignConvertTooltipConditionPipe',\n  standalone: true\n})\nexport class IcomLibsCampaignConvertTooltipConditionPipe implements PipeTransform {\n\n  transform(dataCondition: any): any {\n    // return null;\n    let string = '';\n    if(dataCondition.group) {\n      string += ListFormula1().find(item => item.id === dataCondition.group)?.name || '';\n    }\n    if(dataCondition.type) {\n      string += ' - '\n      string += ListFormula2.find(item => item.groupId === dataCondition.group)?.name || '';\n    }\n    return string;\n  }\n\n}\n","<div class=\"w-full h-full\">\n  <div class=\"flex justify-end\">\n    <button\n      *ngIf=\"mode === 'edit'\"\n      class=\"flex\"\n      nz-button\n      nzType=\"primary\"\n      (click)=\"handlerAddCondition($event)\"\n    >\n      Thêm điều kiện\n    </button>\n  </div>\n  <ng-container *ngIf=\"dataCondition?.config && dataCondition?.config?.length\">\n    <ng-container *ngFor=\"let condition of dataCondition.config; let last = last\">\n      <div *ngIf=\"!condition.specific_hidden\" class=\"flex flex-col mt-2 border p-2 rounded-sm\">\n        <ng-container>\n          <nz-form-label\n            class=\"!w-full !text-left\"\n            nzRequired\n            [nzTooltipTitle]=\"\n              condition | icomLibsCampaignConvertTooltipConditionPipe\n            \"\n            [nzTooltipIcon]=\"{\n              type: 'info-circle',\n              theme: 'outline'\n            }\"\n          >\n            <span class=\"text-xs font-semibold\">\n              {{ condition?.name || '' }}\n            </span>\n          </nz-form-label>\n          <div class=\"flex items-baseline\">\n            <form\n              class=\"ml-4 w-full\"\n              *ngIf=\"condition.fields\"\n              [formGroup]=\"condition.form\"\n              nz-form\n            >\n              <formly-form\n                [model]=\"condition\"\n                [fields]=\"condition.fields\"\n                [options]=\"options\"\n                [form]=\"condition.form\"\n              ></formly-form>\n            </form>\n            <button\n              *ngIf=\"mode === 'edit'\"\n              class=\"ml-4\"\n              nz-button\n              [nzType]=\"'default'\"\n              [nzDanger]=\"true\"\n              (click)=\"handlerRemove($event, condition)\"\n            >\n              {{ 'Xóa' }}\n            </button>\n          </div>\n        </ng-container>\n      </div>\n    </ng-container>\n \n  </ng-container>\n</div>\n","import { JsonPipe, NgFor, NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, ViewContainerRef, inject } from '@angular/core';\nimport { FormGroup, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { NZ_MODAL_DATA, NzModalRef, NzModalService } from 'ng-zorro-antd/modal';\nimport { IComLibsCampaignAddEditConditionModalComponent } from './modal/modal.component';\nimport { ConfigAllFormCondition } from '../defines/condition/condition.define';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { TYPE_FORM_CONTROL } from '@icom/interfaces';\nimport { IcomLibsCampaignConvertTooltipConditionPipe } from '../pipes/convert-tooltip-condition.pipe';\nimport { v4 as uuidv4 } from 'uuid';\n@Component({\n  selector: 'icom-libs-campaign-management-detail-mission-condition',\n  templateUrl: './condition.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule,\n    NzStepsModule,\n    IComLibsCampaignAddEditConditionModalComponent,\n    NgFor,\n    JsonPipe,\n    NzDropDownModule,\n    NzSelectModule,\n    ReactiveFormsModule,\n    FormsModule,\n    IcomLibsCampaignConvertTooltipConditionPipe\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailMissionAddEditConditionComponent implements OnInit {\n  // protected form: FormGroup = new FormGroup({});\n  protected modelOrigin!: any;\n  protected model: any;\n  protected fields: FormlyFieldConfig[] = [];\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: false,\n    },\n  };\n\n  protected modalService = inject(NzModalService);\n  protected viewContainerRef = inject(ViewContainerRef);\n  protected readonly nzModalData = inject(NZ_MODAL_DATA);\n  private cdr = inject(ChangeDetectorRef);\n  private campaignService = inject(IComLibsServicesProjectCampaignV3Service);\n\n  @Input() dataCondition: any;\n  @Input() dataMission: any;\n  @Input() isAdd!: boolean;\n  @Input() mode: 'view' | 'edit' | undefined;\n\n  @Output() icomFunctionControl: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor() {\n    this.model = {};\n  }\n\n  ngOnInit() {\n    this.icomFunctionControl.emit({\n      save: this.handleSave.bind(this)\n    });\n    if (this.dataCondition && !this.dataCondition.config) {\n      this.dataCondition.config = [];\n    }\n    if (this.mode === 'view') {\n      this.options.formState.disabled = true;\n    }\n    this.mapFormField();\n  }\n\n  private mapFormField() {\n    const configAllFormCondition = ConfigAllFormCondition(this.campaignService);\n\n    this.dataCondition.config.forEach((config: any, index: number) => {\n      const result = configAllFormCondition.find(item => item.type === config.type);\n      if (!result) {\n        return;\n      }\n      this.dataCondition.config[index] = { ...config, ...result };\n    });\n  }\n\n  protected handlerAddCondition(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    const modal: NzModalRef<IComLibsCampaignAddEditConditionModalComponent> = this.modalService.create<IComLibsCampaignAddEditConditionModalComponent>({\n      nzTitle: 'Thêm điều kiện áp dụng',\n      nzContent: IComLibsCampaignAddEditConditionModalComponent,\n      nzMaskClosable: false,\n      nzClosable: false,\n      nzViewContainerRef: this.viewContainerRef,\n      nzWidth: 968,\n      nzFooter: [\n        {\n          label: 'Đóng',\n          onClick: () => modal.destroy()\n        },\n        {\n          label: 'Lưu',\n          type: 'primary',\n          loading: false,\n          onClick(): void {\n            modal.getContentComponent().handlerSave();\n            modal.destroy();\n          }\n        },\n      ]\n    });\n    const instance = modal.getContentComponent();\n    instance.icomSave.subscribe((result) => {\n      this.dataCondition.config && this.dataCondition.config.push(...result);\n      this.dataCondition.config = [...this.dataCondition.config];\n      this.mapFormField();\n      this.cdr.detectChanges();\n    });\n  }\n\n\n  protected handleSave() {\n    let error = false;\n    this.dataCondition.config && this.dataCondition.config.forEach((config: any) => {\n      if (!config?.form) {\n        return;\n      }\n      if (config?.form && !config?.form?.valid) {\n        Object.keys(config.form.controls as TYPE_FORM_CONTROL).forEach((key) => {\n          (config.form.controls as TYPE_FORM_CONTROL)[key].touched = true;\n        });\n        error = true;\n\n        return;\n      }\n      config.form.markAsTouched();\n      (config.form as TYPE_FORM_CONTROL).submitted = true;\n    })\n\n    if (error) {\n      return false;\n    }\n\n    if (!this.dataCondition?.config && !this.dataCondition?.config.length) {\n      return;\n    }\n    this.dataCondition.relationship = '';\n\n    // Fix tam cho BE: Nhiem vu cuoi\n    if (this.dataMission && this.dataMission.click_action_param && this.dataMission.click_action_param === 'APP_SCREEN_WORKER_PROFILE') {\n      !this.dataCondition.config.find((item: any) => item.id === 'uuid2') && this.dataCondition.config?.push(...[\n        {\n          \"attribute\": \"full_name\",\n          \"group\": \"customer\",\n          \"id\": \"uuid2\",\n          \"operator\": \"is_not_empty\",\n          \"type\": \"customer_profile\",\n          \"specific_hidden\": true\n        },\n        {\n          \"attribute\": \"email\",\n          \"group\": \"customer\",\n          \"id\": \"uuid3\",\n          \"operator\": \"is_not_empty\",\n          \"type\": \"customer_profile\",\n          \"specific_hidden\": true\n        },\n        {\n          \"attribute\": \"birthdate\",\n          \"group\": \"customer\",\n          \"id\": \"uuid4\",\n          \"operator\": \"is_not_empty\",\n          \"type\": \"customer_profile\",\n          \"specific_hidden\": true\n        },\n        {\n          \"attribute\": \"address_city\",\n          \"group\": \"customer\",\n          \"id\": \"uuid5\",\n          \"operator\": \"is_not_empty\",\n          \"type\": \"customer_profile\",\n          \"specific_hidden\": true\n        }\n      ]);\n    }\n\n    // Fix tam cho BE: Nhiem vu phan thuong nguoi duoc moi\n\n    const configReferenceRegister = this.dataCondition?.config?.find((item: any) => item.type === 'thoi_gian_dang_ky' && item.group === 'customer_reference');\n    if(configReferenceRegister) {\n      if(this.dataCondition?.config?.find((item: any) => item.operator === 'after_specific_day')) {\n        this.dataCondition.config = this.dataCondition?.config.filter((item: any)  => item.operator !== 'after_specific_day')\n      }\n      if(this.dataCondition?.config?.find((item: any) => item.operator === 'before_specific_day')) {\n        this.dataCondition.config = this.dataCondition?.config.filter((item: any)  => item.operator !== 'before_specific_day')\n      }\n      this.dataCondition.config.push(...this.convertObject(this.dataCondition?.config?.find((item: any) => item.type === 'thoi_gian_dang_ky')));\n    }\n    console.log(this.dataCondition);\n    this.dataCondition.config.forEach((item: any, index: number) => {\n      this.dataCondition.relationship += ` ${item.id} ${index !== this.dataCondition.config.length - 1 ? '&&' : ''}`;\n      delete item.fields;\n      delete item.form;\n    });\n    return true;\n  }\n\n  protected convertObject(originalObject: any) {\n    const newObjects = [];\n\n    if (originalObject.after_specific_day) {\n      newObjects.push({\n        operator: \"after_specific_day\",\n        attribute: \"thoi_gian_dang_ky\",\n        type: \"customer_profile\",\n        \"group\": \"customer_reference\",\n        \"specific_hidden\": true,\n        value: originalObject.after_specific_day,\n        id: uuidv4()\n      });\n    }\n    if (originalObject.before_specific_day) {\n      newObjects.push({\n        operator: \"before_specific_day\",\n        attribute: \"thoi_gian_dang_ky\",\n        value: originalObject.before_specific_day,\n        \"group\": \"customer_reference\",\n        type: \"customer_profile\",\n        id: uuidv4(),\n        \"specific_hidden\": true\n      });\n    }\n    return newObjects;\n  }\n\n  protected handlerRemove(e: Event, row: any) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.dataCondition.config = this.dataCondition.config?.filter((config: any) => config.id !== row.id);\n    this.dataCondition.relationship = '';\n    this.dataCondition?.config?.forEach((item: any) => {\n      this.dataCondition.relationship += ` ${item.id} ${item.operator} `;\n    });\n    this.cdr.detectChanges();\n  }\n}\n","import { FormlyFieldConfig } from \"@ngx-formly/core\";\n\nexport const ConfigFormlyConditionMaxActionNumber = (): FormlyFieldConfig[] => [\n  {\n    key: 'value',\n    type: 'nz-input-number',\n    className: 'w-36 flex',\n    props: {\n      placeholder: 'Nhập số lần',\n      nzPlaceHolder: 'Nhập số lần',\n      type: 'number',\n      required: true,\n      min: 0\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n]","import { FormlyFieldConfig } from \"@ngx-formly/core\";\n\nexport const ConfigFormlyConditionSpecificDeadline = (): FormlyFieldConfig[] => [\n  {\n    key: 'after_specific_day',\n    type: 'date',\n    className: 'mt-4',\n    props: {\n      className: 'mt-4',\n      format: 'dd-MM-yyyy',\n      required: true,\n      nzShowTime: false,\n      label: 'Từ',\n      placeholder: 'DD/MM/YYYY',\n      emitTimeLocal: true,\n      onlyDay: true\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n  {\n    key: 'before_specific_day',\n    type: 'date',\n    className: 'mt-4',\n    props: {\n      label: 'Đến',\n      className: 'mt-4',\n      format: 'dd-MM-yyyy',\n      placeholder: 'DD/MM/YYYY',\n      required: true,\n      nzShowTime: false,\n      emitTimeLocal: true,\n      onlyDay: true\n    },\n    expressions: {\n      'props.disabled': 'formState.disabled',\n    },\n  },\n]","<nz-steps [nzCurrent]=\"current\" nzProgressDot (nzIndexChange)=\"handlerIndexChange($event)\">\n  <nz-step nzDescription=\"1. Thông tin chung\"></nz-step>\n  <nz-step nzDescription=\"2. Phần thưởng\"></nz-step>\n  <nz-step nzDescription=\"3. Điều kiện áp dụng\"></nz-step>\n</nz-steps>\n\n<div class=\"steps-content mt-4 p-4 w-full border border-zinc-300\">\n  <icom-libs-campaign-management-detail-mission-information\n    *ngIf=\"current === 0\"\n    [model]=\"model\"\n    [mode]=\"nzModalData.mode\"\n    [modeExtend]=\"nzModalData.modeExtend\"\n    [missions]=\"nzModalData.missions || []\"\n    (icomFunctionControl)=\"handlerFunctionControl($event)\"\n  >\n  </icom-libs-campaign-management-detail-mission-information>\n  <icom-libs-campaign-management-detail-mission-reward\n    *ngIf=\"current === 1\"\n    [model]=\"model\"\n    [data]=\"model\"\n    [mode]=\"nzModalData.mode\"\n    (icomFunctionControl)=\"handlerFunctionControl($event)\"\n  ></icom-libs-campaign-management-detail-mission-reward>\n  <icom-libs-campaign-management-detail-mission-condition\n    *ngIf=\"current === 2\"\n    [mode]=\"nzModalData.mode\"\n    [dataCondition]=\"model?.condition\"\n    [dataMission]=\"model\"\n    (icomFunctionControl)=\"handlerFunctionControl($event)\"\n  ></icom-libs-campaign-management-detail-mission-condition>\n</div>\n\n<ng-template #customFooter>\n  <nz-space>\n    <ng-container *ngIf=\"current > 0\">\n      <button\n        *nzSpaceItem\n        nz-button\n        nzType=\"default\"\n        (click)=\"handlerPrev($event)\"\n      >\n        <span>Quay lại</span>\n      </button>\n    </ng-container>\n\n    <ng-container *ngIf=\"current < 2\">\n      <button\n        *nzSpaceItem\n        nz-button\n        nzType=\"primary\"\n        (click)=\"handlerNextStep($event)\"\n      >\n        <span>Tiếp tục</span>\n      </button>\n    </ng-container>\n\n    <ng-container *ngIf=\"current === 2 && nzModalData.mode === 'edit'\">\n      <button\n        *nzSpaceItem\n        nz-button\n        nzType=\"primary\"\n        (click)=\"handlerSave($event)\"\n      >\n        <span>Lưu</span>\n      </button>\n    </ng-container>\n\n    <ng-container>\n      <button\n        *nzSpaceItem\n        nz-button\n        nzType=\"default\"\n        (click)=\"handlerClose($event)\"\n      >\n      <span>Đóng</span>\n      </button>\n    </ng-container>\n  </nz-space>\n</ng-template>\n","import { NgIf } from '@angular/common';\nimport { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentRef, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild, inject } from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { FormlyConfigAddEditGeneralForm } from './defines/general.define';\nimport { NZ_MODAL_DATA } from 'ng-zorro-antd/modal';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\nimport { cloneDeep } from 'lodash';\nimport { IComLibsCampaignManagementDetailMissionAddEditInformationComponent } from './information/information.component';\nimport { IComLibsCampaignManagementDetailMissionAddEditRewardComponent } from './reward/reward.component';\nimport { IComLibsCampaignManagementDetailMissionAddEditConditionComponent } from './condition/condition.component';\n\n@Component({\n  selector: 'icom-libs-campaign-management-detail-mission-add_edit',\n  templateUrl: './add-edit.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule,\n    NzStepsModule,\n    NzSpaceModule,\n    IComLibsCampaignManagementDetailMissionAddEditRewardComponent,\n    IComLibsCampaignManagementDetailMissionAddEditInformationComponent,\n    IComLibsCampaignManagementDetailMissionAddEditConditionComponent\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailMissionAddEditComponent implements OnInit, AfterViewInit {\n  protected current: number;\n  protected modelOrigin!: any;\n  protected eventFunctionControl: any;\n\n  public readonly nzModalData = inject(NZ_MODAL_DATA);\n  private readonly cdr = inject(ChangeDetectorRef);\n\n  @Input() model: any;\n  @Input() isAdd!: boolean;\n  @Input() modal!: any;\n\n  @ViewChild('customFooter', { static: false }) templateFooter!: TemplateRef<{}>;\n\n  @Output() icomSave: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor() {\n    this.current = 0;\n  }\n\n  ngOnInit() {\n    this.model = this.nzModalData.model;\n\n    if(this.model && !this.model.condition) {\n      this.model.condition = {};\n    }\n    if(this.model && !this.model.reward) {\n      this.model.reward = {};\n    }\n    if(this.model && !this.model.reward_reference) {\n      this.model.reward_reference = {};\n    }\n    \n  }\n\n  ngAfterViewInit() {\n    const modal = this.modal;\n    modal.updateConfig({\n      nzFooter: this.templateFooter\n    });\n    modal.containerInstance.cdr.detectChanges();\n    this.cdr.detectChanges();\n  }\n\n  protected handlerNextStep(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this.eventFunctionControl && this.eventFunctionControl.save && this.eventFunctionControl.save()) {\n      this.current++;\n      this.cdr.detectChanges();\n      return;\n    }\n    if(this.nzModalData.mode === 'view') {\n      this.current++;\n      this.cdr.detectChanges();\n    }\n  }\n\n  protected handlerFunctionControl(event: any){\n    this.eventFunctionControl = event;\n  }\n\n  protected handlerPrev(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.current--;\n    this.cdr.detectChanges();\n  }\n\n  protected handlerSave(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    \n    if (this.eventFunctionControl && this.eventFunctionControl.save && this.eventFunctionControl.save()) {\n      this.icomSave.emit(this.model);\n      this.cdr.detectChanges();\n    }\n\n  }\n\n  protected handlerClose(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    \n      this.icomSave.emit();\n      this.cdr.detectChanges();\n  }\n\n  protected handlerIndexChange(index: number): void {\n    if(this.current === index) {\n      return;\n    }\n    if(this.nzModalData.mode === 'view' && (this.current === index + 1 || this.current === index - 1) ) {\n      this.current = index;\n      return;\n    }\n    if (this.nzModalData.mode === 'edit' && this.eventFunctionControl && this.eventFunctionControl.save && this.eventFunctionControl.save()) {\n      this.current += 1;\n    }\n  }\n}\n","<div class=\"w-full h-full flex\">\n  <div class=\"flex w-full h-full flex-col bg-white border pl-4 pt-4 rounded-md\">\n    <form [formGroup]=\"form\" nz-form [nzLayout]=\"'vertical'\" class=\"pr-4\">\n      <formly-form\n        [model]=\"data\"\n        [fields]=\"fields\"\n        [options]=\"options\"\n        [form]=\"form\"\n      ></formly-form>\n    </form>\n    <div  *ngIf=\"mode === 'edit'\" class=\"flex\">\n      <button nz-button nzType=\"primary\" (click)=\"handlerAddNew($event, undefined, 'edit')\">\n        Thêm nhiệm vụ\n      </button>\n    </div>\n\n    <div class=\"w-full h-full overflow-auto pr-4\">\n      <nz-empty\n        *ngIf=\"!data?.missions || !data?.missions.length\"\n        nzNotFoundImage=\"simple\"\n        [nzNotFoundContent]=\"'Không tìm thấy nhiệm vụ.'\"\n        class=\"h-full w-full flex justify-center items-center border border-slate-300 flex-col !m-0 pt-2\"\n      ></nz-empty>\n      <div *ngIf=\"data?.missions && data?.missions.length\" class=\"!mt-4\">\n        <div\n          class=\"border border-slate-300 mt-4\"\n          *ngFor=\"let item of data?.missions\"\n        >\n          <nz-page-header>\n            <nz-page-header-title class=\"!text-sm\">{{ item?.name || '' }} </nz-page-header-title>\n            <nz-page-header-extra>\n              <div class=\"flex\">\n                <button\n                *ngIf=\"mode === 'view'\" \n                  nz-button\n                  nzType=\"primary\"\n                  (click)=\"handleEditMission($event, item, 'view')\"\n                >\n                  {{ 'Xem' }}\n                </button>\n\n                <button\n                *ngIf=\"mode === 'edit'\" \n                  class=\"ml-4\"\n                  nz-button\n                  [nzType]=\"'default'\"\n                  (click)=\"handlerCopy($event, item)\"\n                >\n                  {{ 'Sao chép' }}\n                </button>\n\n                <button\n                *ngIf=\"mode === 'edit'\" \n                  nz-button\n                  class=\"ml-4\"\n                  nzType=\"primary\"\n                  (click)=\"handleEditMission($event, item, 'edit')\"\n                >\n                  {{ 'Sửa' }}\n                </button>\n                <button\n                *ngIf=\"mode === 'edit'\" \n                  class=\"ml-4\"\n                  nz-button\n                  [nzType]=\"'default'\"\n                  [nzDanger]=\"true\"\n                  (click)=\"handlerRemove($event, item)\"\n                >\n                  {{ 'Xóa' }}\n                </button>\n              </div>\n            </nz-page-header-extra>\n            <nz-page-header-content>\n              <nz-row nzType=\"flex\" nzJustify=\"space-between\"  nzAlign=\"middle\" >\n                <ng-container  *ngIf=\"item.action | icomCampaignDetailMissionParseValue  : listDataActionMission as result\">\n                  <nz-statistic\n                    nzTitle=\"Hành động thực hiện nhiệm vụ\"\n                    [nzValue]=\"result?.title || ''\"\n                  >\n                  </nz-statistic>\n                </ng-container>\n                \n              \n                <ng-container *ngIf=\"item.sponsor?.[0]?.id  | icomCampaignDetailMissionParseValue : listDataContributor  as result\">\n                  <nz-statistic\n                    [nzValueTemplate]=\"templateTime\"\n                    nzTitle=\"Nhà tài trợ / Tài khoản ký quỹ (Tỷ lệ)\">\n                  </nz-statistic>\n\n                  <ng-template #templateTime>\n                      <span class=\"text-xs\">{{ result?.title || '' }} / {{  result?.balance || 0 | number }}</span>\n                      <span class=\"text-xs ml-2\">({{ item?.sponsor?.[0].value || 0 | number }}%)</span>\n                  </ng-template>\n                </ng-container>\n                <nz-statistic\n                  nzTitle=\"Tên phần thưởng\"\n                  [nzValue]=\"item?.reward?.name || ''\"\n                >\n                </nz-statistic>\n              </nz-row>\n\n              <nz-row nzType=\"flex\" nzJustify=\"space-between\"  nzAlign=\"middle\" class=\"mt-4\">\n                <ng-container  *ngIf=\"item.type\">\n                  <nz-statistic\n                    nzTitle=\"Loại nhiệm vụ\"\n                    [nzValue]=\"item.type === 'normal' ? 'Nhiệm vụ thông thường' : 'Nhiệm vụ đặc biệt'\"\n                  >\n                  </nz-statistic>\n                </ng-container>\n                \n                <ng-container>\n                  <nz-statistic\n                    [nzValueTemplate]=\"templateTypeReward\"\n                    nzTitle=\"Loại phần thưởng \">\n                  </nz-statistic>\n\n                  <ng-template #templateTypeReward>\n                    <div class=\"flex items-center\" *ngIf=\"item?.reward?.items as items\">\n                      <div *ngFor=\"let rewardItem of items; let i = index\">\n                        <i nz-icon [nzType]=\"rewardItem?.type === 'point' ? 'point' : 'gift'\" class=\"text-xl\"></i>\n                        <span class=\"text-xs ml-2\">{{ rewardItem?.type === 'point' ? 'Điểm thưởng' : 'Voucher' }}</span>\n                        <span *ngIf=\"i < items.length - 1\">&nbsp;&nbsp;&nbsp; </span>\n                      </div>\n                    </div>\n                  </ng-template>\n                  \n                </ng-container>\n\n                <nz-statistic\n                  style=\"visibility: hidden;\"\n                  nzTitle=\"Hành động thực hiện b vụ\">\n              </nz-statistic>\n\n              </nz-row>\n            </nz-page-header-content>\n          </nz-page-header>\n        </div>\n      </div>\n      <div class=\"h-3\"></div>\n    </div>\n  </div>\n</div>\n","import { DecimalPipe, NgFor, NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, ViewContainerRef, inject } from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { IComLibsCampaignManagementDetailMissionAddEditComponent } from './add-edit/add-edit.component';\nimport { ConfigFormlyMissionOrder } from '../defines/mission.define';\nimport { NzModalRef, NzModalService } from 'ng-zorro-antd/modal';\nimport { NzEmptyModule } from 'ng-zorro-antd/empty';\nimport { NzDescriptionsModule } from 'ng-zorro-antd/descriptions';\nimport { v4 as uuidv4 } from 'uuid';\nimport { cloneDeep, filter } from 'lodash';\nimport { TYPE_FORM_CONTROL } from '@icom/interfaces';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { combineLatest } from 'rxjs';\nimport { IcomCampaignDetailMissionParseValue } from './add-edit/pipes/parse-value.pipe';\nimport { IComMessageService } from '@icom/services/common';\nimport { NzStatisticModule } from 'ng-zorro-antd/statistic';\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n@Component({\n  selector: 'icom-libs-campaign-management-detail-mission',\n  templateUrl: './mission.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule,\n    NzEmptyModule,\n    IComLibsCampaignManagementDetailMissionAddEditComponent,\n    NzDescriptionsModule,\n    NgFor,\n    IcomCampaignDetailMissionParseValue,\n    NzStatisticModule,\n    NzPageHeaderModule,\n    DecimalPipe,\n    NzIconModule\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailMissionComponent {\n  protected form: FormGroup = new FormGroup({});\n  protected fields: FormlyFieldConfig[] = [];\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: false,\n    },\n  };\n  protected isLoading!: boolean;\n  protected listDataActionMission: any[];\n  protected listDataContributor: any[];\n\n  protected modalService = inject(NzModalService);\n  protected viewContainerRef = inject(ViewContainerRef);\n  protected cdr = inject(ChangeDetectorRef);\n  protected campaignService = inject(IComLibsServicesProjectCampaignV3Service);\n  protected IComMessageService = inject(IComMessageService);\n  \n  @Input() data: any | undefined;\n  @Input() mode: 'view' | 'edit' | undefined;\n\n  @Output() icomFunctionControl: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor() {\n    this.listDataActionMission = [];\n    this.listDataContributor = [];\n    this.fields = ConfigFormlyMissionOrder(this.campaignService);\n  }\n\n  ngOnInit() {\n    this.icomFunctionControl.emit({\n      save: this.handleSave.bind(this)\n    });\n\n    if(this.mode === 'view') {\n      this.options.formState.disabled = true;\n    }\n\n    combineLatest([\n      this.campaignService.getActionMission(),\n      this.campaignService.getContributor()\n    ]\n    ).subscribe((results: any) => {\n      const [dataActionMission, dataContributor] = results;\n      this.listDataActionMission = dataActionMission?.data;\n      this.listDataContributor = dataContributor?.data;\n      this.cdr.detectChanges();\n    });\n  }\n\n  protected handlerAddNew(e: Event, data?: any, view?: 'edit' | 'view' | 'copy') {\n    e.stopPropagation();\n    e.preventDefault();\n    const modal: NzModalRef<IComLibsCampaignManagementDetailMissionAddEditComponent> = this.modalService.create<IComLibsCampaignManagementDetailMissionAddEditComponent>({\n      nzTitle: data && view !== 'copy' ? `Sửa nhiệm vụ: ${data.name}` : 'Thêm nhiệm vụ',\n      nzContent: IComLibsCampaignManagementDetailMissionAddEditComponent,\n      nzMaskClosable: false,\n      nzKeyboard: false,\n      nzClosable: true,\n      nzViewContainerRef: this.viewContainerRef,\n      nzData: {\n        model: cloneDeep(data) || {},\n        isAdd: true,\n        mode: view === 'copy' ? 'edit' : view,\n        missions: this.data.missions || [],\n        modeExtend: view\n      },\n      nzWidth: 968,\n      nzFooter: []\n    });\n    const instance = modal.getContentComponent();\n    instance.icomSave.subscribe((result) => {\n      if(!result) {\n        modal.close();\n        this.cdr.detectChanges();\n        return;\n      }\n      if(!this.data?.missions || !this.data?.missions?.length) {\n        this.data.missions = [];\n      }\n      if (!result.id) {\n        this.data.missions?.push({ ...result, id: uuidv4() });\n      } else {\n        this.mergeObjects(data, result);\n      }\n      modal.close();\n      this.cdr.detectChanges();\n    });\n    instance.modal = modal;\n  }\n\n  protected handleEditMission(e: Event, data: any, view: 'edit' | 'view') {\n    e.stopPropagation();\n    e.preventDefault();\n    this.handlerAddNew(e, data, view);\n\n  }\n\n  protected mergeObjects(obj1: any, obj2: any) {\n    for (const key in obj2) {\n      if (obj2.hasOwnProperty(key)) {\n        if (obj1.hasOwnProperty(key)) {\n          obj1[key] = obj2[key];\n        } else {\n          obj1[key] = obj2[key];\n        }\n      }\n    }\n  }\n\n  protected handlerRemove(e: Event, row: any) {\n    e.stopPropagation();\n    this.modalService.confirm({\n      nzTitle: `Bạn có chắc chắn muốn xoá nhiệm vụ ${row.name} không ?`,\n      nzOkText: 'Có',\n      nzOkType: 'primary',\n      nzOkDanger: true,\n      nzMaskClosable: false,\n      nzClosable: true,\n      nzOnOk: this.processDeleteMission.bind(this, row),\n      nzCancelText: 'Không'\n    }, 'error');\n  }\n\n  protected handlerCopy(e: Event, row: any) {\n    e.stopPropagation();\n    this.handlerAddNew(e, {\n      ...row,\n      id: '', \n    }, 'copy')\n  }\n  \n\n  protected handleSave(): boolean {\n    if (!this.form.valid) {\n      Object.keys(this.form.controls as TYPE_FORM_CONTROL).forEach((key) => {\n        (this.form.controls as TYPE_FORM_CONTROL)[key].touched = true;\n      });\n      return false;\n    }\n    this.form.markAsTouched();\n    (this.form as TYPE_FORM_CONTROL).submitted = true;\n    if(!this.data?.missions?.length) {\n      this.IComMessageService.showAlertMessageError('Bạn chưa chọn nhiệm vụ.');\n      return false;\n    }\n    return true;\n  }\n\n  protected processDeleteMission(row: any) {\n    this.data.missions = this.data?.missions?.filter((mission: any) => mission.id !== row.id);\n    this.cdr.detectChanges();\n  }\n  \n}","import { IComLibsServicesProjectCampaignV3Service } from \"@icom/services/projects\";\nimport { FormlyFieldConfig } from \"@ngx-formly/core\";\nimport { map } from \"rxjs\";\n\nexport const ConfigFormlyMissionOrder = (campaignService:  IComLibsServicesProjectCampaignV3Service): FormlyFieldConfig[] => [\n    {\n      fieldGroupClassName: 'flex row items-center',\n      key: '',\n      fieldGroup: [\n        {\n          key: 'order_type',\n          type: 'select-custom',\n          className: 'basis-5/12',\n          props: {\n            label: 'Thứ tự thực hiện',\n            placeholder: 'Chọn thứ tự',\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            required: true,\n            options: campaignService.getListOrderAction().pipe(\n              map(result => {\n                return result.data;\n              }\n              ))\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        },\n        {\n          key: 'quantity',\n          type: 'nz-input-number',\n          className: 'basis-2/12 ml-4',\n          props: {\n            label: 'Số nhiệm vụ tối đa',\n            placeholder: 'Nhập số',\n            required: true,\n            type:'number',\n            min: 1\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        },\n        {\n          key: 'order_by',\n          type: 'select-custom',\n          className: 'basis-5/12 ml-4',\n          props: {\n            label: ' ',\n            placeholder: 'Select Category',\n            viewValue: 'title',\n            labelProp: 'title',\n            valueProp: 'id',\n            required: true,\n            options: campaignService.getListOrderActionBy().pipe(\n              map(result => {\n                return result.data;\n              }\n              ))\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        }\n      ],\n    }\n  ]","import { NgIf } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, inject } from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { FormlyFieldConfig, FormlyFormOptions, FormlyModule } from '@ngx-formly/core';\nimport { FormlyNgZorroAntdModule } from '@ngx-formly/ng-zorro-antd';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { FormlyConfigForm } from '../defines/general.define';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { TYPE_FORM_CONTROL } from '@icom/interfaces';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { FormlyConfigAddEditLayoutForm } from '../defines/layout.define';\n@Component({\n  selector: 'icom-libs-campaign-management-detail-layout',\n  templateUrl: './layout.component.html',\n  standalone: true,\n  imports: [\n    FormlyNgZorroAntdModule,\n    ReactiveFormsModule,\n    FormlyModule,\n    NzButtonModule,\n    NgIf,\n    NzSpinModule,\n    NzFormModule\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailLayoutComponent {\n  protected form: FormGroup = new FormGroup({});\n  protected model: any;\n  protected modelOrigin!: any;\n  protected fields: FormlyFieldConfig[] = [];\n  protected options: FormlyFormOptions = {\n    formState: {\n      disabled: false,\n    },\n  };\n  protected isLoading!: boolean;\n\n  @Input() data: any | undefined;\n  @Input() mode: 'view' | 'edit' | undefined;\n\n  @Output() icomFunctionControl: EventEmitter<any> = new EventEmitter<any>();\n\n  private cdr = inject(ChangeDetectorRef);\n  \n  constructor() {\n    this.fields = FormlyConfigAddEditLayoutForm();\n  }\n\n  ngOnInit() {\n    this.icomFunctionControl.emit({\n      save: this.handleSave.bind(this)\n    });\n    if(this.mode === 'view') {\n      this.options.formState.disabled = true;\n    }\n  }\n\n  protected handleSave(): boolean {\n    if (!this.form.valid) {\n      Object.keys(this.form.controls as TYPE_FORM_CONTROL).forEach((key) => {\n        (this.form.controls as TYPE_FORM_CONTROL)[key].touched = true;\n      });\n      return false;\n    }\n    this.form.markAsTouched();\n    (this.form as TYPE_FORM_CONTROL).submitted = true;\n    return true;\n  }\n}\n","import { FormlyFieldConfig } from \"@ngx-formly/core\";\n\nexport const FormlyConfigAddEditLayoutForm = (): FormlyFieldConfig[] => {\n  return [\n    {\n      fieldGroupClassName: 'flex items-center',\n      key: '',\n      wrappers: ['group'],\n      props: {\n        label: 'Cấu hình màn home của app'\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      fieldGroup: [\n        {\n          key: 'home_icon',\n          type: 'upload',\n          className: '',\n          props: {\n            label: 'Icon tại màn trang chủ nhiệm vụ',\n            size: 100 * 1024,\n            labelType: 'Image',\n            width: 400,\n            height: 400\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        }\n      ]\n    },\n    {\n      fieldGroupClassName: ' items-center',\n      key: '',\n      wrappers: ['group'],\n      props: {\n        label: 'Trang chủ nhiệm vụ'\n      },\n      expressions: {\n        'props.disabled': 'formState.disabled',\n      },\n      fieldGroup: [\n        {\n          key: 'main_icon',\n          type: 'upload',\n          className: 'basis-6/12',\n          props: {\n            label: 'Icon tại màn trang chủ nhiệm vụ',\n            size:  100 * 1024,\n            required: true,\n            labelType: 'Image',\n            width: 400,\n            height: 400\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        },\n        {\n          key: 'header_img',\n          type: 'upload',\n          className: 'basis-6/12',\n          props: {\n            label: 'Icon header',\n            size:  1024 * 1024,\n            required: true,\n            labelType: 'Image',\n            width: 1500,\n            height: 2000\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        },\n        {\n          key: 'progress_bar_text',\n          type: 'input',\n          props: {\n            placeholder: 'Nhập nội dung header',\n            label: 'Nội dung progress bar',\n            type: 'string',\n            required: true,\n            maxLength: 40\n          },\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n        },\n        {\n          fieldGroupClassName: 'flex row',\n          key: '',\n          expressions: {\n            'props.disabled': 'formState.disabled',\n          },\n          fieldGroup: [\n            \n            {\n              key: 'main_color',\n              type: 'color-picker',\n              className: 'basis-2/12',\n              templateOptions: {\n                label: 'Background color',\n                required: true,\n              },\n              expressions: {\n                'props.disabled': 'formState.disabled',\n              },\n            },\n            {\n              key: 'main_img_type',\n              type: 'select-custom',\n              className: 'basis-6/12 ml-4',\n              props: {\n                label: 'Loại ảnh',\n                required: true,\n                placeholder: 'Chọn loại ảnh',\n                viewValue: 'name',\n                labelProp: 'name',\n                valueProp: 'id',\n                options: [\n                  {\n                    id: 'RED',\n                    name: 'RED'\n                  },\n                  {\n                    id: 'ORANGE',\n                    name: 'ORANGE'\n                  }\n                ]\n              },\n              expressions: {\n                'props.disabled': 'formState.disabled',\n              },\n            },\n          ]\n        }\n      ]\n    },\n\n\n  ];\n}\n\n","<div  class=\"w-full h-full flex\">\n  <div class=\"flex w-full h-full flex-col bg-white border rounded-md\">\n    <form [formGroup]=\"form\" nz-form class=\"bg-white rounded-md h-full flex flex-col !p-4 overflow-y-auto\" [nzLayout]=\"'vertical'\">\n      <formly-form\n        [model]=\"data\"\n        [fields]=\"fields\"\n        [options]=\"options\"\n        [form]=\"form\"\n      ></formly-form>\n    </form>\n  </div>\n</div>","<nz-page-header\n  class=\"h-full w-full flex flex-col p-0 !absolute top-0 left-0 !bg-[#f0f2f5]\"\n  nzBackIcon\n  (nzBack)=\"handlerCancel()\">\n  <nz-page-header-title>{{\n    dataCampaignOrigin?.name || 'Tạo mới'\n  }}</nz-page-header-title>\n\n  <nz-page-header-content class=\"w-full h-full flex overflow-hidden\">\n    <nz-steps\n      nzProgressDot\n      style=\"flex-basis: content\"\n      class=\"border-r border-y-zinc-400 !p-4 bg-white rounded-lg\"\n      [nzCurrent]=\"current\"\n      nzDirection=\"vertical\"\n      (nzIndexChange)=\"handlerIndexChange($event)\"\n    >\n      <nz-step\n        nzTitle=\"1. Thông tin chung\"\n        nzDescription=\"Cấu hình các thông tin chung của chiến dịch\"\n      ></nz-step>\n      <nz-step nzTitle=\"2. Cấu hình nhiệm vụ\"></nz-step>\n      <nz-step nzTitle=\"3. Cấu hình App\"></nz-step>\n    </nz-steps>\n\n    <div *ngIf=\"!isLoadingFirst\" class=\"steps-content pl-4 w-full 0\">\n      <icom-libs-campaign-management-detail-general\n        *ngIf=\"current === 0\"\n        [data]=\"dataCampaign\"\n        [mode]=\"mode\"\n        (icomFunctionControl)=\"handlerFunctionControl($event)\"\n      ></icom-libs-campaign-management-detail-general>\n      <icom-libs-campaign-management-detail-mission\n        *ngIf=\"current === 1\"\n        [mode]=\"mode\"\n        [data]=\"dataCampaign?.config_mission\"\n        (icomFunctionControl)=\"handlerFunctionControl($event)\"\n      ></icom-libs-campaign-management-detail-mission>\n      <icom-libs-campaign-management-detail-layout\n        *ngIf=\"current === 2\"\n        [mode]=\"mode\"\n        [data]=\"dataCampaign?.config_layout\"\n        (icomFunctionControl)=\"handlerFunctionControl($event)\"\n      ></icom-libs-campaign-management-detail-layout>\n    </div>\n    \n    <nz-spin\n      *ngIf=\"isLoadingFirst\"\n      class=\"w-full h-full flex justify-center items-center\"\n      nzSimple\n      [nzSize]=\"'large'\"\n    ></nz-spin>\n  </nz-page-header-content>\n\n  <nz-page-header-footer class=\"flex justify-end mb-4\">\n    <nz-space>\n      <ng-container>\n        <button\n          *nzSpaceItem\n          nz-button\n          nzType=\"default\"\n          (click)=\"handlerCancel($event)\"\n        >\n          <span>Hủy</span>\n        </button>\n      </ng-container>\n\n      <ng-container *ngIf=\"current > 0\">\n        <button *nzSpaceItem nz-button nzType=\"default\" (click)=\"pre()\">\n          <span>Quay lại</span>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"current < 2\">\n        <button *nzSpaceItem nz-button nzType=\"primary\" (click)=\"next()\">\n          <span>Tiếp tục</span>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"mode === 'edit'\">\n        <button\n          *nzSpaceItem\n          nz-button\n          nzType=\"default\"\n          [nzLoading]=\"isLoading\"\n          (click)=\"handlerSaveDraft($event)\"\n        >\n          <span>Lưu nháp</span>\n        </button>\n      </ng-container>\n\n      <ng-container *ngIf=\"current === 2 && mode === 'edit'\">\n        <button\n          *nzSpaceItem\n          nz-button\n          [nzLoading]=\"isLoading\"\n          nzType=\"primary\"\n          (click)=\"handlerSave($event)\"\n        >\n          <span>Lưu</span>\n        </button>\n      </ng-container>\n    </nz-space>\n  </nz-page-header-footer>\n</nz-page-header>\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, DestroyRef, OnInit, inject } from '@angular/core';\nimport { CommonModule, NgIf } from '@angular/common';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzTypographyModule } from 'ng-zorro-antd/typography';\nimport { NzCardModule } from 'ng-zorro-antd/card';\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { IComLibsCampaignManagementDetailGeneralComponent } from './general/general.component';\nimport { IComLibsCampaignManagementDetailMissionComponent } from './mission/mission.component';\nimport { IComLibsServicesProjectCampaignV3Service } from '@icom/services/projects';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { IComMessageService } from '@icom/services/common';\nimport { cloneDeep } from 'lodash';\nimport { lastValueFrom } from 'rxjs';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { NzModalService } from 'ng-zorro-antd/modal';\nimport { IComLibsCampaignManagementDetailLayoutComponent } from './layout/layout.component';\nimport { v4 as uuidv4 } from 'uuid';\nimport { mergeObjects } from '@icom/defines';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\n@Component({\n  selector: 'icom-libs-campaign-management-detail',\n  standalone: true,\n  imports: [\n    CommonModule,\n    NzTypographyModule,\n    NzPageHeaderModule,\n    NzSpaceModule,\n    NzTabsModule,\n    NzIconModule,\n    NzCardModule,\n    NgIf,\n    NzStepsModule,\n    NzButtonModule,\n    IComLibsCampaignManagementDetailGeneralComponent,\n    IComLibsCampaignManagementDetailMissionComponent,\n    IComLibsCampaignManagementDetailLayoutComponent,\n    NzSpinModule\n  ],\n  templateUrl: './detail.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IComLibsCampaignManagementDetailComponent implements OnInit {\n  protected current!: number;\n  protected dataCampaign: any;\n  protected dataCampaignOrigin: any;\n  protected eventFunctionControl: any;\n  protected isLoading!: boolean;\n  protected isLoadingFirst!: boolean;\n  protected mode: 'view' | 'edit';\n\n  protected campaignService = inject(IComLibsServicesProjectCampaignV3Service);\n  protected IComMessageService = inject(IComMessageService);\n  protected router = inject(Router);\n  protected destroyRef = inject(DestroyRef);\n  protected route = inject(ActivatedRoute);\n  protected cdr = inject(ChangeDetectorRef);\n  protected modalService = inject(NzModalService);\n\n  constructor() {\n    this.current = 0;\n    this.dataCampaign = {\n      config_mission: {},\n      config_layout: {}\n    };\n    this.mode = 'view';\n    this.isLoadingFirst = true;\n  }\n\n  ngOnInit() {\n    this.route.queryParams.pipe(takeUntilDestroyed(this.destroyRef)).subscribe((params) => {\n      if (!params) {\n        return;\n      }\n      const id = params['id'];\n      this.mode = params['mode'];\n      this.isLoadingFirst = true;\n      this.cdr.detectChanges();\n      this.campaignService.detail({ id: +id }).subscribe((response: any) => {\n        this.dataCampaign = response.data;\n        this.dataCampaignOrigin = cloneDeep(this.dataCampaign);\n        this.isLoadingFirst = false;\n        this.cdr.detectChanges();\n      }, (err: any) => {\n        this.isLoadingFirst = false;\n        this.cdr.detectChanges();\n      });\n    })\n  };\n\n  protected pre(): void {\n    this.current -= 1;\n  }\n\n  protected next(): void {\n    if (this.eventFunctionControl && this.eventFunctionControl.save && this.eventFunctionControl.save()) {\n      this.current += 1;\n    }\n    if (this.mode === 'view') {\n      this.current += 1;\n    }\n  }\n\n  protected handlerIndexChange(index: number): void {\n    if (this.current === index) {\n      return;\n    }\n    if (this.mode === 'view' && (this.current === index + 1 || this.current === index - 1)) {\n      this.current = index;\n      return;\n    }\n    if (this.mode === 'edit' && this.eventFunctionControl && this.eventFunctionControl.save && this.eventFunctionControl.save()) {\n      this.current += 1;\n    }\n  }\n\n  protected handlerFunctionControl(event: any) {\n    this.eventFunctionControl = event;\n  }\n\n  protected async handlerSave(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    if (this.eventFunctionControl && this.eventFunctionControl.save && !this.eventFunctionControl.save()) {\n      return;\n    }\n    this.modalService.confirm({\n      nzTitle: 'Bạn có muốn lưu chiến dịch?',\n      nzContent: `<b style=\"color: red;\">${this.dataCampaign.name}</b>`,\n      nzOkText: 'Lưu',\n      nzOkType: 'primary',\n      nzMaskClosable: false,\n      nzClosable: true,\n      nzOnOk: this.processSubmit.bind(this),\n      nzCancelText: 'Đóng'\n    }, 'info');\n  }\n\n  private trimFormFields() {\n    const formValues = this.dataCampaign as any;\n    Object.keys(formValues).forEach(key => {\n      if (typeof formValues[key] === 'string') {\n        formValues[key] = formValues[key].trim();\n      }\n    });\n  }\n\n  private async processSubmit() {\n    try {\n      this.isLoading = true;\n      this.trimFormFields();\n      (!this.dataCampaign.status || this.dataCampaign.status === 'DRAFT') && (this.dataCampaign.status = 'INACTIVE');\n      if (this.eventFunctionControl && this.eventFunctionControl.save && this.eventFunctionControl.save()) {\n        this.addSpecificGeneral();\n        await lastValueFrom(this.campaignService.addEditCampaign(this.dataCampaign));\n        this.IComMessageService.showAlertMessageDone(!this.dataCampaign?.id ? 'Tạo mới chiến dịch thành công.' : 'Sửa chiến dịch thành công.');\n        this.router.navigateByUrl(`campaign/management`);\n        this.dataCampaignOrigin = cloneDeep(this.dataCampaign);\n      }\n    } catch (err) {\n      console.log(err);\n      this.IComMessageService.showAlertMessageError((err as HttpErrorResponse)?.error?.error_message || 'Sửa chiến dịch thất bại');\n    } finally {\n      this.isLoading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n  protected async handlerSaveDraft(e: Event) {\n    e.stopPropagation();\n    e.preventDefault();\n    try {\n      if (!this.dataCampaign.name) {\n        this.IComMessageService.showAlertMessageError('Vui lòng nhập tên chiến dịch');\n        return;\n      }\n      this.trimFormFields();\n      this.isLoading = true;\n      this.dataCampaign.status = 'DRAFT';\n      this.addSpecificGeneral();\n      const result = await lastValueFrom(this.campaignService.addEditCampaign(this.dataCampaign));\n      if (result && result.data) {\n        mergeObjects(result.data, this.dataCampaign);\n      }\n      this.IComMessageService.showAlertMessageDone('Lưu nháp chiến dịch thành công');\n      this.dataCampaignOrigin = cloneDeep(this.dataCampaign);\n    } catch (err) {\n      console.log(err);\n      this.IComMessageService.showAlertMessageError((err as HttpErrorResponse)?.error?.error_message || 'Sửa chiến dịch thất bại');\n    } finally {\n      this.isLoading = false;\n      this.cdr.detectChanges();\n    }\n  }\n\n  protected handlerCancel(e?: Event) {\n    e?.stopPropagation();\n    e?.preventDefault();\n    if(this.mode ==='view') {\n      this.router.navigateByUrl(`campaign/management`);\n      return;\n    }\n    this.modalService.confirm({\n      nzTitle: !this.dataCampaign?.id ? 'Bạn có muốn hủy thêm mới chiến dịch không?' : 'Bạn có hủy bỏ thao tác ?',\n      nzOkText: 'Đồng ý',\n      nzOkType: 'primary',\n      nzMaskClosable: false,\n      nzClosable: true,\n      nzOnOk: () => this.router.navigateByUrl(`campaign/management`),\n      nzCancelText: 'Đóng'\n    }, 'info');\n  }\n\n  protected addSpecificGeneral() {\n    const objectAdd = [\n      {\n        \"id\": \"uuid2\",\n        \"group\": \"customer\",\n        \"type\": \"customer_profile\",\n        \"value\": this.dataCampaign.start_time,\n        \"attribute\": \"thoi_gian_dang_ky\",\n        \"operator\": \"after_specific_day\"\n      },\n      {\n        \"id\": \"uuid3\",\n        \"group\": \"customer\",\n        \"type\": \"customer_profile\",\n        \"value\": this.dataCampaign.end_time,\n        \"attribute\": \"thoi_gian_dang_ky\",\n        \"operator\": \"before_specific_day\"\n      }\n    ];\n    objectAdd.forEach((copyItem: any) => {\n      const foundItem = this.dataCampaign?.customer_group?.config?.find((gocItem: any) => gocItem.id === copyItem.id);\n      if (foundItem) {\n        Object.assign(foundItem, copyItem);\n      } else {\n        this.dataCampaign?.customer_group?.config?.push(copyItem);\n      }\n    });\n\n    this.dataCampaign.customer_group && (this.dataCampaign.customer_group.relationship = '');\n    if (this.dataCampaign?.customer_group?.config && this.dataCampaign?.customer_group?.config?.length) {\n      const config = this.dataCampaign?.customer_group?.config;\n      config.forEach((item: any) => {\n        item.id = item.id || uuidv4()\n      });\n      config?.forEach((item: any, index: number) => {\n        this.dataCampaign.customer_group.relationship += ` ${item.id} ${index !== config.length - 1 ? '&&' : ''}`;\n      });\n    }\n\n    if (this.dataCampaign?.config_mission?.missions && this.dataCampaign?.config_mission?.missions?.length) {\n      const config = this.dataCampaign?.config_mission?.missions;\n      config.forEach((item: any, index: number) => {\n        item.id = index + 1;\n      });\n    }\n  }\n}\n"],"x_google_ignoreList":[9,10,11,12]}