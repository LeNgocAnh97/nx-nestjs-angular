"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([[301],{3301:(Z,u,o)=>{o.r(u),o.d(u,{IcomLibRolePermissionListComponent:()=>R});var t=o(5879),l=o(6223),m=o(4729),T=o(4843),r=o(6814),z=o(2787),d=o(1221),M=o(9717),p=o(3389),I=o(2840),g=o(95),x=o(7398),f=o(708),b=o(5861),v=o(804),h=o(824),C=o(5695);function D(i,c){if(1&i&&(t.TgZ(0,"nz-tag"),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.xp6(1),t.Oqu(e)}}function F(i,c){if(1&i&&(t.ynx(0),t.YNc(1,D,2,1,"nz-tag",7),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filteredTags)}}function S(i,c){1&i&&t._UZ(0,"nz-empty",8)}let y=(()=>{class i{constructor(){this.filteredTags=[],this.productName=[],this.nzModalData=(0,t.f3M)(d.uB),this.iComLibsServicesProjectIamRoleService=(0,t.f3M)(m.ZJ)}ngOnInit(){var e=this;return(0,b.Z)(function*(){try{const n=yield(0,f.n)(e.iComLibsServicesProjectIamRoleService.listAccount(e.nzModalData.data.id,{status:e.nzModalData.data.status}));e.tags=n?.data?.items,e.filteredTags=e.tags}catch(n){console.log(n)}})()}onSearchChange(){this.filteredTags=this.tags.filter(e=>e.toLowerCase().includes(this.searchTerm.toLowerCase()))}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail-modal"]],inputs:{tags:"tags",productName:"productName"},standalone:!0,features:[t.jDz],decls:9,vars:4,consts:[[1,"flex","flex-col"],[1,"text-sm","font-semibold"],["nzPrefixIcon","search",1,"mt-4"],["type","text","nz-input","","placeholder","T\xecm ki\u1ebfm theo email",3,"ngModel","ngModelChange"],[1,"tags-list","mt-4"],[4,"ngIf","ngIfElse"],["noDataTemplate",""],[4,"ngFor","ngForOf"],["nzNotFoundContent","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"nz-input-group",2)(4,"input",3),t.NdJ("ngModelChange",function(A){return s.searchTerm=A})("ngModelChange",function(){return s.onSearchChange()}),t.qZA()(),t.TgZ(5,"div",4),t.YNc(6,F,2,1,"ng-container",5),t.qZA()(),t.YNc(7,S,1,0,"ng-template",null,6,t.W1O)),2&n){const a=t.MAs(8);t.xp6(2),t.hij(" ",(null==s.nzModalData.data?null:s.nzModalData.data.name)||""," "),t.xp6(2),t.Q6J("ngModel",s.searchTerm),t.xp6(2),t.Q6J("ngIf",s.filteredTags.length)("ngIfElse",a)}},dependencies:[h.o7,h.Zp,h.gB,C.X,C.j,l.u5,l.Fj,l.JJ,l.On,r.ax,v.Xo,v.p9,r.O5],encapsulation:2})}return i})();var L=o(8111);const k=["footerTemplate"];function P(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"icom-libs-core-components-table",3),t.NdJ("icomAdd",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handlerAdd())})("icomFunctionControl",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.handlerFunctionControl(s))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("columns",e.columns)("loadFn",e.loadData)("fields",e.fields)("model",e.model)("form",e.form)}}let R=(()=>{class i{constructor(e){this.decimalPipe=e,this.form=new l.cw({}),this.model={},this.iComLibsServicesProjectIamRoleService=(0,t.f3M)(m.ZJ),this.productService=(0,t.f3M)(m.k),this.IComMessageService=(0,t.f3M)(M.Q),this.cdr=(0,t.f3M)(t.sBO),this.modalService=(0,t.f3M)(d.Sf),this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"status",type:"select-custom",className:"mb-4 basis-6/12",props:{placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i",viewValue:"name",labelProp:"name",label:"Tr\u1ea1ng th\xe1i",valueProp:"id",options:[{name:"Ho\u1ea1t \u0111\u1ed9ng",id:0},{name:"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng",id:1}]}}]}],this.router=(0,t.f3M)(z.F0),this.loadData=n=>this.iComLibsServicesProjectIamRoleService.list(n).pipe((0,x.U)(s=>(0,L.md)(s))),this.columns=[]}ngOnInit(){this.columns=[{title:"STT",type:"index"},{title:"T\xean vai tr\xf2",key:"name",type:"text"},{title:"S\u1ed1 t\xe0i kho\u1ea3n \u0111ang k\xedch ho\u1ea1t",key:"active_count",type:"text-link",callback:e=>{const n=this.modalService.create({nzTitle:"Danh s\xe1ch t\xe0i kho\u1ea3n \u0111ang k\xedch ho\u1ea1t",nzContent:y,nzData:{data:e},nzFooter:[{label:"\u0110\xf3ng",onClick:()=>n.close()}]})}},{title:"Danh s\xe1ch t\xe0i kho\u1ea3n ng\u1eebng k\xedch ho\u1ea1t",key:"inactive_count",type:"text-link",callback:e=>{const n=this.modalService.create({nzTitle:"Danh s\xe1ch t\xe0i kho\u1ea3n ng\u1eebng k\xedch ho\u1ea1t",nzContent:y,nzData:{data:e},nzFooter:[{label:"\u0110\xf3ng",onClick:()=>n.close()}]})}},{title:"Tr\u1ea1ng th\xe1i",key:"status",type:"text"},{title:"Th\u1eddi gian t\u1ea1o",key:"created_at",type:"text",pipe:"time"},{title:"T\xean ng\u01b0\u1eddi t\u1ea1o",key:"created_by_name",type:"text"},{title:"Th\u1eddi gian c\u1eadp nh\u1eadt cu\u1ed1i",key:"updated_at",type:"text",pipe:"time"},{title:"Ng\u01b0\u1eddi c\u1eadp nh\u1eadt cu\u1ed1i",key:"updated_by_name",type:"text"},{title:"Thao t\xe1c",key:"actions",type:"action",actions:[{name:"S\u1eeda",callback:this.editItem.bind(this),condition:()=>!0},{name:"X\xf3a",callback:this.handlerRemove.bind(this),condition:()=>!0}]}]}handlerRemove(e){this.modalService.confirm({nzTitle:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y vai tr\xf2 ${e.name} ?`,nzContent:"C\xe1c t\xe0i kho\u1ea3n c\u1ee7a vai tr\xf2 n\xe0y s\u1ebd b\u1ecb Ng\u1eebng k\xedch ho\u1ea1t",nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDeleteInventory.bind(this,e),nzCancelText:"H\u1ee7y"},"error")}processDeleteInventory(e){return(0,f.n)(this.iComLibsServicesProjectIamRoleService.deleteRow(e.id||"")).then(()=>{this.IComMessageService.showAlertMessageDone("Delete inventory success"),this.eventFunctionControl.reset()}).catch(n=>{this.IComMessageService.showAlertMessageError(n?.error?.error_message)})}handlerFunctionControl(e){this.eventFunctionControl=e}editItem(e){this.handlerAdd(e)}handlerAdd(e){this.router.navigateByUrl(e?`role-permissions/permission/detail?mode=edit&id=${e?.id}`:"role-permissions/permission/detail")}closeDrawer(){this.drawerRef&&this.drawerRef.close()}resetPassword(){console.log("resetPassword clicked")}removeItem(){console.log("Save button clicked")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(r.JJ))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["icom-libs-role-permissions-account"]],viewQuery:function(n,s){if(1&n&&t.Gf(k,5),2&n){let a;t.iGM(a=t.CRH())&&(s.footerTemplate=a.first)}},standalone:!0,features:[t._Bn([r.JJ,p.ai]),t.jDz],decls:3,vars:1,consts:[[1,"flex","w-full","h-full","flex-col"],["nz-row","",1,"w-full",2,"justify-content","end"],["class","w-full",3,"columns","loadFn","fields","model","form","icomAdd","icomFunctionControl",4,"ngIf"],[1,"w-full",3,"columns","loadFn","fields","model","form","icomAdd","icomFunctionControl"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,P,1,5,"icom-libs-core-components-table",2),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",s.loadData))},dependencies:[T.d,r.O5,p.BL,d.Qp,I.sL,g.Jb,g.SK],encapsulation:2,changeDetection:0})}return i})()}}]);