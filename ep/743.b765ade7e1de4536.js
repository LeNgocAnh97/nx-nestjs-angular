"use strict";(self.webpackChunkicom=self.webpackChunkicom||[]).push([[743],{743:(D,i,o)=>{o.r(i),o.d(i,{IComLibsOrderTransactionListComponent:()=>O});var a=o(5861),e=o(5879),h=o(6814),s=o(6223),m=o(5545),g=o(19),v=o(9364),d=o(2840),y=o(7422),c=o(3599),L=o(551),C=o(1221),z=o(9691),T=o(8083),x=o(9717),f=o(4729),u=o(708),b=o(7398),S=o(8111),p=o(6990),M=o(855),I=o(1958);function N(r,J){if(1&r&&(e.TgZ(0,"form",5),e._UZ(1,"formly-form",6),e.qZA()),2&r){const t=e.oxw();e.Q6J("formGroup",t.form)("nzLayout","vertical"),e.xp6(1),e.Q6J("model",t.model)("fields",t.fields)("form",t.form)}}let O=(()=>{class r{constructor(){this.form=new s.cw({}),this.options={formState:{disabled:!0}},this.fields=[],this.iComLibsServicesProjectDynamicHomeService=(0,e.f3M)(f.KL),this.cdr=(0,e.f3M)(e.sBO),this.IComMessageService=(0,e.f3M)(x.Q),this.orderService=(0,e.f3M)(f.VD)}ngOnInit(){var t=this;return(0,a.Z)(function*(){try{const n=yield(0,u.n)(t.orderService.getTransactionConditions());t.model=n?.data||[],t.modelOrigin=(0,p.cloneDeep)(t.model),t.setField()}catch(n){t.IComMessageService.showAlertMessageError(n?.error?.error_message)}finally{t.cdr.detectChanges()}})()}setField(){this.fields=[{fieldGroupClassName:"flex flex-col mt-4",className:"w-full mt-4 test2",type:"array",props:{label:"",addText:"Th\xeam h\u1ea1n m\u1ee9c giao d\u1ecbch",maxLength:4,required:!0,initialModel:{membership_level_code:"",limit_spend_point:null,limit_count_transaction:null}},fieldArray:{wrappers:["group"],props:{label:""},expressions:{"props.disabled":"formState.disabled"},fieldGroupClassName:"flex w-full",fieldGroup:[{key:"membership_level_code",type:"select-custom",expressions:{"props.disabled":"formState.disabled"},className:"w-full",props:{label:"H\u1ea1ng th\xe0nh vi\xean",placeholder:"Ch\u1ecdn  h\u1ea1ng th\xe0nh vi\xean",viewValue:"value",labelProp:"value",required:!0,valueProp:"id",options:this.iComLibsServicesProjectDynamicHomeService.listMembersShip().pipe((0,b.U)(t=>t.data))}},{key:"limit_spend_point",type:"nz-input-number",className:"w-full ml-4",props:{label:"H\u1ea1n m\u1ee9c chi ti\xeau \u0111i\u1ec3m/ng\xe0y",type:"number",outputNullable:!0,placeholder:"Nh\u1eadp s\u1ed1",min:1,max:9999999999,required:!0}},{key:"limit_count_transaction",type:"nz-input-number",className:"w-full",props:{label:"H\u1ea1n m\u1ee9c s\u1ed1 l\u1ea7n giao d\u1ecbch/ ng\xe0y",type:"number",outputNullable:!0,placeholder:"Nh\u1eadp s\u1ed1",min:1,max:9999999999,required:!0}}]}}]}saveSettings(){var t=this;return(0,a.Z)(function*(){if(t.form.invalid)(0,S.c2)(t.form);else{t.isLoading=!0;try{yield(0,u.n)(t.orderService.postTransactionConditions(t.model)),t.IComMessageService.showAlertMessageDone("Th\xeam c\u1ea5u h\xecnh th\xe0nh c\xf4ng.")}catch(n){t.IComMessageService.showAlertMessageError(n?.error?.error_message||"Th\xeam M\u1ee5c Kho th\u1ea5t b\u1ea1i")}finally{t.isLoading=!1,t.cdr.detectChanges()}}})()}resetSettings(){this.model=(0,p.cloneDeep)(this.modelOrigin),this.cdr.detectChanges()}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["icom-libs-order"]],standalone:!0,features:[e.jDz],decls:7,vars:3,consts:[[1,"flex","flex-col","w-full","h-full"],["nz-form","","class","w-full h-full",3,"formGroup","nzLayout",4,"ngIf"],[1,"flex"],["nz-button","","nzType","primary",1,"mt-2.5","mr-7","py-1.5","px-2.5",3,"nzLoading","click"],["nz-button","","nzType","default",1,"mt-2.5","mr-5","py-1.5","px-2.5",3,"nzLoading","click"],["nz-form","",1,"w-full","h-full",3,"formGroup","nzLayout"],[3,"model","fields","form"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0),e.YNc(1,N,2,5,"form",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return l.saveSettings()}),e._uU(4,"L\u01b0u"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return l.resetSettings()}),e._uU(6,"H\u1ee7y"),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("ngIf",l.model),e.xp6(2),e.Q6J("nzLoading",l.isLoading),e.xp6(2),e.Q6J("nzLoading",l.isLoading))},dependencies:[v.xD,g.u,s.UX,s._Y,s.JL,s.sg,m.X0,m.T7,d.sL,d.ix,M.w,I.dQ,c.U5,c.Lr,T.ZJ,L.PV,C.Qp,z.LV,s.u5,y.b1,h.O5],styles:[".test[_ngcontent-%COMP%]     formly-group{display:flex;flex-wrap:wrap}.test[_ngcontent-%COMP%]     formly-group .test2 nz-form-label{width:auto!important}"],changeDetection:0})}return r})()}}]);