"use strict";(self.webpackChunkapps_flash_sale=self.webpackChunkapps_flash_sale||[]).push([[856],{856:(I,u,a)=>{a.r(u),a.d(u,{IcomLibsFlashSaleGroupComponent:()=>G});var g=a(5861),n=a(5879),x=a(6236),r=a(9663),p=a(6814),d=a(95),Z=a(3802),f=a(5545),z=a(2840),T=a(2595),m=a(2787),v=a(1221),w=a(9466),b=a(9717),C=a(8504),A=a(824),S=a(708),F=a(8180),M=a(1659),P=a(1567),L=a(855),O=a(1958),y=a(3460);function D(l,c){if(1&l){const t=n.EpF();n.TgZ(0,"tr")(1,"td",20),n._uU(2),n.qZA(),n.TgZ(3,"td",20),n._uU(4),n.qZA(),n.TgZ(5,"td",20),n._uU(6),n.ALo(7,"date"),n.qZA(),n.TgZ(8,"td",20),n._uU(9),n.qZA(),n.TgZ(10,"td",20)(11,"div",21)(12,"button",22),n._uU(13," H\xe0nh \u0111\u1ed9ng "),n._UZ(14,"span",23),n.qZA(),n.TgZ(15,"nz-dropdown-menu",null,24)(17,"ul",25)(18,"li",26),n.NdJ("click",function(){const i=n.CHM(t).$implicit,o=n.oxw();return n.KtG(o.showEditModal(i))}),n._uU(19,"S\u1eeda"),n.qZA(),n.TgZ(20,"li",26),n.NdJ("click",function(){const i=n.CHM(t).$implicit,o=n.oxw();return n.KtG(o.showDeleteConfirm(i))}),n._uU(21,"X\xf3a"),n.qZA()()()()()()}if(2&l){const t=c.$implicit,s=c.index,e=n.MAs(16),i=n.oxw();n.xp6(2),n.hij(" ",10*((null==i.pagination?null:i.pagination.page)-1)+s+1,""),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.hij(" ",n.xi3(7,7,t.created_at,"dd/MM/yyyy HH:mm")," "),n.xp6(3),n.Oqu(t.created_by_name),n.xp6(3),n.Q6J("nzType","primary")("nzShape","round")("nzDropdownMenu",e)}}function _(l,c){if(1&l&&(n.TgZ(0,"div",27),n._uU(1),n.qZA()),2&l){const t=n.oxw();n.xp6(1),n.hij(" T\u1ed5ng s\u1ed1 b\u1ea3n ghi: ",(null==t.pagination?null:t.pagination.total_rows)||0," ")}}const E=function(){return{x:"1500px",y:"calc(100vh - 380px)"}},U=function(){return[10,15,20,30,40,50]};let G=(()=>{class l{constructor(){this.listOfData=[],this.rows=[],this.form=new d.cw({}),this.model={},this.options={},this.total=1,this.loading=!0,this.pageSize=5,this.pageIndex=1,this.fields=[{className:"flex flex-col",fieldGroupClassName:"flex w-full justify-center",fieldGroup:[{key:"name",type:"search-input",className:"mb-4 basis-6/12",props:{type:"text",placeholder:"T\xecm ki\u1ebfm theo t\xean nh\xf3m flash sale"}}]}],this.modalService=(0,n.f3M)(v.Sf),this.viewContainerRef=(0,n.f3M)(n.s_b),this.icomLibsDynamicComponentService=(0,n.f3M)(w.G),this.iComLibsServicesProjectFlashSaleService=(0,n.f3M)(M.Rm),this.cdr=(0,n.f3M)(n.sBO),this.router=(0,n.f3M)(P.F0),this.iComMessageService=(0,n.f3M)(b.Q)}ngOnInit(){this.loadPage(1)}loadPage(t=1,s=10){var e=this;return(0,g.Z)(function*(){try{e.loading=!0;const o={...{...e.model},size:s,page:t},h=yield(0,S.n)(e.iComLibsServicesProjectFlashSaleService.listGroup({...o}));if(h&&h.data&&h.data.items)return e.rows=h.data.items||[],void(e.pagination=h.data.pagination);e.rows=[],e.pagination=h.data.pagination}catch(i){console.log(i)}finally{e.loading=!1,e.cdr.detectChanges()}})()}handlerSearch(t){t.stopPropagation(),t.preventDefault(),this.loadPage(1)}handlerBackFlashSale(t){t.stopPropagation(),t.preventDefault(),this.router.navigateByUrl("flash-sale/list")}showAddModal(t){t.stopPropagation(),t.preventDefault();const s=this.modalService.create({nzTitle:"Th\xeam nh\xf3m flash sale",nzContent:C.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y",nzOkText:"L\u01b0u",nzOkType:"primary",nzOnOk:()=>new Promise(e=>{const i=s.getContentComponent();i.onSave.pipe((0,F.q)(1)).subscribe(o=>{200===o.code?(this.iComMessageService.showAlertMessageDone("T\u1ea1o nh\xf3m flash sale th\xe0nh c\xf4ng."),e(!0),this.loadPage(1)):(this.iComMessageService.showAlertMessageError(o?.error?.error_message||"T\u1ea1o nh\xf3m flash sale th\u1ea5t b\u1ea1i."),e(!1),s.updateConfig({nzOkLoading:!1}))}),i.handlerSave()}),nzOkLoading:!1})}onPageChange(t){this.loadPage(t,this.pagination.limit)}onPageSizeChange(t){this.loadPage(1,t)}showEditModal(t){const s=this.modalService.create({nzTitle:"S\u1eeda nh\xf3m flash sale",nzContent:C.E,nzViewContainerRef:this.viewContainerRef,nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"\u0110\u1ed3ng \xfd",nzOkType:"primary",nzData:{title:"S\u1eeda nh\xf3m flash sale",data:t},nzOnOk:()=>new Promise(e=>{const i=s.getContentComponent();i.onSave.subscribe(o=>{200===o.code?(this.iComMessageService.showAlertMessageDone("S\u1eeda nh\xf3m flash sale th\xe0nh c\xf4ng."),e(!0),this.loadPage(1)):(this.iComMessageService.showAlertMessageError(o?.error?.error_message||"S\u1eeda nh\xf3m flash sale th\u1ea5t b\u1ea1i."),e(!1),s.updateConfig({nzOkLoading:!1}))}),i.handlerSave()}),nzOkLoading:!1})}showDeleteConfirm(t){var s=this;const e=this.modalService.confirm({nzTitle:"X\xf3a nh\xf3m flash sale",nzContent:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a nh\xf3m ${t.name}?`,nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"\u0110\u1ed3ng \xfd",nzOkLoading:!1,nzOkType:"primary",nzOnOk:(i=(0,g.Z)(function*(){e.updateConfig({nzOkLoading:!0});try{yield(0,S.n)(s.iComLibsServicesProjectFlashSaleService.deleteGroup({_id:t._id})),s.loadPage(1),s.iComMessageService.showAlertMessageDone("X\xf3a nh\xf3m flash sale th\xe0nh c\xf4ng.")}catch(o){console.log(o),s.iComMessageService.showAlertMessageError(o?.error?.error_message||"X\xf3a nh\xf3m  flash sale th\u1ea5t b\u1ea1i.")}finally{e.updateConfig({nzOkLoading:!1}),e.destroy()}}),function(){return i.apply(this,arguments)})});var i}static#n=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275cmp=n.Xpm({type:l,selectors:[["icom-libs-product-group"]],standalone:!0,features:[n.jDz],decls:36,vars:21,consts:[["nz-button","","nzType","link","routerLink","/your-path",1,"text-primary-500","hover:text-primary-600",3,"click"],["nz-icon","","nzType","arrow-left"],[1,"flex","w-full","h-full","flex-col"],["nz-form","",1,"!p-4","bg-white","border","rounded-md",3,"formGroup","keydown.enter"],[1,"w-full"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-col","",1,"search-area","flex","items-center"],["nz-button","",1,"!flex","!items-center",3,"nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],[1,"w-full","h-full","mt-4","overflow-hidden"],["nzShowSizeChanger","",1,"h-100",3,"nzScroll","nzData","nzLoading","nzTotal","nzPageSize","nzNoResult","nzPageIndex","nzFrontPagination","nzPageSizeOptions","nzFooter","nzPageIndexChange","nzPageSizeChange"],["editableTable","","sectionTable",""],["nzWidth","100px",1,"text-xs","font-semibold"],[1,"text-xs","font-semibold"],[4,"ngFor","ngForOf"],["footerTemplate",""],[1,"text-xs","!p-3"],[1,"name-container"],["nz-button","","nz-button","","nz-dropdown","",3,"nzType","nzShape","nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],[1,"footer-content"]],template:function(s,e){if(1&s&&(n.TgZ(0,"a",0),n.NdJ("click",function(o){return e.handlerBackFlashSale(o)}),n._UZ(1,"i",1),n._uU(2," Nh\xf3m flash sale\n"),n.qZA(),n.TgZ(3,"div",2)(4,"form",3),n.NdJ("keydown.enter",function(o){return o.preventDefault()}),n.TgZ(5,"div",4),n._UZ(6,"formly-form",5),n.qZA(),n.TgZ(7,"div",6)(8,"div",7)(9,"button",8),n.NdJ("click",function(o){return e.showAddModal(o)}),n._UZ(10,"span",9),n._uU(11," Th\xeam nh\xf3m flash sale "),n.qZA()(),n.TgZ(12,"div",10)(13,"button",11),n.NdJ("click",function(o){return e.handlerSearch(o)}),n._UZ(14,"i",12),n._uU(15," L\u1ecdc "),n.qZA()()()(),n.TgZ(16,"div",13)(17,"nz-table",14,15),n.NdJ("nzPageIndexChange",function(o){return e.onPageChange(o)})("nzPageSizeChange",function(o){return e.onPageSizeChange(o)}),n.TgZ(20,"thead")(21,"tr")(22,"th",16),n._uU(23,"STT"),n.qZA(),n.TgZ(24,"th",17),n._uU(25,"T\xean"),n.qZA(),n.TgZ(26,"th",17),n._uU(27,"Th\u1eddi gian t\u1ea1o"),n.qZA(),n.TgZ(28,"th",17),n._uU(29,"Ng\u01b0\u1eddi t\u1ea1o"),n.qZA(),n.TgZ(30,"th",17),n._uU(31,"H\xe0nh \u0111\u1ed9ng"),n.qZA()()(),n.TgZ(32,"tbody"),n.YNc(33,D,22,10,"tr",18),n.qZA()()()(),n.YNc(34,_,2,1,"ng-template",null,19,n.W1O)),2&s){const i=n.MAs(35);n.xp6(4),n.Q6J("formGroup",e.form),n.xp6(2),n.Q6J("model",e.model)("fields",e.fields)("options",e.options)("form",e.form),n.xp6(3),n.Q6J("nzType","primary"),n.xp6(4),n.Q6J("nzType","primary"),n.xp6(4),n.Q6J("nzScroll",n.DdM(19,E))("nzData",e.rows)("nzData",e.rows)("nzLoading",e.loading)("nzTotal",null==e.pagination?null:e.pagination.total_rows)("nzPageSize",10)("nzNoResult","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u.")("nzPageIndex",null==e.pagination?null:e.pagination.page)("nzFrontPagination",!1)("nzPageSizeOptions",n.DdM(20,U))("nzFooter",i),n.xp6(16),n.Q6J("ngForOf",e.rows)}},dependencies:[x._t,r.HQ,r.N8,r.Uo,r._C,r.Om,r.p0,r.$Z,p.uU,p.ax,Z.u,d.UX,d._Y,d.JL,d.sg,f.X0,f.T7,z.sL,z.ix,L.w,O.dQ,T.PV,T.Ls,m.b1,y.wO,y.u9,m.cm,m.RR,m.wA,v.Qp,A.o7],encapsulation:2,changeDetection:0})}return l})()}}]);