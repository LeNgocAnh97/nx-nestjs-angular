"use strict";(self.webpackChunkapps_flash_sale=self.webpackChunkapps_flash_sale||[]).push([[5891],{5891:(Ve,Y,r)=>{r.r(Y),r.d(Y,{IcomLibsProductAddEditComponent:()=>R,IcomLibsProductListComponent:()=>je});var P=r(5861),e=r(5879),p=r(95),G=r(1659),E=r(5545),F=r(3802),v=r(2840),d=r(7398),B=r(7921),C=r(3997),H=r(6328),b=r(708),K=r(9717),h=r(6814),y=r(6990),Q=r(3599),_=r(3304),j=r(855),V=r(1958),z=r(2920);function re(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"button",6),e.NdJ("click",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handlerSave(i))}),e._uU(2," Submit "),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handlerCancel(i))}),e._uU(4,"Cancel"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzType","primary")("nzLoading",t.isLoading)}}function le(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.toggleDisabled())}),e._uU(2," Edit "),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzType","primary")("nzLoading",t.isLoading)}}function de(n,l){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,re,5,2,"div",4),e.YNc(2,le,3,2,"div",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.options&&null!=t.options.formState&&t.options.formState.disabled)),e.xp6(1),e.Q6J("ngIf",null==t.options||null==t.options.formState?null:t.options.formState.disabled)}}let R=(()=>{class n{constructor(){this.form=new p.cw({}),this.options={formState:{disabled:!0}},this.fields=[],this.icomSave=new e.vpe,this.productService=(0,e.f3M)(G.k),this.iComMessageService=(0,e.f3M)(K.Q),this.destroyRef=(0,e.f3M)(e.ktI),this.changeDetectorRef=(0,e.f3M)(e.sBO),this.model={}}ngOnInit(){this.fields=((n,l)=>[{key:"name",type:"input",props:{label:"Name",placeholder:"Enter Name",type:"string",required:!0},expressions:{"props.disabled":"formState.disabled"}},{key:"gen_code_type",type:"select-custom",className:"w-[500px]",props:{label:"Gen Code Type",placeholder:"Select Gen Code Type",viewValue:"name",labelProp:"name",valueProp:"code",required:!0,options:n.getOptionType("PRODUCT_GENCODE_TYPE").pipe((0,d.U)(t=>t?.data))},expressions:{"props.disabled":"formState.disabled"}},{key:"code",type:"input",className:"basis-1/2",props:{label:"Code",placeholder:"Enter Code",type:"string",required:!0},expressions:{"props.disabled":t=>"GENCODE_TYPE_FROM_3RD_PARTY"===t.model?.gen_code_type||l.disabled}},{key:"unlimit",defaultValue:!0,type:"checkbox",props:{label:"Unlimit"},expressions:{"props.disabled":t=>"GENCODE_TYPE_PRE_GENERATED"===t.model?.gen_code_type||l.disabled},hooks:{onChanges:t=>{const o=t.parent.get("gen_code_type").formControl;o&&o.valueChanges.pipe((0,B.O)(o.value),(0,C.x)(),(0,d.U)(i=>"GENCODE_TYPE_AUTO_ONE_BY_ONE"===i||"GENCODE_TYPE_FROM_3RD_PARTY"===i?(t.props.disabled=!1,void(t.model.unlimit=!0)):(t.props.disabled=!0,void(t.model.unlimit=!1)))).subscribe()}}},{key:"belong_to_merchant",type:"checkbox",props:{label:"Select Merchant"},expressions:{"props.disabled":"formState.disabled"}},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"type",type:"select-custom",className:"basis-1/2",expressions:{"props.disabled":"formState.disabled"},props:{label:"Type",placeholder:"Select Type",viewValue:"name",labelProp:"name",required:!0,valueProp:"code",options:n.getOptionType("PRODUCT_TYPE").pipe((0,d.U)(t=>t?.data))}},{key:"status",type:"select-custom",className:"basis-1/2 ml-4",expressions:{"props.disabled":"formState.disabled"},props:{label:"Status",viewValue:"name",labelProp:"name",search:!0,placeholder:"Select Status",valueProp:"int_value",required:!0,options:n.getOptionType("PRODUCT_STATUS").pipe((0,d.U)(t=>t?.data))}}]},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"start_time",className:"w-[300px]",type:"date",props:{required:!0,label:"Start Time",ShowTime:!0,format:"dd-MM-yyyy HH:mm"},expressions:{"props.disabled":"formState.disabled"}},{key:"end_time",className:"w-[300px]",type:"date",props:{label:"End Time",ShowTime:!0,format:"dd-MM-yyyy HH:mm"},expressions:{"props.disabled":"formState.disabled"}}]},{className:"section-label",template:'<hr class="my-4"/>'},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"category_ids",type:"select-custom",className:"basis-1/2",props:{label:"Category",placeholder:"Select Category",viewValue:"name",labelProp:"name",valueProp:"id",multiple:!0,options:n.getCategoryForSelect().pipe((0,d.U)(t=>t?.data?.items))},expressions:{"props.disabled":"formState.disabled"}},{key:"group_ids",type:"select-custom",className:"basis-1/2 ml-4",props:{label:"Group",placeholder:"Select Group",viewValue:"name",multiple:!0,labelProp:"name",valueProp:"id",required:!0,options:n.getGroupForSelect().pipe((0,d.U)(t=>t?.data?.items))},expressions:{"props.disabled":"formState.disabled"}}]},{fieldGroupClassName:"flex row items-center",key:"",fieldGroup:[{key:"catalog_ids",type:"select-custom",className:"basis-1/2",props:{label:"Catalog",placeholder:"Select Catalog",viewValue:"name",labelProp:"name",valueProp:"id",options:n.getCatalogForSelect().pipe((0,d.U)(t=>t?.data?.items))},expressions:{"props.disabled":"formState.disabled"}},{key:"catalog_show_order",type:"input",defaultValue:0,className:"basis-1/2 ml-4",props:{label:"Catalog show order",placeholder:"Enter Catalog show order",type:"number",min:0,required:!0},expressions:{"props.disabled":"formState.disabled"}},{key:"show_order",type:"input",defaultValue:0,className:"basis-1/2 ml-4",props:{label:"Order",placeholder:"Enter Order",type:"number",min:0,required:!0},expressions:{"props.disabled":"formState.disabled"}}]},{key:"import_mode",type:"select-custom",props:{label:"Import mode",placeholder:"Select Import mode*",viewValue:"name",labelProp:"name",valueProp:"code",required:!0,options:n.getOptionType("IMPORT_MODE").pipe((0,d.U)(t=>t?.data))},expressions:{"props.disabled":"formState.disabled"}},{className:"section-label",template:'<hr class="my-4"/>'},{key:"organization_id",type:"select-custom",props:{label:"Organization",placeholder:"Select Organization*",required:!0,valueProp:"id",labelProp:"name",options:n.getOrg().pipe((0,d.U)(t=>t?.data))},expressions:{"props.disabled":"formState.disabled"}},{key:"brand_id",type:"select-custom",props:{label:"Brand",options:[],required:!0,placeholder:"Select Brand",valueProp:"id",labelProp:"name"},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:t=>{const o=t.parent.get("organization_id").formControl;t.props.options=o.valueChanges.pipe((0,B.O)(o.value),(0,C.x)(),(0,H.b)(i=>i?n.getBrandByOrg(i).pipe((0,d.U)(s=>(s?.data?.find(a=>t?.model?.brand_id===a.id)||(t.formControl.setValue(null),t.parent.get("store_ids").formControl?.setValue(null)),s?.data||[]))):(t.parent.get("store_ids").formControl?.setValue(null),t.parent.get("brand_id").formControl?.setValue(null),[])))}}},{key:"store_ids",type:"select-custom",props:{label:"Store",placeholder:"Select Store",viewValue:"name",labelProp:"name",valueProp:"id",multiple:!0},expressions:{"props.disabled":"formState.disabled"},hooks:{onInit:t=>{const o=t.parent.get("brand_id").formControl;t.props.options=o.valueChanges.pipe((0,B.O)(o.value),(0,C.x)(),(0,H.b)(i=>i?n.getStoreByBrand(i).pipe((0,d.U)(s=>(s?.data?.find(a=>t?.model?.store_ids?.includes(a.id))||t.formControl.setValue([]),s?.data||[]))):(t.formControl.setValue([]),[])))}}}])(this.productService,this.options.formState),this.model&&this.model.catalog_ids&&this.model.catalog_ids?.length&&(this.model.catalog_ids=this.model.catalog_ids[0]),this.modelOrigin=(0,y.cloneDeep)(this.model),this.isAdd&&this.toggleDisabled(),setTimeout(()=>{this.form.controls.gen_code_type?.valueChanges.pipe((0,C.x)(),(0,d.U)(()=>{this.form.reset(this.model)})).subscribe()},200)}handlerSave(t,o){var i=this;return(0,P.Z)(function*(){if(t?.stopPropagation(),t?.preventDefault(),i.form.valid)try{if(i.model?.start_time&&i.model?.end_time&&_(i.model?.end_time).isBefore(i.model?.start_time))return void i.iComMessageService.showAlertMessageError("Th\u1eddi gian k\u1ebft th\xfac  kh\xf4ng \u0111\u01b0\u1ee3c nh\u1ecf h\u01a1n th\u1eddi gian b\u1eaft \u0111\u1ea7u.");i.form.markAsTouched(),i.form.submitted=!0,o&&o.isLoading&&o.isLoading();const s=(0,y.cloneDeep)(i.model);if(s&&s.catalog_ids&&(s.catalog_ids=[s.catalog_ids]),i.isLoading=!0,i.isAdd){const a=yield(0,b.n)(i.productService.createProduct(s));o&&o.success&&o.success(a?.data?.id),i.iComMessageService.showAlertMessageDone("Create product success")}else yield(0,b.n)(i.productService.updateProduct(i.model?.id||0,s)),o&&o.success&&o.success(),i.iComMessageService.showAlertMessageDone("Edit product success"),i.modelOrigin=(0,y.cloneDeep)(i.model),i.toggleDisabled()}catch(s){o&&o.loadDone&&o.loadDone(),i.iComMessageService.showAlertMessageError(s?.error?.error_message||"Create product fail")}finally{o&&o.loadDone&&o.loadDone(),i.isLoading=!1,i.changeDetectorRef.detectChanges()}else Object.keys(i.form.controls).forEach(s=>{i.form.controls[s].touched=!0})})()}toggleDisabled(){this.options.formState.disabled=!this.options.formState.disabled}handlerCancel(t){t.stopPropagation(),this.toggleDisabled(),this.model=(0,y.cloneDeep)(this.modelOrigin)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["icom-libs-product-add_edit"]],inputs:{model:"model",isAdd:"isAdd"},outputs:{icomSave:"icomSave"},standalone:!0,features:[e.jDz],decls:3,vars:7,consts:[["nz-form","",1,"pb-4","bg-white","border","rounded-md","h-full","flex","flex-col",3,"formGroup","nzLayout"],[1,"overflow-auto","px-4","pt-4",3,"model","fields","options","form"],["nz-row","","class","p-4 border",4,"ngIf"],["nz-row","",1,"p-4","border"],["nz-col","","class","search-area flex",4,"ngIf"],["nz-col","",1,"search-area","flex"],["nz-button","",3,"nzType","nzLoading","click"],["nz-button","",1,"ml-4",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"form",0),e._UZ(1,"formly-form",1),e.YNc(2,de,3,2,"div",2),e.qZA()),2&o&&(e.Q6J("formGroup",i.form)("nzLayout","vertical"),e.xp6(1),e.Q6J("model",i.model)("fields",i.fields)("options",i.options)("form",i.form),e.xp6(1),e.Q6J("ngIf",i.model&&i.model.id))},dependencies:[F.u,p.UX,p._Y,p.JL,p.sg,E.X0,E.T7,v.sL,v.ix,j.w,V.dQ,h.O5,Q.U5,z.t3,z.SK,Q.Lr],encapsulation:2,changeDetection:0})}return n})();var D=r(9364),ce=r(2572),W=r(8083),S=r(2595),w=r(1221),pe=r(2787),me=r(9691),ge=r(1567);class he{constructor(){this.size=0,this.totalElements=0,this.totalPages=0,this.pageNumber=0}}var L=r(7582),I=r(8645),T=r(2438),X=r(2181),x=r(8180),g=r(9773),A=r(874),J=r(7754),f=r(3651),q=r(8484),u=r(6028),ue=r(4194),$=r(9087),Ae=r(6593),M=r(6236),Z=r(9388),fe=r(6192);const Ee=["imgRef"],ve=["imagePreviewWrapper"];function Ce(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.KtG(s.onClick())}),e._UZ(1,"span",11),e.qZA()}if(2&n){const t=l.$implicit,o=e.oxw();e.ekj("ant-image-preview-operations-operation-disabled",o.zoomOutDisabled&&"zoomOut"===t.type),e.xp6(1),e.Q6J("nzType",t.icon)}}function be(n,l){if(1&n&&e._UZ(0,"img",13,14),2&n){const t=e.oxw().$implicit,o=e.oxw();e.Udp("width",t.width)("height",t.height)("transform",o.previewImageTransform),e.uIk("src",o.sanitizerResourceUrl(t.src),e.LSH)("srcset",t.srcset)("alt",t.alt)}}function ye(n,l){if(1&n&&(e.ynx(0),e.YNc(1,be,2,9,"img",12),e.BQk()),2&n){const t=l.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.index===t)}}function Qe(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.NdJ("click",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwitchLeft(i))}),e._UZ(2,"span",16),e.qZA(),e.TgZ(3,"div",17),e.NdJ("click",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwitchRight(i))}),e._UZ(4,"span",18),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.ekj("ant-image-preview-switch-left-disabled",t.index<=0),e.xp6(2),e.ekj("ant-image-preview-switch-right-disabled",t.index>=t.images.length-1)}}const ze=["*"];class U{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}}class we{constructor(l,t,o){this.previewInstance=l,this.config=t,this.overlayRef=o,this.destroy$=new I.x,o.keydownEvents().pipe((0,X.h)(i=>this.config.nzKeyboard&&(i.keyCode===u.hY||i.keyCode===u.oh||i.keyCode===u.SV)&&!(0,u.Vb)(i))).subscribe(i=>{i.preventDefault(),i.keyCode===u.hY&&this.close(),i.keyCode===u.oh&&this.prev(),i.keyCode===u.SV&&this.next()}),o.detachments().subscribe(()=>{this.overlayRef.dispose()}),l.containerClick.pipe((0,x.q)(1),(0,g.R)(this.destroy$)).subscribe(()=>{this.close()}),l.closeClick.pipe((0,x.q)(1),(0,g.R)(this.destroy$)).subscribe(()=>{this.close()}),l.animationStateChanged.pipe((0,X.h)(i=>"done"===i.phaseName&&"leave"===i.toState),(0,x.q)(1)).subscribe(()=>{this.dispose()})}switchTo(l){this.previewInstance.switchTo(l)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.previewInstance.startLeaveAnimation()}dispose(){this.destroy$.next(),this.overlayRef.dispose()}}function te(n,l,t){const o=n+l,i=(l-t)/2;let s=null;return l>t?(n>0&&(s=i),n<0&&o<t&&(s=-i)):(n<0||o>t)&&(s=n<0?i:-i),s}const k={x:0,y:0};let ke=(()=>{class n{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){const t=this.nzConfigService.getConfigForComponent("image")||{};return this.config.nzMaskClosable??t.nzMaskClosable??!0}constructor(t,o,i,s,a,c,m,se){this.ngZone=t,this.host=o,this.cdr=i,this.nzConfigService=s,this.config=a,this.overlayRef=c,this.destroy$=m,this.sanitizer=se,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationState="enter",this.animationStateChanged=new e.vpe,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"}],this.zoomOutDisabled=!1,this.position={...k},this.containerClick=new e.vpe,this.closeClick=new e.vpe,this.zoom=this.config.nzZoom??1,this.rotate=this.config.nzRotate??0,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,T.R)(this.host.nativeElement,"click").pipe((0,g.R)(this.destroy$)).subscribe(t=>{t.target===t.currentTarget&&this.maskClosable&&this.containerClick.observers.length&&this.ngZone.run(()=>this.containerClick.emit())}),(0,T.R)(this.imagePreviewWrapper.nativeElement,"mousedown").pipe((0,g.R)(this.destroy$)).subscribe(()=>{this.isDragging=!0})})}setImages(t){this.images=t,this.cdr.markForCheck()}switchTo(t){this.index=t,this.cdr.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.closeClick.emit()}onZoomIn(){this.zoom+=1,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position={...k}}onZoomOut(){this.zoom>1&&(this.zoom-=1,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position={...k})}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(t){t.preventDefault(),t.stopPropagation(),this.prev()}onSwitchRight(t){t.preventDefault(),t.stopPropagation(),this.next()}onAnimationStart(t){"enter"===t.toState?this.setEnterAnimationClass():"leave"===t.toState&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(t)}onAnimationDone(t){"enter"===t.toState?this.setEnterAnimationClass():"leave"===t.toState&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(t)}startLeaveAnimation(){this.animationState="leave",this.cdr.markForCheck()}onDragReleased(){this.isDragging=!1;const t=this.imageRef.nativeElement.offsetWidth*this.zoom,o=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:i,top:s}=function Te(n){const l=n.getBoundingClientRect(),t=document.documentElement;return{left:l.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:l.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}(this.imageRef.nativeElement),{width:a,height:c}=function Ne(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}(),m=this.rotate%180!=0,O=function Ie(n){let l={};return n.width<=n.clientWidth&&n.height<=n.clientHeight&&(l={x:0,y:0}),(n.width>n.clientWidth||n.height>n.clientHeight)&&(l={x:te(n.left,n.width,n.clientWidth),y:te(n.top,n.height,n.clientHeight)}),l}({width:m?o:t,height:m?t:o,left:i,top:s,clientWidth:a,clientHeight:c});((0,J.DX)(O.x)||(0,J.DX)(O.y))&&(this.position={...this.position,...O})}sanitizerResourceUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}setEnterAnimationClass(){if(this.animationDisabled)return;const t=this.overlayRef.backdropElement;t&&(t.classList.add("ant-fade-enter"),t.classList.add("ant-fade-enter-active"))}setLeaveAnimationClass(){if(this.animationDisabled)return;const t=this.overlayRef.backdropElement;t&&(t.classList.add("ant-fade-leave"),t.classList.add("ant-fade-leave-active"))}reset(){this.zoom=1,this.rotate=0,this.position={...k}}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(A.jY),e.Y36(U),e.Y36(f.Iu),e.Y36($.kn),e.Y36(Ae.H7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["nz-image-preview"]],viewQuery:function(o,i){if(1&o&&(e.Gf(Ee,5),e.Gf(ve,7)),2&o){let s;e.iGM(s=e.CRH())&&(i.imageRef=s.first),e.iGM(s=e.CRH())&&(i.imagePreviewWrapper=s.first)}},hostAttrs:["tabindex","-1","role","document",1,"ant-image-preview-wrap"],hostVars:6,hostBindings:function(o,i){1&o&&e.WFA("@fadeMotion.start",function(a){return i.onAnimationStart(a)})("@fadeMotion.done",function(a){return i.onAnimationDone(a)}),2&o&&(e.d8E("@.disabled",i.config.nzNoAnimation)("@fadeMotion",i.animationState),e.Udp("z-index",i.config.nzZIndex),e.ekj("ant-image-preview-moving",i.isDragging))},exportAs:["nzImagePreview"],features:[e._Bn([$.kn])],decls:11,vars:6,consts:[[1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],[1,"ant-image-preview-operations"],["class","ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled","click",4,"ngFor","ngForOf"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragFreeDragPosition","cdkDragReleased"],["imagePreviewWrapper",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType"],["cdkDragHandle","","class","ant-image-preview-img",3,"width","height","transform",4,"ngIf"],["cdkDragHandle","",1,"ant-image-preview-img"],["imgRef",""],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"ul",4),e.YNc(5,Ce,2,3,"li",5),e.qZA(),e.TgZ(6,"div",6,7),e.NdJ("cdkDragReleased",function(){return i.onDragReleased()}),e.YNc(8,ye,2,1,"ng-container",8),e.qZA(),e.YNc(9,Qe,5,4,"ng-container",9),e.qZA()(),e._UZ(10,"div",1),e.qZA()),2&o&&(e.xp6(5),e.Q6J("ngForOf",i.operations),e.xp6(1),e.Udp("transform",i.previewImageWrapperTransform),e.Q6J("cdkDragFreeDragPosition",i.position),e.xp6(2),e.Q6J("ngForOf",i.images),e.xp6(1),e.Q6J("ngIf",i.images.length>1))},dependencies:[M.Zt,M.Bh,h.sg,h.O5,S.Ls],encapsulation:2,data:{animation:[ue.MC]},changeDetection:0})}return n})(),ie=(()=>{class n{constructor(t,o,i,s){this.overlay=t,this.injector=o,this.nzConfigService=i,this.directionality=s}preview(t,o){return this.display(t,o)}display(t,o){const i={...new U,...o??{}},s=this.createOverlay(i),a=this.attachPreviewComponent(s,i);a.setImages(t);const c=new we(a,i,s);return a.previewRef=c,c}attachPreviewComponent(t,o){const i=e.zs3.create({parent:this.injector,providers:[{provide:f.Iu,useValue:t},{provide:U,useValue:o}]}),s=new q.C5(ke,null,i);return t.attach(s).instance}createOverlay(t){const o=this.nzConfigService.getConfigForComponent("image")||{},i=new f.X_({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:t.nzCloseOnNavigation??o.nzCloseOnNavigation??!0,backdropClass:"ant-image-preview-mask",direction:t.nzDirection||o.nzDirection||this.directionality.value});return this.overlay.create(i)}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(f.aV),e.LFG(e.zs3),e.LFG(A.jY),e.LFG(Z.Is,8))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})(),Pe=(()=>{class n{constructor(){this.images=[]}addImage(t){this.images.push(t)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["nz-image-group"]],exportAs:["nzImageGroup"],ngContentSelectors:ze,decls:1,vars:0,template:function(o,i){1&o&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0})}return n})(),_e=(()=>{class n{get previewable(){return!this.nzDisablePreview&&"error"!==this.status}constructor(t,o,i,s,a,c,m){this.document=t,this.nzConfigService=o,this.elementRef=i,this.nzImageService=s,this.cdr=a,this.parentGroup=c,this.directionality=m,this._nzModuleName="image",this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.status="normal",this.backLoadDestroy$=new I.x,this.destroy$=new I.x}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe((0,g.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){const t=this.parentGroup.images.filter(a=>a.previewable),o=t.map(a=>({src:a.nzSrc,srcset:a.nzSrcset})),i=t.findIndex(a=>this===a);this.nzImageService.preview(o,{nzDirection:this.dir}).switchTo(i)}else this.nzImageService.preview([{src:this.nzSrc,srcset:this.nzSrcset}],{nzDirection:this.dir})}getElement(){return this.elementRef}ngOnChanges(t){const{nzSrc:o}=t;o&&(this.getElement().nativeElement.src=o.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new I.x,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),(0,T.R)(this.backLoadImage,"load").pipe((0,g.R)(this.backLoadDestroy$),(0,g.R)(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),(0,T.R)(this.backLoadImage,"error").pipe((0,g.R)(this.backLoadDestroy$),(0,g.R)(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(h.K0),e.Y36(A.jY),e.Y36(e.SBq),e.Y36(ie),e.Y36(e.sBO),e.Y36(Pe,8),e.Y36(Z.Is,8))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["img","nz-image",""]],hostBindings:function(o,i){1&o&&e.NdJ("click",function(){return i.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder"},exportAs:["nzImage"],features:[e.TTD]})}return(0,L.gn)([(0,J.yF)(),(0,A.oS)()],n.prototype,"nzDisablePreview",void 0),(0,L.gn)([(0,A.oS)()],n.prototype,"nzFallback",void 0),(0,L.gn)([(0,A.oS)()],n.prototype,"nzPlaceholder",void 0),n})(),Re=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({providers:[ie],imports:[Z.vT,f.U8,q.eL,M._t,h.ez,S.PV,fe.YS]})}return n})();var oe=r(6109),ne=r(8213);const De=["selectRef"],Le=["nameRef"],xe=["statusRef"],Je=["avatarRef"];function Me(n,l){1&n&&(e.ynx(0),e._UZ(1,"icom-libs-product-add_edit",23),e.BQk()),2&n&&(e.xp6(1),e.Q6J("isAdd",!0))}function Ze(n,l){1&n&&(e.TgZ(0,"span",29),e._uU(1,"Draft"),e.qZA())}function Ue(n,l){1&n&&(e.TgZ(0,"span",30),e._uU(1,"Submitted"),e.qZA())}function Oe(n,l){1&n&&(e.TgZ(0,"span",30),e._uU(1,"Approved"),e.qZA())}function Ye(n,l){1&n&&(e.TgZ(0,"span",31),e._uU(1,"Rejected"),e.qZA())}function Ge(n,l){if(1&n&&(e.TgZ(0,"div",24),e.ynx(1,25),e.YNc(2,Ze,2,0,"span",26),e.YNc(3,Ue,2,0,"span",27),e.YNc(4,Oe,2,0,"span",27),e.YNc(5,Ye,2,0,"span",28),e.BQk(),e.qZA()),2&n){const t=l.row;e.xp6(1),e.Q6J("ngSwitch",t.status),e.xp6(1),e.Q6J("ngSwitchCase","0"),e.xp6(1),e.Q6J("ngSwitchCase","1"),e.xp6(1),e.Q6J("ngSwitchCase","2"),e.xp6(1),e.Q6J("ngSwitchCase","3")}}function Fe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"button",32),e.NdJ("click",function(i){const a=e.CHM(t).row,c=e.oxw();return e.KtG(c.handlerViewDetail(i,a))}),e._uU(2," View Detail "),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("nzType","primary")("nzShape","round"))}function He(n,l){if(1&n&&(e.TgZ(0,"div",33),e._UZ(1,"img",34),e.qZA()),2&n){const t=l.row;e.xp6(1),e.Q6J("nzFallback","data:image/png;base64,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")("nzSrc",(null==t||null==t.medias?null:t.medias[0].url)||"data:image/png;base64,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")}}function Ke(n,l){if(1&n&&(e.TgZ(0,"div",33)(1,"span",35),e._UZ(2,"p",36),e.qZA()()),2&n){const t=l.row;e.xp6(1),e.Q6J("nzTooltipTitle",t.name),e.xp6(1),e.Q6J("nzEllipsisRows",3)("nzContent",t.name)}}let je=(()=>{class n{constructor(){this.form=new p.cw({}),this.model={},this.options={},this.productService=(0,e.f3M)(G.k),this.el=(0,e.f3M)(e.SBq),this.router=(0,e.f3M)(ge.F0),this.modalService=(0,e.f3M)(w.Sf),this.cdr=(0,e.f3M)(e.sBO),this.fields=[{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"name",type:"input",className:"basis-4/12",props:{label:"Name",placeholder:"Enter Name",type:"string"},expressions:{"props.":"formState.disabled"}},{key:"limit",type:"select-custom",defaultValue:15,props:{label:"Limit",classInclude:"w-[80px]",placeholder:"Select Limit",viewValue:"name",labelProp:"name",valueProp:"code",ignoreRemoveIcon:!0,options:[{code:15,name:15},{code:30,name:30},{code:50,name:50},{code:100,name:100}]}},{key:"sku",type:"input",className:"basis-4/12",props:{label:"Sku",placeholder:"Enter Sku",type:"string"},expressions:{hide:"!formState.hidden"}}]},{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"brand",type:"input",className:"basis-4/12",props:{label:"Brand Name",placeholder:"Enter Brand Name",type:"string"},expressions:{hide:"!formState.hidden"}},{key:"status",type:"select-custom",className:"basis-4/12 ",props:{label:"Status",viewValue:"name",labelProp:"name",placeholder:"Select Status",valueProp:"int_value",options:this.productService.getOptionType("PRODUCT_STATUS").pipe((0,d.U)(t=>t?.data))},expressions:{hide:"!formState.hidden"}},{key:"type",type:"select-custom",className:"basis-4/12 ",templateOptions:{label:"Type",placeholder:"Select Type",viewValue:"name",labelProp:"name",valueProp:"code",options:this.productService.getOptionType("PRODUCT_TYPE").pipe((0,d.U)(t=>t?.data))},expressions:{hide:"!formState.hidden"}}]},{fieldGroupClassName:"flex flex-col",className:"basis-1/2",fieldGroup:[{key:"gen_code_type",type:"select-custom",className:"basis-4/12 ",props:{label:"Gen Code Type",placeholder:"Select Gen Code Type",viewValue:"name",labelProp:"name",valueProp:"code",options:this.productService.getOptionType("PRODUCT_GENCODE_TYPE").pipe((0,d.U)(t=>t?.data))},expressions:{hide:"!formState.hidden"}}]}],this.rows=[],this.loadingIndicator=!0,this.ColumnMode=D.hq,this.headerHeight=50,this.rowHeight=100,this.pageLimit=10,this.IComMessageService=(0,e.f3M)(K.Q),this.pagination=new he,this.pagination.pageNumber=0,this.columns=[],this.model={},this.options={formState:{hidden:!1}}}ngOnInit(){var t=this;return(0,P.Z)(function*(){t.columns=[{prop:"",width:150,cellTemplate:t.selectRef,sortable:!1},{prop:"id",width:100,sortable:!1},{prop:"Media",sortable:!1,cellTemplate:t.avatarRef,width:100},{prop:"sku",width:215,sortable:!1},{prop:"name",width:400,sortable:!1,cellTemplate:t.nameRef},{prop:"quantity_available",width:200,sortable:!1,name:"Stock",pipe:t.pipeStock()},{prop:"brand",width:215,pipe:t.germanBooleanPipe(),sortable:!1,name:"Brand Name"},{prop:"type",width:200,sortable:!1},{prop:"start_time",width:200,sortable:!1,name:"Start Time",pipe:(0,ne.ZR)()},{prop:"end_time",width:200,sortable:!1,name:"End Time",pipe:(0,ne.ZR)()},{name:"Status",cellTemplate:t.statusRef,sortable:!1,width:100}],t.loadPage({offset:0}),(0,ce.a)([t.productService.getOptionType("PRODUCT_TYPE"),t.productService.getOptionType("PRODUCT_GENCODE_TYPE")]).subscribe(o=>{const[i,s]=o,a=t.columns.find(m=>"type"===m.prop);a&&(a.pipe=t.pipeParseStatus(i)),t.columns=[...t.columns];const c=t.columns.find(m=>"gen_code_type"===m.prop);c&&(c.pipe=t.pipeParseStatus(s)),t.columns=[...t.columns]})})()}pipeParseStatus(t){const o=t.data;return{transform:i=>o.find(a=>a.code===i).name}}handlerSearch(t){t.stopPropagation(),t.preventDefault(),this.loadPage({offset:0})}handlerReset(){this.form.reset(),this.loadPage({offset:0})}loadPage(t){var o=this;return(0,P.Z)(function*(){o.pagination.pageNumber=t.offset;try{o.loadingIndicator=!0;const s={...{...o.model},start_time:o.model.start_time?_(o.model.start_time).format("YYYY-MM-DD"):"",end_time:o.model.end_time?_(o.model.end_time).format("YYYY-MM-DD"):""},a=yield(0,b.n)(o.productService.searchProduct({...s,page:o.pagination.pageNumber+1,limit:o.model.limit||15}));if(a&&a.data&&a.data.items)return o.rows=a.data.items||[],void(o.pagination.totalElements=a.data.pagination.total_rows);o.rows=[],o.pagination.totalElements=a.data.pagination.total_rows}catch(i){console.log(i)}finally{o.loadingIndicator=!1,o.cdr.detectChanges()}})()}germanBooleanPipe(){return{transform:t=>t.name||"-"}}pipeStock(){return{transform:t=>null===t?"Kh\xf4ng gi\u1edbi h\u1ea1n":t}}showModal(t){t.stopPropagation(),t.preventDefault(),this.isVisible=!0}handleOk(){this.addEditComp.handlerSave(void 0,{success:o=>{this.isVisible=!1,this.router.navigate(["/product/detail",o])},isLoading:()=>{this.isOkLoading=!0},loadDone:()=>{this.isOkLoading=!1,this.loadPage({offset:0})}})}handleCancel(){this.isVisible=!1}handlerRemove(t,o){t.stopPropagation(),this.modalService.confirm({nzTitle:"Are you sure delete this product?",nzContent:`<b style="color: red;">${o.name}</b>`,nzOkText:"Delete",nzOkType:"primary",nzOkDanger:!0,nzMaskClosable:!1,nzClosable:!1,nzOnOk:this.processDeleteProduct.bind(this,o),nzCancelText:"Cancel"},"error")}handlerViewDetail(t,o){t.stopPropagation(),this.router.navigate(["/product/detail",o.id])}processDeleteProduct(t){return(0,b.n)(this.productService.deleteProduct(t.id||"")).then(()=>{this.IComMessageService.showAlertMessageDone("Delete inventory success"),this.loadPage({offset:0})}).catch(o=>{this.IComMessageService.showAlertMessageError(o?.error?.error_message)})}handlerToggleCollapse(){this.options.formState.hidden=!this.options.formState.hidden}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["icom-libs-product-list"]],viewQuery:function(o,i){if(1&o&&(e.Gf(De,7),e.Gf(Le,7),e.Gf(xe,7),e.Gf(Je,7),e.Gf(R,5)),2&o){let s;e.iGM(s=e.CRH())&&(i.selectRef=s.first),e.iGM(s=e.CRH())&&(i.nameRef=s.first),e.iGM(s=e.CRH())&&(i.statusRef=s.first),e.iGM(s=e.CRH())&&(i.avatarRef=s.first),e.iGM(s=e.CRH())&&(i.addEditComp=s.first)}},standalone:!0,features:[e.jDz],decls:31,vars:28,consts:[[1,"flex","w-full","h-full","flex-col"],["nz-form","",1,"!p-4","bg-white","border","rounded-md",3,"formGroup","keydown.enter"],[1,"w-full","items-center"],[3,"model","fields","options","form"],["nz-row","",1,"flex","justify-between"],[1,""],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nzTitle","Add New Product",3,"nzWidth","nzOkLoading","nzClosable","nzMaskClosable","nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-col","",1,"search-area","flex","items-center"],["nz-button","",1,"!flex","!items-center",3,"nzType","click"],["nz-icon","","nzType","search","nzTheme","outline"],["nz-button","",1,"ml-4","!flex","!items-center",3,"click"],["nz-icon","","nzTheme","outline","nzType","close-circle"],[1,"ml-4","items-center","flex",3,"click"],["nz-icon","",1,"ml-2",3,"nzType"],[1,"w-full","h-full","mt-4","overflow-hidden"],[1,"material","expandable","striped","w-full","h-full",3,"rows","columns","headerHeight","columnMode","footerHeight","virtualization","rowHeight","scrollbarH","loadingIndicator","count","offset","externalPaging","selectAllRowsOnPage","limit","page"],["statusRef",""],["selectRef",""],["avatarRef",""],["nameRef",""],[3,"isAdd"],[1,"name-container"],[3,"ngSwitch"],["nz-typography","",4,"ngSwitchCase"],["nz-typography","","nzType","success",4,"ngSwitchCase"],["nz-typography","","nzType","danger",4,"ngSwitchCase"],["nz-typography",""],["nz-typography","","nzType","success"],["nz-typography","","nzType","danger"],["nz-button","","nz-button","",3,"nzType","nzShape","click"],[1,"name-container","cursor-pointer"],["nz-image","","width","200px","width","80","height","80","alt","",3,"nzFallback","nzSrc"],["nz-tooltip","",3,"nzTooltipTitle"],["nz-typography","","nzEllipsis","",3,"nzEllipsisRows","nzContent"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("keydown.enter",function(a){return i.handlerSearch(a)}),e.TgZ(2,"div",2),e._UZ(3,"formly-form",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"button",6),e.NdJ("click",function(a){return i.showModal(a)}),e._UZ(7,"span",7),e._uU(8," Add "),e.qZA(),e.TgZ(9,"nz-modal",8),e.NdJ("nzVisibleChange",function(a){return i.isVisible=a})("nzOnCancel",function(){return i.handleCancel()})("nzOnOk",function(){return i.handleOk()}),e.YNc(10,Me,2,1,"ng-container",9),e.qZA()(),e.TgZ(11,"div",10)(12,"button",11),e.NdJ("click",function(a){return i.handlerSearch(a)}),e._UZ(13,"i",12),e._uU(14," Search "),e.qZA(),e.TgZ(15,"button",13),e.NdJ("click",function(){return i.handlerReset()}),e._UZ(16,"i",14),e._uU(17," Reset "),e.qZA(),e.TgZ(18,"a",15),e.NdJ("click",function(){return i.handlerToggleCollapse()}),e._uU(19),e._UZ(20,"span",16),e.qZA()()()(),e.TgZ(21,"div",17)(22,"ngx-datatable",18),e.NdJ("page",function(a){return i.loadPage(a)}),e.qZA()()(),e.YNc(23,Ge,6,5,"ng-template",null,19,e.W1O),e.YNc(25,Fe,3,2,"ng-template",null,20,e.W1O),e.YNc(27,He,2,2,"ng-template",null,21,e.W1O),e.YNc(29,Ke,3,3,"ng-template",null,22,e.W1O)),2&o&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("model",i.model)("fields",i.fields)("options",i.options)("form",i.form),e.xp6(3),e.Q6J("nzType","primary"),e.xp6(3),e.Q6J("nzWidth",960)("nzOkLoading",i.isOkLoading)("nzClosable",!1)("nzMaskClosable",!1)("nzVisible",i.isVisible),e.xp6(3),e.Q6J("nzType","primary"),e.xp6(7),e.hij(" ",i.options.formState.hidden?"Collapse":"Expand"," "),e.xp6(1),e.Q6J("nzType",i.options.formState.hidden?"up":"down"),e.xp6(2),e.Q6J("rows",i.rows)("columns",i.columns)("headerHeight",i.headerHeight)("columnMode",i.ColumnMode.force)("footerHeight",50)("virtualization",!1)("rowHeight","auto")("scrollbarH",!0)("loadingIndicator",i.loadingIndicator)("count",i.pagination.totalElements)("offset",i.pagination.pageNumber)("externalPaging",!0)("selectAllRowsOnPage",!0)("limit",(null==i.model?null:i.model.limit)||15))},dependencies:[D.xD,D.nE,F.u,p.UX,p._Y,p.JL,p.sg,E.X0,E.T7,v.sL,v.ix,j.w,V.dQ,Q.U5,z.t3,z.SK,Q.Lr,h.RF,h.n9,W.ZJ,W.ZU,S.PV,S.Ls,w.Qp,w.du,w.Hf,R,me.LV,p.u5,pe.b1,Re,_e,oe.cg,oe.SY],encapsulation:2,changeDetection:0})}return n})()}}]);